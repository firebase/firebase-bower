!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).firebase)}(this,function(Te){"use strict";try{!function(){function e(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=e(Te),n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var d=function(){return(d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function g(e,a,s,c){return new(s=s||Promise)(function(r,t){function n(e){try{i(c.next(e))}catch(e){t(e)}}function o(e){try{i(c.throw(e))}catch(e){t(e)}}function i(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,o)}i((c=c.apply(e,a||[])).next())})}function v(r,n){var o,i,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;s;)try{if(o=1,i&&(a=2&t[0]?i.return:t[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,t[1])).done)return a;switch(i=0,(t=a?[2&t[0],a.value]:t)[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,i=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],i=0}finally{o=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function s(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}function a(e){try{return y.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var y={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],o=0;o<e.length;o+=3){var i=e[o],a=o+1<e.length,s=a?e[o+1]:0,c=o+2<e.length,u=c?e[o+2]:0,l=(15&s)<<2|u>>6,u=63&u;c||(u=64,a||(l=64)),n.push(r[i>>2],r[(3&i)<<4|s>>4],r[l],r[u])}return n.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t[r++]=o:(o<2048?t[r++]=o>>6|192:(55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128):t[r++]=o>>12|224,t[r++]=o>>6&63|128),t[r++]=63&o|128)}return t}(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],r=0,n=0;r<e.length;){var o,i,a,s=e[r++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(i=e[r++],t[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(o=((7&s)<<18|(63&(i=e[r++]))<<12|(63&(a=e[r++]))<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(o>>10)),t[n++]=String.fromCharCode(56320+(1023&o))):(i=e[r++],a=e[r++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],o=0;o<e.length;){var i=r[e.charAt(o++)],a=o<e.length?r[e.charAt(o)]:0,s=++o<e.length?r[e.charAt(o)]:64,c=++o<e.length?r[e.charAt(o)]:64;if(++o,null==i||null==a||null==s||null==c)throw Error();n.push(i<<2|a>>4),64!==s&&(n.push(a<<4&240|s>>2),64!==c&&n.push(s<<6&192|c))}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},c=(r.prototype.wrapCallback=function(r){var n=this;return function(e,t){e?n.reject(e):n.resolve(t),"function"==typeof r&&(n.promise.catch(function(){}),1===r.length?r(e):r(e,t))}},r);function r(){var r=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){r.resolve=e,r.reject=t})}function o(){return"indexedDB"in self&&null!=indexedDB}var i,u="FirebaseError",l=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(h,i=Error),h);function h(e,t,r){t=i.call(this,t)||this;return t.code=e,t.customData=r,t.name=u,Object.setPrototypeOf(t,h.prototype),Error.captureStackTrace&&Error.captureStackTrace(t,p.prototype.create),t}var p=(f.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n,o=t[0]||{},i=this.service+"/"+e,e=this.errors[e],e=e?(n=o,e.replace(b,function(e,t){var r=n[t];return null!=r?String(r):"<"+t+"?>"})):"Error",e=this.serviceName+": "+e+" ("+i+").";return new l(i,e,o)},f);function f(e,t,r){this.service=e,this.serviceName=t,this.errors=r}var b=/\{\$([^}]+)}/g;function E(e){return JSON.parse(e)}function _(e){return"object"==typeof(e=function(e){var t={},r={},n={},o="";try{var i=e.split("."),t=E(a(i[0])||""),r=E(a(i[1])||""),o=i[2],n=r.d||{};delete r.d}catch(e){}return{header:t,claims:r,data:n,signature:o}}(e).claims)&&e.hasOwnProperty("iat")?e.iat:null}var w,k=(m.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},m.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},m.prototype.setServiceProps=function(e){return this.serviceProps=e,this},m.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},m);function m(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}(R=w=w||{})[R.DEBUG=0]="DEBUG",R[R.VERBOSE=1]="VERBOSE",R[R.INFO=2]="INFO",R[R.WARN=3]="WARN",R[R.ERROR=4]="ERROR",R[R.SILENT=5]="SILENT";function T(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var o=(new Date).toISOString(),i=S[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[i].apply(console,s(["["+o+"]  "+e.name+":"],r))}}var A={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},C=w.INFO,S=((P={})[w.DEBUG]="log",P[w.VERBOSE]="log",P[w.INFO]="info",P[w.WARN]="warn",P[w.ERROR]="error",P),R=(Object.defineProperty(O.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in w))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),O.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?A[e]:e},Object.defineProperty(O.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(O.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),O.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,w.DEBUG],e)),this._logHandler.apply(this,s([this,w.DEBUG],e))},O.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,w.VERBOSE],e)),this._logHandler.apply(this,s([this,w.VERBOSE],e))},O.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,w.INFO],e)),this._logHandler.apply(this,s([this,w.INFO],e))},O.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,w.WARN],e)),this._logHandler.apply(this,s([this,w.WARN],e))},O.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,s([this,w.ERROR],e)),this._logHandler.apply(this,s([this,w.ERROR],e))},O);function O(e){this.name=e,this._logLevel=C,this._logHandler=T,this._userLogHandler=null}var P=((P={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",P["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",P["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",P["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",P["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",P["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",P["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",P["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",P["recaptcha-error"]="ReCAPTCHA error.",P),I=new p("appCheck","AppCheck",P),x=new Map,N={activated:!1,tokenObservers:[]},L={enabled:!1};function M(e){return x.get(e)||N}function B(e,t){x.set(e,t)}var D="https://content-firebaseappcheck.googleapis.com/v1beta",H="exchangeDebugToken",W={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},j=(F.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},F.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},F.prototype.isRunning=function(){return!!this.pending},F.prototype.process=function(n){return g(this,void 0,void 0,function(){var r;return v(this,function(e){switch(e.label){case 0:this.stop(),e.label=1;case 1:return e.trys.push([1,6,,7]),this.pending=new c,[4,(t=this.getNextRun(n),new Promise(function(e){setTimeout(e,t)}))];case 2:return e.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return e.sent(),this.pending=new c,[4,this.operation()];case 4:return e.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return e.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return r=e.sent(),this.retryPolicy(r)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var t})})},F.prototype.getNextRun=function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},F);function F(e,t,r,n,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=n,this.upperBound=o,this.pending=null,o<(this.nextErrorWaitInterval=n))throw new Error("Proactive refresh lower bound greater than upper bound!")}function V(){return self.grecaptcha}function U(e){if(!M(e).activated)throw I.create("use-before-activation",{appName:e.name})}function K(e,a){var s=e.url,c=e.body;return g(this,void 0,void 0,function(){var t,r,n,o,i;return v(this,function(e){switch(e.label){case 0:r={"Content-Type":"application/json"},(t=a.getImmediate({optional:!0}))&&(r["X-Firebase-Client"]=t.getPlatformInfoString()),r={method:"POST",body:JSON.stringify(c),headers:r},e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(s,r)];case 2:return i=e.sent(),[3,4];case 3:throw r=e.sent(),I.create("fetch-network-error",{originalErrorMessage:r.message});case 4:if(200!==i.status)throw I.create("fetch-status-error",{httpStatus:i.status});e.label=5;case 5:return e.trys.push([5,7,,8]),[4,i.json()];case 6:return n=e.sent(),[3,8];case 7:throw o=e.sent(),I.create("fetch-parse-error",{originalErrorMessage:o.message});case 8:if(!(i=n.ttl.match(/^([\d.]+)(s)$/))||!i[2]||isNaN(Number(i[1])))throw I.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+n.ttl});return o=1e3*Number(i[1]),i=Date.now(),[2,{token:n.attestationToken,expireTimeMillis:i+o,issuedAtTimeMillis:i}]}})})}function G(e,t){var r=e.options,n=r.projectId,e=r.appId,r=r.apiKey;return{url:D+"/projects/"+n+"/apps/"+e+":"+H+"?key="+r,body:{debug_token:t}}}var $="firebase-app-check-database",z=1,X="firebase-app-check-store",J="debug-token",Y=null;function q(){return Y=Y||new Promise(function(t,r){try{var e=indexedDB.open($,z);e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){r(I.create("storage-open",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))},e.onupgradeneeded=function(e){var t=e.target.result;0===e.oldVersion&&t.createObjectStore(X,{keyPath:"compositeKey"})}}catch(e){r(I.create("storage-open",{originalErrorMessage:e.message}))}})}function Z(r,i){return g(this,void 0,void 0,function(){var n,t,o;return v(this,function(e){switch(e.label){case 0:return[4,q()];case 1:return t=e.sent(),n=t.transaction(X,"readwrite"),t=n.objectStore(X),o=t.put({compositeKey:r,value:i}),[2,new Promise(function(t,r){o.onsuccess=function(e){t()},n.onerror=function(e){r(I.create("storage-set",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))}})]}})})}function Q(r){return g(this,void 0,void 0,function(){var n,t,o;return v(this,function(e){switch(e.label){case 0:return[4,q()];case 1:return t=e.sent(),n=t.transaction(X,"readonly"),t=n.objectStore(X),o=t.get(r),[2,new Promise(function(t,r){o.onsuccess=function(e){e=e.target.result;t(e?e.value:void 0)},n.onerror=function(e){r(I.create("storage-get",{originalErrorMessage:null===(e=e.target.error)||void 0===e?void 0:e.message}))}})]}})})}function ee(e){return e.options.appId+"-"+e.name}var te=new R("@firebase/app-check");function re(n){return g(this,void 0,void 0,function(){var t,r;return v(this,function(e){switch(e.label){case 0:if(!o())return[3,5];t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Q(ee(n))];case 2:return t=e.sent(),[3,4];case 3:return r=e.sent(),te.warn("Failed to read token from indexeddb. Error: "+r),[3,4];case 4:return[2,t];case 5:return[2,void 0]}})})}function ne(e,t){return o()?Z(ee(e),t).catch(function(e){te.warn("Failed to write token to indexeddb. Error: "+e)}):Promise.resolve()}function oe(){return g(this,void 0,void 0,function(){var t;return v(this,function(e){switch(e.label){case 0:t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Q(J)];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return t?[2,t]:(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}),Z(J,t).catch(function(e){return te.warn("Failed to persist debug token to indexeddb. Error: "+e)}),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work"),[2,t])}})})}var ie={error:"UNKNOWN_ERROR"};function ae(h,p,f){return void 0===f&&(f=!1),g(this,void 0,void 0,function(){var r,n,o,i,a,s,c,u,l;return v(this,function(e){switch(e.label){case 0:return U(h),r=M(h),n=r.token,o=void 0,n?[3,2]:[4,r.cachedTokenPromise];case 1:(i=e.sent())&&le(i)&&(n=i,B(h,d(d({},r),{token:n})),ue(h,{token:n.token})),e.label=2;case 2:return!f&&n&&le(n)?[2,{token:n.token}]:L.enabled?(a=K,s=G,c=[h],[4,function(){return g(this,void 0,void 0,function(){var t;return v(this,function(e){if((t=L).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}()]):[3,6];case 3:return[4,a.apply(void 0,[s.apply(void 0,c.concat([e.sent()])),p])];case 4:return u=e.sent(),[4,ne(h,u)];case 5:return e.sent(),B(h,d(d({},r),{token:u})),[2,{token:u.token}];case 6:return e.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return n=e.sent(),[3,9];case 8:return u=e.sent(),te.error(u),o=u,[3,9];case 9:return n?[3,10]:(t=o,l={token:function(e){return y.encodeString(JSON.stringify(e),!1)}(ie),error:t},[3,12]);case 10:return l={token:n.token},B(h,d(d({},r),{token:n})),[4,ne(h,n)];case 11:e.sent(),e.label=12;case 12:return ue(h,l),[2,l]}var t})})}function se(e,t,r,n,o){var i,a=M(e),r={next:n,error:o,type:r},r=d(d({},a),{tokenObservers:s(s([],a.tokenObservers),[r])});r.tokenRefresher||(t=function(r,n){var e=this;return new j(function(){return g(e,void 0,void 0,function(){var t;return v(this,function(e){switch(e.label){case 0:return M(r).token?[3,2]:[4,ae(r,n)];case 1:return t=e.sent(),[3,4];case 2:return[4,ae(r,n,!0)];case 3:t=e.sent(),e.label=4;case 4:if(t.error)throw t.error;return[2]}})})},function(){return!0},function(){var e=M(r);if(e.token){var t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,e=e.token.expireTimeMillis-3e5,t=Math.min(t,e);return Math.max(0,t-Date.now())}return 0},W.RETRIAL_MIN_WAIT,W.RETRIAL_MAX_WAIT)}(e,t),r.tokenRefresher=t),!r.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&r.tokenRefresher.start(),a.token&&le(a.token)?(i=a.token,Promise.resolve().then(function(){return n({token:i.token})}).catch(function(){})):null==a.token&&a.cachedTokenPromise.then(function(e){e&&le(e)&&n({token:e.token})}).catch(function(){}),B(e,r)}function ce(e,t){var r=M(e),n=r.tokenObservers.filter(function(e){return e.next!==t});0===n.length&&r.tokenRefresher&&r.tokenRefresher.isRunning()&&r.tokenRefresher.stop(),B(e,d(d({},r),{tokenObservers:n}))}function ue(e,t){for(var r=0,n=M(e).tokenObservers;r<n.length;r++){var o=n[r];try{"EXTERNAL"===o.type&&null!=t.error?o.error(t.error):o.next(t)}catch(e){}}}function le(e){return 0<e.expireTimeMillis-Date.now()}var he="https://www.google.com/recaptcha/api.js";function pe(t,r){var e=M(t),n=new c;B(t,d(d({},e),{reCAPTCHAState:{initialized:n}}));var o="fire_app_check_"+t.name,i=document.createElement("div");i.id=o,i.style.display="none",document.body.appendChild(i);var a=V();return a?a.ready(function(){fe(t,r,a,o),n.resolve(a)}):(e=function(){var e=V();if(!e)throw new Error("no recaptcha");e.ready(function(){fe(t,r,e,o),n.resolve(e)})},(i=document.createElement("script")).src=""+he,i.onload=e,document.head.appendChild(i)),n.promise}function fe(e,t,r,n){n=r.render(n,{sitekey:t,size:"invisible"}),t=M(e);B(e,d(d({},t),{reCAPTCHAState:d(d({},t.reCAPTCHAState),{widgetId:n})}))}var de=(ge.prototype.getToken=function(){return g(this,void 0,void 0,function(){var o;return v(this,function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw I.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,function(o){return g(this,void 0,void 0,function(){var n;return v(this,function(e){switch(e.label){case 0:return U(o),[4,M(o).reCAPTCHAState.initialized.promise];case 1:return n=e.sent(),[2,new Promise(function(e,t){var r=M(o).reCAPTCHAState;n.ready(function(){e(n.execute(r.widgetId,{action:"fire_app_check"}))})})]}})})}(this._app)];case 2:return o=e.sent(),[3,4];case 3:throw e.sent(),I.create("recaptcha-error");case 4:return[2,K((t=this._app,r=(n=t.options).projectId,t=n.appId,n=n.apiKey,{url:D+"/projects/"+r+"/apps/"+t+":exchangeRecaptchaToken?key="+n,body:{recaptcha_token:o}}),this._platformLoggerProvider)]}var t,r,n})})},ge.prototype.initialize=function(e,t){this._app=e,this._platformLoggerProvider=t,pe(e,this._siteKey).catch(function(){})},ge);function ge(e){this._siteKey=e}var ve=(ye.prototype.getToken=function(){return g(this,void 0,void 0,function(){var t,r;return v(this,function(e){switch(e.label){case 0:if(!this._app)throw I.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=e.sent(),r=_(t.token),r=null!==r&&r<Date.now()&&0<r?1e3*r:Date.now(),[2,d(d({},t),{issuedAtTimeMillis:r})]}})})},ye.prototype.initialize=function(e){this._app=e},ye);function ye(e){this._customProviderOptions=e}function be(s,c){return{app:s,activate:function(e,t){return function(t,e,r,n){var o=M(t);if(o.activated)throw I.create("already-activated",{appName:t.name});(o=d(d({},o),{activated:!0})).cachedTokenPromise=re(t).then(function(e){return e&&le(e)&&B(t,d(d({},M(t)),{token:e})),e}),o.provider="string"==typeof e?new de(e):e instanceof de||e instanceof ve?e:new ve({getToken:e.getToken}),o.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,B(t,o),o.provider.initialize(t,r)}(s,e,c,t)},setTokenAutoRefreshEnabled:function(e){return r=e,(e=M(t=s)).tokenRefresher&&(!0===r?e.tokenRefresher.start():e.tokenRefresher.stop()),void B(t,d(d({},e),{isTokenAutoRefreshEnabled:r}));var t,r},getToken:function(e){return function(r,n,o){return g(this,void 0,void 0,function(){var t;return v(this,function(e){switch(e.label){case 0:return[4,ae(r,n,o)];case 1:if((t=e.sent()).error)throw t.error;return[2,{token:t.token}]}})})}(s,c,e)},onTokenChanged:function(e,t,r){return n=s,o=c,i=t,a=function(){},t=function(){},a=null!=(e=e).next?e.next.bind(e):e,null!=e.error?t=e.error.bind(e):i&&(t=i),se(n,o,"EXTERNAL",a,t),function(){return ce(n,a)};var n,o,i,a},INTERNAL:{delete:function(){for(var e=0,t=M(s).tokenObservers;e<t.length;e++){var r=t[e];ce(s,r.next)}return Promise.resolve()}}}}var Ee,_e,we,ke,me="app-check-internal";(Ee=t.default).INTERNAL.registerComponent(new k("appCheck",function(e){return be(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))},"PUBLIC").setServiceProps({ReCaptchaV3Provider:de,CustomProvider:ve}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,r){e.getProvider(me).initialize()})),Ee.INTERNAL.registerComponent(new k(me,function(e){var t,r,n=e.getProvider("app").getImmediate(),e=e.getProvider("platform-logger");return t=n,r=e,{getToken:function(e){return ae(t,r,e)},addTokenListener:function(e){return se(t,r,"INTERNAL",e)},removeTokenListener:function(e){return ce(t,e)}}},"PUBLIC").setInstantiationMode("EXPLICIT")),Ee.registerVersion("@firebase/app-check","0.3.2"),"string"!=typeof(ke=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}()).FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==ke.FIREBASE_APPCHECK_DEBUG_TOKEN||((_e=L).enabled=!0,we=new c,_e.token=we,"string"==typeof ke.FIREBASE_APPCHECK_DEBUG_TOKEN?we.resolve(ke.FIREBASE_APPCHECK_DEBUG_TOKEN):we.resolve(oe()))}.apply(this,arguments)}catch(e){throw console.error(e),new Error("Cannot instantiate firebase-app-check.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-app-check.js.map
