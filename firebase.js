!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";!function(t){var e,n,s,r,i,o,a,u,c,h;function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return t="string"!=typeof t?String(t):t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=y(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function I(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,(i="ArrayBuffer"in t)&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t},h=[301,302,303,307,308],I.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=_,t.Response=I,t.fetch=function(n,o){return new Promise(function(r,t){var e=new _(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new I(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&s&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}function y(t){try{return!!t()}catch(t){return!0}}function v(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function r(t){return d.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return w(s(t))}function g(t){return"object"==typeof t?null!==t:"function"==typeof t}function i(t,e){if(!g(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!g(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!g(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function c(t,e){return I.call(t,e)}function n(t){return T?E.createElement(t):{}}function m(t){if(!g(t))throw TypeError(String(t)+" is not an object");return t}function h(e,n){try{P(b,e,n)}catch(t){b[e]=n}return n}var o=function(t){return t&&t.Math==Math&&t},b=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),f=!y(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),a={}.propertyIsEnumerable,l=Object.getOwnPropertyDescriptor,p={f:l&&!a.call({1:2},1)?function(t){t=l(this,t);return!!t&&t.enumerable}:a},d={}.toString,_="".split,w=y(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?_.call(t,""):Object(t)}:Object,I={}.hasOwnProperty,E=b.document,T=g(E)&&g(E.createElement),S=!f&&!y(function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}),C=Object.getOwnPropertyDescriptor,A={f:f?C:function(t,e){if(t=u(t),e=i(e,!0),S)try{return C(t,e)}catch(t){}if(c(t,e))return v(!p.f.call(t,e),t[e])}},N=Object.defineProperty,k={f:f?N:function(t,e,n){if(m(t),e=i(e,!0),m(n),S)try{return N(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},P=f?function(t,e,n){return k.f(t,e,v(1,n))}:function(t,e,n){return t[e]=n,t},O="__core-js_shared__",R=b[O]||h(O,{}),x=Function.toString;"function"!=typeof R.inspectSource&&(R.inspectSource=function(t){return x.call(t)});function D(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+Y).toString(36)}var L,M,F,j,U,V,q,B,H=R.inspectSource,z=b.WeakMap,G="function"==typeof z&&/native code/.test(H(z)),W=!1,K=e(function(t){(t.exports=function(t,e){return R[t]||(R[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),Q=0,Y=Math.random(),X=K("keys"),J=function(t){return X[t]||(X[t]=D(t))},$={},Z=b.WeakMap;q=G?(L=R.state||(R.state=new Z),M=L.get,F=L.has,j=L.set,U=function(t,e){return e.facade=t,j.call(L,t,e),e},V=function(t){return M.call(L,t)||{}},function(t){return F.call(L,t)}):(B=J("state"),$[B]=!0,U=function(t,e){return e.facade=t,P(t,B,e),e},V=function(t){return c(t,B)?t[B]:{}},function(t){return c(t,B)});function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(pt[t])||tt(b[t]):pt[t]&&pt[t][e]||b[t]&&b[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?vt:dt)(t)}function rt(t){return 0<t?yt(nt(t),9007199254740991):0}function it(t,e){var n,r=u(t),i=0,o=[];for(n in r)!c($,n)&&c(r,n)&&o.push(n);for(;e.length>i;)c(r,n=e[i++])&&(~_t(o,n)||o.push(n));return o}function ot(t,e){for(var n=St(e),r=k.f,i=A.f,o=0;o<n.length;o++){var s=n[o];c(t,s)||r(t,s,i(e,s))}}function st(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?b:a?b[o]||h(o,{}):(b[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Rt(u,n))&&i.value:u[n],!Ot(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ot(r,i)}(t.sham||i&&i.sham)&&P(r,"sham",!0),ft(u,n,r,t)}}function at(t){return Object(s(t))}function ut(){}function ct(t){return"<script>"+t+"</"+qt+">"}var ht,lt={set:U,get:V,has:q,enforce:function(t){return q(t)?V(t):U(t,{})},getterFor:function(n){return function(t){var e;if(!g(t)||(e=V(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},ft=e(function(t){var e=lt.get,a=lt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||c(n,"name")||P(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==b?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:P(t,e,n)):o?t[e]=n:h(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||H(this)})}),pt=b,dt=Math.ceil,vt=Math.floor,yt=Math.min,gt=Math.max,mt=Math.min,bt=function(a){return function(t,e,n){var r,i=u(t),o=rt(i.length),s=function(t,e){t=nt(t);return t<0?gt(t+e,0):mt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},_t={includes:bt(!0),indexOf:bt(!1)}.indexOf,wt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],It=wt.concat("length","prototype"),Et={f:Object.getOwnPropertyNames||function(t){return it(t,It)}},Tt={f:Object.getOwnPropertySymbols},St=et("Reflect","ownKeys")||function(t){var e=Et.f(m(t)),n=Tt.f;return n?e.concat(n(t)):e},Ct=/#|\.prototype\./,o=function(t,e){t=Nt[At(t)];return t==Pt||t!=kt&&("function"==typeof e?y(e):!!e)},At=o.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},Nt=o.data={},kt=o.NATIVE="N",Pt=o.POLYFILL="P",Ot=o,Rt=A.f,t=!y(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),xt=J("IE_PROTO"),Dt=Object.prototype,Lt=t?Object.getPrototypeOf:function(t){return t=at(t),c(t,xt)?t[xt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Dt:null},Mt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return m(t),function(t){if(!g(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ft=Object.keys||function(t){return it(t,wt)},jt=f?Object.defineProperties:function(t,e){m(t);for(var n,r=Ft(e),i=r.length,o=0;o<i;)k.f(t,n=r[o++],e[n]);return t},Ut=et("document","documentElement"),Vt="prototype",qt="script",Bt=J("IE_PROTO"),Ht=function(){try{ht=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;Ht=ht?function(t){t.write(ct("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ht):((t=n("iframe")).style.display="none",Ut.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ct("document.F=Object")),t.close(),t.F);for(var e=wt.length;e--;)delete Ht[Vt][wt[e]];return Ht()};$[Bt]=!0;function zt(t){return c(Xt,t)||(Yt&&c(Jt,t)?Xt[t]=Jt[t]:Xt[t]=$t("Symbol."+t)),Xt[t]}function Gt(t){return void 0!==t&&(Zt.Array===t||ee[te]===t)}function Wt(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Kt(r,i,t){if(Wt(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var Qt=Object.create||function(t,e){var n;return null!==t?(ut[Vt]=m(t),n=new ut,ut[Vt]=null,n[Bt]=t):n=Ht(),void 0===e?n:jt(n,e)},Yt=!!Object.getOwnPropertySymbols&&!y(function(){return!String(Symbol())}),a=Yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Xt=K("wks"),Jt=b.Symbol,$t=a?Jt:Jt&&Jt.withoutSetter||D,Zt={},te=zt("iterator"),ee=Array.prototype,O={};O[zt("toStringTag")]="z";function ne(t){if(null!=t)return t[ce]||t["@@iterator"]||Zt[ue(t)]}function re(t){var e=t.return;return void 0!==e&&m(e.call(t)).value}function ie(t,e){this.stopped=t,this.result=e}function oe(t,e,n){function r(t){return o&&re(o),new ie(!0,t)}function i(t){return f?(m(t),d?v(t[0],t[1],r):v(t[0],t[1])):d?v(t,r):v(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=Kt(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=ne(t)))throw TypeError("Target is not iterable");if(Gt(p)){for(s=0,a=rt(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof ie)return u;return new ie(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw re(o),t}if("object"==typeof u&&u&&u instanceof ie)return u}return new ie(!1)}var z="[object z]"===String(O),se=zt("toStringTag"),ae="Arguments"==r(function(){return arguments}()),ue=z?r:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),se))?t:ae?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t},ce=zt("iterator"),he=function(t,e){var n=this;if(!(n instanceof he))return new he(t,e);Mt&&(n=Mt(new Error(void 0),Lt(n))),void 0!==e&&P(n,"message",String(e));e=[];return oe(t,e.push,{that:e}),P(n,"errors",e),n};he.prototype=Qt(Error.prototype,{constructor:v(5,he),message:v(5,""),name:v(5,"AggregateError")}),st({global:!0},{AggregateError:he});G=z?{}.toString:function(){return"[object "+ue(this)+"]"};z||ft(Object.prototype,"toString",G,{unsafe:!0});function le(t,e,n){for(var r in e)ft(t,r,e[r],n);return t}function fe(t,e,n){t&&!c(t=n?t:t.prototype,ge)&&ye(t,ge,{configurable:!0,value:e})}function pe(t){var e=et(t),t=k.f;f&&e&&!e[me]&&t(e,me,{configurable:!0,get:function(){return this}})}function de(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var ve=b.Promise,ye=k.f,ge=zt("toStringTag"),me=zt("species"),be=zt("iterator"),_e=!1;try{var we=0,Ie={next:function(){return{done:!!we++}},return:function(){_e=!0}};Ie[be]=function(){return this},Array.from(Ie,function(){throw 2})}catch(js){}function Ee(t,e){if(!e&&!_e)return!1;var n=!1;try{var r={};r[be]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Te(t,e){var n;return void 0===(t=m(t).constructor)||null==(n=m(t)[Ne])?e:Wt(n)}function Se(t){var e;De.hasOwnProperty(t)&&(e=De[t],delete De[t],e())}function Ce(t){return function(){Se(t)}}var Ae,Ne=zt("species"),Z=et("navigator","userAgent")||"",bt=/(iphone|ipod|ipad).*applewebkit/i.test(Z),ke="process"==r(b.process),Pe=b.location,o=b.setImmediate,t=b.clearImmediate,Oe=b.process,O=b.MessageChannel,Re=b.Dispatch,xe=0,De={},Le="onreadystatechange",z=function(t){Se(t.data)},G=function(t){b.postMessage(t+"",Pe.protocol+"//"+Pe.host)};o&&t||(o=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return De[++xe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ae(xe),xe},t=function(t){delete De[t]},ke?Ae=function(t){Oe.nextTick(Ce(t))}:Re&&Re.now?Ae=function(t){Re.now(Ce(t))}:O&&!bt?(ze=(O=new O).port2,O.port1.onmessage=z,Ae=Kt(ze.postMessage,ze,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts&&Pe&&"file:"!==Pe.protocol&&!y(G)?(Ae=G,b.addEventListener("message",z,!1)):Ae=Le in n("script")?function(t){Ut.appendChild(n("script"))[Le]=function(){Ut.removeChild(this),Se(t)}}:function(t){setTimeout(Ce(t),0)});var Me,Fe,je,Ue,Ve,qe,Be,He,ze={set:o,clear:t},G=A.f,Ge=ze.set,z=b.MutationObserver||b.WebKitMutationObserver,o=b.document,We=b.process,t=b.Promise,G=G(b,"queueMicrotask"),G=G&&G.value;G||(Me=function(){var t,e;for(ke&&(t=We.domain)&&t.exit();Fe;){e=Fe.fn,Fe=Fe.next;try{e()}catch(t){throw Fe?Ue():je=void 0,t}}je=void 0,t&&t.enter()},Ue=!bt&&!ke&&z&&o?(Ve=!0,qe=o.createTextNode(""),new z(Me).observe(qe,{characterData:!0}),function(){qe.data=Ve=!Ve}):t&&t.resolve?(Be=t.resolve(void 0),He=Be.then,function(){He.call(Be,Me)}):ke?function(){We.nextTick(Me)}:function(){Ge.call(b,Me)});function Ke(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Wt(n),this.reject=Wt(r)}function Qe(t,e){return m(t),g(e)&&e.constructor===t?e:((0,(t=Je.f(t)).resolve)(e),t.promise)}function Ye(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Xe=G||function(t){t={fn:t,next:void 0};je&&(je.next=t),Fe||(Fe=t,Ue()),je=t},Je={f:function(t){return new Ke(t)}},G=b.process,G=G&&G.versions,G=G&&G.v8;G?On=(Sn=G.split("."))[0]+Sn[1]:Z&&(!(Sn=Z.match(/Edge\/(\d+)/))||74<=Sn[1])&&(Sn=Z.match(/Chrome\/(\d+)/))&&(On=Sn[1]);function $e(t){var e;return!(!g(t)||"function"!=typeof(e=t.then))&&e}function Ze(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,Xe(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&Nn(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(yn("Promise-chain cycle")):(i=$e(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Cn(l)}))}function tn(t,e,n){var r,i;In?((r=gn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},!En&&(i=b["on"+t])?i(r):t===Tn&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function en(e,n,r){return function(t){e(n,t,r)}}function nn(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=2,Ze(t,!0))}var rn,on,sn,an,un=On&&+On,cn=ze.set,hn=zt("species"),ln="Promise",fn=lt.get,pn=lt.set,dn=lt.getterFor(ln),vn=ve,yn=b.TypeError,gn=b.document,mn=b.process,bn=et("fetch"),_n=Je.f,wn=_n,In=!!(gn&&gn.createEvent&&b.dispatchEvent),En="function"==typeof PromiseRejectionEvent,Tn="unhandledrejection",Z=Ot(ln,function(){if(!(H(vn)!==String(vn))){if(66===un)return!0;if(!ke&&!En)return!0}if(51<=un&&/native code/.test(vn))return!1;function t(t){t(function(){},function(){})}var e=vn.resolve(1);return(e.constructor={})[hn]=t,!(e.then(function(){})instanceof t)}),Sn=Z||!Ee(function(t){vn.all(t).catch(function(){})}),Cn=function(i){cn.call(b,function(){var t,e=i.facade,n=i.value,r=An(i);if(r&&(t=Ye(function(){ke?mn.emit("unhandledRejection",n,e):tn(Tn,e,n)}),i.rejection=ke||An(i)?2:1,t.error))throw t.value})},An=function(t){return 1!==t.rejection&&!t.parent},Nn=function(e){cn.call(b,function(){var t=e.facade;ke?mn.emit("rejectionHandled",t):tn("rejectionhandled",t,e.value)})},kn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw yn("Promise can't be resolved itself");var r=$e(t);r?Xe(function(){var e={done:!1};try{r.call(t,en(kn,e,n),en(nn,e,n))}catch(t){nn(e,t,n)}}):(n.value=t,n.state=1,Ze(n,!1))}catch(t){nn({done:!1},t,n)}}};Z&&(vn=function(t){de(this,vn,ln),Wt(t),rn.call(this);var e=fn(this);try{t(en(kn,e),en(nn,e))}catch(t){nn(e,t)}},(rn=function(t){pn(this,{type:ln,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=le(vn.prototype,{then:function(t,e){var n=dn(this),r=_n(Te(this,vn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=ke?mn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ze(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),on=function(){var t=new rn,e=fn(t);this.promise=t,this.resolve=en(kn,e),this.reject=en(nn,e)},Je.f=_n=function(t){return t===vn||t===sn?new on:wn(t)},"function"==typeof ve&&(an=ve.prototype.then,ft(ve.prototype,"then",function(t,e){var n=this;return new vn(function(t,e){an.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof bn&&st({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Qe(vn,bn.apply(b,arguments))}}))),st({global:!0,wrap:!0,forced:Z},{Promise:vn}),fe(vn,ln,!1),pe(ln),sn=et(ln),st({target:ln,stat:!0,forced:Z},{reject:function(t){var e=_n(this);return e.reject.call(void 0,t),e.promise}}),st({target:ln,stat:!0,forced:Z},{resolve:function(t){return Qe(this,t)}}),st({target:ln,stat:!0,forced:Sn},{all:function(t){var a=this,e=_n(a),u=e.resolve,c=e.reject,n=Ye(function(){var r=Wt(a.resolve),i=[],o=0,s=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=_n(n),i=r.reject,e=Ye(function(){var e=Wt(n.resolve);oe(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),st({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Je.f(a),u=e.resolve,n=e.reject,r=Ye(function(){var r=Wt(a.resolve),i=[],o=0,s=1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Pn="No one promise resolved";st({target:"Promise",stat:!0},{any:function(t){var u=this,e=Je.f(u),c=e.resolve,h=e.reject,n=Ye(function(){var r=Wt(u.resolve),i=[],o=0,s=1,a=!1;oe(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(et("AggregateError"))(i,Pn)))})}),--s||h(new(et("AggregateError"))(i,Pn))});return n.error&&h(n.value),e.promise}});var On=!!ve&&y(function(){ve.prototype.finally.call({then:function(){}},function(){})});st({target:"Promise",proto:!0,real:!0,forced:On},{finally:function(e){var n=Te(this,et("Promise")),t="function"==typeof e;return this.then(t?function(t){return Qe(n,e()).then(function(){return t})}:e,t?function(t){return Qe(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof ve||ve.prototype.finally||ft(ve.prototype,"finally",et("Promise").prototype.finally);ze=function(o){return function(t,e){var n,r=String(s(t)),i=nt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},Z={codeAt:ze(!1),charAt:ze(!0)},Sn=zt("iterator"),On=!1;[].keys&&("next"in(Qn=[].keys())?(lr=Lt(Lt(Qn)))!==Object.prototype&&(dr=lr):On=!0),c(dr=null==dr?{}:dr,Sn)||P(dr,Sn,function(){return this});function Rn(){return this}function xn(){return this}function Dn(t,e,n,r,i,o,s){d=e,d+=" Iterator",(c=n).prototype=Qt(Ln,{next:v(1,r)}),fe(c,d,!1),Zt[d]=Rn;var a,u,r=function(t){if(t===i&&p)return p;if(!Fn&&t in l)return l[t];switch(t){case"keys":case Un:case Vn:return function(){return new n(this,t)}}return function(){return new n(this)}},c=e+" Iterator",h=!1,l=t.prototype,f=l[jn]||l["@@iterator"]||i&&l[i],p=!Fn&&f||r(i),d="Array"==e&&l.entries||f;if(d&&(t=Lt(d.call(new t)),Mn!==Object.prototype&&t.next&&(Lt(t)!==Mn&&(Mt?Mt(t,Mn):"function"!=typeof t[jn]&&P(t,jn,xn)),fe(t,c,!0))),i==Un&&f&&f.name!==Un&&(h=!0,p=function(){return f.call(this)}),l[jn]!==p&&P(l,jn,p),Zt[e]=p,i)if(a={values:r(Un),keys:o?p:r("keys"),entries:r(Vn)},s)for(u in a)!Fn&&!h&&u in l||ft(l,u,a[u]);else st({target:e,proto:!0,forced:Fn||h},a);return a}var ze={IteratorPrototype:dr,BUGGY_SAFARI_ITERATORS:On},Ln=ze.IteratorPrototype,Mn=ze.IteratorPrototype,Fn=ze.BUGGY_SAFARI_ITERATORS,jn=zt("iterator"),Un="values",Vn="entries",qn=Z.charAt,Bn="String Iterator",Hn=lt.set,zn=lt.getterFor(Bn);Dn(String,"String",function(t){Hn(this,{type:Bn,string:String(t),index:0})},function(){var t=zn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=qn(e,n),t.index+=n.length,{value:n,done:!1})});var Gn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Wn=zt("unscopables"),Kn=Array.prototype;null==Kn[Wn]&&k.f(Kn,Wn,{configurable:!0,value:Qt(null)});var Qn=function(t){Kn[Wn][t]=!0},Yn="Array Iterator",Xn=lt.set,Jn=lt.getterFor(Yn),$n=Dn(Array,"Array",function(t,e){Xn(this,{type:Yn,target:u(t),index:0,kind:e})},function(){var t=Jn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Zt.Arguments=Zt.Array,Qn("keys"),Qn("values"),Qn("entries");var Zn,tr=zt("iterator"),er=zt("toStringTag"),nr=$n.values;for(Zn in Gn){var rr=b[Zn],ir=rr&&rr.prototype;if(ir){if(ir[tr]!==nr)try{P(ir,tr,nr)}catch(js){ir[tr]=nr}if(ir[er]||P(ir,er,Zn),Gn[Zn])for(var or in $n)if(ir[or]!==$n[or])try{P(ir,or,$n[or])}catch(js){ir[or]=$n[or]}}}pt.Promise;st({target:"Promise",stat:!0},{try:function(t){var e=Je.f(this),t=Ye(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function sr(t,e){var n;return new(void 0===(n=ur(t)&&("function"==typeof(n=t.constructor)&&(n===Array||ur(n.prototype))||g(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===e?0:e)}function ar(t){throw t}var ur=Array.isArray||function(t){return"Array"==r(t)},cr=zt("species"),hr=[].push,lr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=7==f,b=5==f||g;return function(t,e,n,r){for(var i,o,s=at(t),a=w(s),u=Kt(e,n,3),c=rt(a.length),h=0,r=r||sr,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:hr.call(l,i)}else switch(f){case 4:return!1;case 7:hr.call(l,i)}return g?-1:v||y?y:l}},Sn={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6),filterOut:lr(7)},fr=Object.defineProperty,pr={},dr=function(t,e){if(c(pr,t))return pr[t];var n=[][t],r=!!c(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=c(e,0)?e[0]:ar,o=c(e,1)?e[1]:void 0;return pr[t]=!!n&&!y(function(){if(r&&!f)return 1;var t={length:-1};r?fr(t,1,{enumerable:!0,get:ar}):t[1]=1,n.call(t,i,o)})},vr=Sn.find,On="find",yr=!0,ze=dr(On);On in[]&&Array(1)[On](function(){yr=!1}),st({target:"Array",proto:!0,forced:yr||!ze},{find:function(t){return vr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(On);var gr=Function.call,Z=function(t,e,n){return Kt(gr,b[t].prototype[e],n)},mr=(Z("Array","find"),Sn.findIndex),lr="findIndex",br=!0,ze=dr(lr);lr in[]&&Array(1)[lr](function(){br=!1}),st({target:"Array",proto:!0,forced:br||!ze},{findIndex:function(t){return mr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(lr);function _r(t,e,n){(e=i(e))in t?k.f(t,e,v(0,n)):t[e]=n}Z("Array","findIndex");On=!Ee(function(t){Array.from(t)});st({target:"Array",stat:!0,forced:On},{from:function(t){var e,n,r,i,o,s,a=at(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,l=void 0!==h,t=ne(a),f=0;if(l&&(h=Kt(h,2<c?arguments[2]:void 0,2)),null==t||u==Array&&Gt(t))for(n=new u(e=rt(a.length));f<e;f++)s=l?h(a[f],f):a[f],_r(n,f,s);else for(o=(i=t.call(a)).next,n=new u;!(r=o.call(i)).done;f++)s=l?function(e,t,n,r){try{return r?t(m(n)[0],n[1]):t(n)}catch(t){throw re(e),t}}(i,h,[r.value,f],!0):r.value,_r(n,f,s);return n.length=f,n}});pt.Array.from;var wr,Ir,Er=Sn.some,ze=!!(Ir=[]["some"])&&y(function(){Ir.call(null,wr||function(){throw 1},1)}),Qn=dr("some");st({target:"Array",proto:!0,forced:!ze||!Qn},{some:function(t){return Er(this,t,1<arguments.length?arguments[1]:void 0)}});Z("Array","some");function Tr(t){return!!g(t)&&(t=ue(t),c(Rr,t)||c(xr,t))}var Sr,lr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,On=k.f,Cr=b.Int8Array,Ar=Cr&&Cr.prototype,dr=b.Uint8ClampedArray,ze=dr&&dr.prototype,Nr=Cr&&Lt(Cr),kr=Ar&&Lt(Ar),Qn=Object.prototype,dr=(Qn.isPrototypeOf,zt("toStringTag")),Pr=D("TYPED_ARRAY_TAG"),Or=lr&&!!Mt&&"Opera"!==ue(b.opera),lr=!1,Rr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},xr={BigInt64Array:8,BigUint64Array:8};for(Sr in Rr)b[Sr]||(Or=!1);if((!Or||"function"!=typeof Nr||Nr===Function.prototype)&&(Nr=function(){throw TypeError("Incorrect invocation")},Or))for(Sr in Rr)b[Sr]&&Mt(b[Sr],Nr);if((!Or||!kr||kr===Qn)&&(kr=Nr.prototype,Or))for(Sr in Rr)b[Sr]&&Mt(b[Sr].prototype,kr);if(Or&&Lt(ze)!==kr&&Mt(ze,kr),f&&!c(kr,dr))for(Sr in lr=!0,On(kr,dr,{get:function(){return g(this)?this[Pr]:void 0}}),Rr)b[Sr]&&P(b[Sr],Pr,Sr);var ze=function(t){if(Tr(t))return t;throw TypeError("Target is not a typed array")},On=function(t,e,n){if(f){if(n)for(var r in Rr){var i=b[r];i&&c(i.prototype,t)&&delete i.prototype[t]}kr[t]&&!n||ft(kr,t,!n&&Or&&Ar[t]||e)}},dr=zt("iterator"),lr=b.Uint8Array,Dr=$n.values,Lr=$n.keys,Mr=$n.entries,Fr=ze,ze=On,On=lr&&lr.prototype[dr],lr=!!On&&("values"==On.name||null==On.name),On=function(){return Dr.call(Fr(this))};ze("entries",function(){return Mr.call(Fr(this))}),ze("keys",function(){return Lr.call(Fr(this))}),ze("values",On,!lr),ze(dr,On,!lr);var jr=Object.assign,Ur=Object.defineProperty,On=!jr||y(function(){if(f&&1!==jr({b:1},jr(Ur({},"a",{enumerable:!0,get:function(){Ur(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=jr({},t)[n]||Ft(jr({},e)).join("")!=r})?function(t,e){for(var n=at(t),r=arguments.length,i=1,o=Tt.f,s=p.f;i<r;)for(var a,u=w(arguments[i++]),c=o?Ft(u).concat(o(u)):Ft(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:jr;st({target:"Object",stat:!0,forced:Object.assign!==On},{assign:On});pt.Object.assign;var Vr=p.f,lr=function(a){return function(t){for(var e,n=u(t),r=Ft(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Vr.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},On={entries:lr(!0),values:lr(!1)},qr=On.entries;st({target:"Object",stat:!0},{entries:function(t){return qr(t)}});pt.Object.entries;var Br=On.values;st({target:"Object",stat:!0},{values:function(t){return Br(t)}});pt.Object.values;function Hr(t){if(g(e=t)&&(void 0!==(n=e[zr])?!!n:"RegExp"==r(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var zr=zt("match"),Gr=zt("match"),lr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Gr]=!1,"/./"[e](n)}catch(t){}}return!1};st({target:"String",proto:!0,forced:!lr("includes")},{includes:function(t){return!!~String(s(this)).indexOf(Hr(t),1<arguments.length?arguments[1]:void 0)}});Z("String","includes");var Wr,On=A.f,Kr="".startsWith,Qr=Math.min,lr=lr("startsWith"),Wr=!(lr||(!(Wr=On(String.prototype,"startsWith"))||Wr.writable));st({target:"String",proto:!0,forced:!Wr&&!lr},{startsWith:function(t){var e=String(s(this));Hr(t);var n=rt(Qr(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return Kr?Kr.call(e,t,n):e.slice(n,n+t.length)===t}});Z("String","startsWith");st({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(s(this)),n="",r=nt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});Z("String","repeat");var Yr,Xr=zt("species"),Jr=zt("isConcatSpreadable"),$r=9007199254740991,Zr="Maximum allowed index exceeded",lr=51<=un||!y(function(){var t=[];return t[Jr]=!1,t.concat()[0]!==t}),Z=(Yr="concat",51<=un||!y(function(){var t=[];return(t.constructor={})[Xr]=function(){return{foo:1}},1!==t[Yr](Boolean).foo}));st({target:"Array",proto:!0,forced:!lr||!Z},{concat:function(t){for(var e,n,r,i=at(this),o=sr(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!g(t))return!1;var e=t[Jr];return void 0!==e?!!e:ur(t)}(r=-1===a?i:arguments[a])){if(n=rt(r.length),$r<s+n)throw TypeError(Zr);for(e=0;e<n;e++,s++)e in r&&_r(o,s,r[e])}else{if($r<=s)throw TypeError(Zr);_r(o,s++,r)}return o.length=s,o}});function ti(t){var e=pt.Symbol||(pt.Symbol={});c(e,t)||ai(e,t,{value:si.f(t)})}function ei(t,e){var n=wi[t]=Qt(vi[li]);return fi(n,{type:hi,tag:t,description:e}),f||(n.description=e),n}function ni(e,t){m(e);var n=u(t),t=Ft(n).concat(Pi(n));return ui(t,function(t){f&&!ki.call(n,t)||Ni(e,t,n[t])}),e}var ri=Et.f,ii={}.toString,oi="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Z={f:function(t){return oi&&"[object Window]"==ii.call(t)?function(t){try{return ri(t)}catch(t){return oi.slice()}}(t):ri(u(t))}},si={f:zt},ai=k.f,ui=Sn.forEach,ci=J("hidden"),hi="Symbol",li="prototype",Sn=zt("toPrimitive"),fi=lt.set,pi=lt.getterFor(hi),di=Object[li],vi=b.Symbol,yi=et("JSON","stringify"),gi=A.f,mi=k.f,bi=Z.f,_i=p.f,wi=K("symbols"),Ii=K("op-symbols"),Ei=K("string-to-symbol-registry"),Ti=K("symbol-to-string-registry"),J=K("wks"),K=b.QObject,Si=!K||!K[li]||!K[li].findChild,Ci=f&&y(function(){return 7!=Qt(mi({},"a",{get:function(){return mi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=gi(di,e);r&&delete di[e],mi(t,e,n),r&&t!==di&&mi(di,e,r)}:mi,Ai=a?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof vi},Ni=function(t,e,n){t===di&&Ni(Ii,e,n),m(t);e=i(e,!0);return m(n),c(wi,e)?(n.enumerable?(c(t,ci)&&t[ci][e]&&(t[ci][e]=!1),n=Qt(n,{enumerable:v(0,!1)})):(c(t,ci)||mi(t,ci,v(1,{})),t[ci][e]=!0),Ci(t,e,n)):mi(t,e,n)},ki=function(t){var e=i(t,!0),t=_i.call(this,e);return!(this===di&&c(wi,e)&&!c(Ii,e))&&(!(t||!c(this,e)||!c(wi,e)||c(this,ci)&&this[ci][e])||t)},K=function(t,e){var n=u(t),t=i(e,!0);if(n!==di||!c(wi,t)||c(Ii,t)){e=gi(n,t);return!e||!c(wi,t)||c(n,ci)&&n[ci][t]||(e.enumerable=!0),e}},a=function(t){var t=bi(u(t)),e=[];return ui(t,function(t){c(wi,t)||c($,t)||e.push(t)}),e},Pi=function(t){var e=t===di,t=bi(e?Ii:u(t)),n=[];return ui(t,function(t){!c(wi,t)||e&&!c(di,t)||n.push(wi[t])}),n};Yt||(ft((vi=function(){if(this instanceof vi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),n=function(t){this===di&&n.call(Ii,t),c(this,ci)&&c(this[ci],e)&&(this[ci][e]=!1),Ci(this,e,v(1,t))};return f&&Si&&Ci(di,e,{configurable:!0,set:n}),ei(e,t)})[li],"toString",function(){return pi(this).tag}),ft(vi,"withoutSetter",function(t){return ei(D(t),t)}),p.f=ki,k.f=Ni,A.f=K,Et.f=Z.f=a,Tt.f=Pi,si.f=function(t){return ei(zt(t),t)},f&&(mi(vi[li],"description",{configurable:!0,get:function(){return pi(this).description}}),ft(di,"propertyIsEnumerable",ki,{unsafe:!0}))),st({global:!0,wrap:!0,forced:!Yt,sham:!Yt},{Symbol:vi}),ui(Ft(J),function(t){ti(t)}),st({target:hi,stat:!0,forced:!Yt},{for:function(t){var e=String(t);if(c(Ei,e))return Ei[e];t=vi(e);return Ei[e]=t,Ti[t]=e,t},keyFor:function(t){if(!Ai(t))throw TypeError(t+" is not a symbol");if(c(Ti,t))return Ti[t]},useSetter:function(){Si=!0},useSimple:function(){Si=!1}}),st({target:"Object",stat:!0,forced:!Yt,sham:!f},{create:function(t,e){return void 0===e?Qt(t):ni(Qt(t),e)},defineProperty:Ni,defineProperties:ni,getOwnPropertyDescriptor:K}),st({target:"Object",stat:!0,forced:!Yt},{getOwnPropertyNames:a,getOwnPropertySymbols:Pi}),st({target:"Object",stat:!0,forced:y(function(){Tt.f(1)})},{getOwnPropertySymbols:function(t){return Tt.f(at(t))}}),yi&&(Hi=!Yt||y(function(){var t=vi();return"[null]"!=yi([t])||"{}"!=yi({a:t})||"{}"!=yi(Object(t))}),st({target:"JSON",stat:!0,forced:Hi},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((g(r=e)||void 0!==t)&&!Ai(t))return ur(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ai(e))return e}),i[1]=e,yi.apply(null,i)}})),vi[li][Sn]||P(vi[li],Sn,vi[li].valueOf),fe(vi,hi),$[ci]=!0,ti("asyncIterator");var Oi,Ri,xi,Di,Li,K=k.f,Mi=b.Symbol;!f||"function"!=typeof Mi||"description"in Mi.prototype&&void 0===Mi().description||(Oi={},ot(Ri=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Ri?new Mi(t):void 0===t?Mi():Mi(t);return""===t&&(Oi[e]=!0),e},Mi),(Wi=Ri.prototype=Mi.prototype).constructor=Ri,xi=Wi.toString,Di="Symbol(test)"==String(Mi("test")),Li=/^Symbol\((.*)\)[^)]+$/,K(Wi,"description",{configurable:!0,get:function(){var t=g(this)?this.valueOf():this,e=xi.call(t);if(c(Oi,t))return"";e=Di?e.slice(7,-1):e.replace(Li,"$1");return""===e?void 0:e}}),st({global:!0,forced:!0},{Symbol:Ri})),ti("hasInstance"),ti("isConcatSpreadable"),ti("iterator"),ti("match"),ti("matchAll"),ti("replace"),ti("search"),ti("species"),ti("split"),ti("toPrimitive"),ti("toStringTag"),ti("unscopables"),fe(b.JSON,"JSON",!0),fe(Math,"Math",!0),st({global:!0},{Reflect:{}}),fe(b.Reflect,"Reflect",!0);pt.Symbol;ti("asyncDispose"),ti("dispose"),ti("observable"),ti("patternMatch"),ti("replaceAll");si.f("iterator");var Fi=!y(function(){return Object.isExtensible(Object.preventExtensions({}))}),ji=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=k.f,r=D("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!g(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!c(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!c(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return Fi&&s.REQUIRED&&o(t)&&!c(t,r)&&n(t),t}};$[r]=!0}),a=function(s,t,e){function n(t){var n=p[t];ft(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!g(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!g(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!g(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=b[s],p=f&&f.prototype,d=f,v={};return Ot(s,"function"!=typeof f||!(h||p.forEach&&!y(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),ji.REQUIRED=!0):Ot(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=y(function(){r.has(1)}),a=Ee(function(t){new f(t)}),u=!h&&y(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){de(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,Mt&&"function"==typeof(i=r.constructor)&&i!==t&&g(o=i.prototype)&&o!==t.prototype&&Mt(n,o),n);return null!=e&&oe(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,st({global:!0,forced:d!=f},v),fe(d,s),h||e.setStrong(d,s,c),d},Ui=k.f,Vi=ji.fastKey,qi=lt.set,Bi=lt.getterFor,Hi={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=Vi(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){de(t,s,n),qi(t,{type:n,index:Qt(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&oe(e,t[i],{that:t,AS_ENTRIES:r})}),a=Bi(n),u=function(t,e){var n,r=a(t),t=Vi(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return le(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),f?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),le(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&Ui(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Bi(e),o=Bi(r);Dn(t,e,function(t,e){qi(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),pe(e)}},Sn=(a("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Hi),pt.Map,function(t){var e,n,r,i,o=arguments.length,s=1<o?arguments[1]:void 0;return Wt(this),(e=void 0!==s)&&Wt(s),null==t?new this:(n=[],e?(r=0,i=Kt(s,2<o?arguments[2]:void 0,2),oe(t,function(t){n.push(i(t,r++))})):oe(t,n.push,{that:n}),new this(n))});st({target:"Map",stat:!0},{from:Sn});K=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};st({target:"Map",stat:!0},{of:K});function zi(){for(var t,e=m(this),n=Wt(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}st({target:"Map",proto:!0,real:!0,forced:W},{deleteAll:function(){return zi.apply(this,arguments)}});st({target:"Map",proto:!0,real:!0,forced:W},{emplace:function(t,e){var n=m(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function Gi(t){return Map.prototype.entries.call(t)}st({target:"Map",proto:!0,real:!0,forced:W},{every:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:W},{filter:function(t){var n=m(this),e=Gi(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Wt(i.set);return oe(e,function(t,e){r(e,t,n)&&o.call(i,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:W},{find:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:W},{findKey:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Wt(n);var i=Wt(r.has),o=Wt(r.get),s=Wt(r.set);return oe(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});st({target:"Map",proto:!0,real:!0,forced:W},{includes:function(i){return oe(Gi(m(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Wt(e);var r=Wt(n.set);return oe(t,function(t){r.call(n,e(t),t)}),n}}),st({target:"Map",proto:!0,real:!0,forced:W},{keyOf:function(r){return oe(Gi(m(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:W},{mapKeys:function(t){var n=m(this),e=Gi(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Wt(i.set);return oe(e,function(t,e){o.call(i,r(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:W},{mapValues:function(t){var n=m(this),e=Gi(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Wt(i.set);return oe(e,function(t,e){o.call(i,t,r(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:W},{merge:function(t){for(var e=m(this),n=Wt(e.set),r=0;r<arguments.length;)oe(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),st({target:"Map",proto:!0,real:!0,forced:W},{reduce:function(n){var r=m(this),t=Gi(r),i=arguments.length<2,o=i?void 0:arguments[1];if(Wt(n),oe(t,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),st({target:"Map",proto:!0,real:!0,forced:W},{some:function(t){var r=m(this),e=Gi(r),i=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:W},{update:function(t,e){var n=m(this),r=arguments.length;Wt(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");r=i?n.get(t):Wt(2<r?arguments[2]:void 0)(t,n);return n.set(t,e(r,t,n)),n}});var Wi=function(t,e){var n,r=m(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};st({target:"Map",proto:!0,real:!0,forced:W},{upsert:Wi}),st({target:"Map",proto:!0,real:!0,forced:W},{updateOrInsert:Wi});a("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},Hi),pt.Set;st({target:"Set",stat:!0},{from:Sn}),st({target:"Set",stat:!0},{of:K});st({target:"Set",proto:!0,real:!0,forced:W},{addAll:function(){return function(){for(var t=m(this),e=Wt(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),st({target:"Set",proto:!0,real:!0,forced:W},{deleteAll:function(){return zi.apply(this,arguments)}});function Ki(t){return Set.prototype.values.call(t)}st({target:"Set",proto:!0,real:!0,forced:W},{every:function(t){var n=m(this),e=Ki(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);return!oe(e,function(t,e){if(!r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{difference:function(t){var e=m(this),n=new(Te(e,et("Set")))(e),r=Wt(n.delete);return oe(t,function(t){r.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:W},{filter:function(t){var e=m(this),n=Ki(e),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Wt(i.add);return oe(n,function(t){r(t,t,e)&&o.call(i,t)},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:W},{find:function(t){var n=m(this),e=Ki(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Set",proto:!0,real:!0,forced:W},{intersection:function(t){var e=m(this),n=new(Te(e,et("Set"))),r=Wt(e.has),i=Wt(n.add);return oe(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:W},{isDisjointFrom:function(t){var n=m(this),r=Wt(n.has);return!oe(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{isSubsetOf:function(t){var e=function(t){var e=ne(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return m(e.call(t))}(this),n=m(t),r=n.has;return"function"!=typeof r&&(n=new(et("Set"))(t),r=Wt(n.has)),!oe(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{isSupersetOf:function(t){var n=m(this),r=Wt(n.has);return!oe(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{join:function(t){var e=m(this),n=Ki(e),e=void 0===t?",":String(t),t=[];return oe(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),st({target:"Set",proto:!0,real:!0,forced:W},{map:function(t){var e=m(this),n=Ki(e),r=Kt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Wt(i.add);return oe(n,function(t){o.call(i,r(t,t,e))},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:W},{reduce:function(e){var n=m(this),t=Ki(n),r=arguments.length<2,i=r?void 0:arguments[1];if(Wt(e),oe(t,function(t){i=r?(r=!1,t):e(i,t,t,n)},{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),st({target:"Set",proto:!0,real:!0,forced:W},{some:function(t){var n=m(this),e=Ki(n),r=Kt(t,1<arguments.length?arguments[1]:void 0,3);return oe(e,function(t,e){if(r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:W},{symmetricDifference:function(t){var e=m(this),n=new(Te(e,et("Set")))(e),r=Wt(n.delete),i=Wt(n.add);return oe(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:W},{union:function(t){var e=m(this),e=new(Te(e,et("Set")))(e);return oe(t,Wt(e.add),{that:e}),e}});var Qi=Math.floor;st({target:"Number",stat:!0},{isInteger:function(t){return!g(t)&&isFinite(t)&&Qi(t)===t}});pt.Number.isInteger;st({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});pt.Number.isNaN;var Yi=function(t,e){return(Yi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Xi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Yi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ji=function(){return(Ji=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function $i(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Zi(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function to(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function no(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(eo(arguments[e]));return t}function ro(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function io(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function oo(t){try{return co.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var so={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ao=function(t,e){if(!t)throw uo(e)},uo=function(t){return new Error("Firebase Database ("+so.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},co={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(io(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function ho(t){return lo(void 0,t)}function lo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=lo(t[n],e[n]));return t}var fo=(po.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},po);function po(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function vo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function yo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vo())}function go(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function mo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function bo(){return!0===so.NODE_ADMIN}function _o(){return"indexedDB"in self&&null!=indexedDB}function wo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Io(){return!(!navigator||!navigator.cookieEnabled)}var Eo,To="FirebaseError",So=(Xi(Co,Eo=Error),Co);function Co(t,e,n){e=Eo.call(this,e)||this;return e.code=t,e.customData=n,e.name=To,Object.setPrototypeOf(e,Co.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Ao.prototype.create),e}var Ao=(No.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(ko,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new So(o,t,i)},No);function No(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var ko=/\{\$([^}]+)}/g;function Po(t){return JSON.parse(t)}function Oo(t){return JSON.stringify(t)}function Ro(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Po(oo(o[0])||""),n=Po(oo(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function xo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Do(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Lo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Fo(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}var jo=(Uo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Uo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Uo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Uo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Uo);function Uo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function Vo(t,e){e=new qo(t,e);return e.subscribe.bind(e)}var qo=(Bo.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},Bo.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},Bo.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},Bo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Ho),void 0===r.error&&(r.error=Ho),void 0===r.complete&&(r.complete=Ho);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},Bo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Bo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Bo.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},Bo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},Bo);function Bo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Ho(){}function zo(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Go(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function Wo(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Go(t,e,r)+"must be a valid function.")}function Ko(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Go(t,e,r)+"must be a valid context object.")}function Qo(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Yo=1e3,Xo=2,Jo=144e5,$o=.5;function Zo(t,e,n){void 0===n&&(n=Xo);n=(e=void 0===e?Yo:e)*Math.pow(n,t),t=Math.round($o*n*(Math.random()-.5)*2);return Math.min(Jo,n+t)}var ts=(es.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},es.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},es.prototype.setServiceProps=function(t){return this.serviceProps=t,this},es);function es(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ns="[DEFAULT]",rs=(is.prototype.get=function(t){void 0===t&&(t=ns);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new fo;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},is.prototype.getImmediate=function(t){var e=Ji({identifier:ns,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},is.prototype.getComponent=function(){return this.component},is.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ns)}catch(t){}try{for(var r=to(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},is.prototype.clearInstance=function(t){void 0===t&&(t=ns),this.instancesDeferred.delete(t),this.instances.delete(t)},is.prototype.delete=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(no(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},is.prototype.isComponentSet=function(){return null!=this.component},is.prototype.isInitialized=function(t){return void 0===t&&(t=ns),this.instances.has(t)},is.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ns?void 0:e),this.instances.set(t,n)),n||null},is.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ns},is);function is(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var os=(ss.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},ss.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},ss.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new rs(t,this);return this.providers.set(t,e),e},ss.prototype.getProviders=function(){return Array.from(this.providers.values())},ss);function ss(t){this.name=t,this.providers=new Map}function as(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var us,cs=[];(Sn=us=us||{})[Sn.DEBUG=0]="DEBUG",Sn[Sn.VERBOSE=1]="VERBOSE",Sn[Sn.INFO=2]="INFO",Sn[Sn.WARN=3]="WARN",Sn[Sn.ERROR=4]="ERROR",Sn[Sn.SILENT=5]="SILENT";function hs(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ps[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,as(["["+i+"]  "+t.name+":"],n))}}var ls={debug:us.DEBUG,verbose:us.VERBOSE,info:us.INFO,warn:us.WARN,error:us.ERROR,silent:us.SILENT},fs=us.INFO,ps=((K={})[us.DEBUG]="log",K[us.VERBOSE]="log",K[us.INFO]="info",K[us.WARN]="warn",K[us.ERROR]="error",K),ds=(Object.defineProperty(vs.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in us))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),vs.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ls[t]:t},Object.defineProperty(vs.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(vs.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),vs.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,as([this,us.DEBUG],t)),this._logHandler.apply(this,as([this,us.DEBUG],t))},vs.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,as([this,us.VERBOSE],t)),this._logHandler.apply(this,as([this,us.VERBOSE],t))},vs.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,as([this,us.INFO],t)),this._logHandler.apply(this,as([this,us.INFO],t))},vs.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,as([this,us.WARN],t)),this._logHandler.apply(this,as([this,us.WARN],t))},vs.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,as([this,us.ERROR],t)),this._logHandler.apply(this,as([this,us.ERROR],t))},vs);function vs(t){this.name=t,this._logLevel=fs,this._logHandler=hs,this._userLogHandler=null,cs.push(this)}function ys(e){cs.forEach(function(t){t.setLogLevel(e)})}function gs(s,e){for(var t=0,n=cs;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=ls[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:us[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}var Sn=((W={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",W["bad-app-name"]="Illegal App name: '{$appName}",W["duplicate-app"]="Firebase App named '{$appName}' already exists",W["app-deleted"]="Firebase App named '{$appName}' already deleted",W["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",W["invalid-log-argument"]="First argument to `onLog` must be null or a function.",W),ms=new Ao("app","Firebase",Sn),bs="@firebase/app",_s="[DEFAULT]",ws=((K={})[bs]="fire-core",K["@firebase/analytics"]="fire-analytics",K["@firebase/auth"]="fire-auth",K["@firebase/database"]="fire-rtdb",K["@firebase/functions"]="fire-fn",K["@firebase/installations"]="fire-iid",K["@firebase/messaging"]="fire-fcm",K["@firebase/performance"]="fire-perf",K["@firebase/remote-config"]="fire-rc",K["@firebase/storage"]="fire-gcs",K["@firebase/firestore"]="fire-fst",K["fire-js"]="fire-js",K["firebase-wrapper"]="fire-js-all",K),Is=new ds("@firebase/app"),Es=(Object.defineProperty(Ts.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ts.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Ts.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Ts.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ts.prototype._getService=function(t,e){return void 0===e&&(e=_s),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ts.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=_s),this.container.getProvider(t).clearInstance(e)},Ts.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Is.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ts.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ts.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ts.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw ms.create("app-deleted",{appName:this.name_})},Ts);function Ts(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=ho(t),this.container=new os(e.name),this._addComponent(new ts("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}Es.prototype.name&&Es.prototype.options||Es.prototype.delete||console.log("dc");var Ss="8.2.10";function Cs(s){var a={},u=new Map,c={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=_s);e=n.name;if("string"!=typeof e||!e)throw ms.create("bad-app-name",{appName:String(e)});if(xo(a,e))throw ms.create("duplicate-app",{appName:e});n=new s(t,n,c);return a[e]=n},app:h,registerVersion:function(t,e,n){var r=null!==(i=ws[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Is.warn(n.join(" "))}o(new ts(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:ys,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw ms.create("invalid-log-argument");gs(t,e)},apps:null,SDK_VERSION:Ss,INTERNAL:{registerComponent:o,removeApp:function(t){delete a[t]},components:u,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function h(t){if(!xo(a,t=t||_s))throw ms.create("no-app",{appName:t});return a[t]}function o(n){var t,r=n.name;if(u.has(r))return Is.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?c[r]:null;u.set(r,n),"PUBLIC"===n.type&&(t=function(t){if("function"!=typeof(t=void 0===t?h():t)[r])throw ms.create("invalid-app-argument",{appName:r});return t[r]()},void 0!==n.serviceProps&&lo(t,n.serviceProps),c[r]=t,s.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])});for(var e=0,i=Object.keys(a);e<i.length;e++){var o=i[e];a[o]._addComponent(n)}return"PUBLIC"===n.type?c[r]:null}return c.default=c,Object.defineProperty(c,"apps",{get:function(){return Object.keys(a).map(function(t){return a[t]})}}),h.App=s,c}var W=function t(){var e=Cs(Es);return e.INTERNAL=Ji(Ji({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){lo(e,t)},createSubscribe:Vo,ErrorFactory:Ao,deepExtend:lo}),e}(),As=(Ns.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Ns);function Ns(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Is.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(gu=self.firebase.SDK_VERSION)&&0<=gu.indexOf("LITE")&&Is.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var ks=W.initializeApp;W.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Is.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ks.apply(void 0,t)};var Ps,Os,Jl=W;(Ps=Jl).INTERNAL.registerComponent(new ts("platform-logger",function(t){return new As(t)},"PRIVATE")),Ps.registerVersion(bs,"0.6.15",Os),Ps.registerVersion("fire-js","");Jl.registerVersion("firebase","8.2.10","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},s.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Qa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),o=e.next(),!o.done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function E(t,e,n){this.code=C+t,this.message=e||A[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new E(e.substring(C.length),t.message,t.serverResponse):null}w(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var S,C="auth/",A={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in N)if(N[e].id===t)return t=N[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function P(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function O(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,O):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function x(t){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(O,Error),O.prototype.name="CustomError",w(R,O),R.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new D(function(){return new j},function(t){t.reset()});function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function z(t,e){return 0<=U(t,e)}function G(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function K(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}t:{var st=l.navigator;if(st){st=st.userAgent;if(st){Y=st;break t}}Y=""}function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function bt(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function _t(t,e){this.a=e===St?t:""}function wt(t){return t instanceof _t&&t.constructor===_t?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function It(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(Et,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),e=t,t=bt(),new _t(e=t?t.createScriptURL(e):e,St)}_t.prototype.sa=!0,_t.prototype.ra=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===xt?t:""}function At(t){return t instanceof Ct&&t.constructor===Ct?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Pt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ot(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Pt.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&Nt.test(e[1])?new Ct(t,xt):null);var e}function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new Ct(t=!Pt.test(t)?"about:invalid#zClosurez":t,xt))}var xt={},Dt=new Ct("about:invalid#zClosurez",xt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof Ct?t:Rt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(At(t),n,r,void 0)}function jt(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return rt.test(t)&&(-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(J,"&amp;"):t).indexOf("<")?t.replace($,"&lt;"):t).indexOf(">")?t.replace(Z,"&gt;"):t).indexOf('"')?t.replace(tt,"&quot;"):t).indexOf("'")?t.replace(et,"&#39;"):t).indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),Ht=at("Trident")||at("MSIE"),zt=at("Edge"),Gt=zt||Ht,Wt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Kt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(Xt=Y,Wt?/rv:([^\);]+)(\)|;)/.exec(Xt):zt?/Edge\/([\d\.]+)/.exec(Xt):Ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):Kt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Ht){Xt=Qt();if(null!=Xt&&Xt>parseFloat(Yt)){qt=String(Xt);break t}}qt=Yt}var Jt={};function $t(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Zt=l.document&&Ht&&(Qt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Ht||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){var n;ie||(ie=l.Promise&&l.Promise.resolve?(n=l.Promise.resolve(void 0),function(){n.then(fe)}):function(){var t=fe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")?function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new M;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}L(F,t)}he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ce(n,ve,t)},function(t){if(!(t instanceof xe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)})}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new D(function(){return new ge},function(t){t.reset()});function be(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function _e(t){if(t instanceof pe)return t;var e=new pe(s);return Ce(e,ve,t),e}function we(n){return new pe(function(t,e){e(n)})}function Ie(t,e,n){Ae(t,e,n,null)||ce(b(e,t))}function Ee(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ie(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=ve&&t.a!=ye||Ne(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=be(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof xe?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ae(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ne(t),e!=ye||n instanceof xe||(i=n,(r=t).g=!0,ce(function(){r.g&&Re.call(null,i)}))))}function Ae(t,e,n,r){if(t instanceof pe)return Te(t,be(e||s,n||null,r)),1;if(P(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ne(t){t.h||(t.h=!0,ce(t.gc,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Pe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Oe(e,n,r);else try{e.c?e.g.call(e.f):Oe(e,n,r)}catch(t){Re.call(null,t)}L(me,e)}function Oe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,v(t)?t:null,v(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).oa=function(t,e){return(t=be(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new xe(t),ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,!((o=a.a==e?a:o)&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Pe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)},this))},t.$c=function(t){this.a=de,Ce(this,ve,t)},t.ad=function(t){this.a=de,Ce(this,ye,t)},t.gc=function(){for(var t;t=ke(this);)Pe(this,t,this.a,this.i);this.h=!1};var Re=ue;function xe(t){O.call(this,t)}function De(){this.xa=this.xa,this.pa=this.pa}w(xe,O);var Le=0;function Me(t){t.xa||(t.xa=!0,t.Da(),0==Le)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}De.prototype.xa=!(xe.prototype.name="cancel"),De.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Fe=Object.freeze||function(t){return t},je=!Ht||9<=Number(Zt),Ue=Ht&&!$t("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:He[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Be,qe);var He=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.g=function(){return this.a};var ze="closure_listenable_"+(1e6*Math.random()|0),Ge=0;function We(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++Ge,this.va=this.Pa=!1}function Ke(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(Ke(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new We(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[ze]?pn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=je?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!Ve?u:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[ze]?dn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=ln(n),t&&t[ze]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Xe(o=t.a[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&cn(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Xe(e,n,r,i):t)?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[ze]?Ye(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[Je]=null)):Ke(t)))}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&rn(t),n.call(r,e)}function un(t,e){if(t.va)return!0;if(je)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return v(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){De.call(this),this.v=new Qe(this),(this.ac=this).gb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Va||u.src,u.Pa&&Ye(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function yn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function bn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)In(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(fn,De),fn.prototype[ze]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,ft(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=vn(o,r,!0,t)&&s;if(s=vn(o=t.b=n,r,!0,t)&&s,s=vn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=vn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Da=function(){if(fn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ke(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=_n.prototype).W=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var En=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,Sn(this,t.c),this.l=t.l,this.a=t.a,Cn(this,t.g),this.f=t.f,An(this,Wn(t.b)),this.h=t.h):t&&(n=String(t).match(En))?(this.i=!!e,Sn(this,n[1]||"",!0),this.l=Rn(n[2]||""),this.a=Rn(n[3]||"",!0),Cn(this,n[4]),this.f=Rn(n[5]||"",!0),An(this,n[6]||"",!0),this.h=Rn(n[7]||"")):(this.i=!!e,this.b=new Vn(null,this.i))}function Sn(t,e,n){t.c=n?Rn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function An(t,e,n){var r,i;e instanceof Vn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Hn(this,e),Gn(this,n,t))},r)),r.f=i):(n||(e=xn(e,jn)),t.b=new Vn(e,t.i))}function Nn(t,e,n){t.b.set(e,n)}function kn(t,e){return t.b.get(e)}function Pn(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function On(t,e,n,r){var i=new Tn(null,void 0);return t&&Sn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.f=r),i}function Rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function xn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Dn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(xn(e,Ln,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(xn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(xn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",xn(n,Un)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?Sn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.f;if(n)Cn(e,t.g);else if(n=!!t.f)if("/"!=i.charAt(0)&&(this.a&&!this.f?i="/"+i:-1!=(r=e.f.lastIndexOf("/"))&&(i=e.f.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r;return n?e.f=i:n=""!==t.b.toString(),n?An(e,Wn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,jn=/[#\?@]/g,Un=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new _n,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Bn(t){var e=bn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Gn(n,i,o):n.add(i,o)}return n}function Hn(t,e){qn(t),e=Kn(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function zn(t,e){return qn(t),e=Kn(t,e),In(t.a.b,e)}function Gn(t,e,n){Hn(t,e),0<n.length&&(t.c=null,t.a.set(Kn(t,e),Q(n)),t.b+=n.length)}function Wn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function Kn(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=Kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){qn(this);var e=[];if("string"==typeof t)zn(this,t)&&(e=K(e,this.a.get(Kn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,zn(this,t=Kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return Ht&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=At(Ot(t)||Dt)),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Ot(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Rt(e),s.href=At(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=At(e),s&&(Gt&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new Lt(t=(r=bt())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(x("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Er()&&"ionic:"!==Er()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Jl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Jl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?pr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return e=n!=t.length?void 0:e}function _r(){try{var t=l.localStorage,e=Nr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Ir()||"chrome-extension:"===Er()||ur())&&!fr()&&_r()&&!hr()}function Ir(){return"http:"===Er()||"https:"===Er()}function Er(){return l.location&&l.location.protocol||null}function Tr(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ar(t){if(null!==t)return JSON.parse(t)}function Nr(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Or(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Rr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function xr(){var e=l.document,n=null;return Rr()||!e?_e():new pe(function(t){n=function(){Rr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Lr(){return br("fireauth.oauthhelper",l)||br("fireauth.iframe",l)}Or.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Ir()&&"chrome-extension:"!==Er()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,Fr={};function jr(t){Fr[t]||(Fr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==Ur.abcd}catch(t){Mr=!1}function Vr(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Vr(t,n,e[n])}function Br(t){var e={};return qr(e,t),e}function Hr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Vr(e,n,Hr(t[n]));return e}function zr(t){var e=t&&(t[Yr]?"phone":null);if(!(e&&t&&t[Qr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Vr(this,"uid",t[Qr]),Vr(this,"displayName",t[Wr]||null);var n=null;Vr(this,"enrollmentTime",n=t[Kr]?new Date(t[Kr]).toUTCString():n),Vr(this,"factorId",e)}function Gr(t){try{var e=new Xr(t)}catch(t){e=null}return e}zr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Wr="displayName",Kr="enrolledAt",Qr="mfaEnrollmentId",Yr="phoneInfo";function Xr(t){zr.call(this,t),Vr(this,"phoneNumber",t[Yr])}function Jr(t){var e={},n=t[ei],r=t[ri],i=t[ii];if(t=Gr(t[ni]),!i||i!=Zr&&i!=ti&&!n||i==ti&&!r||i==$r&&!t)throw Error("Invalid checkActionCode response!");i==ti?(e[si]=n||null,e[ui]=n||null,e[oi]=r):(e[si]=r||null,e[ui]=r||null,e[oi]=n||null),e[ai]=t||null,Vr(this,hi,i),Vr(this,ci,Hr(e))}w(Xr,zr),Xr.prototype.w=function(){var t=Xr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var $r="REVERT_SECOND_FACTOR_ADDITION",Zr="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ei="email",ni="mfaInfo",ri="newEmail",ii="requestType",oi="email",si="fromEmail",ai="multiFactorInfo",ui="previousEmail",ci="data",hi="operation";function li(t){var e=kn(t=Pn(t),fi)||null,n=kn(t,pi)||null,r=(r=kn(t,yi)||null)&&mi[r]||null;if(!e||!n||!r)throw new E("argument-error",fi+", "+pi+"and "+yi+" are required in a valid action code URL.");qr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,di)||null,languageCode:kn(t,vi)||null,tenantId:kn(t,gi)||null})}var fi="apiKey",pi="oobCode",di="continueUrl",vi="languageCode",yi="mode",gi="tenantId",mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:$r,signIn:Zr,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new li(t)}catch(t){return null}}function _i(t){var e=t[Si];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){e=r[Ni];var n=r[Ci],r=r[Ai];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new E("argument-error",Ci+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new E("argument-error",Ai+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new E("argument-error",Ni+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new E("missing-android-pkg-name")}}else if(void 0!==r)throw new E("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ti])&&"object"==typeof e){if("string"==typeof(e=e[ki])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",ki+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Ti+" property must be a non null object when specified.");if(void 0!==(e=t[Ei])&&"boolean"!=typeof e)throw new E("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ii])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Ii+" property must be a non empty string when specified.");this.i=t||null}var wi="android",Ii="dynamicLinkDomain",Ei="handleCodeInApp",Ti="iOS",Si="url",Ci="installApp",Ai="minimumVersion",Ni="packageName",ki="bundleId";function Pi(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Oi=null;function Ri(t){var e=[];return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Oi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e.push(t)}),e}function xi(t){var e=Li(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Di(t){try{return new xi(t)}catch(t){return null}}function Li(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Ri(t);for(t=[],n=e=0;e<r.length;){var i,o,s,a=r[e++];a<128?t[n++]=String.fromCharCode(a):191<a&&a<224?(i=r[e++],t[n++]=String.fromCharCode((31&a)<<6|63&i)):239<a&&a<365?(s=((7&a)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}xi.prototype.T=function(){return this.f},xi.prototype.l=function(){return this.c},xi.prototype.toString=function(){return this.h};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Fi=["client_id","response_type","scope","redirect_uri","state"],ji={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Fi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Fi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Fi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Mi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ui(t){for(var e in ji)if(ji[e].fa==t)return ji[e];return null}function Vi(t){var e={};e["facebook.com"]=Gi,e["google.com"]=Ki,e["github.com"]=Wi,e["twitter.com"]=Qi;var n=t&&t[Bi];try{if(n)return new(e[n]||zi)(t);if(void 0!==t[qi])return new Hi(t)}catch(t){}return null}var qi="idToken",Bi="providerId";function Hi(t){var e,n=t[Bi];if(n||!t[qi]||(e=Di(t[qi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Vr(this,"providerId",n),Vr(this,"isNewUser",e)}function zi(t){Hi.call(this,t),Vr(this,"profile",Hr((t=Ar(t.rawUserInfo||"{}"))||{}))}function Gi(t){if(zi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Wi(t){if(zi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",this.profile&&this.profile.login||null)}function Ki(t){if(zi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(zi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Vr(this,"username",t.screenName||null)}function Yi(t){var e=kn(r=Pn(t),"link"),n=kn(Pn(e),"link"),r=kn(r,"deep_link_id");return kn(Pn(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Ji:$i}w(zi,Hi),w(Gi,zi),w(Wi,zi),w(Ki,zi),w(Qi,zi);var Ji="enroll",$i="signin";function Zi(){}function to(t,n){return t.then(function(t){if(t[Hs]){var e=Di(t[Hs]);if(!e||n!=e.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new E("user-mismatch"):t})}function eo(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Vr(this,"providerId",t),Vr(this,"signInMethod",t)}function no(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ro(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new eo(t.providerId,t.pendingToken)}catch(t){}return null}function io(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Vr(this,"idToken",e.idToken),e.accessToken&&Vr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Vr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Vr(this,"accessToken",e.oauthToken),Vr(this,"secret",e.oauthTokenSecret)}Vr(this,"providerId",t),Vr(this,"signInMethod",n)}function oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new io(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Qc=e||[],qr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Ui(t)||{}).Ja||null,this.ob=null}function uo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function co(t){ao.call(this,t,Fi),this.a=[]}function ho(){co.call(this,"facebook.com")}function lo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){co.call(this,"github.com")}function po(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function vo(){co.call(this,"google.com"),this.Ca("profile")}function yo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new vo).credential({idToken:n,accessToken:e})}function go(){ao.call(this,"twitter.com",Mi)}function mo(t,e){var n=t;if(!(n=!y(n)?{oauthToken:t,oauthTokenSecret:e}:n).oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new io("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,Vr(this,"providerId","password"),Vr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function wo(){qr(this,{providerId:"password",isOAuthProvider:!1})}function Io(t,e){if(!(e=Eo(e)))throw new E("argument-error","Invalid email link!");return new bo(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function Eo(t){return(t=bi(t=Yi(t)))&&t.operation===Zr?t:null}function To(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new E("internal-error");this.a=t,Vr(this,"providerId","phone"),this.fa="phone",Vr(this,"signInMethod","phone")}function So(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new To(n)}return null}function Co(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Ao(t){try{this.a=t||Jl.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}qr(this,{providerId:"phone",isOAuthProvider:!1})}function No(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new To({eb:t,cb:e})}function ko(t){if(t.temporaryProof&&t.phoneNumber)return new To({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return yo(o,n);case"facebook.com":return lo(n);case"github.com":return po(n);case"twitter.com":return mo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new eo(e,s):new io(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new co(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Po(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Oo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Ro(t){return(t=t||{}).type?new Oo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function xo(){this.b=null,this.a=[]}Xi.prototype.Ha=function(){return this.a?_e(this.a):_e(this.b)},Xi.prototype.w=function(){return this.type==Ji?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zi.prototype.ka=function(){},Zi.prototype.b=function(){},Zi.prototype.c=function(){},Zi.prototype.w=function(){},eo.prototype.ka=function(t){return la(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,fa(t,n)},eo.prototype.c=function(t,e){return to(pa(t,no(this)),e)},eo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},io.prototype.ka=function(t){return la(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,fa(t,n)},io.prototype.c=function(t,e){return to(pa(t,oo(this)),e)},io.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ka=function(t){return this.Ib=ht(t),this},w(uo,ao),w(co,ao),co.prototype.Ca=function(t){return z(this.a,t)||this.a.push(t),this},co.prototype.Qb=function(){return Q(this.a)},co.prototype.credential=function(t,e){e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new io(this.providerId,e,this.providerId)},w(ho,co),Vr(ho,"PROVIDER_ID","facebook.com"),Vr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(fo,co),Vr(fo,"PROVIDER_ID","github.com"),Vr(fo,"GITHUB_SIGN_IN_METHOD","github.com"),w(vo,co),Vr(vo,"PROVIDER_ID","google.com"),Vr(vo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(go,ao),Vr(go,"PROVIDER_ID","twitter.com"),Vr(go,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ka=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,wa,{email:this.a,oobCode:this.f}):Qa(t,Ha,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Ia,{idToken:e,email:this.a,oobCode:this.f}):Qa(t,La,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return to(this.ka(t),e)},bo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},qr(wo,{PROVIDER_ID:"password"}),qr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),qr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),To.prototype.ka=function(t){return t.fb(Co(this))},To.prototype.b=function(t,e){var n=Co(this);return n.idToken=e,Qa(t,Ga,n)},To.prototype.c=function(t,e){var n=Co(this);return n.operation="REAUTH",to(t=Qa(t,Wa,n),e)},To.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Ao.prototype.fb=function(r,i){var o=this.a.a;return _e(i.verify()).then(function(n){if("string"!=typeof n)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,e=y(r)?r.phoneNumber:r,t=t&&t.type==Ji?t.Ha().then(function(t){return Qa(o,Fa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==$i?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Qa(e,ja,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Qa(o,xa,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},qr(Ao,{PROVIDER_ID:"phone"}),qr(Ao,{PHONE_SIGN_IN_METHOD:"phone"}),Oo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Oo.prototype.T=function(){return this.h},Oo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Do,Lo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=Pn(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Fo(t,e,n){E.call(this,t,n),(t=e||{}).Jb&&Vr(this,"email",t.Jb),t.ea&&Vr(this,"phoneNumber",t.ea),t.credential&&Vr(this,"credential",t.credential),t.Zb&&Vr(this,"tenantId",t.Zb)}function jo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:ko(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Fo(e,n,t.message)}return null}function Uo(){}function Vo(t){return t.c||(t.c=t.b())}function qo(){}function Bo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ho(){}function zo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Go(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Wo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Ko(t){this.f=t,this.b=this.c=this.a=null}function Qo(t,e){this.name=t,this.value=e}w(Mo,E),w(Fo,E),Fo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Fo.prototype.toJSON=function(){return this.w()},Uo.prototype.c=null,w(qo,Uo),qo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},qo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},Do=new qo,w(Ho,Uo),Ho.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new zo;throw Error("Unsupported browser")},Ho.prototype.b=function(){return{}},(t=zo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Go(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Go(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Go(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Wo.prototype.a=null,Wo.prototype.reset=function(t,e,n,r,i){delete this.a},Qo.prototype.toString=function(){return this.name};var Yo=new Qo("SEVERE",1e3),Xo=new Qo("WARNING",900),Jo=new Qo("CONFIG",700),$o=new Qo("FINE",500);Ko.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(x("Root logger has no level set."),null))}(this).value)for(v(e)&&(e=e()),t=new Wo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zo,ts={},es=null;function ns(t){var e,n,r;return es||(es=new Ko(""),(ts[""]=es).c=Jo),(e=ts[t])||(e=new Ko(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ns(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ts[t]=e),e}function rs(t,e){t&&t.log($o,e,void 0)}function is(t){this.f=t}function os(t){fn.call(this),this.u=t,this.h=void 0,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ns("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(is,Uo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=(Zo={},function(){return Zo}),w(os,fn);var ss=0;function as(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function us(t){t.readyState=4,t.g=null,t.c=null,t.m=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){fn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=ls,this.u=this.S=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this)),this.readyState=ss},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,as(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?us:cs)(this),3==this.readyState&&as(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,us(this))},t.sc=function(t){this.a&&(this.response=t,us(this))},t.Ua=function(t){var e=this.i;e&&e.log(Xo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&us(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(os.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(hs,fn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=(e.D||Do).a(),e.C=e.D?Vo(e.D):Vo(Do),e.a.onreadystatechange=m(e.Vb,e);try{rs(e.b,Es(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return rs(e.b,Es(e,"Error opening Xhr: "+t.message)),void ys(e,t)}t=r||"";var o,s=new _n(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=bn(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=vs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!z(ps,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{_s(e),0<e.g&&(e.u=(o=e.a,Ht&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),rs(e.b,Es(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=yn(e.Ma,e.g,e)),rs(e.b,Es(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){rs(e.b,Es(e,"Send error: "+t.message)),ys(e,t)}}function vs(t){return"content-type"==t.toLowerCase()}function ys(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,gs(t),bs(t)}function gs(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(e){if(e.c&&void 0!==h)if(e.C[1]&&4==ws(e)&&2==Is(e))rs(e.b,Es(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))yn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){rs(e.b,Es(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Is(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(En)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!fs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){rs(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Is(e)+"]",gs(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){_s(e);var n=e.a,r=e.C[0]?s:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Yo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ws(t){return t.a?t.a.readyState:0}function Is(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Es(t,e){return e+" ["+t.R+" "+t.l+" "+Is(t)+"]"}function Ts(t){var e=Ls;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,ks(t)}function Cs(t){if(t.a){if(!t.v)throw new Ps;t.v=!1}}function As(t,e,n,r){t.g.push([e,n,r]),t.a&&ks(t)}function Ns(t){return H(t.g,function(t){return v(t[1])})}function ks(e){var n,r;e.h&&e.a&&Ns(e)&&(n=e.h,(r=xs[n])&&(l.clearTimeout(r.a),delete xs[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(P(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Ns(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Ts?(As(n,a,t),n.C=!0):n.then(a,t)),r&&(n=new Rs(n),xs[n.a]=n,e.h=n.a)}function Ps(){O.call(this)}function Os(){O.call(this)}function Rs(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=hs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Es(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Es(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),hs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?ms(this):this.Jc())},t.Jc=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return rs(this.b,"Can not get response: "+t.message),null}},Ts.prototype.cancel=function(t){var e;this.a?this.c instanceof Ts&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Os,Cs(this),Ss(this,!1,t)))},Ts.prototype.m=function(t,e){this.i=!1,Ss(this,t,e)},Ts.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return As(this,r,function(t){t instanceof Os?o.cancel():i(t)}),o.then(t,e,n)},Ts.prototype.$goog_Thenable=!0,w(Ps,O),Ps.prototype.message="Deferred has already fired",Ps.prototype.name="AlreadyCalledError",w(Os,O),Os.prototype.message="Deferred was canceled",Os.prototype.name="CanceledError",Rs.prototype.c=function(){throw delete xs[this.a],this.b};var xs={};function Ds(t){var e=document,n=wt(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new Ts(i),s=window.setTimeout(function(){Ms(r,!0);var t=new Us(js,"Timeout reached for loading script "+n);Cs(o),Ss(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ms(r,!1,s),Cs(o),Ss(o,!0,null))},r.onerror=function(){Ms(r,!0,s);var t=new Us(Fs,"Error while loading script "+n);Cs(o),Ss(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):a=null===a?f(l.document):a)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Ls(){var t;this&&this.Wb&&((t=this.Wb)&&"SCRIPT"==t.tagName&&Ms(t,!0,this.Ma))}function Ms(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Fs=0,js=1;function Us(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Vs(t){this.f=t}function qs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||zs,this.g=ht(t.secureTokenHeaders||Gs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ws,this.a=ht(t.firebaseHeaders||Ks),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Jl.INTERNAL.node&&Jl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new is(self):fr()?this.f=new Vs(n):this.f=new Ho,this.b=null}w(Us,O),w(Vs,Uo),Vs.prototype.a=function(){return new this.f},Vs.prototype.b=function(){return{}};var Bs,Hs="idToken",zs=new Or(3e4,6e4),Gs={"Content-Type":"application/x-www-form-urlencoded"},Ws=new Or(3e4,6e4),Ks={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ys(t,e){e&&(t.l=Xs("https://securetoken.googleapis.com/v1/token",e),t.h=Xs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Xs("https://identitytoolkit.googleapis.com/v2/",e))}function Xs(t,e){return t=Pn(t),e=Pn(e.url),t.f=t.a+t.f,Sn(t,e.c),t.a=e.a,Cn(t,e.g),t.toString()}function Js(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function $s(t,e,n,r,i,o,s){var a;(t=((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Ht&&Zt&&!(9<Zt))&&!hr()?(Bs=Bs||new pe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[ta]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},As(Ds(It(Zs,{onload:ta})),null,function(){r(Error("CORS_UNSUPPORTED"))},void 0))}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,s)}qs.prototype.T=function(){return this.b},qs.prototype.u=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new hs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return rs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),ds(a,t,e,r,i)};var Zs=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),ta="__fcb"+Math.floor(1e6*Math.random()).toString();function ea(t,e,n,r,i,o,s){var a=Pn(e+n);Nn(a,"key",t.c),s&&Nn(a,"cb",_().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Nn(a,c,i[c]);return new pe(function(e,n){$s(t,a.toString(),function(t){t?t.error?n(Xa(t,o||{})):e(t):n(new E("network-request-failed"))},r,u?void 0:Qn(Cr(i)),t.a,t.v.get())})}function na(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new E("invalid-email")}function ra(t){"email"in t&&na(t)}function ia(t){if(!t[Hs]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ht(t));throw new E("internal-error")}}function oa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}qs.prototype.s=function(t,n,r,i,o){var s=this;Bs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},qs.prototype.zb=function(){return Qa(this,Ma,{})},qs.prototype.Bb=function(t,e){return Qa(this,Da,{idToken:t,email:e})},qs.prototype.Cb=function(t,e){return Qa(this,La,{idToken:t,password:e})};var sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function aa(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ua(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ca(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(zn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ha(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=jo(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;ia(t)}function la(t,e){return e.returnIdpCredential=!0,Qa(t,Ua,e)}function fa(t,e){return e.returnIdpCredential=!0,Qa(t,qa,e)}function pa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qa(t,Va,e)}function da(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=qs.prototype).Db=function(t,r){var i={idToken:t},o=[];return ut(sa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Qa(this,Da,i)},t.vb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Qa(this,ka,t)},t.wb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Qa(this,Ca,t)},t.ub=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qa(this,Aa,t)},t.Eb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Qa(this,Na,t)},t.fb=function(t){return Qa(this,za,t)},t.nb=function(t,e){return Qa(this,Ra,{oobCode:t,newPassword:e})},t.Ra=function(t){return Qa(this,ya,{oobCode:t})},t.jb=function(t){return Qa(this,va,{oobCode:t})};var va={endpoint:"setAccountInfo",A:da,Z:"email",B:!0},ya={endpoint:"resetPassword",A:da,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},ga={endpoint:"signupNewUser",A:function(t){if(na(t),!t.password)throw new E("weak-password")},G:ia,V:!0,B:!0},ma={endpoint:"createAuthUri",B:!0},ba={endpoint:"deleteAccount",N:["idToken"]},_a={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},wa={endpoint:"emailLinkSignin",N:["email","oobCode"],A:na,G:ia,V:!0,B:!0},Ia={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:na,G:ia,V:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:aa,G:ia,B:!0,Na:!0},Ta={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:aa,G:ia,B:!0,Na:!0},Sa={endpoint:"getAccountInfo"},Ca={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");na(t)},Z:"email",B:!0},Aa={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},ka={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");na(t)},Z:"email",B:!0},Pa={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Oa={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Ra={endpoint:"resetPassword",A:da,Z:"email",B:!0},xa={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Da={endpoint:"setAccountInfo",N:["idToken"],A:ra,V:!0},La={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(ra(t),!t.password)throw new E("weak-password")},G:ia,V:!0},Ma={endpoint:"signupNewUser",G:ia,V:!0,B:!0},Fa={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},ja={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ua={endpoint:"verifyAssertion",A:ua,Ya:ca,G:ha,V:!0,B:!0},Va={endpoint:"verifyAssertion",A:ua,Ya:ca,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);ia(t)},V:!0,B:!0},qa={endpoint:"verifyAssertion",A:function(t){if(ua(t),!t.idToken)throw new E("internal-error")},Ya:ca,G:ha,V:!0},Ba={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:ia,V:!0,B:!0},Ha={endpoint:"verifyPassword",A:function(t){if(na(t),!t.password)throw new E("wrong-password")},G:ia,V:!0,B:!0},za={endpoint:"verifyPhoneNumber",A:oa,G:ia,B:!0},Ga={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");oa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",jo(t);ia(t)}},Wa={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:oa,G:ia,B:!0},Ka={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Hs]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function Qa(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return we(new E("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return _e(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ea(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]})}function Ya(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new E(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new E(i[n],e);return new E("internal-error",e=!e&&t?Sr(t):e)}function Ja(t){var o;this.b=t,this.a=null,this.rb=(o=this,(eu=eu||new pe(function(t,e){function n(){Pr(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Pr(),e(Error("Network Error"))},timeout:Za.get()})}var r;br("gapi.iframes.Iframe")?t():br("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},_e(Ds(r=It($a,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw eu=null,t})).then(function(){return new pe(function(r,i){br("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},tu.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var $a=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),Za=new Or(3e4,6e4),tu=new Or(5e3,15e3),eu=null;function nu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?On((t=Pn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):On("https",this.l,null,"/__/auth/iframe"),this.a=t,Nn(this.a,"apiKey",this.h),Nn(this.a,"appName",this.i),this.b=null,this.c=[]}function ru(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function iu(t){try{return Jl.app(t).auth().Ga()}catch(t){return[]}}function ou(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function su(t){var a=tr();return Qa(t,Pa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Pn(a)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Pn(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Mo(tr())})}function au(i){return i.m||(i.m=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=iu(i.b),(r=new nu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.v=new Ja(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Ro(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",_e(e)}return e.status="ERROR",_e(e)})}(i)}),i.m)}function uu(t){return t.l||(t.C=t.c?gr(t.c,iu(t.b)):null,t.l=new qs(t.g,k(t.i),t.C),t.f&&Ys(t.l,t.f)),t.l}function cu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new ru(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.yb(h).toString()}function hu(t){if(this.a=t||Jl.INTERNAL.reactNative&&Jl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lu(t){this.b=t,this.a={},this.f=m(this.c,this)}nu.prototype.toString=function(){return this.f?Nn(this.a,"v",this.f):Hn(this.a.b,"v"),this.b?Nn(this.a,"eid",this.b):Hn(this.a.b,"eid"),this.c.length?Nn(this.a,"fw",this.c.join(",")):Hn(this.a.b,"fw"),this.a.toString()},ru.prototype.yb=function(t){return this.h=t,this},ru.prototype.toString=function(){var t;if(Nn(t=this.v?On((t=Pn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):On("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),Nn(t,"appName",this.c),Nn(t,"authType",this.m),this.a.isOAuthProvider){var e,n=this.a;try{var r=Jl.app(this.c).auth().la()}catch(t){r=null}for(e in n.ob=r,Nn(t,"providerId",this.a.providerId),n=Cr((r=this.a).Ib))n[e]=n[e].toString();e=r.Qc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),ct(n)||Nn(t,"customParameters",Sr(n))}if("function"==typeof this.a.Qb&&((r=this.a.Qb()).length&&Nn(t,"scopes",r.join(","))),this.l?Nn(t,"redirectUrl",this.l):Hn(t.b,"redirectUrl"),this.g?Nn(t,"eventId",this.g):Hn(t.b,"eventId"),this.i?Nn(t,"v",this.i):Hn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&Nn(t,s,this.b[s]);return this.h?Nn(t,"tid",this.h):Hn(t.b,"tid"),this.f?Nn(t,"eid",this.f):Hn(t.b,"eid"),(s=iu(this.c)).length&&Nn(t,"fw",s.join(",")),t.toString()},(t=ou.prototype).Ob=function(e,n,t){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},au(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Xb=function(){var t=mr();return!Tr(t)&&!kr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,s,a){if(!e)return we(new E("popup-blocked"));if(s&&!Tr())return this.ma().o(function(t){rr(e),i(t)}),r(),_e();this.a||(this.a=su(uu(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){Po(n),s||er(cu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=su(uu(this)));var i=this;return this.a.then(function(){Po(e),er(cu(i.s,i.g,i.b,t,e,tr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return au(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new E("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){W(this.h,function(t){return t==e})},(t=hu.prototype).get=function(t){return _e(this.a.getItem(t)).then(function(t){return t&&Ar(t)})},t.set=function(t,e){return _e(this.a.setItem(t,Sr(e)))},t.U=function(t){return _e(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var fu,pu=[];function du(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function vu(t){this.a=t}function yu(t){this.c=t,this.b=!1,this.a=[]}function gu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return mu(r,c),t}).o(function(t){throw mu(r,c),t})}function mu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,function(t){return t==e}))}function bu(){if(!Eu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,V(pu,function(t){t.b==n&&(e=t)}),e||(e=new lu(n),pu.push(e)),e),du(this.v,"keyChanged",function(t,n){return Nu(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:z(e,n.key)}})}),du(this.v,"ping",function(){return _e(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?_e().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):_e(null)).then(function(t){(r.h=t)&&(r.g=new yu(new vu(t)),gu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&z(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function _u(i){return new pe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new pe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return _u(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function wu(t){return t.i||(t.i=_u(t)),t.i}function Iu(i,t){var o=0;return new pe(function e(n,r){wu(i).then(t).then(n).o(function(t){return 3<++o?void r(t):wu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Eu(){try{return l.indexedDB}catch(t){return}}function Tu(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Cu(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Au(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?gu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):_e();var n}function Nu(r){return wu(r).then(function(t){var i=Tu(Su(t,!1));return i.getAll?Cu(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function ku(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Pu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=_e().then(function(){if(Eu()){var e=Nr(),n="__sak"+e;return fu=fu||new bu,(i=fu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Ou(){this.a={},this.type="inMemory"}function Ru(){if(!function(){var t="Node"==lr();if(!(t=xu()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=xu()||Jl.INTERNAL.node.localStorage,this.type="localStorage"}function xu(){try{var t=l.localStorage,e=Nr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==lr();if(!(t=Mu()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Mu()||Jl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=l.sessionStorage,e=Nr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Fu(){var t={};t.Browser=Vu,t.Node=qu,t.ReactNative=Bu,t.Worker=Hu,this.a=t[lr()]}lu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(_e().then(function(){return t(n.origin,n.data.data)}))}),Ee(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},vu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},yu.prototype.close=function(){for(;0<this.a.length;)mu(this,this.a[0]);this.b=!0},(t=bu.prototype).set=function(r,i){var o=this,s=!1;return Iu(this,function(t){return Cu((t=Tu(Su(t,!0))).get(r))}).then(function(n){return Iu(o,function(t){if(t=Tu(Su(t,!0)),n)return n.value=i,Cu(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,Cu(t.add(e))})}).then(function(){return o.c[r]=i,Au(o,r)}).oa(function(){s&&o.b--})},t.get=function(e){return Iu(this,function(t){return Cu(Tu(Su(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return Iu(this,function(t){return r=!0,n.b++,Cu(Tu(Su(t,!0)).delete(e))}).then(function(){return delete n.c[e],Au(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(ku(n=this),function e(){n.f=setTimeout(function(){n.l=Nu(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){W(this.a,function(t){return t==e}),0==this.a.length&&ku(this)},(t=Pu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){W(this.a,function(t){return t==e})},(t=Ou.prototype).get=function(t){return _e(this.a[t])},t.set=function(t,e){return this.a[t]=e,_e()},t.U=function(t){return delete this.a[t],_e()},t.ca=function(){},t.ia=function(){},(t=Ru.prototype).get=function(t){var e=this;return _e().then(function(){return Ar(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ze(l.window,"storage",t)},t.ia=function(t){l.window&&nn(l.window,"storage",t)},(t=Du.prototype).get=function(){return _e(null)},t.set=function(){return _e()},t.U=function(){return _e()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return _e().then(function(){return Ar(e.a.getItem(t))})},t.set=function(e,n){var r=this;return _e().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return _e().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var ju,Uu,Vu={F:Ru,bb:Lu},qu={F:Ru,bb:Lu},Bu={F:hu,bb:Du},Hu={F:Ru,bb:Du},zu={rd:"local",NONE:"none",td:"session"};function Gu(){var t=!(kr(mr())||!cr()),e=Tr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},t=ju=ju||new Fu;try{this.g=!Zn()&&Lr()||!l.indexedDB?new t.a.F:new Pu(new(hr()?Ou:t.a.F))}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Ou}this.v=new Ou,this.f=m(this.Yb,this),this.b={}}function Wu(){return Uu=Uu||new Gu}function Ku(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Yu(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),Ku(t,e.F).U(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ju(t){this.a=t,this.b=Wu()}(t=Gu.prototype).get=function(t,e){return Ku(this,t.F).get(Qu(t,e))},t.set=function(e,t,n){var r=Qu(e,n),i=this,o=Ku(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(Ku(this,"local").ca(this.f),this.h||(Zn()||!Lr())&&l.indexedDB||!this.l||(Xu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(W(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Ku(this,"local").ia(this.f),Xu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ku(this,"local").ia(this.f):Xu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};Ht&&Zt&&10==Zt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var $u,Zu={name:"authEvent",F:"local"};function tc(){this.a=Wu()}function ec(t,e){this.b=nc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===$u&&($u=l.Int32Array?new Int32Array(cc):cc),this.reset()}w(ec,function(){this.b=-1});for(var nc=64,rc=nc-1,ic=[],oc=0;oc<rc;oc++)ic[oc]=0;var sc=K(128,ic);function ac(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|$u[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function uc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ac(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ac(t),i=0)}}t.c=i,t.g+=n}ec.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var cc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){ec.call(this,8,lc)}w(hc,ec);var lc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function fc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new tc,this.g=new Ju(this.h),this.f=null,this.b=[],this.a=this.c=null}function pc(t){return new E("invalid-cordova-configuration",t)}function dc(t){var e=new hc;uc(e,t),t=[];var n=8*e.g;e.c<56?uc(e,sc,56-e.c):uc(e,sc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ac(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function vc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function yc(a){return a.f||(a.f=a.ma().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),gc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,n=(e=-1!=(n=Yi(r.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Ar(kn(e=Pn(n),"firebaseError")||null))?T(e):null)?new Oo(t.c,t.b,null,null,e,null,t.T()):new Oo(t.c,t.b,n,t.f,null,null,t.T()):e)||o),vc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Sa(t),!1}),i=a,o=new Oo("unknown",null,null,null,new E("no-auth-event")),t=!1,s=gn(500).then(function(){return gc(i).then(function(){t||vc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Lo=Lo||new xo,function(t){var n=Lo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=br("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function gc(e){var t,n=null;return(t=e.g).b.get(Zu,t.a).then(Ro).then(function(t){return n=t,Yu((t=e.g).b,Zu,t.a)}).then(function(){return n})}function mc(t){this.a=t,this.b=Wu()}(t=fc.prototype).ma=function(){return this.Ia||(this.Ia=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof br("universalLinks.subscribe",l))throw pc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",l))throw pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",l))throw pc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",l))throw pc("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")}))},t.Ob=function(t,e){return e(new E("operation-not-supported-in-this-environment")),_e()},t.Mb=function(){return we(new E("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return we(new E("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=_e().then(function(){return Po(e),yc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Oo(t,r,null,o,new E("no-auth-event"),null,i),a=br("BuildInfo.packageName",l);if("string"!=typeof a)throw new E("invalid-cordova-configuration");var u=br("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return we(new E("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=dc(o),c.sessionId=o;var h=cu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set(Zu,s.w(),t)}).then(function(){var t=br("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new E("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=br("cordova.plugins.browsertab.openUrl",l)))throw new E("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=br("cordova.InAppBrowser.open",l)))throw new E("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=br("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||gn(2e3).then(function(){t(new E("redirect-cancelled-by-user"))})},c=function(){Rr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return gc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null})},t.Ea=function(e){this.b.push(e),yc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Oo("unknown",null,null,null,new E("no-auth-event")),e(t))})},t.Sa=function(e){W(this.b,function(t){return t==e})};var bc={name:"pendingRedirect",F:"session"};function _c(t){return Yu(t.b,bc,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Mc,this.C=new qc,this.g=new mc(Dc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ic(this.D,this.v,this.m,S,this.J)}function Ic(t,e,n,r,i){var o=Jl.SDK_VERSION||null;return new(ur()?fc:ou)(t,e,n,o,r,i)}function Ec(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Tc(n){n.a.Xb()&&Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Pc(t)&&n.s(e)}),n.a.Tb()||Fc(n.b)}function Sc(n,t){z(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(bc,t.a).then(function(t){return"pending"==t}).then(function(t){t?_c(n.g).then(function(){Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Pc(t)&&n.s(e)})}):Tc(n)}).o(function(){Tc(n)})}function Cc(t,e){W(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Ic(this.D,this.v,this.m,null,this.J),this.i={}},wc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=_()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=_())),e=!0;break}}return Fc(this.b),e};var Ac=new Or(2e3,1e4),Nc=new Or(3e4,6e4);function kc(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Pc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oc(e,t,n,r,i){var o,s;return(s=e.g).b.set(bc,"pending",s.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(Pc(t))throw new E("operation-not-supported-in-this-environment");return o=t,_c(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new pe(function(){}):_c(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Rc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Ac.get())}wc.prototype.qa=function(){return this.b.qa()};var xc={};function Dc(t,e,n){return t=t+":"+e,t=n?t+":"+n.url:t}function Lc(t,e,n,r){var i=Dc(e,n,r);return xc[i]||(xc[i]=new wc(t,e,n,r)),xc[i]}function Mc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Fc(t){t.g||(t.g=!0,Vc(t,!1,null,null))}function jc(t){t.g&&!t.i&&Vc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return _e(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Vc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Bc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Hc(t,e){this.a=e,Vr(this,"verificationId",t)}function zc(t,e,n,r){return new Ao(t).fb(e,n).then(function(t){return new Hc(t,r)})}function Gc(t){var e=Li(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");qr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Qc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;V(e[Kc]||[],function(t){(t=Gr(t))&&i.b.push(t)}),Vr(this,"auth",this.a),Vr(this,"session",this.c),Vr(this,"hints",this.b)}Mc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Mc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Vc(this,!0,null,t.a),_e()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Vc(e,a,t,null)}).o(function(t){Vc(e,a,null,t)})}(this,t,e):we(new E("invalid-auth-event")):(Vc(this,!1,null,null),_e())):we(new E("invalid-auth-event"))},Mc.prototype.qa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new E("timeout"),n.a&&n.a.cancel(),n.a=gn(Nc.get()).then(function(){n.b||(n.g=!0,Vc(n,!0,null,r))}))})},qc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),_e()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(s,t,null,o)}).o(function(t){i.na(s,null,t,o)})):we(new E("invalid-auth-event"))):we(new E("invalid-auth-event"))},Hc.prototype.confirm=function(t){return t=No(this.verificationId,t),this.a(t)};var Kc="mfaInfo",Qc="mfaPendingCredential";function Yc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Vr(this,"resolver",this.b)}function Xc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Jc(){}function $c(t){Vr(this,"factorId",t.fa),this.a=t}function Zc(t){if($c.call(this,t),this.a.fa!=Ao.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function th(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function eh(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Qr]=t.uid),t.displayName&&(n[Wr]=t.displayName),t.enrollmentTime&&(n[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Yr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),nh(this,r)}function nh(t,e){t.b=e,Vr(t,"enrolledFactors",e)}function rh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ih(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function oh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function sh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function ah(t,e){t.b=Di(e[Hs]||""),t.a=e.refreshToken,sh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function uh(e,t){return r=e.f,i=t,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?$s(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Xa(t)):t.access_token&&t.refresh_token?e(t):n(new E("internal-error")):n(new E("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new E("internal-error"))}).then(function(t){return e.b=Di(t.access_token),e.a=t.refresh_token,sh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function ch(t,e){this.a=t||null,this.b=e||null,qr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function hh(t,e,n,r,i,o){qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function lh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Jl.SDK_VERSION?gr(Jl.SDK_VERSION):null;this.a=new qs(this.l,k(S),i),t.emulatorConfig&&Ys(this.a,t.emulatorConfig),this.b=new oh(this.a),bh(this,e[Hs]),ah(this.b,e),Vr(this,"refreshToken",this.b.a),Ih(this,n||{}),fn.call(this),this.R=!1,this.s&&wr()&&(this.i=Lc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new rh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Ys(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){dh(o,t.f)},this.ba=null,this.O=new eh(this,n),Vr(this,"multiFactor",this.O)}function fh(t,e){t.ja&&nn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Ze(e,"languageCodeChanged",t.Oa)}function ph(t,e){t.X&&nn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Ze(e,"emulatorConfigChanged",t.Aa)}function dh(t,e){t.$=e,Js(t.a,Jl.SDK_VERSION?gr(Jl.SDK_VERSION,t.$):null)}function vh(t,e){t.ba&&nn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Ze(e,"frameworkChanged",t.Ba)}function yh(e){try{return Jl.app(e.m).auth()}catch(t){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function gh(t){t.D||t.u.b||(t.u.start(),nn(t,"tokenChanged",t.aa),Ze(t,"tokenChanged",t.aa))}function mh(t){nn(t,"tokenChanged",t.aa),t.u.stop()}function bh(t,e){t.za=e,Vr(t,"_lat",e)}function _h(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ee(e).then(function(){return t})}function wh(t){t.i&&!t.R&&(t.R=!0,Sc(t.i,t))}function Ih(t,e){qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ch(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Eh(){}function Th(t){return _e().then(function(){if(t.D)throw new E("app-deleted")})}function Sh(t){return B(t.providerData,function(t){return t.providerId})}function Ch(t,e){e&&(Ah(t,e.providerId),t.providerData.push(e))}function Ah(t,e){W(t.providerData,function(t){return t.providerId==e})}function Nh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Vr(t,e,n)}function kh(e,t){var n,r;e!=t&&(qr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Vr(e,"metadata",new ch((r=t.metadata).a,r.b)):Vr(e,"metadata",new ch),V(t.providerData,function(t){Ch(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Vr(e,"refreshToken",e.b.a),nh(e.O,t.O.b))}function Ph(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Qa((e=i).a,Sa,{idToken:n}).then(m(e.Kc,e)).then(function(){return r||Nh(i,"isAnonymous",!1),t})})}function Oh(t,e){e[Hs]&&t.za!=e[Hs]&&(ah(t.b,e),t.dispatchEvent(new th("tokenChanged")),bh(t,e[Hs]),Nh(t,"refreshToken",t.b.a))}function Rh(t,e){return Ph(t).then(function(){if(z(Sh(t),e))return _h(t).then(function(){throw new E("provider-already-linked")})})}function xh(t,e,n){return Br({user:t,credential:ko(e),additionalUserInfo:e=Vi(e),operationType:n})}function Dh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function Lh(n,r,t,e,i){if(!wr())return we(new E("operation-not-supported-in-this-environment"));if(n.h&&!i)return we(n.h);var o=Ui(t.providerId),s=Nr(n.uid+":::"),a=null,u=ir(a=(!Tr()||cr())&&n.s&&t.isOAuthProvider?cu(n.s,n.l,n.m,r,t,null,s,Jl.SDK_VERSION||null,null,null,n.tenantId):a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Fh(n),!i)return n.I().then(function(){})}).then(function(){return kc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.na(r,null,new E("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=s,n.c=Rc(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?Br(t):null}).o(function(t){throw u&&rr(u),t}),jh(n,e,i)}function Mh(e,t,n,r,i){if(!wr())return we(new E("operation-not-supported-in-this-environment"));if(e.h&&!i)return we(e.h);var o=null,s=Nr(e.uid+":::");return r=r().then(function(){if(Fh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,_h(e)}).then(function(t){return t=e.ha?(t=e.ha).b.set(qh,e.w(),t.a):t}).then(function(){return Oc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return Bh(e.ha);throw o}).then(function(){if(o)throw o}),jh(e,r,i)}function Fh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new E("internal-error");throw new E("auth-domain-config-required")}}function jh(n,t,e){var r,i=(t=t,e=e,(r=n).h&&!e?(t.cancel(),we(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new th("userInvalidated")),r.h=t),t}));return n.J.push(i),i.oa(function(){G(n.J,i)}),i.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Xc(t.w(),yh(n),m(n.jc,n)):e)||t})}function Uh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Hs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new lh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&Ch(i,Br(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Vh(t){this.a=t,this.b=Wu()}Wc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[Kc],delete e[Qc],ft(e,t),n.g(e)})},w(Yc,E),Jc.prototype.sb=function(t,e,n){return e.type==Ji?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Co(o.a)}),Qa(s,Ea,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Co(r.a)}),Qa(i,Ta,t)}));var r,i,o,s,a},w($c,Jc),w(Zc,$c),w(th,qe),(t=eh.prototype).yc=function(t){var e;nh(this,(t=t.hd,e=[],V(t.mfaInfo||[],function(t){(t=Gr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Xi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return Oh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Qa(e,Ka,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return nh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},rh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=gn(ih(n,t)).then(xr).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},rh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},oh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},oh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?uh(this,{grant_type:"refresh_token",refresh_token:this.a}):_e(null):_e({accessToken:this.b.toString(),refreshToken:this.a})},ch.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(lh,fn),lh.prototype.wa=function(t){this.ya=t,Qs(this.a,t)},lh.prototype.la=function(){return this.ya},lh.prototype.Ga=function(){return Q(this.$)},lh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Vr(lh.prototype,"providerId","firebase"),(t=lh.prototype).reload=function(){var t=this;return jh(this,Th(this).then(function(){return Ph(t).then(function(){return _h(t)}).then(Eh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Gc(t)})},t.I=function(t){var e=this;return jh(this,Th(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.za&&(bh(e,t.accessToken),e.dispatchEvent(new th("tokenChanged"))),Nh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");Ih(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,function(t){return new hh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ch(this,n[r]);Nh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new th("userReloaded",{hd:t}))},t.Lc=function(t){return jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return jh(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=xh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return jh(this,Rh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=xh(n,t,"link"),Dh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return jh(this,Rh(this,"phone").then(function(){return zc(yh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return jh(this,_e().then(function(){return zc(yh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return jh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.ed=function(e){var n=this;return jh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.Cb=function(e){var n=this;return jh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Th(this);var n=this;return jh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Nh(n,"displayName",t.displayName||null),Nh(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(Vr(t,"displayName",n.displayName),Vr(t,"photoURL",n.photoURL))}),_h(n)}).then(Eh))},t.cd=function(e){var n=this;return jh(this,Ph(this).then(function(t){return z(Sh(n),e)?Qa(n.a,_a,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(Sh(n),function(t){e[t]||Ah(n,t)}),e[Ao.PROVIDER_ID]||Vr(n,"phoneNumber",null),_h(n)}):_h(n).then(function(){throw new E("no-such-provider")})}))},t.delete=function(){var e=this;return jh(this,this.I().then(function(t){return Qa(e.a,ba,{idToken:t})}).then(function(){e.dispatchEvent(new th("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");fh(e,null),ph(e,null),vh(e,null),e.J=[],e.D=!0,mh(e),Vr(e,"refreshToken",null),e.i&&Cc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return Lh(this,"linkViaPopup",t,function(){return Rh(e,t.providerId).then(function(){return _h(e)})},!1)},t.Nc=function(t){return Lh(this,"reauthViaPopup",t,function(){return _e()},!0)},t.Fc=function(t){var e=this;return Mh(this,"linkViaRedirect",t,function(){return Rh(e,t.providerId)},!1)},t.Oc=function(t){return Mh(this,"reauthViaRedirect",t,function(){return _e()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return fa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=xh(i,t,"link"),Dh(i,t)}).then(function(){return o}),jh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return jh(this,_e().then(function(){return to(pa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=xh(i,t,"reauthenticate"),Oh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return jh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Pi(new _i(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return jh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Pi(new _i(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return jh(this,t=to(_e(t),n.uid).then(function(t){return e=xh(n,t,"reauthenticate"),Oh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.O.w()),e};var qh={name:"redirectUser",F:"session"};function Bh(t){return Yu(t.b,qh,t.a)}function Hh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=Qu(r,i),s=Ku(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Ar(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Gh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,zh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,m(this.g,this))}function zh(t,e){var n,a,r=[];for(n in zu)zu[n]!==e&&r.push(Yu(t.b,Wh(zu[n]),t.a));return r.push(Yu(t.b,Gh,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ie(a[s],b(t,s),o);else n(i)})}Hh.prototype.g=function(){var e=this,n=Wh("local");Xh(this,function(){return _e().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return zh(e,"local").then(function(){e.c=n})})})};var Gh={name:"persistence",F:"session"};function Wh(t){return{name:"authUser",F:t}}function Kh(t,e){return Xh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Qh(t){return Xh(t,function(){return Yu(t.b,t.c,t.a)})}function Yh(t,e,n){return Xh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Uh(t||{})})})}function Xh(t,e){return t.f=t.f.then(e,e),t.f}function Jh(t){if(this.l=!1,Vr(this,"settings",new Bc),Vr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new E("invalid-api-key");var n,e,r,i,o,s;t=Jl.SDK_VERSION?gr(Jl.SDK_VERSION):null,this.a=new qs(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.s=[],this.O=[],this.hb=Jl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=Jl.INTERNAL.createSubscribe(m(this.Ac,this)),il(this,null),this.i=new Hh(this.app.options.apiKey+":"+this.app.name),this.D=new Vh(this.app.options.apiKey+":"+this.app.name),this.$=cl(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(qh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Uh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),Bh(e.D)});return cl(e,t)}(n).then(function(){return Yh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Kh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Qh(n.i)})):null}).then(function(t){il(n,t||null)}),cl(n,t))),this.h=cl(this,(r=this).$.then(function(){return nl(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Wh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=Lc(o,s,i.app.name,i.P),Sc(i.b,i),sl(i)&&wh(sl(i)),i.m&&(wh(i.m),(t=i.m).wa(i.la()),fh(t,i),dh(t=i.m,i.J),vh(t,i),Ys((t=i.m).a,i.P),ph(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,fn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.P?Br({protocol:(t=Pn(this.P.url)).c,host:t.a,port:t.g,options:Br({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function $h(t){qe.call(this,"languageCodeChanged"),this.h=t}function Zh(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function tl(t){qe.call(this,"frameworkChanged"),this.f=t}function el(t){return t.Oa||we(new E("auth-domain-config-required"))}function nl(t){if(!wr())return we(new E("operation-not-supported-in-this-environment"));var e=el(t).then(function(){return t.b.qa()}).then(function(t){return t?Br(t):null});return cl(t,e)}function rl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.P&&(a.emulatorConfig=o.P),o.$.then(function(){return t=a,e=s,n=o.D,r=o.Ga(),i=new lh(t,e),n&&(i.ha=n),r&&dh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return sl(o)&&t.uid==sl(o).uid?kh(sl(o),t):(il(o,t),wh(t)),o.da(t)}).then(function(){ul(o)})}function il(t,e){var n,r;sl(t)&&(n=sl(t),r=t.Ba,W(n.S,function(t){return t==r}),nn(sl(t),"tokenChanged",t.ya),nn(sl(t),"userDeleted",t.za),nn(sl(t),"userInvalidated",t.Aa),mh(sl(t))),e&&(e.S.push(t.Ba),Ze(e,"tokenChanged",t.ya),Ze(e,"userDeleted",t.za),Ze(e,"userInvalidated",t.Aa),0<t.u&&gh(e)),Vr(t,"currentUser",e),e&&(e.wa(t.la()),fh(e,t),dh(e,t.J),vh(e,t),Ys(e.a,t.P),ph(e,t))}function ol(n,t){var e=null,r=null;return cl(n,t.then(function(t){return e=ko(t),r=Vi(t),rl(n,t)},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Xc(t.w(),n,m(n.kc,n)):e)||t}).then(function(){return Br({user:sl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function sl(t){return t.currentUser}function al(t){return sl(t)&&sl(t)._lat||null}function ul(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](al(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](al(t))}}function cl(t,e){return t.R.push(e),e.oa(function(){G(t.R,e)}),e}function hl(){}function ll(){this.a={},this.b=1e12}Hh.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in zu)if(zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(e),Xh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,zh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):_e()})},w(Jh,fn),w($h,qe),w(Zh,qe),w(tl,qe),(t=Jh.prototype).xb=function(t){return t=this.i.xb(t),cl(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Qs(this.a,this.aa),this.dispatchEvent(new $h(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Ys(this.a,this.P),this.dispatchEvent(new Zh(this.P))}var n},t.Gc=function(t){this.J.push(t),Js(this.a,Jl.SDK_VERSION?gr(Jl.SDK_VERSION,this.J):null),this.dispatchEvent(new tl(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:sl(this)&&sl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return ol(i,la(i.a,o))})},t.Xc=function(e){if(!wr())return we(new E("operation-not-supported-in-this-environment"));var n=this,t=Ui(e.providerId),r=Nr(),i=null,o=ir(i=(!Tr()||cr())&&this.app.options.authDomain&&e.isOAuthProvider?cu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Jl.SDK_VERSION||null,null,null,this.T(),this.P):i,t&&t.ua,t&&t.ta);return cl(this,t=el(this).then(function(t){return kc(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new pe(function(t,e){n.na("signInViaPopup",null,new E("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Rc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?Br(t):null}).o(function(t){throw o&&rr(o),t}))},t.Yc=function(t){if(!wr())return we(new E("operation-not-supported-in-this-environment"));var e=this;return cl(this,el(this).then(function(){return Xh(t=e.i,function(){return t.b.set(Gh,t.c.F,t.a)});var t}).then(function(){return Oc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return nl(this).then(function(t){return e.b&&jc(e.b.b),t}).o(function(t){throw e.b&&jc(e.b.b),t})},t.dd=function(t){if(!t)return we(new E("null-user"));if(this.S!=t.tenantId)return we(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.D,s=e.Ga(),a=r.b,(n={})[Hs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new lh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),s&&dh(i,s),kh(i,r),i);return cl(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return sl(e)&&t.uid==sl(e).uid?(kh(sl(e),t),e.da(t)):(il(e,u),wh(u),e.da(u))}).then(function(){ul(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&jc(t.b.b),sl(t)?(il(t,null),Qh(t.i).then(function(){ul(t)})):_e()});return cl(this,e)},t.Zc=function(){var r=this;return Yh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((n=sl(r)&&t)&&(n=sl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return kh(sl(r),t),sl(r).I();(sl(r)||t)&&(il(r,t),t&&(wh(t),t.ha=r.D),r.b&&Sc(r.b,r),ul(r))}})},t.da=function(t){return Kh(this.i,t)},t.mc=function(){ul(this),this.da(sl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return ol(e,_e(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(sl(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(sl(r))},(e=this).O.push(n),cl(e,e.h.then(function(){!e.l&&z(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(al(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(sl(r)):"function"==typeof t.next&&t.next(sl(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(sl(r)):"function"==typeof t.next&&t.next(sl(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return sl(e)?sl(e).I(t).then(function(t){return{accessToken:t}}):null});return cl(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return ol(n,Qa(n.a,Ba,{token:t}))}).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return ol(n,Qa(n.a,Ha,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return ol(n,Qa(n.a,ga,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return ol(e,t.ka(e.a))})},t.Sc=function(t){return jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=sl(n);if(t&&t.isAnonymous){var e=Br({providerId:null,isNewUser:!1});return Br({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return ol(n,n.a.zb()).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return sl(this)&&sl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&sl(this)&&gh(sl(this))},t.Pc=function(e){var n=this;V(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&sl(this)&&mh(sl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),cl(this,this.h.then(function(){e.l||z(e.s,t)&&t(al(e))}))},t.removeAuthTokenListener=function(e){W(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(Wh("local"),t.a,this.ja),this.b&&(Cc(this.b,this),jc(this.b.b)),Promise.resolve()},t.hc=function(t){return cl(this,Qa(this.a,ma,{identifier:t,continueUri:Ir()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!Eo(t)},t.wb=function(e,n){var r=this;return cl(this,_e().then(function(){var t=new _i(n);if(!t.c)throw new E("argument-error",Ei+" must be true when sending sign in link to email");return Pi(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return cl(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return cl(this,this.a.Ra(t).then(function(t){return new Jr(t)}))},t.jb=function(t){return cl(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return cl(this,_e().then(function(){return void 0===t||ct(t)?{}:Pi(new _i(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return cl(this,zc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return cl(this,_e().then(function(){var t=r||tr(),e=Io(n,t);if(!(t=Eo(t)))throw new E("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new E("tenant-id-mismatch");return i.$a(e)}))},hl.prototype.render=function(){},hl.prototype.reset=function(){},hl.prototype.getResponse=function(){},hl.prototype.execute=function(){};var fl=null;function pl(t,e){return(e=dl(e))&&t.a[e]||null}function dl(t){return(t=void 0===t?1e12:t)?t.toString():null}function vl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function yl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function gl(){}function ml(){}ll.prototype.render=function(t,e){return this.a[this.b.toString()]=new vl(t,e),this.b++},ll.prototype.reset=function(t){var e=pl(this,t);t=dl(t),e&&t&&(e.delete(),delete this.a[t])},ll.prototype.getResponse=function(t){return(t=pl(this,t))?t.getResponse():null},ll.prototype.execute=function(t){(t=pl(this,t))&&t.execute()},vl.prototype.getResponse=function(){return yl(this),this.b},vl.prototype.execute=function(){yl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},vl.prototype.delete=function(){yl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},Vr(gl,"FACTOR_ID","phone"),ml.prototype.g=function(){return _e(fl=fl||new ll)},ml.prototype.c=function(){};var bl=null;function _l(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var wl=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Il=new Or(3e4,6e4);_l.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new E("network-request-failed"))},Il.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new E("internal-error"))),delete l[o.a]},_e(Ds(It(wl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},_l.prototype.c=function(){this.b--};var El=null;function Tl(t,e,n,r,i,o,s){if(Vr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?bl=bl||new ml:El=El||new _l,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Al])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Nl],!l.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new qs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Sl];this.a[Sl]=function(t){var e;kl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=br(u,l))&&e(t)};var c=this.a[Cl];this.a[Cl]=function(){var t;kl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=br(c,l))&&t()}}var Sl="callback",Cl="expired-callback",Al="sitekey",Nl="size";function kl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Pl(t,e){return t.h.push(e),e.oa(function(){G(t.h,e)}),e}function Ol(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Rl(t,e,n){var r=!1;try{this.b=n||Jl.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Jl.SDK_VERSION?gr(Jl.SDK_VERSION,o):null,Tl.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,k(S),r)}function xl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Dl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Dl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=Tl.prototype).Ia=function(){var e=this;return this.f||(this.f=Pl(this,_e().then(function(){if(Ir()&&!hr())return ar();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,Qa(e.s,Oa,{})}).then(function(t){e.a[Al]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){Ol(this);var n=this;return Pl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Ol(this);var i=this;return Pl(this,this.render().then(function(e){return new pe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,W(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Ol(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ol(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.v);for(;t=e.firstChild;)e.removeChild(t)}},w(Rl,Tl);var Dl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ll(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ml(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Fl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:y}}function jl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ul(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Vl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function ql(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function Bl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Hl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function zl(t){return y(t)&&"string"==typeof t.uid}function Gl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Wl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Kl(t,e){for(var n in e){var r=e[n].name;t[r]=Xl(r,t[n],e[n].j)}}function Ql(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){xl(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Yl(t,e,n,r){t[e]=Xl(e,n,r)}function Xl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return xl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Kl(Jh.prototype,{jb:{name:"applyActionCode",j:[Ll("code")]},Ra:{name:"checkActionCode",j:[Ll("code")]},nb:{name:"confirmPasswordReset",j:[Ll("code"),Ll("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ll("email"),Ll("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Ll("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Ll("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Wl(Fl(),jl(),"nextOrObserver"),jl("opt_error",!0),jl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Wl(Fl(),jl(),"nextOrObserver"),jl("opt_error",!0),jl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Ll("email"),Wl(Fl("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Ll("email"),Fl("actionCodeSettings")]},xb:{name:"setPersistence",j:[Ll("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Vl()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Vl()]},Tc:{name:"signInWithCustomToken",j:[Ll("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Ll("email"),Ll("password")]},Vc:{name:"signInWithEmailLink",j:[Ll("email"),Ll("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Xc:{name:"signInWithPopup",j:[Bl()]},Yc:{name:"signInWithRedirect",j:[Bl()]},dd:{name:"updateCurrentUser",j:[Wl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof lh)}},Ul(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Ll("url"),Fl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Ll("code")]}}),Ql(Jh.prototype,{lc:{name:"languageCode",kb:Wl(Ll(),Ul(),"languageCode")},ti:{name:"tenantId",kb:Wl(Ll(),Ul(),"tenantId")}}),(Jh.Persistence=zu).LOCAL="local",Jh.Persistence.SESSION="session",Jh.Persistence.NONE="none",Kl(lh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ml("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ml("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Vl()]},qb:{name:"linkWithCredential",j:[Vl()]},Dc:{name:"linkWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Ec:{name:"linkWithPopup",j:[Bl()]},Fc:{name:"linkWithRedirect",j:[Bl()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vl()]},tb:{name:"reauthenticateWithCredential",j:[Vl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Ll("phoneNumber"),Gl()]},Nc:{name:"reauthenticateWithPopup",j:[Bl()]},Oc:{name:"reauthenticateWithRedirect",j:[Bl()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Wl(Fl("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ll(null,!0)]},cd:{name:"unlink",j:[Ll("provider")]},Bb:{name:"updateEmail",j:[Ll("email")]},Cb:{name:"updatePassword",j:[Ll("password")]},ed:{name:"updatePhoneNumber",j:[Vl("phone")]},Db:{name:"updateProfile",j:[Fl("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Ll("email"),Wl(Fl("opt_actionCodeSettings",!0),Ul(null,!0),"opt_actionCodeSettings",!0)]}}),Kl(ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Kl(pe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Ql(Bc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ml("appVerificationDisabledForTesting")}}),Kl(Hc.prototype,{confirm:{name:"confirm",j:[Ll("verificationCode")]}}),Yl(Zi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,_o,So,ro],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(Ll(),Fl(),"json")]),Yl(wo,"credential",function(t,e){return new bo(t,e)},[Ll("email"),Ll("password")]),Kl(bo.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(ho.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(ho,"credential",lo,[Wl(Ll(),Fl(),"token")]),Yl(wo,"credentialWithLink",Io,[Ll("email"),Ll("emailLink")]),Kl(fo.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(fo,"credential",po,[Wl(Ll(),Fl(),"token")]),Kl(vo.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(vo,"credential",yo,[Wl(Ll(),Wl(Fl(),Ul()),"idToken"),Wl(Ll(),Ul(),"accessToken",!0)]),Kl(go.prototype,{Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Yl(go,"credential",mo,[Wl(Ll(),Fl(),"token"),Ll("secret",!0)]),Kl(co.prototype,{Ca:{name:"addScope",j:[Ll("scope")]},credential:{name:"credential",j:[Wl(Ll(),Wl(Fl(),Ul()),"optionsOrIdToken"),Wl(Ll(),Ul(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Fl("customOAuthParameters")]}}),Kl(io.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(eo.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Yl(Ao,"credential",No,[Ll("verificationId"),Ll("verificationCode")]),Kl(Ao.prototype,{fb:{name:"verifyPhoneNumber",j:[Wl(Ll(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Hl(t.session,Ji)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Hl(t.session,$i)&&zl(t.multiFactorHint):t.session&&t.multiFactorUid?Hl(t.session,$i)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Gl()]}}),Kl(To.prototype,{w:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(E.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Fo.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Mo.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Yc.prototype,{toJSON:{name:"toJSON",j:[Ll(null,!0)]}}),Kl(Wc.prototype,{Rc:{name:"resolveSignIn",j:[ql()]}}),Kl(eh.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[ql(),Ll("displayName",!0)]},bd:{name:"unenroll",j:[Wl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:zl},Ll(),"multiFactorInfoIdentifier")]}}),Kl(Rl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Yl(li,"parseLink",bi,[Ll("link")]),Yl(gl,"assertion",function(t){return new Zc(t)},[Vl("phone")]),function(){if(void 0===Jl||!Jl.INTERNAL||!Jl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:$r,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Jh,AuthCredential:Zi,Error:E};Yl(t,"EmailAuthProvider",wo,[]),Yl(t,"FacebookAuthProvider",ho,[]),Yl(t,"GithubAuthProvider",fo,[]),Yl(t,"GoogleAuthProvider",vo,[]),Yl(t,"TwitterAuthProvider",go,[]),Yl(t,"OAuthProvider",co,[Ll("providerId")]),Yl(t,"SAMLAuthProvider",uo,[Ll("providerId")]),Yl(t,"PhoneAuthProvider",Ao,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Jh)}}]),Yl(t,"RecaptchaVerifier",Rl,[Wl(Ll(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Fl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Jl.app.App)}}]),Yl(t,"ActionCodeURL",li,[]),Yl(t,"PhoneMultiFactorGenerator",gl,[]),Jl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Jh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Jl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Jl.registerVersion("@firebase/auth","0.16.4"),Jl.INTERNAL.extendNamespace({User:lh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Rs=(xs.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Oo(e))},xs.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:Po(t)},xs.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},xs.prototype.prefixedName_=function(t){return this.prefix_+t},xs.prototype.toString=function(){return this.domStorage_.toString()},xs);function xs(t){this.domStorage_=t,this.prefix_="firebase:"}var Ds=(Ls.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ls.prototype.get=function(t){return xo(this.cache_,t)?this.cache_[t]:null},Ls.prototype.remove=function(t){delete this.cache_[t]},Ls);function Ls(){this.cache_={},this.isInMemoryStorage=!0}function Ms(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,ao(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new jo).update(e),t=t.digest(),co.encodeByteArray(t)}function Fs(t,e){ao(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Ws.logLevel=us.VERBOSE,Ys=Ws.log.bind(Ws),e&&Gs.set("logging_enabled",!0)):"function"==typeof t?Ys=t:(Ys=null,Gs.remove("logging_enabled"))}function js(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Qs.apply(void 0,no(t));Ws.error(n)}function Us(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Vs(t,e){return t===e?0:t<e?-1:1}function qs(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Oo(e))}function Bs(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Hs,Sn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Rs(e)}}catch(t){}return new Ds},zs=Sn("localStorage"),Gs=Sn("sessionStorage"),Ws=new ds("@firebase/database"),Ks=(Hs=1,function(){return Hs++}),Qs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Qs.apply(null,i):n+="object"==typeof i?Oo(i):i,n+=" "}return n},Ys=null,Xs=!0,Js=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Xs&&(Xs=!1,null===Ys&&!0===Gs.get("logging_enabled")&&Fs(!0)),Ys&&(t=Qs.apply(null,e),Ys(t))},$s=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Js.apply(void 0,no([n],t))}},Zs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Qs.apply(void 0,no(t));throw Ws.error(n),new Error(n)},ta=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Qs.apply(void 0,no(t));Ws.warn(n)},ea="[MIN_NAME]",na="[MAX_NAME]",ra=function(t,e){if(t===e)return 0;if(t===ea||e===na)return-1;if(e===ea||t===na)return 1;var n=la(t),r=la(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},ia=function(t){if("object"!=typeof t||null===t)return Oo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Oo(n[i]),r+=":",r+=ia(t[n[i]]);return r+="}"};function oa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function sa(t){var e,n,r,i;ao(!Us(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function aa(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ua=new RegExp("^-?(0*)\\d{1,10}$"),ca=-2147483648,ha=2147483647,la=function(t){if(ua.test(t)){t=Number(t);if(ca<=t&&t<=ha)return t}return null},fa=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ta("Exception was thrown by user callback.",t),e},Math.floor(0))}},pa=(da.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},da);function da(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function va(){return new pa("")}function ya(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ga(t){return t.pieces_.length-t.pieceNum_}function ma(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new pa(t.pieces_,e)}function ba(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function _a(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function wa(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new pa(e,0)}function Ia(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof pa)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)0<i[r].length&&n.push(i[r]);return new pa(n,0)}function Ea(t){return t.pieceNum_>=t.pieces_.length}function Ta(t,e){var n=ya(t),r=ya(e);if(null===n)return e;if(n===r)return Ta(ma(t),ma(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Sa(t,e){for(var n=_a(t,0),r=_a(e,0),i=0;i<n.length&&i<r.length;i++){var o=ra(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ca(t,e){if(ga(t)!==ga(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Aa(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ga(t)>ga(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var Na=(Object.defineProperty(ka,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(ka,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),ka.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Qo(t),this.checkValid_()},ka.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Qo(t),0<this.parts_.length&&--this.byteLength_},ka.prototype.checkValid_=function(){if(this.byteLength_>ka.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+ka.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>ka.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ka.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},ka.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},ka);function ka(t,e){this.errorPrefix_=e,this.parts_=_a(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Qo(this.parts_[n]);this.checkValid_()}var Pa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Oa="websocket",Ra="long_polling",xa=(Da.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Da.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Da.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&zs.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Da.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Da.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Da);function Da(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=zs.get("host:"+t)||this._host}function La(t,e,n){var r;if(ao("string"==typeof e,"typeof type must == string"),ao("object"==typeof n,"typeof params must == object"),e===Oa)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==Ra)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return oa(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}function Ma(t){return"string"==typeof t&&0!==t.length&&!Ya.test(t)}function Fa(t){return"string"==typeof t&&0!==t.length&&!Xa.test(t)}function ja(t){return null===t||"string"==typeof t||"number"==typeof t&&!Us(t)||t&&"object"==typeof t&&xo(t,".sv")}function Ua(t,e,n,r,i){i&&void 0===n||$a(Go(t,e,i),n,r)}function Va(t,e,n,r,i){if(!i||void 0!==n){var o=Go(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];oa(n,function(t,e){t=new pa(t);if($a(o,e,Ia(r,t)),".priority"===ba(t)&&!ja(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=_a(n=e[r]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Ma(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Sa);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&Aa(s,n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function qa(t,e,n,r){if(!r||void 0!==n){if(Us(n))throw new Error(Go(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ja(n))throw new Error(Go(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ba(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Go(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ha(t,e,n,r){if(!(r&&void 0===n||Ma(n)))throw new Error(Go(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function za(t,e,n,r){if(!(r&&void 0===n||Fa(n)))throw new Error(Go(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Ga(t,e){if(".info"===ya(e))throw new Error(t+" failed = Can't modify data under /.info/")}var Wa,Ka=function(t,e){var n=Qa(t),r=n.namespace;"firebase.com"===n.domain&&Zs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ta("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");t="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new xa(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new pa(n.pathString)}},Qa=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=to(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ta("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},Ya=/[\[\].#$\/\u0000-\u001F\u007F]/,Xa=/[\[\].#$\u0000-\u001F\u007F]/,Ja=10485760,$a=function(n,t,e){var r=e instanceof pa?new Na(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(Us(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Ja/3&&Qo(t)>Ja)throw new Error(n+"contains a string greater than "+Ja+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(oa(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Ma(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),$a(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},Za=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ma(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Fa(r)))throw new Error(Go(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};function tu(t){return"number"==typeof t?"number:"+sa(t):"string:"+t}var eu,nu=function(t){var e;t.isLeafNode()?(e=t.val(),ao("string"==typeof e||"number"==typeof e||"object"==typeof e&&xo(e,".sv"),"Priority must be a string or number.")):ao(t===Wa||t.isEmpty(),"priority of unexpected type."),ao(t===Wa||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},ru=(Object.defineProperty(iu,"__childrenNodeConstructor",{get:function(){return eu},set:function(t){eu=t},enumerable:!1,configurable:!0}),iu.prototype.isLeafNode=function(){return!0},iu.prototype.getPriority=function(){return this.priorityNode_},iu.prototype.updatePriority=function(t){return new iu(this.value_,t)},iu.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:iu.__childrenNodeConstructor.EMPTY_NODE},iu.prototype.getChild=function(t){return Ea(t)?this:".priority"===ya(t)?this.priorityNode_:iu.__childrenNodeConstructor.EMPTY_NODE},iu.prototype.hasChild=function(){return!1},iu.prototype.getPredecessorChildName=function(t,e){return null},iu.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:iu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},iu.prototype.updateChild=function(t,e){var n=ya(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(ao(".priority"!==n||1===ga(t),".priority must be the last token in a path"),this.updateImmediateChild(n,iu.__childrenNodeConstructor.EMPTY_NODE.updateChild(ma(t),e)))},iu.prototype.isEmpty=function(){return!1},iu.prototype.numChildren=function(){return 0},iu.prototype.forEachChild=function(t,e){return!1},iu.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},iu.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+tu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?sa(this.value_):this.value_,this.lazyHash_=Ms(t)),this.lazyHash_},iu.prototype.getValue=function(){return this.value_},iu.prototype.compareTo=function(t){return t===iu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof iu.__childrenNodeConstructor?-1:(ao(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},iu.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=iu.VALUE_TYPE_ORDER.indexOf(e),i=iu.VALUE_TYPE_ORDER.indexOf(n);return ao(0<=r,"Unknown leaf type: "+e),ao(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},iu.prototype.withIndex=function(){return this},iu.prototype.isIndexed=function(){return!0},iu.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},iu.VALUE_TYPE_ORDER=["object","boolean","number","string"],iu);function iu(t,e){void 0===e&&(e=iu.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ao(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),nu(this.priorityNode_)}var ou=(su.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},su.prototype.hasNext=function(){return 0<this.nodeStack_.length},su.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},su);function su(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var au=(uu.prototype.copy=function(t,e,n,r,i){return new uu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},uu.prototype.count=function(){return this.left.count()+1+this.right.count()},uu.prototype.isEmpty=function(){return!1},uu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},uu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},uu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},uu.prototype.minKey=function(){return this.min_().key},uu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},uu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},uu.prototype.removeMin_=function(){if(this.left.isEmpty())return hu.EMPTY_NODE;var t=this;return(t=(t=!t.left.isRed_()&&!t.left.left.isRed_()?t.moveRedLeft_():t).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},uu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_())?r.moveRedLeft_():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_())?r.moveRedRight_():r).key)){if(r.right.isEmpty())return hu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},uu.prototype.isRed_=function(){return this.color},uu.prototype.fixUp_=function(){var t=this;return t=(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},uu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t=t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},uu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t=t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},uu.prototype.rotateLeft_=function(){var t=this.copy(null,null,uu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},uu.prototype.rotateRight_=function(){var t=this.copy(null,null,uu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},uu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},uu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},uu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},uu.RED=!0,uu.BLACK=!1,uu);function uu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:uu.RED,this.left=null!=r?r:hu.EMPTY_NODE,this.right=null!=i?i:hu.EMPTY_NODE}cu.prototype.copy=function(t,e,n,r,i){return this},cu.prototype.insert=function(t,e,n){return new au(t,e,null)},cu.prototype.remove=function(t,e){return this},cu.prototype.count=function(){return 0},cu.prototype.isEmpty=function(){return!0},cu.prototype.inorderTraversal=function(t){return!1},cu.prototype.reverseTraversal=function(t){return!1},cu.prototype.minKey=function(){return null},cu.prototype.maxKey=function(){return null},cu.prototype.check_=function(){return 0},cu.prototype.isRed_=function(){return!1},K=cu;function cu(){}var hu=(lu.prototype.insert=function(t,e){return new lu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,au.BLACK,null,null))},lu.prototype.remove=function(t){return new lu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,au.BLACK,null,null))},lu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},lu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},lu.prototype.isEmpty=function(){return this.root_.isEmpty()},lu.prototype.count=function(){return this.root_.count()},lu.prototype.minKey=function(){return this.root_.minKey()},lu.prototype.maxKey=function(){return this.root_.maxKey()},lu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},lu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},lu.prototype.getIterator=function(t){return new ou(this.root_,null,this.comparator_,!1,t)},lu.prototype.getIteratorFrom=function(t,e){return new ou(this.root_,t,this.comparator_,!1,e)},lu.prototype.getReverseIteratorFrom=function(t,e){return new ou(this.root_,t,this.comparator_,!0,e)},lu.prototype.getReverseIterator=function(t){return new ou(this.root_,null,this.comparator_,!0,t)},lu.EMPTY_NODE=new K,lu);function lu(t,e){void 0===e&&(e=lu.EMPTY_NODE),this.comparator_=t,this.root_=e}var fu=(pu.Wrap=function(t,e){return new pu(t,e)},pu);function pu(t,e){this.name=t,this.node=e}var du,vu,yu,gu=(mu.prototype.getCompare=function(){return this.compare.bind(this)},mu.prototype.indexedValueChanged=function(t,e){t=new fu(ea,t),e=new fu(ea,e);return 0!==this.compare(t,e)},mu.prototype.minPost=function(){return fu.MIN},mu);function mu(){}function bu(){return null!==yu&&yu.apply(this,arguments)||this}var _u,wu,Iu=new(Xi(bu,yu=gu),bu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?ra(t.name,e.name):r},bu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},bu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},bu.prototype.minPost=function(){return fu.MIN},bu.prototype.maxPost=function(){return new fu(na,new ru("[PRIORITY-POST]",vu))},bu.prototype.makePost=function(t,e){t=du(t);return new fu(e,new ru("[PRIORITY-POST]",t))},bu.prototype.toString=function(){return".priority"},bu),W=(Xi(Eu,wu=gu),Object.defineProperty(Eu,"__EMPTY_NODE",{get:function(){return _u},set:function(t){_u=t},enumerable:!1,configurable:!0}),Eu.prototype.compare=function(t,e){return ra(t.name,e.name)},Eu.prototype.isDefinedOn=function(t){throw uo("KeyIndex.isDefinedOn not expected to be called.")},Eu.prototype.indexedValueChanged=function(t,e){return!1},Eu.prototype.minPost=function(){return fu.MIN},Eu.prototype.maxPost=function(){return new fu(na,_u)},Eu.prototype.makePost=function(t,e){return ao("string"==typeof t,"KeyIndex indexValue must always be a string."),new fu(t,_u)},Eu.prototype.toString=function(){return".key"},Eu);function Eu(){return null!==wu&&wu.apply(this,arguments)||this}var Tu=new W,Su=Math.log(2),Cu=(Au.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Au);function Au(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Su,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Nu,ku,Pu=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new au(i,r.node,au.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new au(i,r.node,au.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new au(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,au.BLACK):(r(u,au.BLACK),r(u,au.RED))}return n}(new Cu(c.length));return new hu(e||t,n)},Ou={},Ru=(Object.defineProperty(xu,"Default",{get:function(){return ao(Iu,"ChildrenNode.ts has not been loaded"),Nu=Nu||new xu({".priority":Ou},{".priority":Iu})},enumerable:!1,configurable:!0}),xu.prototype.get=function(t){var e=Do(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof hu?e:null},xu.prototype.hasIndex=function(t){return xo(this.indexSet_,t.toString())},xu.prototype.addIndex=function(t,e){ao(t!==Tu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(fu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Pu(r,t.getCompare()):Ou;var a=t.toString(),u=Ji({},this.indexSet_);u[a]=t;e=Ji({},this.indexes_);return e[a]=n,new xu(e,u)},xu.prototype.addToIndexes=function(s,a){var u=this;return new xu(Mo(this.indexes_,function(t,e){var n=Do(u.indexSet_,e);if(ao(n,"Missing index implementation for "+e),t===Ou){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(fu.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Pu(r,n.getCompare())}return Ou}n=a.get(s.name);return(t=n?t.remove(new fu(s.name,n)):t).insert(s,s.node)}),this.indexSet_)},xu.prototype.removeFromIndexes=function(n,r){return new xu(Mo(this.indexes_,function(t){if(t===Ou)return t;var e=r.get(n.name);return e?t.remove(new fu(n.name,e)):t}),this.indexSet_)},xu);function xu(t,e){this.indexes_=t,this.indexSet_=e}function Du(t,e){return ra(t.name,e.name)}function Lu(t,e){return ra(t,e)}var Mu,Fu=(Object.defineProperty(ju,"EMPTY_NODE",{get:function(){return ku=ku||new ju(new hu(Lu),null,Ru.Default)},enumerable:!1,configurable:!0}),ju.prototype.isLeafNode=function(){return!1},ju.prototype.getPriority=function(){return this.priorityNode_||ku},ju.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new ju(this.children_,t,this.indexMap_)},ju.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?ku:t},ju.prototype.getChild=function(t){var e=ya(t);return null===e?this:this.getImmediateChild(e).getChild(ma(t))},ju.prototype.hasChild=function(t){return null!==this.children_.get(t)},ju.prototype.updateImmediateChild=function(t,e){if(ao(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new fu(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ku:this.priorityNode_;return new ju(r,n,i)},ju.prototype.updateChild=function(t,e){var n=ya(t);if(null===n)return e;ao(".priority"!==ya(t)||1===ga(t),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(ma(t),e);return this.updateImmediateChild(n,e)},ju.prototype.isEmpty=function(){return this.children_.isEmpty()},ju.prototype.numChildren=function(){return this.children_.count()},ju.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Iu,function(t,e){r[t]=e.val(n),i++,s&&ju.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},ju.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+tu(this.getPriority().val())+":"),this.forEachChild(Iu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ms(n)),this.lazyHash_},ju.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new fu(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},ju.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},ju.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new fu(t,this.children_.get(t)):null},ju.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},ju.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new fu(t,this.children_.get(t)):null},ju.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},ju.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},ju.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,fu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},ju.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},ju.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,fu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},ju.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Vu?-1:0},ju.prototype.withIndex=function(t){if(t===Tu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new ju(this.children_,this.priorityNode_,t)},ju.prototype.isIndexed=function(t){return t===Tu||this.indexMap_.hasIndex(t)},ju.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Iu),n=t.getIterator(Iu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},ju.prototype.resolveIndex_=function(t){return t===Tu?null:this.indexMap_.get(t.toString())},ju.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,ju);function ju(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&nu(this.priorityNode_),this.children_.isEmpty()&&ao(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Uu(){return Mu.call(this,new hu(Lu),Fu.EMPTY_NODE,Ru.Default)||this}var Vu=new(Xi(Uu,Mu=Fu),Uu.prototype.compareTo=function(t){return t===this?0:1},Uu.prototype.equals=function(t){return t===this},Uu.prototype.getPriority=function(){return this},Uu.prototype.getImmediateChild=function(t){return Fu.EMPTY_NODE},Uu.prototype.isEmpty=function(){return!1},Uu);Object.defineProperties(fu,{MIN:{value:new fu(ea,Fu.EMPTY_NODE)},MAX:{value:new fu(na,Vu)}}),W.__EMPTY_NODE=Fu.EMPTY_NODE,ru.__childrenNodeConstructor=Fu,Wa=Vu,vu=Vu;var qu=!0;function Bu(n,t){if(void 0===t&&(t=null),null===n)return Fu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),ao(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new ru(n,Bu(t));if(n instanceof Array||!qu){var r=Fu.EMPTY_NODE;return oa(n,function(t,e){xo(n,t)&&"."!==t.substring(0,1)&&(!(e=Bu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Bu(t))}var i=[],o=!1;if(oa(n,function(t,e){"."!==t.substring(0,1)&&((e=Bu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new fu(t,e))))}),0===i.length)return Fu.EMPTY_NODE;var e=Pu(i,Du,function(t){return t.name},Lu);if(o){var s=Pu(i,Iu.getCompare());return new Fu(e,Bu(t),new Ru({".priority":s},{".priority":Iu}))}return new Fu(e,Bu(t),Ru.Default)}du=Bu;var Hu=(zu.prototype.getImmediateChild=function(t){return new zu(this.node_.getImmediateChild(t))},zu.prototype.node=function(){return this.node_},zu);function zu(t){this.node_=t}var Gu=(Wu.prototype.getImmediateChild=function(t){t=Ia(this.path_,t);return new Wu(this.syncTree_,t)},Wu.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Wu);function Wu(t,e){this.syncTree_=t,this.path_=e}var Ku,Qu=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},Yu=function(t,e,n){return t&&"object"==typeof t?(ao(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Xu(t[".sv"],e,n):"object"==typeof t[".sv"]?Ju(t[".sv"],e):void ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Xu=function(t,e,n){if("timestamp"===t)return n.timestamp;ao(!1,"Unexpected server value: "+t)},Ju=function(t,e,n){t.hasOwnProperty("increment")||ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&ao(!1,"Unexpected increment value: "+t);e=e.node();if(ao(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t},$u=function(t,e,n,r){return tc(e,new Gu(n,t),r)},Zu=function(t,e,n){return tc(t,new Hu(e),n)};function tc(t,r,i){var e=t.getPriority().val(),n=Yu(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Yu(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new ru(e,Bu(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new ru(n))),t.forEachChild(Iu,function(t,e){var n=tc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}function ec(){return{value:null,children:new Map}}function nc(t,e,n){var r;Ea(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=ya(e),t.children.has(r)||t.children.set(r,ec()),nc(t.children.get(r),e=ma(e),n))}function rc(t,n,r){var i;null!==t.value?r(n,t.value):(i=function(t,e){rc(e,new pa(n.toString()+"/"+t),r)},t.children.forEach(function(t,e){i(e,t)}))}function ic(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function oc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function sc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(Sn=Ku=Ku||{})[Sn.OVERWRITE=0]="OVERWRITE",Sn[Sn.MERGE=1]="MERGE",Sn[Sn.ACK_USER_WRITE=2]="ACK_USER_WRITE",Sn[Sn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var ac,uc=(cc.prototype.operationForChild=function(t){if(Ea(this.path)){if(null!=this.affectedTree.value)return ao(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new pa(t));return new cc(va(),e,this.revert)}return ao(ya(this.path)===t,"operationForChild called for unrelated child."),new cc(ma(this.path),this.affectedTree,this.revert)},cc);function cc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ku.ACK_USER_WRITE,this.source=ic()}var hc=(lc.fromObject=function(t){var n=new lc(null);return oa(t,function(t,e){n=n.set(new pa(t),e)}),n},lc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},lc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:va(),value:this.value};if(Ea(t))return null;var n=ya(t),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(ma(t),e);return null==e?null:{path:Ia(new pa(n),e.path),value:e.value}},lc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},lc.prototype.subtree=function(t){if(Ea(t))return this;var e=ya(t),e=this.children.get(e);return null!==e?e.subtree(ma(t)):new lc(null)},lc.prototype.set=function(t,e){if(Ea(t))return new lc(e,this.children);var n=ya(t),e=(this.children.get(n)||new lc(null)).set(ma(t),e),e=this.children.insert(n,e);return new lc(this.value,e)},lc.prototype.remove=function(t){if(Ea(t))return this.children.isEmpty()?new lc(null):new lc(null,this.children);var e=ya(t),n=this.children.get(e);if(n){n=n.remove(ma(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?new lc(null):new lc(this.value,t)}return this},lc.prototype.get=function(t){if(Ea(t))return this.value;var e=ya(t),e=this.children.get(e);return e?e.get(ma(t)):null},lc.prototype.setTree=function(t,e){if(Ea(t))return e;var n=ya(t),t=(this.children.get(n)||new lc(null)).setTree(ma(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new lc(this.value,e)},lc.prototype.fold=function(t){return this.fold_(va(),t)},lc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(Ia(n,t),r)}),r(n,this.value,i)},lc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,va(),e)},lc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(Ea(t))return null;var i=ya(t),r=this.children.get(i);return r?r.findOnPath_(ma(t),Ia(e,i),n):null},lc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,va(),e)},lc.prototype.foreachOnPath_=function(t,e,n){if(Ea(t))return this;this.value&&n(e,this.value);var r=ya(t),i=this.children.get(r);return i?i.foreachOnPath_(ma(t),Ia(e,r),n):new lc(null)},lc.prototype.foreach=function(t){this.foreach_(va(),t)},lc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(Ia(n,t),r)}),this.value&&r(n,this.value)},lc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},lc);function lc(t,e){void 0===e&&(e=ac=ac||new hu(Vs)),this.value=t,this.children=e}var fc=(pc.prototype.operationForChild=function(t){return Ea(this.path)?new pc(this.source,va()):new pc(this.source,ma(this.path))},pc);function pc(t,e){this.source=t,this.path=e,this.type=Ku.LISTEN_COMPLETE}var dc=(vc.prototype.operationForChild=function(t){return Ea(this.path)?new vc(this.source,va(),this.snap.getImmediateChild(t)):new vc(this.source,ma(this.path),this.snap)},vc);function vc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ku.OVERWRITE}var yc=(gc.prototype.operationForChild=function(t){if(Ea(this.path)){var e=this.children.subtree(new pa(t));return e.isEmpty()?null:e.value?new dc(this.source,va(),e.value):new gc(this.source,va(),e)}return ao(ya(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new gc(this.source,ma(this.path),this.children)},gc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},gc);function gc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ku.MERGE}var mc=(bc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},bc.prototype.isFiltered=function(){return this.filtered_},bc.prototype.isCompleteForPath=function(t){if(Ea(t))return this.isFullyInitialized()&&!this.filtered_;t=ya(t);return this.isCompleteForChild(t)},bc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},bc.prototype.getNode=function(){return this.node_},bc);function bc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var _c=(wc.prototype.updateEventSnap=function(t,e,n){return new wc(new mc(t,e,n),this.serverCache_)},wc.prototype.updateServerSnap=function(t,e,n){return new wc(this.eventCache_,new mc(t,e,n))},wc.prototype.getEventCache=function(){return this.eventCache_},wc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},wc.prototype.getServerCache=function(){return this.serverCache_},wc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},wc);function wc(t,e){this.eventCache_=t,this.serverCache_=e}function Ic(t){return{type:"value",snapshotNode:t}}function Ec(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Tc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Sc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Cc=(Ac.prototype.updateChild=function(t,e,n,r,i,o){ao(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Tc(e,s)):ao(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Ec(e,n)):o.trackChildChange(Sc(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Ac.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Iu,function(t,e){n.hasChild(t)||i.trackChildChange(Tc(t,e))}),n.isLeafNode()||n.forEachChild(Iu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Sc(t,e,n)):i.trackChildChange(Ec(t,e))})),n.withIndex(this.index_)},Ac.prototype.updatePriority=function(t,e){return t.isEmpty()?Fu.EMPTY_NODE:t.updatePriority(e)},Ac.prototype.filtersNodes=function(){return!1},Ac.prototype.getIndexedFilter=function(){return this},Ac.prototype.getIndex=function(){return this.index_},Ac);function Ac(t){this.index_=t}var Nc=(kc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ao("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),ao(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Sc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Tc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Ec(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw uo("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Sc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},kc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},kc);function kc(){this.changeMap=new Map}function Pc(){}var Oc=new(Pc.prototype.getCompleteChild=function(t){return null},Pc.prototype.getChildAfterChild=function(t,e,n){return null},Pc),Rc=(xc.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new mc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},xc.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},xc);function xc(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var Dc=function(t,e){this.viewCache=t,this.changes=e},Lc=(Mc.prototype.assertIndexed=function(t){ao(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),ao(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},Mc.prototype.applyOperation=function(t,e,n,r){var i=new Nc;if(e.type===Ku.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!Ea(o.path),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===Ku.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===Ku.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==Ku.LISTEN_COMPLETE)throw uo("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return Mc.maybeAddValueEvent_(t,s,i),new Dc(s,i)},Mc.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Ic(e.getCompleteEventSnap())))},Mc.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=Ea(e)?(ao(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof Fu?s:Fu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=ya(e))?(ao(1===ga(e),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=ma(e),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||Ea(e),this.filter_.filtersNodes())},Mc.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(Ea(e))h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=ya(e);if(!a.isCompleteForPath(e)&&1<ga(e))return t;c=ma(e),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,Oc,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||Ea(e),u.filtersNodes()),i=new Rc(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},Mc.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Rc(r,t,i);return Ea(e)?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=ya(e))?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=ma(e),i=u.getNode().getImmediateChild(s),a=void 0,a=Ea(r)?n:null!=(e=c.getCompleteChild(s))?".priority"===ba(r)&&e.getChild(wa(r)).isEmpty()?e:e.updateChild(r,n):Fu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},Mc.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},Mc.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=Ia(r,t);Mc.cacheHasChild_(n,ya(t))&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=Ia(r,t);Mc.cacheHasChild_(n,ya(t))||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},Mc.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},Mc.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=Ea(t)?e:new hc(null).setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new pa(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new pa(t),e,i,o,s,a))}),c},Mc.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(Ea(r)&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(Ea(r)){var u=new hc(null);return a.getNode().forEachChild(Tu,function(t,e){u=u.set(new pa(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=new hc(null);return e.foreach(function(t,e){var n=Ia(r,t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},Mc.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||Ea(e),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,Oc,r)},Mc.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new Rc(n,t,r),c=t.getEventCache().getNode(),r=void 0;return Ea(e)||".priority"===ya(e)?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),ao(s instanceof Fu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=ya(e),(r=null!=(a=null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)?c.getImmediateChild(s):a)?this.filter_.updateChild(c,s,a,ma(e),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,Fu.EMPTY_NODE,ma(e),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(va()),t.updateEventSnap(r,o,this.filter_.filtersNodes())},Mc);function Mc(t){this.filter_=t}var Fc=function(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()};function jc(n,t,e,r){var i=[],o=[];return t.forEach(function(t){var e;"child_changed"===t.type&&n.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))}),Uc(n,i,"child_removed",t,r,e),Uc(n,i,"child_added",t,r,e),Uc(n,i,"child_moved",o,r,e),Uc(n,i,"child_changed",t,r,e),Uc(n,i,"value",t,r,e),i}function Uc(o,s,e,t,a,u){t=t.filter(function(t){return t.type===e});t.sort(function(t,e){return function(t,e,n){if(null==e.childName||null==n.childName)throw uo("Should only compare child_ events.");e=new fu(e.childName,e.snapshotNode),n=new fu(n.childName,n.snapshotNode);return t.index_.compare(e,n)}(o,t,e)}),t.forEach(function(e){var t,n,r,i=(t=o,r=u,"value"===(n=e).type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n);a.forEach(function(t){t.respondsTo(e.type)&&s.push(t.createEvent(i,o.query_))})})}function Vc(t){if(t===""+ha)return"-";var e=la(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?na:(e=n[i],e=Gc.charAt(Gc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function qc(t){if(t===""+ca)return ea;var e=la(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+ha:(delete n[n.length-1],n.join("")):(n[n.length-1]=Gc.charAt(Gc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var Bc,Hc,zc,Gc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Wc=(Bc=0,Hc=[],function(t){var e=t===Bc;Bc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Gc.charAt(t%64),t=Math.floor(t/64);ao(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Hc[r];r--)Hc[r]=0;Hc[r]++}else for(r=0;r<12;r++)Hc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Gc.charAt(Hc[r]);return ao(20===i.length,"nextPushId: Length should be 20."),i});function Kc(){return null!==zc&&zc.apply(this,arguments)||this}var Qc,Yc=new(Xi(Kc,zc=gu),Kc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ra(t.name,e.name):n},Kc.prototype.isDefinedOn=function(t){return!0},Kc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},Kc.prototype.minPost=function(){return fu.MIN},Kc.prototype.maxPost=function(){return fu.MAX},Kc.prototype.makePost=function(t,e){t=Bu(t);return new fu(e,t)},Kc.prototype.toString=function(){return".value"},Kc),Xc=(Xi(Jc,Qc=gu),Jc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},Jc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},Jc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?ra(t.name,e.name):r},Jc.prototype.makePost=function(t,e){t=Bu(t),t=Fu.EMPTY_NODE.updateChild(this.indexPath_,t);return new fu(e,t)},Jc.prototype.maxPost=function(){var t=Fu.EMPTY_NODE.updateChild(this.indexPath_,Vu);return new fu(na,t)},Jc.prototype.toString=function(){return _a(this.indexPath_,0).join("/")},Jc);function Jc(t){var e=Qc.call(this)||this;return e.indexPath_=t,ao(!Ea(t)&&".priority"!==ya(t),"Can't create PathIndex with empty path or .priority key"),e}var $c=(Zc.prototype.getStartPost=function(){return this.startPost_},Zc.prototype.getEndPost=function(){return this.endPost_},Zc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Zc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new fu(e,n))||(n=Fu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Zc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Fu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Fu.EMPTY_NODE),i=this;return e.forEachChild(Iu,function(t,e){i.matches(new fu(t,e))||(r=r.updateImmediateChild(t,Fu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Zc.prototype.updatePriority=function(t,e){return t},Zc.prototype.filtersNodes=function(){return!0},Zc.prototype.getIndexedFilter=function(){return this.indexedFilter_},Zc.prototype.getIndex=function(){return this.index_},Zc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Zc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Zc);function Zc(t){this.indexedFilter_=new Cc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Zc.getStartPost_(t),this.endPost_=Zc.getEndPost_(t)}var th=(eh.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new fu(e,n))||(n=Fu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},eh.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Fu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Fu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Fu.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();(l=!l&&h(u,s)<=0?!0:l)&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Fu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},eh.prototype.updatePriority=function(t,e){return t},eh.prototype.filtersNodes=function(){return!0},eh.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},eh.prototype.getIndex=function(){return this.index_},eh.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;ao(a.numChildren()===this.limit_,"");var u=new fu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Sc(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Tc(e,l));l=a.updateImmediateChild(e,Fu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Ec(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Tc(c.name,c.node)),i.trackChildChange(Ec(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Fu.EMPTY_NODE)):t},eh);function eh(t){this.rangedFilter_=new $c(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var nh=(rh.prototype.hasStart=function(){return this.startSet_},rh.prototype.hasStartAfter=function(){return this.startAfterSet_},rh.prototype.hasEndBefore=function(){return this.endBeforeSet_},rh.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},rh.prototype.getIndexStartValue=function(){return ao(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},rh.prototype.getIndexStartName=function(){return ao(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ea},rh.prototype.hasEnd=function(){return this.endSet_},rh.prototype.getIndexEndValue=function(){return ao(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},rh.prototype.getIndexEndName=function(){return ao(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:na},rh.prototype.hasLimit=function(){return this.limitSet_},rh.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},rh.prototype.getLimit=function(){return ao(this.limitSet_,"Only valid if limit has been set"),this.limit_},rh.prototype.getIndex=function(){return this.index_},rh.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},rh.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Iu},rh.prototype.copy=function(){var t=new rh;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},rh);function rh(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Iu}function ih(t,e,n){t=t.copy();return t.startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function oh(t,e,n){t=t.copy();return t.endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function sh(t,e){t=t.copy();return t.index_=e,t}function ah(t){var e,n={};return t.isDefault()||(e=t.index_===Iu?"$priority":t.index_===Yc?"$value":t.index_===Tu?"$key":(ao(t.index_ instanceof Xc,"Unrecognized index type!"),t.index_.toString()),n.orderBy=Oo(e),t.startSet_&&(n.startAt=Oo(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Oo(t.indexStartName_))),t.endSet_&&(n.endAt=Oo(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Oo(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}var uh,ch=(hh.prototype.getQuery=function(){return this.query_},hh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},hh.prototype.getCompleteNode=function(){return this.viewCache_.getCompleteEventSnap()},hh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!Ea(t)&&!e.getImmediateChild(ya(t)).isEmpty())?e.getChild(t):null},hh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},hh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},hh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(ao(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},hh.prototype.applyOperation=function(t,e,n){t.type===Ku.MERGE&&null!==t.source.queryId&&(ao(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),ao(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),ao(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},hh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Iu,function(t,e){n.push(Ec(t,e))}),e.isFullyInitialized()&&n.push(Ic(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},hh.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return jc(this.eventGenerator_,t,e,n)},hh);function hh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Cc(n.getIndex()),i=(o=n).loadsAllData()?new Cc(o.getIndex()):new(o.hasLimit()?th:$c)(o);this.processor_=new Lc(i);var t=e.getServerCache(),n=e.getEventCache(),o=r.updateFullNode(Fu.EMPTY_NODE,t.getNode(),null),e=i.updateFullNode(Fu.EMPTY_NODE,n.getNode(),null),r=new mc(o,t.isFullyInitialized(),r.filtersNodes()),i=new mc(e,n.isFullyInitialized(),i.filtersNodes());this.viewCache_=new _c(i,r),this.eventGenerator_=new Fc(this.query_)}var lh=function(){this.views=new Map};function fh(t,e,n,r){var i,o,s=e.source.queryId;if(null!==s){var a=t.views.get(s);return ao(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,n,r)}var u=[];try{for(var c=to(t.views.values()),h=c.next();!h.done;h=c.next())a=h.value,u=u.concat(a.applyOperation(e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function ph(t,e,n,r,i){var o=e.queryIdentifier(),t=t.views.get(o);if(t)return t;o=n.calcCompleteEventCache(i?r:null),t=!1,t=!!o||(o=r instanceof Fu?n.calcCompleteEventChildren(r):Fu.EMPTY_NODE,!1),i=new _c(new mc(o,t,!1),new mc(r,i,!1));return new ch(e,i)}function dh(t,e,n,r){var i,o,s=e.queryIdentifier(),a=[],u=[],c=bh(t);if("default"===s)try{for(var h=to(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=eo(l.value,2),p=f[0],d=f[1],u=u.concat(d.removeEventRegistration(n,r));d.isEmpty()&&(t.views.delete(p),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery()))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(s))&&(u=u.concat(d.removeEventRegistration(n,r)),d.isEmpty()&&(t.views.delete(s),d.getQuery().getQueryParams().loadsAllData()||a.push(d.getQuery())));return c&&!bh(t)&&a.push((ao(uh,"Reference.ts has not been loaded"),new uh(e.repo,e.path))),{removed:a,events:u}}function vh(t){var e,n,r=[];try{for(var i=to(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||r.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function yh(t,e){var n,r,i=null;try{for(var o=to(t.views.values()),s=o.next();!s.done;s=o.next())var a=s.value,i=i||a.getCompleteServerCache(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function gh(t,e){if(e.getQueryParams().loadsAllData())return _h(t);e=e.queryIdentifier();return t.views.get(e)}function mh(t,e){return null!=gh(t,e)}function bh(t){return null!=_h(t)}function _h(t){var e,n;try{for(var r=to(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var wh=(Ih.empty=function(){return new Ih(new hc(null))},Ih);function Ih(t){this.writeTree_=t}function Eh(t,e,n){if(Ea(e))return new wh(new hc(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,r=Ta(i,e),o=o.updateChild(r,n);return new wh(t.writeTree_.set(i,o))}n=new hc(n),n=t.writeTree_.setTree(e,n);return new wh(n)}function Th(t,n,e){var r=t;return oa(e,function(t,e){r=Eh(r,Ia(n,t),e)}),r}function Sh(t,e){if(Ea(e))return wh.empty();e=t.writeTree_.setTree(e,new hc(null));return new wh(e)}function Ch(t,e){return null!=Ah(t,e)}function Ah(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Ta(n.path,e)):null}function Nh(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Iu,function(t,e){n.push(new fu(t,e))}):t.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new fu(t,e.value))}),n}function kh(t,e){if(Ea(e))return t;var n=Ah(t,e);return new wh(null!=n?new hc(n):t.writeTree_.subtree(e))}function Ph(t){return t.writeTree_.isEmpty()}function Oh(t,e){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(ao(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(Ia(r,t),e,i)}),i=!i.getChild(r).isEmpty()&&null!==o?i.updateChild(Ia(r,".priority"),o):i}}(va(),t.writeTree_,e)}var Rh=(xh.prototype.childWrites=function(t){return new Dh(t,this)},xh.prototype.addOverwrite=function(t,e,n,r){ao(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=Eh(this.visibleWrites_,t,e)),this.lastWriteId_=n},xh.prototype.addMerge=function(t,e,n){ao(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=Th(this.visibleWrites_,t,e),this.lastWriteId_=n},xh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},xh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});ao(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:Aa(r.path,a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=Sh(this.visibleWrites_,r.path):oa(r.children,function(t){n.visibleWrites_=Sh(n.visibleWrites_,Ia(r.path,t))}),!0)},xh.prototype.getCompleteWriteData=function(t){return Ah(this.visibleWrites_,t)},xh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=kh(this.visibleWrites_,e);if(!r&&Ph(i))return t;if(r||null!=t||Ch(i,va()))return Oh(xh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(Aa(t.path,e)||Aa(e,t.path))},e),t||Fu.EMPTY_NODE);return null}i=Ah(this.visibleWrites_,e);if(null!=i)return i;i=kh(this.visibleWrites_,e);return Ph(i)?t:null!=t||Ch(i,va())?Oh(i,t||Fu.EMPTY_NODE):null},xh.prototype.calcCompleteEventChildren=function(t,e){var n=Fu.EMPTY_NODE,r=Ah(this.visibleWrites_,t);if(r)return r.isLeafNode()||r.forEachChild(Iu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=kh(this.visibleWrites_,t);return e.forEachChild(Iu,function(t,e){e=Oh(kh(i,new pa(t)),e);n=n.updateImmediateChild(t,e)}),Nh(i).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return Nh(kh(this.visibleWrites_,t)).forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},xh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){ao(n||r,"Either existingEventSnap or existingServerSnap must exist");t=Ia(t,e);if(Ch(this.visibleWrites_,t))return null;t=kh(this.visibleWrites_,t);return Ph(t)?r.getChild(e):Oh(t,r.getChild(e))},xh.prototype.calcCompleteChild=function(t,e,n){var r=Ia(t,e),t=Ah(this.visibleWrites_,r);return null!=t?t:n.isCompleteForChild(e)?Oh(kh(this.visibleWrites_,r),n.getNode().getImmediateChild(e)):null},xh.prototype.shadowingWrite=function(t){return Ah(this.visibleWrites_,t)},xh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=kh(this.visibleWrites_,t),t=Ah(a,va());if(null!=t)s=t;else{if(null==e)return[];s=Oh(a,e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},xh.prototype.recordContainsPath_=function(t,e){if(t.snap)return Aa(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Aa(Ia(t.path,n),e))return!0;return!1},xh.prototype.resetTree_=function(){this.visibleWrites_=xh.layerTree_(this.allWrites_,xh.DefaultFilter_,va()),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},xh.DefaultFilter_=function(t){return t.visible},xh.layerTree_=function(t,e,n){for(var r=wh.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)Aa(n,s)?r=Eh(r,a=Ta(n,s),o.snap):Aa(s,n)&&(a=Ta(s,n),r=Eh(r,va(),o.snap.getChild(a)));else{if(!o.children)throw uo("WriteRecord should have .snap or .children");Aa(n,s)?r=Th(r,a=Ta(n,s),o.children):Aa(s,n)&&(Ea(a=Ta(s,n))?r=Th(r,va(),o.children):(o=Do(o.children,ya(a)))&&(a=o.getChild(ma(a)),r=Eh(r,va(),a)))}}}return r},xh);function xh(){this.visibleWrites_=wh.empty(),this.allWrites_=[],this.lastWriteId_=-1}var Dh=(Lh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Lh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Lh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Lh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(Ia(this.treePath_,t))},Lh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Lh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Lh.prototype.child=function(t){return new Lh(Ia(this.treePath_,t),this.writeTree_)},Lh);function Lh(t,e){this.treePath_=t,this.writeTree_=e}var Mh=(Fh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new dc(ic(),t,e)):[]},Fh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);e=hc.fromObject(e);return this.applyOperationToSyncPoints_(new yc(ic(),t,e))},Fh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=new hc(null);return null!=n.snap?r=r.set(va(),!0):oa(n.children,function(t){r=r.set(new pa(t),!0)}),this.applyOperationToSyncPoints_(new uc(n.path,r,e))}return[]},Fh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new dc(oc(),t,e))},Fh.prototype.applyServerMerge=function(t,e){e=hc.fromObject(e);return this.applyOperationToSyncPoints_(new yc(oc(),t,e))},Fh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new fc(oc(),t))},Fh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];n=Fh.parseQueryKey_(r),r=n.path,n=n.queryId,t=Ta(r,t),e=new dc(sc(n),t,e);return this.applyTaggedOperation_(r,e)},Fh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){n=Fh.parseQueryKey_(r),r=n.path,n=n.queryId,t=Ta(r,t),e=hc.fromObject(e),e=new yc(sc(n),t,e);return this.applyTaggedOperation_(r,e)}return[]},Fh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){e=Fh.parseQueryKey_(n),n=e.path,e=e.queryId,t=Ta(n,t),t=new fc(sc(e),t);return this.applyTaggedOperation_(n,t)}return[]},Fh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=Ta(t,n);r=r||yh(e,t),i=i||bh(e)});var o=this.syncPointTree_.get(n);o?(i=i||bh(o),r=r||yh(o,va())):(o=new lh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?u=!0:(u=!1,r=Fu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){e=yh(e,va());e&&(r=r.updateImmediateChild(t,e))}));var s=mh(o,t);s||t.getQueryParams().loadsAllData()||(a=Fh.makeQueryKey_(t),ao(!this.queryToTagMap.has(a),"View does not exist, but we have a tag"),c=Fh.getNextQueryTag_(),this.queryToTagMap.set(a,c),this.tagToQueryMap.set(c,a));var a,u,c,h=this.pendingWriteTree_.childWrites(n),c=(c=e,u=ph(a=o,e=t,h,r,u=u),a.views.has(e.queryIdentifier())||a.views.set(e.queryIdentifier(),u),u.addEventRegistration(c),u.getInitialEvents(c));return s||i||(o=gh(o,t),c=c.concat(this.setupListener_(t,o))),c},Fh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||mh(o,t))){var a=dh(o,t,e,n);0===o.views.size&&(this.syncPointTree_=this.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return bh(e)});if(o&&!a){i=this.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=this.createListenerForView_(h);this.listenProvider_.startListening(Fh.queryForListening_(l),this.tagForQuery_(l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(Fh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(Fh.makeQueryKey_(t));r.listenProvider_.stopListening(Fh.queryForListening_(t),e)})),this.removeTags_(e)}return s},Fh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){t=yh(e,Ta(t,n));if(t)return t});return e.calcCompleteEventCache(n,r,t,!0)},Fh.prototype.getServerValue=function(t){var n=t.path,r=null;this.syncPointTree_.foreachOnPath(n,function(t,e){t=Ta(t,n);r=r||yh(e,t)});var e=this.syncPointTree_.get(n);e?r=r||yh(e,va()):(e=new lh,this.syncPointTree_=this.syncPointTree_.set(n,e));var i=null!=r,o=i?new mc(r,!0,!1):null;return ph(e,t,this.pendingWriteTree_.childWrites(t.path),i?o.getNode():Fu.EMPTY_NODE,i).getCompleteNode()},Fh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&bh(e))return[_h(e)];var r=[];return e&&(r=vh(e)),oa(n,function(t,e){r=r.concat(e)}),r})},Fh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=Fh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Fh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Fh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(Fh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)ao(!bh(n.value),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!Ea(t)&&e&&bh(e))return[_h(e).getQuery()];var r=[];return e&&(r=r.concat(vh(e).map(function(t){return t.getQuery()}))),oa(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(Fh.queryForListening_(s),this.tagForQuery_(s))}return e},Fh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Fu.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);t=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n}(t,n);return e.removeEventRegistration(n,null,t)}}},Fh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Fh.parseQueryKey_=function(t){var e=t.indexOf("$");return ao(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new pa(t.substr(0,e))}},Fh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Fh.prototype.tagForQuery_=function(t){t=Fh.makeQueryKey_(t);return this.queryToTagMap.get(t)},Fh.getNextQueryTag_=function(){return Fh.nextQueryTag_++},Fh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);return ao(n,"Missing sync point for query tag that we're tracking"),fh(n,e,this.pendingWriteTree_.childWrites(t),null)},Fh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(va()))},Fh.prototype.applyOperationHelper_=function(t,e,n,r){if(Ea(t.path))return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(va());null==n&&null!=i&&(n=yh(i,va()));var o=[],s=ya(t.path),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),o=i?o.concat(fh(i,t,r,n)):o},Fh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(va());null==o&&null!=e&&(o=yh(e,va()));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),u=e?u.concat(fh(e,i,s,o)):u},Fh.nextQueryTag_=1,Fh);function Fh(t){this.listenProvider_=t,this.syncPointTree_=new hc(null),this.pendingWriteTree_=new Rh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var jh=(Uh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Uh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Uh);function Uh(){this.rootNode_=Fu.EMPTY_NODE}var Vh=(qh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),xo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},qh.prototype.get=function(){return ho(this.counters_)},qh);function qh(){this.counters_={}}var Bh={},Hh={};function zh(t){t=t.toString();return Bh[t]||(Bh[t]=new Vh),Bh[t]}var Gh=(Wh.prototype.get=function(){var t=this.collection_.get(),n=Ji({},t);return this.last_&&oa(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Wh);function Wh(t){this.collection_=t,this.last_=null}var Kh=(Qh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;oa(t,function(t,e){0<e&&xo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),aa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Qh);function Qh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Gh(t);t=1e4+2e4*Math.random();aa(this.reportStats_.bind(this),Math.floor(t))}var Yh=function(){this.eventLists_=[],this.recursionDepth_=0};function Xh(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ca(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function Jh(t,e,n){Xh(t,n),Zh(t,function(t){return Ca(t,e)})}function $h(t,e,n){Xh(t,n),Zh(t,function(t){return Aa(t,e)||Aa(e,t)})}function Zh(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Ys&&Js("event: "+r.toString()),fa(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}tl.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=no(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},tl.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},tl.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},tl.prototype.validateEventType_=function(e){ao(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},K=tl;function tl(t){this.allowedEvents_=t,this.listeners_={},ao(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var el,nl=(Xi(rl,el=K),rl.getInstance=function(){return new rl},rl.prototype.getInitialEvent=function(t){return ao("visible"===t,"Unknown event type: "+t),[this.visible_]},rl);function rl(){var e,t,n=el.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var il,ol=(Xi(sl,il=K),sl.getInstance=function(){return new sl},sl.prototype.getInitialEvent=function(t){return ao("online"===t,"Unknown event type: "+t),[this.online_]},sl.prototype.currentlyOnline=function(){return this.online_},sl);function sl(){var t=il.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||yo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var al=(ul.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},ul.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];)if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&fa(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break},ul);function ul(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var cl="pLPCommand",hl="pRTLPCB",ll=(fl.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new al(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new pl(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=eo(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.hostname&&Pa.test(location.hostname)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},fl.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},fl.forceAllow=function(){fl.forceAllow_=!0},fl.forceDisallow=function(){fl.forceDisallow_=!0},fl.isAvailable=function(){return!!fl.forceAllow_||!(fl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},fl.prototype.markConnectionHealthy=function(){},fl.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},fl.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},fl.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},fl.prototype.send=function(t){t=Oo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=io(t);return co.encodeByteArray(t,!0)}(t),e=Bs(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},fl.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},fl.prototype.incrementIncomingBytes_=function(t){t=Oo(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},fl);function fl(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=$s(t),this.stats_=zh(e),this.urlFn=function(t){return La(e,Ra,t)}}var pl=(dl.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Js("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},dl.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},dl.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},dl.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},dl.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},dl.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},dl.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){Js("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},dl);function dl(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Ks(),window[cl+this.uniqueCallbackIdentifier]=t,window[hl+this.uniqueCallbackIdentifier]=e,this.myIFrame=dl.createIFrame_();var e="",i="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){Js("frame writing exception"),t.stack&&Js(t.stack),Js(t)}}var vl="";function yl(t){vl=t}var gl=null;"undefined"!=typeof MozWebSocket?gl=MozWebSocket:"undefined"!=typeof WebSocket&&(gl=WebSocket);var ml=(bl.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Pa.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),La(t,Oa,r)},bl.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,zs.set("previous_websocket_failure",!0);try{bo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new gl(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},bl.prototype.start=function(){},bl.forceDisallow=function(){bl.forceDisallow_=!0},bl.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==gl&&!bl.forceDisallow_},bl.previouslyFailed=function(){return zs.isInMemoryStorage||!0===zs.get("previous_websocket_failure")},bl.prototype.markConnectionHealthy=function(){zs.remove("previous_websocket_failure")},bl.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Po(t),this.onMessage(t))},bl.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},bl.prototype.extractFrameCount_=function(t){if(ao(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},bl.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},bl.prototype.send=function(t){this.resetKeepAlive();t=Oo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Bs(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},bl.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},bl.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},bl.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},bl.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},bl.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},bl.responsesRequiredToBeHealthy=2,bl.healthyTimeout=3e4,bl);function bl(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=$s(this.connId),this.stats_=zh(e),this.connURL=bl.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var _l=(Object.defineProperty(wl,"ALL_TRANSPORTS",{get:function(){return[ll,ml]},enumerable:!1,configurable:!0}),wl.prototype.initTransports_=function(t){var e,n,r=ml&&ml.isAvailable(),i=r&&!ml.previouslyFailed();if(t.webSocketOnly&&(r||ta("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ml];else{var o=this.transports_=[];try{for(var s=to(wl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},wl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},wl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},wl);function wl(t){this.initTransports_(t)}var Il=(El.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=aa(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},El.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},El.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},El.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},El.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},El.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},El.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},El.prototype.onSecondaryMessageReceived_=function(t){var e=qs("t",t),t=qs("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},El.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},El.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},El.prototype.onPrimaryMessageReceived_=function(t){var e=qs("t",t),t=qs("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},El.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},El.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},El.prototype.onControl_=function(t){var e=qs("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?js("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):js("Unknown control packet command: "+e)}},El.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ta("Protocol version mismatch detected"),this.tryStartUpgrade_())},El.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},El.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),aa(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},El.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},El.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):aa(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},El.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},El.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},El.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(zs.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},El.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},El.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},El.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},El.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},El);function El(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=$s("c:"+this.id+":"),this.transportManager_=new _l(e),this.log_("Connection created"),this.start_()}Tl.prototype.put=function(t,e,n,r){},Tl.prototype.merge=function(t,e,n,r){},Tl.prototype.refreshAuthToken=function(t){},Tl.prototype.onDisconnectPut=function(t,e,n){},Tl.prototype.onDisconnectMerge=function(t,e,n){},Tl.prototype.onDisconnectCancel=function(t,e){},Tl.prototype.reportStats=function(t){},W=Tl;function Tl(){}var Sl,Cl=1e3,Al=3e5,Nl=(Xi(kl,Sl=W),kl.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Oo(e)),ao(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},kl.prototype.get=function(t){var n=this,r=new fo,i={p:t.path.toString(),q:t.queryObject()},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},kl.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),ao(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},kl.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},kl.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;kl.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},kl.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&xo(t,"w")&&(t=Do(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),ta("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},kl.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},kl.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=Ro(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},kl.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=Ro(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},kl.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},kl.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},kl.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},kl.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},kl.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},kl.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},kl.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},kl.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},kl.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},kl.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},kl.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},kl.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Oo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},kl.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):js("Unrecognized action received from server: "+Oo(t)+"\nAre you using the latest client?")},kl.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},kl.prototype.scheduleConnect_=function(t){var e=this;ao(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},kl.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Cl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},kl.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Cl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},kl.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=Cl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},kl.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+kl.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){ao(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?Js("getToken() completed but was canceled"):(Js("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new Il(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){ta(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&ta(t),c())}))},kl.prototype.interrupt=function(t){Js("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},kl.prototype.resume=function(t){Js("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Lo(this.interruptReasons_)&&(this.reconnectDelay_=Cl,this.realtime_||this.scheduleConnect_(0))},kl.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},kl.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},kl.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return ia(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},kl.prototype.removeListen_=function(t,e){var n,r=new pa(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},kl.prototype.onAuthRevoked_=function(t,e){Js("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},kl.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},kl.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=to(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,to(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},kl.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+vl.replace(/\./g,"-")]=1,yo()?t["framework.cordova"]=1:mo()&&(t["framework.reactnative"]=1),this.reportStats(t)},kl.prototype.shouldReconnect_=function(){var t=ol.getInstance().currentlyOnline();return Lo(this.interruptReasons_)&&t},kl.nextPersistentConnectionId_=0,kl.nextConnectionId_=0,kl);function kl(t,e,n,r,i,o,s){var a=Sl.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=kl.nextPersistentConnectionId_++,a.log_=$s("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingGets_=[],a.outstandingPutCount_=0,a.outstandingGetCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=Cl,a.maxReconnectDelay_=Al,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!bo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),nl.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&ol.getInstance().on("online",a.onOnline_,a),a}var Pl,Ol=(Xi(Rl,Pl=W),Rl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Rl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ao(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},Rl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=Rl.getListenId_(t,n),a={};this.listens_[s]=a;t=ah(t.getQueryParams());this.restRequest_(o+".json",t,function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Do(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Rl.prototype.unlisten=function(t,e){e=Rl.getListenId_(t,e);delete this.listens_[e]},Rl.prototype.get=function(t){var n=this,e=ah(t.getQueryParams()),r=t.path.toString(),i=new fo;return this.restRequest_(r+".json",e,function(t,e){null===(t=404===t?e=null:t)?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},Rl.prototype.refreshAuthToken=function(t){},Rl.prototype.restRequest_=function(r,i,o){var s=this;(i=void 0===i?{}:i).format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+Fo(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=Po(n.responseText)}catch(t){ta("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&ta("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},Rl);function Rl(t,e,n){var r=Pl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=$s("p:rest:"),r.listens_={},r}var xl=(Dl.prototype.val=function(){return zo("DataSnapshot.val",0,0,arguments.length),this.node_.val()},Dl.prototype.exportVal=function(){return zo("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},Dl.prototype.toJSON=function(){return zo("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},Dl.prototype.exists=function(){return zo("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},Dl.prototype.child=function(t){zo("DataSnapshot.child",0,1,arguments.length),t=String(t),za("DataSnapshot.child",1,t,!1);var e=new pa(t),t=this.ref_.child(e);return new Dl(this.node_.getChild(e),t,Iu)},Dl.prototype.hasChild=function(t){zo("DataSnapshot.hasChild",1,1,arguments.length),za("DataSnapshot.hasChild",1,t,!1);t=new pa(t);return!this.node_.getChild(t).isEmpty()},Dl.prototype.getPriority=function(){return zo("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},Dl.prototype.forEach=function(n){var r=this;return zo("DataSnapshot.forEach",1,1,arguments.length),Wo("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new Dl(e,r.ref_.child(t),Iu))})},Dl.prototype.hasChildren=function(){return zo("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(Dl.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),Dl.prototype.numChildren=function(){return zo("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},Dl.prototype.getRef=function(){return zo("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(Dl.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Dl);function Dl(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var Ll=function(){this.children={},this.childCount=0,this.value=null},Ml=(Fl.prototype.subTree=function(t){for(var e=t instanceof pa?t:new pa(t),n=this,r=ya(e);null!==r;)n=new Fl(r,n,Do(n.node_.children,r)||new Ll),r=ya(e=ma(e));return n},Fl.prototype.getValue=function(){return this.node_.value},Fl.prototype.setValue=function(t){ao(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Fl.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Fl.prototype.hasChildren=function(){return 0<this.node_.childCount},Fl.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Fl.prototype.forEachChild=function(n){var r=this;oa(this.node_.children,function(t,e){n(new Fl(t,r,e))})},Fl.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Fl.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Fl.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Fl.prototype.path=function(){return new pa(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Fl.prototype.name=function(){return this.name_},Fl.prototype.parent=function(){return this.parent_},Fl.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Fl.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=xo(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Fl);function Fl(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Ll),this.name_=t,this.parent_=e,this.node_=n}var jl="repo_interrupt",Ul=25,Vl=(ql.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},ql);function ql(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Yh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ec(),this.transactionQueueTree_=new Ml,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function Bl(s){if(s.stats_=zh(s.repoInfo_),s.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))s.server_=new Ol(s.repoInfo_,function(t,e,n,r){Gl(s,t,e,n,r)},s.authTokenProvider_),setTimeout(function(){return Wl(s,!0)},0);else{var t=s.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Oo(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}s.persistentConnection_=new Nl(s.repoInfo_,s.app.options.appId,function(t,e,n,r){Gl(s,t,e,n,r)},function(t){Wl(s,t)},function(t){var n;n=s,oa(t,function(t,e){Kl(n,t,e)})},s.authTokenProvider_,t),s.server_=s.persistentConnection_}var e,n;s.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),s.statsReporter_=(e=s.repoInfo_,n=function(){return new Kh(s.stats_,s.server_)},e=e.toString(),Hh[e]||(Hh[e]=n()),Hh[e]),s.infoData_=new jh,s.infoSyncTree_=new Mh({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),Kl(s,"connected",!1),s.serverSyncTree_=new Mh({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);$h(s.eventQueue_,n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}function Hl(t){t=t.infoData_.getNode(new pa(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function zl(t){return Qu({timestamp:Hl(t)})}function Gl(t,e,n,r,i){t.dataUpdateCount++;var o=new pa(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s,a=[],e=o;0<(a=i?r?(s=Mo(n,function(t){return Bu(t)}),t.serverSyncTree_.applyTaggedQueryMerge(o,s,i)):(s=Bu(n),t.serverSyncTree_.applyTaggedQueryOverwrite(o,s,i)):r?(r=Mo(n,function(t){return Bu(t)}),t.serverSyncTree_.applyServerMerge(o,r)):(n=Bu(n),t.serverSyncTree_.applyServerOverwrite(o,n))).length&&(e=af(t,o)),$h(t.eventQueue_,e,a)}function Wl(t,e){Kl(t,"connected",e),!1===e&&function(n){ef(n,"onDisconnectEvents");var r=zl(n),i=ec();rc(n.onDisconnect_,va(),function(t,e){e=$u(t,e,n.serverSyncTree_,r);nc(i,t,e)});var o=[];rc(i,va(),function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e));t=lf(n,t);af(n,t)}),n.onDisconnect_=ec(),$h(n.eventQueue_,va(),o)}(t)}function Kl(t,e,n){e=new pa("/.info/"+e),n=Bu(n);t.infoData_.updateSnapshot(e,n);n=t.infoSyncTree_.applyServerOverwrite(e,n);$h(t.eventQueue_,e,n)}function Ql(t){return t.nextWriteId_++}function Yl(r,i,t,e,o){ef(r,"set",{path:i.toString(),value:t,priority:e});var n=zl(r),t=Bu(t,e),e=r.serverSyncTree_.calcCompleteEventCache(i),n=Zu(t,e,n),s=Ql(r),n=r.serverSyncTree_.applyUserOverwrite(i,n,s,!0);Xh(r.eventQueue_,n),r.server_.put(i.toString(),t.val(!0),function(t,e){var n="ok"===t;n||ta("set at "+i+" failed: "+t);n=r.serverSyncTree_.ackUserWrite(s,!n);$h(r.eventQueue_,i,n),nf(0,o,t,e)});t=lf(r,i);af(r,t),$h(r.eventQueue_,t,[])}function Xl(n,r,i){n.server_.onDisconnectCancel(r.toString(),function(t,e){"ok"===t&&!function t(n,e){if(Ea(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;var r=n.value;return n.value=null,r.forEachChild(Iu,function(t,e){nc(n,new pa(t),e)}),t(n,e)}if(0<n.children.size)return r=ya(e),e=ma(e),n.children.has(r)&&t(n.children.get(r),e)&&n.children.delete(r),0===n.children.size;return!0}(n.onDisconnect_,r),nf(0,i,t,e)})}function $l(n,r,t,i){var o=Bu(t);n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&nc(n.onDisconnect_,r,o),nf(0,i,t,e)})}function Zl(t,e,n){n=(".info"===ya(e.path)?t.infoSyncTree_:t.serverSyncTree_).addEventRegistration(e,n);Jh(t.eventQueue_,e.path,n)}function tf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(jl)}function ef(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Js.apply(void 0,no([r],e))}function nf(t,n,r,i){n&&fa(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})}function rf(t){return t.__database||(t.__database=new Vf(t))}function of(t,e,n){return t.serverSyncTree_.calcCompleteEventCache(e,n)||Fu.EMPTY_NODE}function sf(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||hf(e,t),null!==t.getValue()?(n=cf(e,t),ao(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(s,a,u){for(var t=u.map(function(t){return t.currentWriteId}),e=o=of(s,a,t),t=o.hash(),n=0;n<u.length;n++){var r=u[n];ao(0===r.status,"tryToSendTransactionQueue_: items in queue should all be run."),r.status=1,r.retryCount++;var i=Ta(a,r.path);e=e.updateChild(i,r.currentOutputSnapshotRaw)}var o=e.val(!0),c=a;s.server_.put(c.toString(),o,function(t){ef(s,"transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<u.length;o++)u[o].status=2,e=e.concat(s.serverSyncTree_.ackUserWrite(u[o].currentWriteId)),u[o].onComplete&&(n=u[o].currentOutputSnapshotResolved,r=new Pf(s,u[o].path),r=new xl(n,r,Iu),i.push(u[o].onComplete.bind(null,null,!0,r))),u[o].unwatcher();hf(s,s.transactionQueueTree_.subTree(a)),sf(s,s.transactionQueueTree_),$h(s.eventQueue_,a,e);for(o=0;o<i.length;o++)fa(i[o])}else{if("datastale"===t)for(o=0;o<u.length;o++)3===u[o].status?u[o].status=4:u[o].status=0;else{ta("transaction at "+c.toString()+" failed: "+t);for(o=0;o<u.length;o++)u[o].status=4,u[o].abortReason=t}af(s,a)}},t)}(e,t.path(),n)):t.hasChildren()&&t.forEachChild(function(t){sf(e,t)})}function af(t,e){var n=uf(t,e),e=n.path();return function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),s=0;s<e.length;s++){var a,u,c,h=e[s],l=Ta(n,h.path),f=!1,p=void 0;ao(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(f=!0,p=h.abortReason,i=i.concat(t.serverSyncTree_.ackUserWrite(h.currentWriteId,!0))):0===h.status&&(i=h.retryCount>=Ul?(f=!0,p="maxretry",i.concat(t.serverSyncTree_.ackUserWrite(h.currentWriteId,!0))):(a=of(t,h.path,o),h.currentInputSnapshot=a,void 0!==(c=e[s].update(a.val()))?($a("transaction failed: Data returned ",c,h.path),u=Bu(c),"object"==typeof c&&null!=c&&xo(c,".priority")||(u=u.updatePriority(a.getPriority())),l=h.currentWriteId,c=zl(t),c=Zu(u,a,c),h.currentOutputSnapshotRaw=u,h.currentOutputSnapshotResolved=c,h.currentWriteId=Ql(t),o.splice(o.indexOf(l),1),(i=i.concat(t.serverSyncTree_.applyUserOverwrite(h.path,c,h.currentWriteId,h.applyLocally))).concat(t.serverSyncTree_.ackUserWrite(l,!0))):(f=!0,p="nodata",i.concat(t.serverSyncTree_.ackUserWrite(h.currentWriteId,!0))))),$h(t.eventQueue_,n,i),i=[],f&&(e[s].status=2,function(t){setTimeout(t,Math.floor(0))}(e[s].unwatcher),e[s].onComplete&&("nodata"===p?(h=new Pf(t,e[s].path),f=e[s].currentInputSnapshot,h=new xl(f,h,Iu),r.push(e[s].onComplete.bind(null,null,!1,h))):r.push(e[s].onComplete.bind(null,new Error(p),!1,null))))}for(hf(t,t.transactionQueueTree_),s=0;s<r.length;s++)fa(r[s]);sf(t,t.transactionQueueTree_)}}(t,cf(t,n),e),e}function uf(t,e){for(var n=t.transactionQueueTree_,r=ya(e);null!==r&&null===n.getValue();)n=n.subTree(r),r=ya(e=ma(e));return n}function cf(t,e){var n=[];return function e(n,t,r){var i=t.getValue();if(null!==i)for(var o=0;o<i.length;o++)r.push(i[o]);t.forEachChild(function(t){e(n,t,r)})}(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function hf(e,t){var n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){hf(e,t)})}function lf(e,t){var n=uf(e,t).path(),t=e.transactionQueueTree_.subTree(t);return t.forEachAncestor(function(t){ff(e,t)}),ff(e,t),t.forEachDescendant(function(t){ff(e,t)}),n}function ff(t,e){var n=e.getValue();if(null!==n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(ao(o===s-1,"All SENT items should be at beginning of queue."),n[o=s].status=3,n[s].abortReason="set"):(ao(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(t.serverSyncTree_.ackUserWrite(n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?e.setValue(null):n.length=o+1,$h(t.eventQueue_,e.path(),i);for(s=0;s<r.length;s++)fa(r[s])}}var pf=(df.prototype.cancel=function(t){zo("OnDisconnect.cancel",0,1,arguments.length),Wo("OnDisconnect.cancel",1,t,!0);var e=new fo;return Xl(this.repo_,this.path_,e.wrapCallback(t)),e.promise},df.prototype.remove=function(t){zo("OnDisconnect.remove",0,1,arguments.length),Ga("OnDisconnect.remove",this.path_),Wo("OnDisconnect.remove",1,t,!0);var e=new fo;return $l(this.repo_,this.path_,null,e.wrapCallback(t)),e.promise},df.prototype.set=function(t,e){zo("OnDisconnect.set",1,2,arguments.length),Ga("OnDisconnect.set",this.path_),Ua("OnDisconnect.set",1,t,this.path_,!1),Wo("OnDisconnect.set",2,e,!0);var n=new fo;return $l(this.repo_,this.path_,t,n.wrapCallback(e)),n.promise},df.prototype.setWithPriority=function(t,e,n){zo("OnDisconnect.setWithPriority",2,3,arguments.length),Ga("OnDisconnect.setWithPriority",this.path_),Ua("OnDisconnect.setWithPriority",1,t,this.path_,!1),qa("OnDisconnect.setWithPriority",2,e,!1),Wo("OnDisconnect.setWithPriority",3,n,!0);var r,i,o,s,a=new fo;return r=this.repo_,i=this.path_,t=t,e=e,o=a.wrapCallback(n),s=Bu(t,e),r.server_.onDisconnectPut(i.toString(),s.val(!0),function(t,e){"ok"===t&&nc(r.onDisconnect_,i,s),nf(0,o,t,e)}),a.promise},df.prototype.update=function(t,e){if(zo("OnDisconnect.update",1,2,arguments.length),Ga("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ta("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Va("OnDisconnect.update",1,t,this.path_,!1),Wo("OnDisconnect.update",2,e,!0);var i,o,s,a,u=new fo;return i=this.repo_,o=this.path_,s=t,a=u.wrapCallback(e),Lo(s)?(Js("onDisconnect().update() called with empty data.  Don't do anything."),nf(0,a,"ok",void 0)):i.server_.onDisconnectMerge(o.toString(),s,function(t,e){"ok"===t&&oa(s,function(t,e){e=Bu(e);nc(i.onDisconnect_,Ia(o,t),e)}),nf(0,a,t,e)}),u.promise},df);function df(t,e){this.repo_=t,this.path_=e}var vf=(yf.prototype.toJSON=function(){return zo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},yf);function yf(t,e){this.committed=t,this.snapshot=e}var gf=(mf.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},mf.prototype.getEventType=function(){return this.eventType},mf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},mf.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Oo(this.snapshot.exportVal())},mf);function mf(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var bf=(_f.prototype.getPath=function(){return this.path},_f.prototype.getEventType=function(){return"cancel"},_f.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},_f.prototype.toString=function(){return this.path.toString()+":cancel"},_f);function _f(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var wf=(If.prototype.respondsTo=function(t){return"value"===t},If.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new gf("value",this,new xl(t.snapshotNode,e.getRef(),n))},If.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},If.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new bf(this,t,e):null},If.prototype.matches=function(t){return t instanceof If&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},If.prototype.hasAnyCallback=function(){return null!==this.callback_},If);function If(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Ef,Tf=(Sf.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return xo(this.callbacks_,t)},Sf.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new bf(this,t,e):null},Sf.prototype.createEvent=function(t,e){ao(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new gf(t.type,this,new xl(t.snapshotNode,n,e),t.prevName)},Sf.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Sf.prototype.matches=function(e){var n=this;if(e instanceof Sf){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},Sf.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Sf);function Sf(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Cf=(Object.defineProperty(Af,"__referenceConstructor",{get:function(){return ao(Ef,"Reference.ts has not been loaded"),Ef},set:function(t){Ef=t},enumerable:!1,configurable:!0}),Af.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Tu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ea)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==na)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Iu){if(null!=e&&!ja(e)||null!=n&&!ja(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ao(t.getIndex()instanceof Xc||t.getIndex()===Yc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},Af.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},Af.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Af.prototype.getQueryParams=function(){return this.queryParams_},Af.prototype.getRef=function(){return zo("Query.ref",0,0,arguments.length),new Af.__referenceConstructor(this.repo,this.path)},Af.prototype.on=function(t,e,n,r){zo("Query.on",2,4,arguments.length),Ba("Query.on",1,t,!1),Wo("Query.on",2,e,!1);n=Af.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},Af.prototype.onValueEvent=function(t,e,n){n=new wf(t,e||null,n||null);Zl(this.repo,this,n)},Af.prototype.onChildEvent=function(t,e,n){n=new Tf(t,e,n);Zl(this.repo,this,n)},Af.prototype.off=function(t,e,n){zo("Query.off",0,3,arguments.length),Ba("Query.off",1,t,!0),Wo("Query.off",2,e,!0),Ko("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new wf(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Tf(i,null,n||null)),i=this.repo,n=r,n=(".info"===ya((r=this).path)?i.infoSyncTree_:i.serverSyncTree_).removeEventRegistration(r,n),Jh(i.eventQueue_,r.path,n)},Af.prototype.get=function(){return n=this.repo,r=this,null!=(t=n.serverSyncTree_.getServerValue(r))?Promise.resolve(new xl(t,r.getRef(),r.getQueryParams().getIndex())):n.server_.get(r).then(function(t){var e=Bu(t),t=n.serverSyncTree_.applyServerOverwrite(r.path,e);return Jh(n.eventQueue_,r.path,t),Promise.resolve(new xl(e,r.getRef(),r.getQueryParams().getIndex()))},function(t){return ef(n,"get for query "+Oo(r)+" failed: "+t),Promise.reject(new Error(t))});var n,r,t},Af.prototype.once=function(e,n,t,r){var i=this;zo("Query.once",1,4,arguments.length),Ba("Query.once",1,e,!1),Wo("Query.once",2,n,!0);var o=Af.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new fo;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Af.prototype.limitToFirst=function(t){if(zo("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Af(this.repo,this.path,(e=this.queryParams_,t=t,(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="l",e),this.orderByCalled_);var e},Af.prototype.limitToLast=function(t){if(zo("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Af(this.repo,this.path,(e=this.queryParams_,t=t,(e=e.copy()).limitSet_=!0,e.limit_=t,e.viewFrom_="r",e),this.orderByCalled_);var e},Af.prototype.orderByChild=function(t){if(zo("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');za("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new pa(t);if(Ea(t))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new Xc(t),t=sh(this.queryParams_,t);return Af.validateQueryEndpoints_(t),new Af(this.repo,this.path,t,!0)},Af.prototype.orderByKey=function(){zo("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=sh(this.queryParams_,Tu);return Af.validateQueryEndpoints_(t),new Af(this.repo,this.path,t,!0)},Af.prototype.orderByPriority=function(){zo("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=sh(this.queryParams_,Iu);return Af.validateQueryEndpoints_(t),new Af(this.repo,this.path,t,!0)},Af.prototype.orderByValue=function(){zo("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=sh(this.queryParams_,Yc);return Af.validateQueryEndpoints_(t),new Af(this.repo,this.path,t,!0)},Af.prototype.startAt=function(t,e){void 0===t&&(t=null),zo("Query.startAt",0,2,arguments.length),Ua("Query.startAt",1,t,this.path,!0),Ha("Query.startAt",2,e,!0);var n=ih(this.queryParams_,t,e);if(Af.validateLimit_(n),Af.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Af(this.repo,this.path,n,this.orderByCalled_)},Af.prototype.startAfter=function(t,e){void 0===t&&(t=null),zo("Query.startAfter",0,2,arguments.length),Ua("Query.startAfter",1,t,this.path,!1),Ha("Query.startAfter",2,e,!0);var n,e=(n=this.queryParams_,t=t,e=e,(e=n.index_===Tu?ih(n,t="string"==typeof t?Vc(t):t,e):ih(n,t,null==e?na:Vc(e))).startAfterSet_=!0,e);if(Af.validateLimit_(e),Af.validateQueryEndpoints_(e),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new Af(this.repo,this.path,e,this.orderByCalled_)},Af.prototype.endAt=function(t,e){void 0===t&&(t=null),zo("Query.endAt",0,2,arguments.length),Ua("Query.endAt",1,t,this.path,!0),Ha("Query.endAt",2,e,!0);e=oh(this.queryParams_,t,e);if(Af.validateLimit_(e),Af.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Af(this.repo,this.path,e,this.orderByCalled_)},Af.prototype.endBefore=function(t,e){void 0===t&&(t=null),zo("Query.endBefore",0,2,arguments.length),Ua("Query.endBefore",1,t,this.path,!1),Ha("Query.endBefore",2,e,!0);var n,e=(n=this.queryParams_,t=t,e=e,(e=n.index_===Tu?oh(n,t="string"==typeof t?qc(t):t,e):oh(n,t,null==e?ea:qc(e))).endBeforeSet_=!0,e);if(Af.validateLimit_(e),Af.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Af(this.repo,this.path,e,this.orderByCalled_)},Af.prototype.equalTo=function(t,e){if(zo("Query.equalTo",1,2,arguments.length),Ua("Query.equalTo",1,t,this.path,!1),Ha("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},Af.prototype.toString=function(){return zo("Query.toString",0,0,arguments.length),this.repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this.path)},Af.prototype.toJSON=function(){return zo("Query.toJSON",0,1,arguments.length),this.toString()},Af.prototype.queryObject=function(){return t=this.queryParams_,n={},t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==Iu&&(n.i=t.index_.toString()),n;var t,e,n},Af.prototype.queryIdentifier=function(){var t=this.queryObject(),t=ia(t);return"{}"===t?"default":t},Af.prototype.isEqual=function(t){if(zo("Query.isEqual",1,1,arguments.length),!(t instanceof Af))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=Ca(this.path,t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},Af.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Wo(t,3,r.cancel,!0),r.context=n,Ko(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Go(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Af.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Af);function Af(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Nf,kf,Pf=(Xi(Of,Nf=Cf),Of.prototype.getKey=function(){return zo("Reference.key",0,0,arguments.length),Ea(this.path)?null:ba(this.path)},Of.prototype.child=function(t){var e,n,r,i;return zo("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof pa||(null===ya(this.path)?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),za(e,n,r,i)):za("Reference.child",1,t,!1)),new Of(this.repo,Ia(this.path,t))},Of.prototype.getParent=function(){zo("Reference.parent",0,0,arguments.length);var t=wa(this.path);return null===t?null:new Of(this.repo,t)},Of.prototype.getRoot=function(){zo("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Of.prototype.databaseProp=function(){return rf(this.repo)},Of.prototype.set=function(t,e){zo("Reference.set",1,2,arguments.length),Ga("Reference.set",this.path),Ua("Reference.set",1,t,this.path,!1),Wo("Reference.set",2,e,!0);var n=new fo;return Yl(this.repo,this.path,t,null,n.wrapCallback(e)),n.promise},Of.prototype.update=function(t,e){if(zo("Reference.update",1,2,arguments.length),Ga("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ta("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Va("Reference.update",1,t,this.path,!1),Wo("Reference.update",2,e,!0);var i=new fo;return function(i,o,t,s){ef(i,"update",{path:o.toString(),value:t});var a,e,n=!0,r=zl(i),u={};oa(t,function(t,e){n=!1,u[t]=$u(Ia(o,t),Bu(e),i.serverSyncTree_,r)}),n?(Js("update() called with empty data.  Don't do anything."),nf(0,s,"ok",void 0)):(a=Ql(i),e=i.serverSyncTree_.applyUserMerge(o,u,a),Xh(i.eventQueue_,e),i.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||ta("update at "+o+" failed: "+t);var r=i.serverSyncTree_.ackUserWrite(a,!n),n=0<r.length?af(i,o):o;$h(i.eventQueue_,n,r),nf(0,s,t,e)}),oa(t,function(t){t=lf(i,Ia(o,t));af(i,t)}),$h(i.eventQueue_,o,[]))}(this.repo,this.path,t,i.wrapCallback(e)),i.promise},Of.prototype.setWithPriority=function(t,e,n){if(zo("Reference.setWithPriority",2,3,arguments.length),Ga("Reference.setWithPriority",this.path),Ua("Reference.setWithPriority",1,t,this.path,!1),qa("Reference.setWithPriority",2,e,!1),Wo("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new fo;return Yl(this.repo,this.path,t,e,r.wrapCallback(n)),r.promise},Of.prototype.remove=function(t){return zo("Reference.remove",0,1,arguments.length),Ga("Reference.remove",this.path),Wo("Reference.remove",1,t,!0),this.set(null,t)},Of.prototype.transaction=function(t,r,e){if(zo("Reference.transaction",1,3,arguments.length),Ga("Reference.transaction",this.path),Wo("Reference.transaction",1,t,!1),Wo("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Go(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new fo;"function"==typeof r&&i.promise.catch(function(){});return function(t,e,n,r,i){function o(){}ef(t,"transaction on "+e);var s=new Pf(t,e);s.on("value",o);var a,u={path:e,update:n,onComplete:r,status:null,order:Ks(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},n=of(t,e,void 0);u.currentInputSnapshot=n,void 0===(r=u.update(n.val()))?(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&(a=new xl(u.currentInputSnapshot,new Pf(t,u.path),Iu),u.onComplete(null,!1,a))):($a("transaction failed: Data returned ",r,u.path),u.status=0,(a=(i=t.transactionQueueTree_.subTree(e)).getValue()||[]).push(u),i.setValue(a),i=void 0,"object"==typeof r&&null!==r&&xo(r,".priority")?(i=Do(r,".priority"),ao(ja(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(t.serverSyncTree_.calcCompleteEventCache(e)||Fu.EMPTY_NODE).getPriority().val(),a=zl(t),i=Bu(r,i),a=Zu(i,n,a),u.currentOutputSnapshotRaw=i,u.currentOutputSnapshotResolved=a,u.currentWriteId=Ql(t),u=t.serverSyncTree_.applyUserOverwrite(e,a,u.currentWriteId,u.applyLocally),$h(t.eventQueue_,e,u),sf(t,t.transactionQueueTree_))}(this.repo,this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new vf(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Of.prototype.setPriority=function(t,e){zo("Reference.setPriority",1,2,arguments.length),Ga("Reference.setPriority",this.path),qa("Reference.setPriority",1,t,!1),Wo("Reference.setPriority",2,e,!0);var n=new fo;return Yl(this.repo,Ia(this.path,".priority"),t,null,n.wrapCallback(e)),n.promise},Of.prototype.push=function(t,e){zo("Reference.push",0,2,arguments.length),Ga("Reference.push",this.path),Ua("Reference.push",1,t,this.path,!0),Wo("Reference.push",2,e,!0);var n=Hl(this.repo),r=Wc(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Of.prototype.onDisconnect=function(){return Ga("Reference.onDisconnect",this.path),new pf(this.repo,this.path)},Object.defineProperty(Of.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Of.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Of);function Of(t,e){if(!(t instanceof Vl))throw new Error("new Reference() no longer supported - use app.database().");return Nf.call(this,t,e,new nh,!1)||this}Cf.__referenceConstructor=Pf,kf=Pf,ao(!uh,"__referenceConstructor has already been defined"),uh=kf;var Rf=(xf.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(Js("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},xf.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},xf.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},xf.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ta(t)},xf);function xf(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Df=(Lf.prototype.getToken=function(t){return Promise.resolve({accessToken:Lf.EMULATOR_AUTH_TOKEN})},Lf.prototype.addTokenChangeListener=function(t){t(Lf.EMULATOR_AUTH_TOKEN)},Lf.prototype.removeTokenChangeListener=function(t){},Lf.prototype.notifyForInvalidToken=function(){},Lf.EMULATOR_AUTH_TOKEN="owner",Lf);function Lf(){}var Mf="FIREBASE_DATABASE_EMULATOR_HOST",Ff={},jf=!1;function Uf(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||Zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Js("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ka(i,r),a=s.repoInfo,n=void 0;(n="undefined"!=typeof process?process.env[Mf]:n)?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ka(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Df:new Rf(t,e);return Za("Invalid Firebase Database URL",1,s),Ea(s.path)||Zs("Database URL must point to the root of a Firebase Database (not including a child path)."),rf(function(t,e,n){var r=Do(Ff,e.name);r||(r={},Ff[e.name]=r);var i=Do(r,t.toURLString());i&&Zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new Vl(t,jf,e,n),r[t.toURLString()]=i}(a,t,e))}var Vf=(Object.defineProperty(qf.prototype,"repo_",{get:function(){return this.instanceStarted_||(Bl(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(qf.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Pf(this.repo_,va())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(qf.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),qf.prototype.useEmulator=function(t,e){var n;this.checkDeleted_("useEmulator"),this.instanceStarted_?Zs("Cannot call useEmulator() after instance has already been initialized."):(n=this.repoInternal_,t=t,e=e,n.repoInfo_=new xa(t+":"+e,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),n.repoInfo_.nodeAdmin&&(n.authTokenProvider_=new Df))},qf.prototype.ref=function(t){return this.checkDeleted_("ref"),zo("database.ref",0,1,arguments.length),t instanceof Pf?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},qf.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),zo(e,1,1,arguments.length);var n=Ka(t,this.repo_.repoInfo_.nodeAdmin);Za(e,1,n);t=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||t.host===this.repo_.repoInfo_.host||Zs(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},qf.prototype.checkDeleted_=function(t){null===this.repoInternal_&&Zs("Cannot call "+t+" on a deleted database.")},qf.prototype.goOffline=function(){zo("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),tf(this.repo_)},qf.prototype.goOnline=function(){var t;zo("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),(t=this.repo_).persistentConnection_&&t.persistentConnection_.resume(jl)},qf.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},qf);function qf(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){var e,n;return this.checkDeleted_("delete"),e=this.repo_,(n=Do(Ff,e.app.name))&&Do(n,e.key)===e||Zs("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),tf(e),delete n[e.key],this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Vl||Zs("Don't call new Database() directly - please use firebase.database().")}var Bf=Object.freeze({__proto__:null,forceLongPolling:function(){ml.forceDisallow(),ll.forceAllow()},forceWebSockets:function(){ll.forceDisallow()},isWebSocketsAvailable:function(){return ml.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var i;t=t.repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new Gh(t.stats_)),t.statsListener_.get()):t.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),oa(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},statsIncrementCounter:function(t,e){t=t.repo,e=e,t.stats_.incrementCounter(e),t=t.statsReporter_,e=e,t.statsToReport_[e]=!0},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){t=t.repo,e=e,t.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return yl(r),(r=new rs("auth-internal",new os("database-standalone"))).setComponent(new ts("auth-internal",function(){return i},"PRIVATE")),{instance:Uf(e,r,n,t),namespace:o}}}),Sn=Nl;Nl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Hf,zf=Object.freeze({__proto__:null,DataConnection:Sn,RealTimeConnection:Il,hijackHash:function(i){var o=Nl.prototype.put;return Nl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Nl.prototype.put=o}},ConnectionTarget:xa,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){jf=t}}),Gf=Vf.ServerValue;yl((Hf=Jl).SDK_VERSION),Hf.INTERNAL.registerComponent(new ts("database",function(t,e){return Uf(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"),e,void 0)},"PUBLIC").setServiceProps({Reference:Pf,Query:Cf,Database:Vf,DataSnapshot:xl,enableLogging:Fs,INTERNAL:Bf,ServerValue:Gf,TEST_ACCESS:zf}).setMultipleInstances(!0)),Hf.registerVersion("@firebase/database","0.9.4");var Wf=function(t,e){return(Wf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Kf(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var gu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Qf={},Yf=gu||self;function Xf(){}function Jf(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function $f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Zf="closure_uid_"+(1e9*Math.random()>>>0),tp=0;function ep(t,e,n){return t.call.apply(t.bind,arguments)}function np(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function rp(t,e,n){return(rp=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ep:np).apply(null,arguments)}function ip(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function op(){return Date.now()}function sp(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function ap(){this.j=this.j,this.i=this.i}ap.prototype.j=!1,ap.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Zf)&&t[Zf]||(t[Zf]=++tp))},ap.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var up=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},cp=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function hp(){return Array.prototype.concat.apply([],arguments)}function lp(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function fp(t){return/^[\s\xa0]*$/.test(t)}var pp,dp=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function vp(t,e){return-1!=t.indexOf(e)}function yp(t,e){return t<e?-1:e<t?1:0}t:{var gp=Yf.navigator;if(gp){gp=gp.userAgent;if(gp){pp=gp;break t}}pp=""}function mp(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function bp(t){var e,n={};for(e in t)n[e]=t[e];return n}var _p="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wp(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<_p.length;i++)e=_p[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Ip(t){return Ip[" "](t),t}Ip[" "]=Xf;var Ep,Tp=vp(pp,"Opera"),Sp=vp(pp,"Trident")||vp(pp,"MSIE"),Cp=vp(pp,"Edge"),Ap=Cp||Sp,Np=vp(pp,"Gecko")&&!(vp(pp.toLowerCase(),"webkit")&&!vp(pp,"Edge"))&&!(vp(pp,"Trident")||vp(pp,"MSIE"))&&!vp(pp,"Edge"),kp=vp(pp.toLowerCase(),"webkit")&&!vp(pp,"Edge");function Pp(){var t=Yf.document;return t?t.documentMode:void 0}t:{var Op="",Rp=(Rp=pp,Np?/rv:([^\);]+)(\)|;)/.exec(Rp):Cp?/Edge\/([\d\.]+)/.exec(Rp):Sp?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Rp):kp?/WebKit\/(\S+)/.exec(Rp):Tp?/(?:Version)[ \/]?(\S+)/.exec(Rp):void 0);if(Rp&&(Op=Rp?Rp[1]:""),Sp){Rp=Pp();if(null!=Rp&&Rp>parseFloat(Op)){Ep=String(Rp);break t}}Ep=Op}var xp={};function Dp(a){return t=a,e=function(){for(var t=0,e=dp(String(Ep)).split("."),n=dp(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=yp(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||yp(0==o[2].length,0==s[2].length)||yp(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=xp,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Lp=Yf.document&&Sp&&(Pp()||parseInt(Ep,10))||void 0,Mp=!Sp||9<=Number(Lp),Fp=Sp&&!Dp("9"),jp=function(){if(!Yf.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Yf.addEventListener("test",Xf,e),Yf.removeEventListener("test",Xf,e)}catch(t){}return t}();function Up(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Vp(t,e){if(Up.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Np){t:{try{Ip(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qp[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Up.prototype.b=function(){this.defaultPrevented=!0},sp(Vp,Up);var qp={2:"touch",3:"pen",4:"mouse"};Vp.prototype.b=function(){Vp.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Fp)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Bp="closure_listenable_"+(1e6*Math.random()|0),Hp=0;function zp(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Hp,this.Y=this.Z=!1}function Gp(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Wp(t){this.src=t,this.a={},this.b=0}function Kp(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=up(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Gp(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Qp(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Wp.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Qp(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new zp(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Yp="closure_lm_"+(1e6*Math.random()|0),Xp={};function Jp(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=od(r);return e&&e[Bp]?e.wa(n,r,$f(i)?!!i.capture:!!i,o):$p(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Jp(t,e[o],n,r,i);return null}return n=od(n),t&&t[Bp]?t.va(e,n,$f(r)?!!r.capture:!!r,i):$p(t,e,n,!1,r,i)}function $p(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$f(i)?!!i.capture:!!i;if(s&&!Mp)return null;var a,u,c=rd(t);if(c||(t[Yp]=c=new Wp(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=nd,r=u=Mp?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)void 0===(i=!jp?s:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(td(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Zp(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Bp]?Kp(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(td(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rd(e))?(Kp(n,t),0==n.b&&(n.src=null,e[Yp]=null)):Gp(t)))}function td(t){return t in Xp?Xp[t]:Xp[t]="on"+t}function ed(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Zp(t),n.call(r,e)}function nd(t,e){if(t.Y)return!0;if(Mp)return ed(t,new Vp(e,this));if(!e)t:{e=["window","event"];for(var n=Yf,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ed(t,e=new Vp(e,this))}function rd(t){return(t=t[Yp])instanceof Wp?t:null}var id="__closure_events_fn_"+(1e9*Math.random()>>>0);function od(e){return"function"==typeof e?e:(e[id]||(e[id]=function(t){return e.handleEvent(t)}),e[id])}function sd(){ap.call(this),this.c=new Wp(this),(this.J=this).C=null}function ad(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new Up(e,t):e instanceof Up?e.target=e.target||t:(s=e,wp(e=new Up(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=ud(o,r,!0,e)&&s;if(s=ud(o=e.a=t,r,!0,e)&&s,s=ud(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=ud(o=e.a=n[i],r,!1,e)&&s}function ud(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Kp(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}sp(sd,ap),sd.prototype[Bp]=!0,(K=sd.prototype).addEventListener=function(t,e,n,r){Jp(this,t,e,n,r)},K.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=$f(i)?!!i.capture:!!i,r=od(r),e&&e[Bp]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Qp(s=e.a[n],r,i,o))&&(Gp(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&rd(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?Qp(n,r,i,o):e)?n[e]:null)&&Zp(r))}(this,t,e,n,r)},K.G=function(){if(sd.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Gp(n[r]);delete e.a[t],e.b--}}this.C=null},K.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},K.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var cd=Yf.JSON.stringify;function hd(){this.b=this.a=null}var ld,fd=(pd.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new pd(function(){return new dd},function(t){t.reset()}));function pd(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function dd(){this.next=this.b=this.a=null}function vd(t,e){var n;ld||(n=Yf.Promise.resolve(void 0),ld=function(){n.then(md)}),yd||(ld(),yd=!0),gd.add(t,e)}hd.prototype.add=function(t,e){var n=fd.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},dd.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var yd=!(dd.prototype.reset=function(){this.next=this.b=this.a=null}),gd=new hd;function md(){for(var t,e;n=e=void 0,n=null,(e=gd).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){Yf.setTimeout(function(){throw t},0)}(t)}var n=fd;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}yd=!1}function bd(t,e){sd.call(this),this.b=t||1,this.a=e||Yf,this.f=rp(this.Za,this),this.g=op()}function _d(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function wd(t,e,n){if("function"==typeof t)n&&(t=rp(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=rp(t.handleEvent,t)}return 2147483647<Number(e)?-1:Yf.setTimeout(t,e||0)}sp(bd,sd),(K=bd.prototype).aa=!1,K.M=null,K.Za=function(){var t;this.aa&&(0<(t=op()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),ad(this,"tick"),this.aa&&(_d(this),this.start())))},K.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=op())},K.G=function(){bd.X.G.call(this),_d(this),delete this.a};var Id,Ed,Td,Sd=(Wf(Ed=Ad,Td=Id=ap),Ed.prototype=null===Td?Object.create(Td):(Cd.prototype=Td.prototype,new Cd),Ad.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=wd(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Ad.prototype.G=function(){Id.prototype.G.call(this),this.a&&(Yf.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Ad);function Cd(){this.constructor=Ed}function Ad(t,e){var n=Id.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function Nd(t){ap.call(this),this.b=t,this.a={}}sp(Nd,ap);var kd=[];function Pd(t,e,n,r){Array.isArray(n)||(n&&(kd[0]=n.toString()),n=kd);for(var i=0;i<n.length;i++){var o=Jp(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Od(t){mp(t.a,function(t,e){this.a.hasOwnProperty(e)&&Zp(t)},t),t.a={}}function Rd(){this.a=!0}function xd(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return cd(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Nd.prototype.G=function(){Nd.X.G.call(this),Od(this)},Nd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Rd.prototype.info=function(){};var Dd={},Ld=null;function Md(){return Ld=Ld||new sd}function Fd(t){Up.call(this,Dd.Fa,t)}function jd(t){var e=Md();ad(e,new Fd(e))}function Ud(t,e){Up.call(this,Dd.STAT_EVENT,t),this.stat=e}function Vd(t){var e=Md();ad(e,new Ud(e,t))}function qd(t){Up.call(this,Dd.Ga,t)}function Bd(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Yf.setTimeout(function(){t()},e)}Dd.Fa="serverreachability",sp(Fd,Up),Dd.STAT_EVENT="statevent",sp(Ud,Up),Dd.Ga="timingevent",sp(qd,Up);W={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Sn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Hd(){}function zd(t){var e;return e=!(e=t.a)?t.a={}:e}function Gd(){}Hd.prototype.a=null;var Wd,gu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Kd(){Up.call(this,"d")}function Qd(){Up.call(this,"c")}function Yd(){}function Xd(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Nd(this),this.P=Jd,t=Ap?125:void 0,this.R=new bd(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}sp(Kd,Up),sp(Qd,Up),sp(Yd,Hd),Wd=new Yd;var Jd=45e3,$d={},Zd={};function tv(t,e,n){t.H=1,t.i=wv(vv(e)),t.j=n,t.I=!0,ev(t,null)}function ev(t,e){t.u=op(),rv(t),t.l=vv(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Dv(n.b,"t",r),t.D=0,t.a=Ay(t.g,t.g.C?e:null),0<t.O&&(t.F=new Sd(rp(t.Ca,t,t.a),t.O)),Pd(t.J,t.a,"readystatechange",t.Xa),e=t.B?bp(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),jd(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function nv(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?Zd:(i=Number(a.substring(i,o)),isNaN(i)?$d:(o+=1)+i>a.length?Zd:(a=a.substr(o,i),r.D=o+i,a)));if(a==Zd){4==e&&(t.h=4,Vd(14),s=!1),xd(t.c,t.f,null,"[Incomplete Response]");break}if(a==$d){t.h=4,Vd(15),xd(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}xd(t.c,t.f,a,null),uv(t,a)}4==e&&0==n.length&&(t.h=1,Vd(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),by(e),e.F=!0,Vd(11))):(xd(t.c,t.f,n,"[Invalid Chunked Response]"),av(t),sv(t))}function rv(t){t.T=op()+t.P,iv(t,t.P)}function iv(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Bd(rp(t.Va,t),e)}function ov(t){t.o&&(Yf.clearTimeout(t.o),t.o=null)}function sv(t){0==t.g.v||t.A||Iy(t.g,t)}function av(t){ov(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,_d(t.R),Od(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function uv(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||qv(a.b,t)))if(a.I=t.N,!t.C&&qv(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;wy(a),hy(a)}my(a),Vd(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=Bd(rp(a.Sa,a),6e3));if(Vv(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Ty(a,11)}else if(!t.C&&a.a!=t||wy(a),!fp(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++)c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(vp(r,"spdy")||vp(r,"quic")||vp(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Bv(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,_v(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=op()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Cy(n,n.C?n.ga:null,n.fa),i.C?(Hv(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(ov(o),rv(o)),n.a=i):gy(n),0<a.g.length&&py(a)):"stop"!=c[0]&&"close"!=c[0]||Ty(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ty(a,7):cy(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0);jd(4)}catch(t){}}function cv(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Jf(t)||"string"==typeof t)cp(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Jf(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Jf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function hv(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof hv)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function lv(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];fv(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)fv(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function fv(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(K=Xd.prototype).setTimeout=function(t){this.P=t},K.Xa=function(t){t=t.target;var e=this.F;e&&3==oy(t)?e.f():this.Ca(t)},K.Ca=function(t){try{if(t==this.a)t:{var e=oy(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!Ap&&!this.a.$())){this.A||4!=e||7==n||jd(8==n||r<=0?3:2),ov(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,r=this.c,u=this.m,c=this.l,h=this.f,l=this.S,f=e,p=i,r.info(function(){return"XMLHTTP RESP ("+h+") [ attempt "+l+"]: "+u+"\n"+c+"\n"+f+" "+p}),this.b){if(this.U&&!this.C){e:{if(this.a){var s=this.a;if((s=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fp(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.h=3,Vd(12),av(this),sv(this);break t}xd(this.c,this.f,a,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,uv(this,a)}this.I?(nv(this,e,o),Ap&&this.b&&3==e&&(Pd(this.J,this.R,"tick",this.Wa),this.R.start())):(xd(this.c,this.f,o,null),uv(this,o)),4==e&&av(this),this.b&&!this.A&&(4==e?Iy(this.g,this):(this.b=!1,rv(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Vd(12)):(this.h=0,Vd(13)),av(this),sv(this)}}}catch(t){}var u,c,h,l,f,p},K.Wa=function(){var t,e;this.a&&(t=oy(this.a),e=this.a.$(),this.D<e.length&&(ov(this),nv(this,t,e),this.b&&4!=t&&rv(this)))},K.cancel=function(){this.A=!0,av(this)},K.Va=function(){this.o=null;var t,e,n=op();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(jd(3),Vd(17)),av(this),this.h=2,sv(this)):iv(this,this.T-n)},(K=hv.prototype).K=function(){lv(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},K.L=function(){return lv(this),this.a.concat()},K.get=function(t,e){return fv(this.b,t)?this.b[t]:e},K.set=function(t,e){fv(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},K.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var pv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function dv(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof dv?(this.a=void 0!==e?e:t.a,yv(this,t.f),this.j=t.j,gv(this,t.c),mv(this,t.h),this.g=t.g,e=t.b,(n=new Pv).c=e.c,e.a&&(n.a=new hv(e.a),n.b=e.b),bv(this,n),this.i=t.i):t&&(n=String(t).match(pv))?(this.a=!!e,yv(this,n[1]||"",!0),this.j=Iv(n[2]||""),gv(this,n[3]||"",!0),mv(this,n[4]),this.g=Iv(n[5]||"",!0),bv(this,n[6]||"",!0),this.i=Iv(n[7]||"")):(this.a=!!e,this.b=new Pv(null,this.a))}function vv(t){return new dv(t)}function yv(t,e,n){t.f=n?Iv(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function gv(t,e,n){t.c=n?Iv(e,!0):e}function mv(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function bv(t,e,n){var r,i;e instanceof Pv?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Ov(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Rv(this,e),Dv(this,n,t))},r)),r.f=i):(n||(e=Ev(e,Nv)),t.b=new Pv(e,t.a))}function _v(t,e,n){t.b.set(e,n)}function wv(t){return _v(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^op()).toString(36)),t}function Iv(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ev(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Tv),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Tv(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}dv.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ev(e,Sv,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Ev(e,Sv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ev(n,"/"==n.charAt(0)?Av:Cv,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ev(n,kv)),t.join("")};var Sv=/[#\/\?@]/g,Cv=/[#\?:]/g,Av=/[#\?]/g,Nv=/[#\?@]/g,kv=/#/g;function Pv(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ov(n){n.a||(n.a=new hv,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Rv(t,e){Ov(t),e=Lv(t,e),fv(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,fv((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&lv(t)))}function xv(t,e){return Ov(t),e=Lv(t,e),fv(t.a.b,e)}function Dv(t,e,n){Rv(t,e),0<n.length&&(t.c=null,t.a.set(Lv(t,e),lp(n)),t.b+=n.length)}function Lv(t,e){return e=String(e),e=t.f?e.toLowerCase():e}(K=Pv.prototype).add=function(t,e){Ov(this),this.c=null,t=Lv(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},K.forEach=function(n,r){Ov(this),this.a.forEach(function(t,e){cp(t,function(t){n.call(r,t,e,this)},this)},this)},K.L=function(){Ov(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},K.K=function(t){Ov(this);var e=[];if("string"==typeof t)xv(this,t)&&(e=hp(e,this.a.get(Lv(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=hp(e,t[n])}return e},K.set=function(t,e){return Ov(this),this.c=null,xv(this,t=Lv(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},K.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},K.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Mv=function(t,e){this.b=t,this.a=e};function Fv(t){this.g=t||jv,t=Yf.PerformanceNavigationTiming?0<(t=Yf.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Yf.ia&&Yf.ia.ya&&Yf.ia.ya()&&Yf.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var jv=10;function Uv(t){return t.b||t.a&&t.a.size>=t.f}function Vv(t){return t.b?1:t.a?t.a.size:0}function qv(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Bv(t,e){t.a?t.a.add(e):t.b=e}function Hv(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function zv(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return lp(t.c);var r=t.c;try{for(var i=Kf(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Gv(){}function Wv(){this.a=new Gv}function Kv(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Fv.prototype.cancel=function(){var e,t;if(this.c=zv(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Kf(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Gv.prototype.stringify=function(t){return Yf.JSON.stringify(t,void 0)},Gv.prototype.parse=function(t){return Yf.JSON.parse(t,void 0)};var Qv=Yf.JSON.parse;function Yv(t){sd.call(this),this.headers=new hv,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Xv,this.D=this.F=!1}sp(Yv,sd);var Xv="",Jv=/^https?$/i,$v=["POST","PUT"];function Zv(t){return"content-type"==t.toLowerCase()}function ty(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ey(t),ry(t)}function ey(t){t.u||(t.u=!0,ad(t,"complete"),ad(t,"error"))}function ny(t){if(t.b&&void 0!==Qf&&(!t.s[1]||4!=oy(t)||2!=t.W()))if(t.l&&4==oy(t))wd(t.za,0,t);else if(ad(t,"readystatechange"),4==oy(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(pv)[1]||null)&&Yf.self&&Yf.self.location&&(i=(r=Yf.self.location.protocol).substr(0,r.length-1)),n=!Jv.test(i?i.toLowerCase():"")),e=n);if(e)ad(t,"complete"),ad(t,"success");else{t.h=6;try{var a=2<oy(t)?t.a.statusText:""}catch(o){a=""}t.f=a+" ["+t.W()+"]",ey(t)}}finally{ry(t)}}}function ry(t,e){if(t.a){iy(t);var n=t.a,r=t.s[0]?Xf:null;t.a=null,t.s=null,e||ad(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function iy(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Yf.clearTimeout(t.m),t.m=null)}function oy(t){return t.a?t.a.readyState:0}function sy(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",mp(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):_v(t,e,n))}function ay(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function uy(t){this.pa=0,this.g=[],this.c=new Rd,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ay("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ay("baseRetryDelayMs",5e3,t),this.Ra=ay("retryDelaySeedMs",1e4,t),this.Ma=ay("forwardChannelMaxRetries",2,t),this.ma=ay("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Fv(t&&t.concurrentRequestLimit),this.ka=new Wv,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function cy(t){var e,n;ly(t),3==t.v&&(e=t.R++,_v(n=vv(t.B),"SID",t.J),_v(n,"RID",e),_v(n,"TYPE","terminate"),vy(t,n),(e=new Xd(t,t.c,e,void 0)).H=2,e.i=wv(vv(n)),n=!1,!(n=Yf.navigator&&Yf.navigator.sendBeacon?Yf.navigator.sendBeacon(e.i.toString(),""):n)&&Yf.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ay(e.g,null),e.a.ba(e.i)),e.u=op(),rv(e)),Sy(t)}function hy(t){t.a&&(by(t),t.a.cancel(),t.a=null)}function ly(t){hy(t),t.j&&(Yf.clearTimeout(t.j),t.j=null),wy(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Yf.clearTimeout(t.h),t.h=null)}function fy(t,e){t.g.push(new Mv(t.Oa++,e)),3==t.v&&py(t)}function py(t){Uv(t.b)||t.h||(t.h=!0,vd(t.Ba,t),t.u=0)}function dy(t,e){var n=e?e.f:t.R++,r=vv(t.B);_v(r,"SID",t.J),_v(r,"RID",n),_v(r,"AID",t.P),vy(t,r),t.i&&t.l&&sy(r,t.i,t.l),n=new Xd(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=yy(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Bv(t.b,n),tv(n,r,e)}function vy(t,n){t.f&&cv({},function(t,e){_v(n,e,t)})}function yy(t,e,n){n=Math.min(t.g.length,n);var r=t.f?rp(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r){var i="req"+c+"_"||"";try{cv(t,function(t,e){var n=t;$f(t)&&(n=cd(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s)}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function gy(t){t.a||t.j||(t.T=1,vd(t.Aa,t),t.o=0)}function my(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Bd(rp(t.Aa,t),Ey(t,t.o)),t.o++,1)}function by(t){null!=t.s&&(Yf.clearTimeout(t.s),t.s=null)}function _y(t){t.a=new Xd(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=vv(t.la);_v(e,"RID","rpc"),_v(e,"SID",t.J),_v(e,"CI",t.H?"0":"1"),_v(e,"AID",t.P),vy(t,e),_v(e,"TYPE","xmlhttp"),t.i&&t.l&&sy(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=wv(vv(e)),n.j=null,n.I=!0,ev(n,t)}function wy(t){null!=t.m&&(Yf.clearTimeout(t.m),t.m=null)}function Iy(t,e){var n,r,i,o=null;if(t.a==e){wy(t),by(t),t.a=null;var s=2}else{if(!qv(t.b,e))return;o=e.s,Hv(t.b,e),s=1}if(t.I=e.N,0!=t.v)if(e.b)1==s?(o=e.j?e.j.length:0,e=op()-e.u,n=t.u,ad(s=Md(),new qd(s)),py(t)):gy(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=s||(i=e,Vv((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=Bd(rp(r.Ba,r,i),Ey(r,r.u)),r.u++,0))))&&(2!=s||!my(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:Ty(t,5);break;case 4:Ty(t,10);break;case 3:Ty(t,6);break;default:Ty(t,2)}}function Ey(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ty(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=rp(t.Ya,t),r||(r=new dv("//www.google.com/images/cleardot.gif"),Yf.location&&"http"==Yf.location.protocol||yv(r,"https"),wv(r)),n=r.toString(),r=o,o=new Rd,Yf.Image?((i=new Image).onload=ip(Kv,o,i,"TestLoadImage: loaded",!0,r),i.onerror=ip(Kv,o,i,"TestLoadImage: error",!1,r),i.onabort=ip(Kv,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=ip(Kv,o,i,"TestLoadImage: timeout",!1,r),Yf.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Vd(2),t.v=0,t.f&&t.f.ra(e),Sy(t),ly(t)}function Sy(t){t.v=0,t.I=-1,t.f&&(0==zv(t.b).length&&0==t.g.length||(t.b.c.length=0,lp(t.g),t.g.length=0),t.f.qa())}function Cy(t,e,n){var r,i,o,s,a,u=(s=n)instanceof dv?vv(s):new dv(s,void 0);return""!=u.c?(e&&gv(u,e+"."+u.c),mv(u,u.h)):(a=Yf.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new dv(null,void 0),r&&yv(a,r),i&&gv(a,i),o&&mv(a,o),s&&(a.g=s),u=a),t.V&&mp(t.V,function(t,e){_v(u,e,t)}),e=t.A,n=t.na,e&&n&&_v(u,e,n),_v(u,"VER",t.ha),vy(t,u),u}function Ay(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yv(t.Na)).F=t.C,e}function Ny(){}function ky(){if(Sp&&!(10<=Number(Lp)))throw Error("Environmental error: no available transport.")}function Py(t,e){sd.call(this),this.a=new uy(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!fp(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fp(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new xy(this)}function Oy(t){Kd.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ry(){Qd.call(this),this.status=1}function xy(t){this.a=t}(K=Yv.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?zd(this.H):zd(Wd),this.a.onreadystatechange=rp(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void ty(this,t)}t=n||"";var i,o=new hv(this.headers);r&&cv(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Zv,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=Yf.FormData&&t instanceof Yf.FormData,0<=up($v,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{iy(this),0<this.o&&((this.D=(i=this.a,Sp&&Dp(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=rp(this.xa,this)):this.m=wd(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){ty(this,t)}},K.xa=function(){void 0!==Qf&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,ad(this,"timeout"),this.abort(8))},K.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,ad(this,"complete"),ad(this,"abort"),ry(this))},K.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),ry(this,!0)),Yv.X.G.call(this)},K.za=function(){this.j||(this.A||this.l||this.g?ny(this):this.Ua())},K.Ua=function(){ny(this)},K.W=function(){try{return 2<oy(this)?this.a.status:-1}catch(t){return-1}},K.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},K.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Qv(e)}},K.ua=function(){return this.h},K.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(K=uy.prototype).ha=8,K.v=1,K.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Xd(this,this.c,t,void 0),r=this.l;if(this.O&&(r?wp(r=bp(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=yy(this,n,e),_v(i=vv(this.B),"RID",t),_v(i,"CVER",22),this.A&&_v(i,"X-HTTP-Session-Id",this.A),vy(this,i),this.i&&r&&sy(i,this.i,r),Bv(this.b,n),this.Ia&&_v(i,"TYPE","init"),this.da?(_v(i,"$req",e),_v(i,"SID","null"),n.U=!0,tv(n,i,null)):tv(n,i,e),this.v=2}}else 3==this.v&&(t?dy(this,t):0==this.g.length||Uv(this.b)||dy(this))},K.Aa=function(){var t;this.j=null,_y(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Bd(rp(this.Ta,this),t))},K.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Vd(10),hy(this),_y(this))},K.Sa=function(){null!=this.m&&(this.m=null,hy(this),my(this),Vd(19))},K.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Vd(2)):(this.c.info("Failed to ping google.com"),Vd(1))},(K=Ny.prototype).ta=function(){},K.sa=function(){},K.ra=function(){},K.qa=function(){},K.Ja=function(){},ky.prototype.a=function(t,e){return new Py(t,e)},sp(Py,sd),Py.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Vd(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Cy(t,null,t.fa),py(t)},Py.prototype.close=function(){cy(this.a)},Py.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,fy(this.a,e)):this.l?((e={}).__data__=cd(t),fy(this.a,e)):fy(this.a,t)},Py.prototype.G=function(){this.a.f=null,delete this.f,cy(this.a),delete this.a,Py.X.G.call(this)},sp(Oy,Kd),sp(Ry,Qd),sp(xy,Ny),xy.prototype.ta=function(){ad(this.a,"a")},xy.prototype.sa=function(t){ad(this.a,new Oy(t))},xy.prototype.ra=function(t){ad(this.a,new Ry)},xy.prototype.qa=function(){ad(this.a,"b")},ky.prototype.createWebChannel=ky.prototype.a,Py.prototype.send=Py.prototype.h,Py.prototype.open=Py.prototype.g,W.NO_ERROR=0,W.TIMEOUT=8,W.HTTP_ERROR=6,Sn.COMPLETE="complete",(Gd.EventType=gu).OPEN="a",gu.CLOSE="b",gu.ERROR="c",gu.MESSAGE="d",sd.prototype.listen=sd.prototype.va,Yv.prototype.listenOnce=Yv.prototype.wa,Yv.prototype.getLastError=Yv.prototype.Qa,Yv.prototype.getLastErrorCode=Yv.prototype.ua,Yv.prototype.getStatus=Yv.prototype.W,Yv.prototype.getResponseJson=Yv.prototype.Pa,Yv.prototype.getResponseText=Yv.prototype.$,Yv.prototype.send=Yv.prototype.ba;var Dy=Md,Ly=W,My=Sn,Fy=Dd,jy=10,Uy=11,Vy=Gd,qy=Yv,By=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Hy=(Object.defineProperty(Gy.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Gy.prototype.isEqual=function(t){return t instanceof Gy&&t.projectId===this.projectId&&t.database===this.database},Gy),zy=new ds("@firebase/firestore");function Gy(t,e){this.projectId=t,this.database=e||"(default)"}function Wy(){return zy.logLevel}function Ky(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];zy.logLevel<=us.DEBUG&&(e=n.map(Xy),zy.debug.apply(zy,ro(["Firestore (8.2.10): "+t],e)))}function Qy(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];zy.logLevel<=us.ERROR&&(e=n.map(Xy),zy.error.apply(zy,ro(["Firestore (8.2.10): "+t],e)))}function Yy(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];zy.logLevel<=us.WARN&&(e=n.map(Xy),zy.warn.apply(zy,ro(["Firestore (8.2.10): "+t],e)))}function Xy(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Jy(t){t="FIRESTORE (8.2.10) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t);throw Qy(t),new Error(t)}function $y(t){t||Jy()}var Zy=(tg.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},tg);function tg(){}function eg(t,e){return t<e?-1:e<t?1:0}function ng(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function rg(t){return t+"\0"}var ig=(og.fromBase64String=function(t){return new og(atob(t))},og.fromUint8Array=function(t){return new og(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},og.prototype.toBase64=function(){return t=this.h,btoa(t);var t},og.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},og.prototype.l=function(){return 2*this.h.length},og.prototype._=function(t){return eg(this.h,t.h)},og.prototype.isEqual=function(t){return this.h===t.h},og);function og(t){this.h=t}ig.T=new ig("");var sg,ag={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ug=(Xi(pg,sg=Error),pg),cg=(fg.fromBase64String=function(t){try{return new fg(ig.fromBase64String(t))}catch(t){throw new ug(ag.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},fg.fromUint8Array=function(t){return new fg(ig.fromUint8Array(t))},fg.prototype.toBase64=function(){return this.I.toBase64()},fg.prototype.toUint8Array=function(){return this.I.toUint8Array()},fg.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},fg.prototype.isEqual=function(t){return this.I.isEqual(t.I)},fg),hg=(lg.prototype.m=function(){return null!=this.uid},lg.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},lg.prototype.isEqual=function(t){return t.uid===this.uid},lg);function lg(t){this.uid=t}function fg(t){this.I=t}function pg(t,e){var n=this;return(n=sg.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}hg.UNAUTHENTICATED=new hg(null),hg.R=new hg("google-credentials-uid"),hg.P=new hg("first-party-uid");function dg(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t}var vg=(Tg.prototype.getToken=function(){return Promise.resolve(null)},Tg.prototype.p=function(){},Tg.prototype.v=function(t){(this.V=t)(hg.UNAUTHENTICATED)},Tg.prototype.S=function(){this.V=null},Tg),yg=(Eg.prototype.getToken=function(){var e=this,n=this.N,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.N!==n?(Ky("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?($y("string"==typeof t.accessToken),new dg(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},Eg.prototype.p=function(){this.forceRefresh=!0},Eg.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},Eg.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},Eg.prototype.$=function(){var t=this.auth&&this.auth.getUid();return $y(null===t||"string"==typeof t),new hg(t)},Eg),gg=(Object.defineProperty(Ig.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.O},e=this.F.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Ig),mg=(wg.prototype.getToken=function(){return Promise.resolve(new gg(this.F,this.O))},wg.prototype.v=function(t){t(hg.P)},wg.prototype.S=function(){},wg.prototype.p=function(){},wg),bg=(_g.prototype.M=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},_g.prototype.next=function(){var t=++this.previousValue;return this.L&&this.L(t),t},_g);function _g(t,e){var n=this;this.previousValue=t,e&&(e.k=function(t){return n.M(t)},this.L=function(t){return e.B(t)})}function wg(t,e){this.F=t,this.O=e}function Ig(t,e){this.F=t,this.O=e,this.type="FirstParty",this.user=hg.P}function Eg(t){var e=this;this.D=null,this.currentUser=hg.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.$(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}function Tg(){this.V=null}bg.q=-1;var Sg,Cg,Ag=(jg.now=function(){return jg.fromMillis(Date.now())},jg.fromDate=function(t){return jg.fromMillis(t.getTime())},jg.fromMillis=function(t){var e=Math.floor(t/1e3);return new jg(e,1e6*(t-1e3*e))},jg.prototype.toDate=function(){return new Date(this.toMillis())},jg.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},jg.prototype.U=function(t){return this.seconds===t.seconds?eg(this.nanoseconds,t.nanoseconds):eg(this.seconds,t.seconds)},jg.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},jg.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},jg.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},jg.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},jg),Ng=(Fg.K=function(t){return new Fg(t)},Fg.min=function(){return new Fg(new Ag(0,0))},Fg.prototype._=function(t){return this.timestamp.U(t.timestamp)},Fg.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Fg.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Fg.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Fg.prototype.j=function(){return this.timestamp},Fg),W=(Object.defineProperty(Mg.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),Mg.prototype.isEqual=function(t){return 0===Mg.H(this,t)},Mg.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Mg?t.forEach(function(t){e.push(t)}):e.push(t),this.J(e)},Mg.prototype.limit=function(){return this.offset+this.length},Mg.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},Mg.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},Mg.prototype.Z=function(){return this.segments[this.offset]},Mg.prototype.tt=function(){return this.get(this.length-1)},Mg.prototype.get=function(t){return this.segments[this.offset+t]},Mg.prototype.et=function(){return 0===this.length},Mg.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Mg.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Mg.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Mg.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},Mg.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Mg),kg=(Xi(Lg,Cg=W),Lg.prototype.J=function(t,e,n){return new Lg(t,e,n)},Lg.prototype.rt=function(){return this.it().join("/")},Lg.prototype.toString=function(){return this.rt()},Lg.ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new ug(ag.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new Lg(n)},Lg.ct=function(){return new Lg([])},Lg),Pg=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Og=(Xi(Dg,Sg=W),Dg.prototype.J=function(t,e,n){return new Dg(t,e,n)},Dg.at=function(t){return Pg.test(t)},Dg.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t=!Dg.at(t)?"`"+t+"`":t}).join(".")},Dg.prototype.toString=function(){return this.rt()},Dg.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},Dg.ht=function(){return new Dg(["__name__"])},Dg.lt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new ug(ag.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new ug(ag.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new ug(ag.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new ug(ag.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Dg(e)},Dg.ct=function(){return new Dg([])},Dg),Rg=(xg._t=function(t){return new xg(kg.ot(t))},xg.ft=function(t){return new xg(kg.ot(t).Y(5))},xg.prototype.dt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},xg.prototype.isEqual=function(t){return null!==t&&0===kg.H(this.path,t.path)},xg.prototype.toString=function(){return this.path.toString()},xg.H=function(t,e){return kg.H(t.path,e.path)},xg.wt=function(t){return t.length%2==0},xg.Et=function(t){return new xg(new kg(t.slice()))},xg);function xg(t){this.path=t}function Dg(){return null!==Sg&&Sg.apply(this,arguments)||this}function Lg(){return null!==Cg&&Cg.apply(this,arguments)||this}function Mg(t,e,n){void 0===e?e=0:e>t.length&&Jy(),void 0===n?n=t.length-e:n>t.length-e&&Jy(),this.segments=t,this.offset=e,this.G=n}function Fg(t){this.timestamp=t}function jg(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new ug(ag.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new ug(ag.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ug(ag.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new ug(ag.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Ug(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Vg(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function qg(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Bg=(zg.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},zg.prototype.isEqual=function(t){return ng(this.fields,t.fields,function(t,e){return t.isEqual(e)})},zg),Hg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zg(t){(this.fields=t).sort(Og.H)}function Gg(t){if($y(!!t),"string"!=typeof t)return{seconds:Wg(t.seconds),nanos:Wg(t.nanos)};var e=0,n=Hg.exec(t);$y(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Wg(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kg(t){return"string"==typeof t?ig.fromBase64String(t):ig.fromUint8Array(t)}function Qg(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Yg(t){t=Gg(t.mapValue.fields.__local_write_time__.timestampValue);return new Ag(t.seconds,t.nanos)}function Xg(t){return null==t}function Jg(t){return 0===t&&1/t==-1/0}function $g(t){return"number"==typeof t&&Number.isInteger(t)&&!Jg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function Zg(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Qg(t)?4:10:Jy()}function tm(r,i){var t,e,n=Zg(r);if(n!==Zg(i))return!1;switch(n){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Yg(r).isEqual(Yg(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Gg(r.timestampValue),t=Gg(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return e=i,Kg(r.bytesValue).isEqual(Kg(e.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return t=i,Wg((e=r).geoPointValue.latitude)===Wg(t.geoPointValue.latitude)&&Wg(e.geoPointValue.longitude)===Wg(t.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Wg(t.integerValue)===Wg(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Wg(t.doubleValue),e=Wg(e.doubleValue);return t===e?Jg(t)===Jg(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return ng(r.arrayValue.values||[],i.arrayValue.values||[],tm);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Ug(e)!==Ug(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!tm(e[t],n[t])))return!1;return!0}();default:return Jy()}}function em(t,e){return void 0!==(t.values||[]).find(function(t){return tm(t,e)})}function nm(t,e){var n,r,i,o=Zg(t),s=Zg(e);if(o!==s)return eg(o,s);switch(o){case 0:return 0;case 1:return eg(t.booleanValue,e.booleanValue);case 2:return r=e,i=Wg(t.integerValue||t.doubleValue),r=Wg(r.integerValue||r.doubleValue),i<r?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return rm(t.timestampValue,e.timestampValue);case 4:return rm(Yg(t),Yg(e));case 5:return eg(t.stringValue,e.stringValue);case 6:return function(t,e){t=Kg(t),e=Kg(e);return t._(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=eg(n[i],r[i]);if(0!==o)return o}return eg(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=eg(Wg(n.latitude),Wg(i.latitude)))?r:eg(Wg(n.longitude),Wg(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=nm(n[i],r[i]);if(o)return o}return eg(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=eg(r[s],o[s]);if(0!==a)return a;a=nm(n[r[s]],i[o[s]]);if(0!==a)return a}return eg(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Jy()}}function rm(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return eg(t,e);var n=Gg(t),t=Gg(e),e=eg(n.seconds,t.seconds);return 0!==e?e:eg(n.nanos,t.nanos)}function im(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Gg(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kg(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,Rg.ft(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):Jy();var e}(t)}function om(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function sm(t){return t&&"integerValue"in t}function am(t){return!!t&&"arrayValue"in t}function um(t){return t&&"nullValue"in t}function cm(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hm(t){return t&&"mapValue"in t}var lm=(dm.empty=function(){return new dm({mapValue:{}})},dm.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!hm(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},dm.prototype.isEqual=function(t){return tm(this.proto,t.proto)},dm),fm=(pm.prototype.set=function(t,e){return this.Rt(t,e),this},pm.prototype.delete=function(t){return this.Rt(t,null),this},pm.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Zg(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.tt(),e)},pm.prototype.Pt=function(){var t=this.yt(Og.ct(),this.At);return null!=t?new lm(t):this.It},pm.prototype.yt=function(r,t){var i=this,o=!1,e=this.It.field(r),s=hm(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.yt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},pm);function pm(t){void 0===t&&(t=lm.empty()),this.It=t,this.At=new Map}function dm(t){this.proto=t}var vm,ym,gm,Sn=function(t,e){this.key=t,this.version=e},mm=(Xi(Tm,gm=Sn),Tm.prototype.field=function(t){return this.gt.field(t)},Tm.prototype.data=function(){return this.gt},Tm.prototype.bt=function(){return this.gt.proto},Tm.prototype.isEqual=function(t){return t instanceof Tm&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},Tm.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Tm.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Tm),bm=(Xi(Em,ym=Sn),Em.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Em.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Em.prototype.isEqual=function(t){return t instanceof Em&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Em),_m=(Xi(Im,vm=Sn),Im.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Im.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Im.prototype.isEqual=function(t){return t instanceof Im&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Im),wm=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Im(){return null!==vm&&vm.apply(this,arguments)||this}function Em(t,e,n){var r=this;return(r=ym.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Tm(t,e,n,r){var i=this;return(i=gm.call(this,t,e)||this).gt=n,i.Vt=!!r.Vt,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Sm(t,e,n,r,i,o,s){return new wm(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,s=void 0===s?null:s)}function Cm(t){var e=t;return null===e.vt&&(t=e.path.rt(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.rt()+t.op.toString()+im(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.rt()+t.dir}).join(","),Xg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=eb(e.startAt)),e.endAt&&(t+="|ub:",t+=eb(e.endAt)),e.vt=t),e.vt}function Am(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!tm(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!ib(t.startAt,e.startAt)&&ib(t.endAt,e.endAt)}function Nm(t){return Rg.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var km,Pm=(Xi(Om,km=function(){}),Om.create=function(t,e,n){return t.ut()?"in"===e||"not-in"===e?this.St(t,e,n):new Lm(t,e,n):"array-contains"===e?new Wm(t,n):"in"===e?new Km(t,n):"not-in"===e?new Qm(t,n):"array-contains-any"===e?new Ym(t,n):new Om(t,e,n)},Om.St=function(t,e,n){return new("in"===e?Mm:Fm)(t,n)},Om.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.Dt(nm(t,this.value)):null!==t&&Zg(this.value)===Zg(t)&&this.Dt(nm(t,this.value))},Om.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Jy()}},Om.prototype.Ct=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Om);function Om(t,e,n){var r=this;return(r=km.call(this)||this).field=t,r.op=e,r.value=n,r}var Rm,xm,Dm,Lm=(Xi(Vm,Dm=Pm),Vm.prototype.matches=function(t){t=Rg.H(t.key,this.key);return this.Dt(t)},Vm),Mm=(Xi(Um,xm=Pm),Um.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Um),Fm=(Xi(jm,Rm=Pm),jm.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},jm);function jm(t,e){var n=this;return(n=Rm.call(this,t,"not-in",e)||this).keys=qm(0,e),n}function Um(t,e){var n=this;return(n=xm.call(this,t,"in",e)||this).keys=qm(0,e),n}function Vm(t,e,n){var r=this;return(r=Dm.call(this,t,e,n)||this).key=Rg.ft(n.referenceValue),r}function qm(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Rg.ft(t.referenceValue)})}var Bm,Hm,zm,Gm,Wm=(Xi(tb,Gm=Pm),tb.prototype.matches=function(t){t=t.field(this.field);return am(t)&&em(t.arrayValue,this.value)},tb),Km=(Xi(Zm,zm=Pm),Zm.prototype.matches=function(t){t=t.field(this.field);return null!==t&&em(this.value.arrayValue,t)},Zm),Qm=(Xi($m,Hm=Pm),$m.prototype.matches=function(t){if(em(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!em(this.value.arrayValue,t)},$m),Ym=(Xi(Jm,Bm=Pm),Jm.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!am(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return em(e.value.arrayValue,t)})},Jm),Xm=function(t,e){this.position=t,this.before=e};function Jm(t,e){return Bm.call(this,t,"array-contains-any",e)||this}function $m(t,e){return Hm.call(this,t,"not-in",e)||this}function Zm(t,e){return zm.call(this,t,"in",e)||this}function tb(t,e){return Gm.call(this,t,"array-contains",e)||this}function eb(t){return(t.before?"b":"a")+":"+t.position.map(im).join(",")}var nb=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function rb(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.ut()?Rg.H(Rg.ft(s.referenceValue),n.key):nm(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function ib(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!tm(t.position[n],e.position[n]))return!1;return!0}var ob=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.$t=null,this.startAt,this.endAt};function sb(t,e,n,r,i,o,s,a){return new ob(t,e,n,r,i,o,s,a)}function ab(t){return new ob(t)}function ub(t){return!Xg(t.limit)&&"F"===t.limitType}function cb(t){return!Xg(t.limit)&&"L"===t.limitType}function hb(t){return 0<t.xt.length?t.xt[0].field:null}function lb(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function fb(t){return null!==t.collectionGroup}function pb(t){var e=t;if(null===e.Nt){e.Nt=[];var n=lb(e),t=hb(e);if(null!==n&&null===t)n.ut()||e.Nt.push(new nb(n)),e.Nt.push(new nb(Og.ht(),"asc"));else{for(var r=!1,i=0,o=e.xt;i<o.length;i++){var s=o[i];e.Nt.push(s),s.field.ut()&&(r=!0)}r||(n=0<e.xt.length?e.xt[e.xt.length-1].dir:"asc",e.Nt.push(new nb(Og.ht(),n)))}}return e.Nt}function db(t){var e=t;if(!e.$t)if("F"===e.limitType)e.$t=Sm(e.path,e.collectionGroup,pb(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=pb(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new nb(o.field,s))}var a=e.endAt?new Xm(e.endAt.position,!e.endAt.before):null,t=e.startAt?new Xm(e.startAt.position,!e.startAt.before):null;e.$t=Sm(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.$t}function vb(t,e,n){return new ob(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yb(t,e){return Am(db(t),db(e))&&t.limitType===e.limitType}function gb(t){return Cm(db(t))+"|lt:"+t.limitType}function mb(t){return"Query(target="+(e=db(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.rt()+" "+t.op+" "+im(t.value)}).join(", ")+"]"),Xg(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.rt()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+eb(e.startAt)),e.endAt&&(n+=", endAt: "+eb(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function bb(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.dt(e.collectionGroup)&&e.path.nt(n):Rg.wt(e.path)?e.path.isEqual(n):e.path.st(n))&&function(t){for(var e=0,n=i.xt;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||rb(t.startAt,pb(t),n))&&(!t.endAt||!rb(t.endAt,pb(t),n)));var e,n}function _b(a){return function(t,e){for(var n=!1,r=0,i=pb(a);r<i.length;r++){var o=i[r],s=function(t,r,e){var n=t.field.ut()?Rg.H(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?nm(n,t):Jy()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return Jy()}}(o,t,e);if(0!==s)return s;n=n||o.field.ut()}return 0}}var wb=(Ib.prototype.kt=function(t){return new Ib(this.target,this.targetId,this.Ft,t,this.Ot,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Ib.prototype.Mt=function(t,e){return new Ib(this.target,this.targetId,this.Ft,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Ib.prototype.Lt=function(t){return new Ib(this.target,this.targetId,this.Ft,this.sequenceNumber,this.Ot,t,this.resumeToken)},Ib);function Ib(t,e,n,r,i,o,s){void 0===i&&(i=Ng.min()),void 0===o&&(o=Ng.min()),void 0===s&&(s=ig.T),this.target=t,this.targetId=e,this.Ft=n,this.sequenceNumber=r,this.Ot=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Eb(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jg(e)?"-0":e}}function Tb(t){return{integerValue:""+t}}function Sb(t,e){return $g(e)?Tb(e):Eb(t,e)}W=function(){this.qt=void 0};function Cb(t,e){return t instanceof Ub?sm(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Ab,Nb,kb=(Xi(Rb,Nb=W),Rb),Pb=(Xi(Ob,Ab=W),Ob);function Ob(t){var e=this;return(e=Ab.call(this)||this).elements=t,e}function Rb(){return null!==Nb&&Nb.apply(this,arguments)||this}function xb(t,e){for(var n=Bb(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return tm(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Db,Lb=(Xi(Mb,Db=W),Mb);function Mb(t){var e=this;return(e=Db.call(this)||this).elements=t,e}function Fb(t,e){for(var n=Bb(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!tm(t,e)})}(i[r]);return{arrayValue:{values:n}}}var jb,Ub=(Xi(Vb,jb=W),Vb);function Vb(t,e){var n=this;return(n=jb.call(this)||this).Qt=t,n.Ut=e,n}function qb(t){return Wg(t.integerValue||t.doubleValue)}function Bb(t){return am(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Hb(t,e){this.version=t,this.transformResults=e}var zb=function(t,e){this.field=t,this.transform=e},Gb=(Wb.Kt=function(){return new Wb},Wb.exists=function(t){return new Wb(void 0,t)},Wb.updateTime=function(t){return new Wb(t)},Object.defineProperty(Wb.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Wb.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Wb);function Wb(t,e){this.updateTime=t,this.exists=e}function Kb(t,e){return void 0!==t.updateTime?e instanceof mm&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof mm}Sn=function(){};function Qb(t,e,n){return t instanceof Zb?function(t,e,n){if(!Kb(t.jt,e))return e;var r=t.value,n=o_(t.fieldTransforms,n,e),r=s_(t.fieldTransforms,r,n),e=Xb(e);return new mm(t.key,e,r,{Vt:!0})}(t,e,n):t instanceof t_?function(t,e,n){if(!Kb(t.jt,e))return e;var r=Xb(e),e=r_(t,e,o_(t.fieldTransforms,n,e));return new mm(t.key,r,e,{Vt:!0})}(t,e,n):(e=e,Kb((t=t).jt,e)?new bm(t.key,Ng.min()):e)}function Yb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&ng(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Pb&&e instanceof Pb||t instanceof Lb&&e instanceof Lb?ng(t.elements,e.elements,tm):t instanceof Ub&&e instanceof Ub?tm(t.Ut,e.Ut):t instanceof kb&&e instanceof kb)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function Xb(t){return t instanceof mm?t.version:Ng.min()}var Jb,$b,Zb=(Xi(n_,$b=Sn),n_),t_=(Xi(e_,Jb=Sn),e_);function e_(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Jb.call(this)||this).key=t,o.data=e,o.Gt=n,o.jt=r,o.fieldTransforms=i,o.type=1,o}function n_(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=$b.call(this)||this).key=t,i.value=e,i.jt=n,i.fieldTransforms=r,i.type=0,i}function r_(t,e,n){var r,i,o;return i=t,e=r=e instanceof mm?e.data():lm.empty(),o=new fm(e),i.Gt.fields.forEach(function(t){var e;t.et()||(null!==(e=i.data.field(t))?o.set(t,e):o.delete(t))}),r=o.Pt(),s_(t.fieldTransforms,r,n)}function i_(t,e,n){var r=[];$y(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof mm&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof Pb?xb(o,s):o instanceof Lb?Fb(o,s):a))}return r}function o_(t,e,n){for(var r,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof mm&&(c=n.field(a.field)),i.push((r=c,a=e,c=void 0,(u=u)instanceof kb?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof Pb?xb(u,r):u instanceof Lb?Fb(u,r):(u=Cb(c=u,r),r=qb(u)+qb(c.Ut),sm(u)&&sm(c.Ut)?Tb(r):Eb(c.Qt,r))))}return i}function s_(t,e,n){for(var r=new fm(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}function a_(t){this.count=t}var u_,c_,h_,l_=(Xi(d_,h_=Sn),d_),f_=(Xi(p_,c_=Sn),p_);function p_(t,e){var n=this;return(n=c_.call(this)||this).key=t,n.jt=e,n.type=3,n.fieldTransforms=[],n}function d_(t,e){var n=this;return(n=h_.call(this)||this).key=t,n.jt=e,n.type=2,n.fieldTransforms=[],n}function v_(t){switch(t){case ag.OK:return Jy(),0;case ag.CANCELLED:case ag.UNKNOWN:case ag.DEADLINE_EXCEEDED:case ag.RESOURCE_EXHAUSTED:case ag.INTERNAL:case ag.UNAVAILABLE:case ag.UNAUTHENTICATED:return;case ag.INVALID_ARGUMENT:case ag.NOT_FOUND:case ag.ALREADY_EXISTS:case ag.PERMISSION_DENIED:case ag.FAILED_PRECONDITION:case ag.ABORTED:case ag.OUT_OF_RANGE:case ag.UNIMPLEMENTED:case ag.DATA_LOSS:return 1;default:return Jy(),0}}function y_(t){if(void 0===t)return Qy("GRPC error has no .code"),ag.UNKNOWN;switch(t){case u_.OK:return ag.OK;case u_.CANCELLED:return ag.CANCELLED;case u_.UNKNOWN:return ag.UNKNOWN;case u_.DEADLINE_EXCEEDED:return ag.DEADLINE_EXCEEDED;case u_.RESOURCE_EXHAUSTED:return ag.RESOURCE_EXHAUSTED;case u_.INTERNAL:return ag.INTERNAL;case u_.UNAVAILABLE:return ag.UNAVAILABLE;case u_.UNAUTHENTICATED:return ag.UNAUTHENTICATED;case u_.INVALID_ARGUMENT:return ag.INVALID_ARGUMENT;case u_.NOT_FOUND:return ag.NOT_FOUND;case u_.ALREADY_EXISTS:return ag.ALREADY_EXISTS;case u_.PERMISSION_DENIED:return ag.PERMISSION_DENIED;case u_.FAILED_PRECONDITION:return ag.FAILED_PRECONDITION;case u_.ABORTED:return ag.ABORTED;case u_.OUT_OF_RANGE:return ag.OUT_OF_RANGE;case u_.UNIMPLEMENTED:return ag.UNIMPLEMENTED;case u_.DATA_LOSS:return ag.DATA_LOSS;default:return Jy()}}(W=u_=u_||{})[W.OK=0]="OK",W[W.CANCELLED=1]="CANCELLED",W[W.UNKNOWN=2]="UNKNOWN",W[W.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",W[W.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",W[W.NOT_FOUND=5]="NOT_FOUND",W[W.ALREADY_EXISTS=6]="ALREADY_EXISTS",W[W.PERMISSION_DENIED=7]="PERMISSION_DENIED",W[W.UNAUTHENTICATED=16]="UNAUTHENTICATED",W[W.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",W[W.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",W[W.ABORTED=10]="ABORTED",W[W.OUT_OF_RANGE=11]="OUT_OF_RANGE",W[W.UNIMPLEMENTED=12]="UNIMPLEMENTED",W[W.INTERNAL=13]="INTERNAL",W[W.UNAVAILABLE=14]="UNAVAILABLE",W[W.DATA_LOSS=15]="DATA_LOSS";var g_=(I_.prototype.zt=function(t,e){return new I_(this.H,this.root.zt(t,e,this.H).copy(null,null,b_.Ht,null,null))},I_.prototype.remove=function(t){return new I_(this.H,this.root.remove(t,this.H).copy(null,null,b_.Ht,null,null))},I_.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},I_.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},I_.prototype.et=function(){return this.root.et()},Object.defineProperty(I_.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),I_.prototype.Jt=function(){return this.root.Jt()},I_.prototype.Yt=function(){return this.root.Yt()},I_.prototype.Xt=function(t){return this.root.Xt(t)},I_.prototype.forEach=function(n){this.Xt(function(t,e){return n(t,e),!1})},I_.prototype.toString=function(){var n=[];return this.Xt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},I_.prototype.Zt=function(t){return this.root.Zt(t)},I_.prototype.te=function(){return new m_(this.root,null,this.H,!1)},I_.prototype.ee=function(t){return new m_(this.root,t,this.H,!1)},I_.prototype.ne=function(){return new m_(this.root,null,this.H,!0)},I_.prototype.se=function(t){return new m_(this.root,t,this.H,!0)},I_),m_=(w_.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},w_.prototype.ce=function(){return 0<this.re.length},w_.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},w_),b_=(__.prototype.copy=function(t,e,n,r,i){return new __(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},__.prototype.et=function(){return!1},__.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},__.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},__.prototype.min=function(){return this.left.et()?this:this.left.min()},__.prototype.Jt=function(){return this.min().key},__.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},__.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},__.prototype.he=function(){if(this.left.et())return __.EMPTY;var t=this;return(t=(t=!t.left.le()&&!t.left.left.le()?t._e():t).copy(null,null,null,t.left.he(),null)).ue()},__.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.et()||r.left.le()||r.left.left.le())?r._e():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.le()?r.fe():r).right.et()||r.right.le()||r.right.left.le())?r.de():r).key)){if(r.right.et())return __.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.he())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.ue()},__.prototype.le=function(){return this.color},__.prototype.ue=function(){var t=this;return t=(t=(t=t.right.le()&&!t.left.le()?t.we():t).left.le()&&t.left.left.le()?t.fe():t).left.le()&&t.right.le()?t.Ee():t},__.prototype._e=function(){var t=this.Ee();return t=t.right.left.le()?(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee():t},__.prototype.de=function(){var t=this.Ee();return t=t.left.left.le()?(t=t.fe()).Ee():t},__.prototype.we=function(){var t=this.copy(null,null,__.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},__.prototype.fe=function(){var t=this.copy(null,null,__.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},__.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},__.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},__.prototype.Ie=function(){if(this.le()&&this.left.le())throw Jy();if(this.right.le())throw Jy();var t=this.left.Ie();if(t!==this.right.Ie())throw Jy();return t+(this.le()?0:1)},__);function __(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:__.RED,this.left=null!=r?r:__.EMPTY,this.right=null!=i?i:__.EMPTY,this.size=this.left.size+1+this.right.size}function w_(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}function I_(t,e){this.H=t,this.root=e||b_.EMPTY}function E_(){this.size=0}b_.EMPTY=null,b_.RED=!0,b_.Ht=!1,b_.EMPTY=(Object.defineProperty(E_.prototype,"key",{get:function(){throw Jy()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"value",{get:function(){throw Jy()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"color",{get:function(){throw Jy()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"left",{get:function(){throw Jy()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"right",{get:function(){throw Jy()},enumerable:!1,configurable:!0}),E_.prototype.copy=function(t,e,n,r,i){return this},E_.prototype.zt=function(t,e,n){return new b_(t,e)},E_.prototype.remove=function(t,e){return this},E_.prototype.et=function(){return!0},E_.prototype.Xt=function(t){return!1},E_.prototype.Zt=function(t){return!1},E_.prototype.Jt=function(){return null},E_.prototype.Yt=function(){return null},E_.prototype.le=function(){return!1},E_.prototype.Te=function(){return!0},E_.prototype.Ie=function(){return 0},new E_);var T_=(N_.prototype.has=function(t){return null!==this.data.get(t)},N_.prototype.first=function(){return this.data.Jt()},N_.prototype.last=function(){return this.data.Yt()},Object.defineProperty(N_.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),N_.prototype.indexOf=function(t){return this.data.indexOf(t)},N_.prototype.forEach=function(n){this.data.Xt(function(t,e){return n(t),!1})},N_.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(0<=this.H(r.key,t[1]))return;e(r.key)}},N_.prototype.Ae=function(t,e){for(var n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},N_.prototype.Re=function(t){t=this.data.ee(t);return t.ce()?t.oe().key:null},N_.prototype.te=function(){return new S_(this.data.te())},N_.prototype.ee=function(t){return new S_(this.data.ee(t))},N_.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},N_.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},N_.prototype.et=function(){return this.data.et()},N_.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},N_.prototype.isEqual=function(t){if(!(t instanceof N_))return!1;if(this.size!==t.size)return!1;for(var e=this.data.te(),n=t.data.te();e.ce();){var r=e.oe().key,i=n.oe().key;if(0!==this.H(r,i))return!1}return!0},N_.prototype.it=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},N_.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},N_.prototype.copy=function(t){var e=new N_(this.H);return e.data=t,e},N_),S_=(A_.prototype.oe=function(){return this.ye.oe().key},A_.prototype.ce=function(){return this.ye.ce()},A_),C_=new g_(Rg.H);function A_(t){this.ye=t}function N_(t){this.H=t,this.data=new g_(this.H)}var k_=new g_(Rg.H);var P_=new g_(Rg.H);var O_=new T_(Rg.H);function R_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=O_,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var x_=new T_(eg);var D_=(X_.pe=function(t){return new X_(t.H)},X_.prototype.has=function(t){return null!=this.ge.get(t)},X_.prototype.get=function(t){return this.ge.get(t)},X_.prototype.first=function(){return this.Ve.Jt()},X_.prototype.last=function(){return this.Ve.Yt()},X_.prototype.et=function(){return this.Ve.et()},X_.prototype.indexOf=function(t){t=this.ge.get(t);return t?this.Ve.indexOf(t):-1},Object.defineProperty(X_.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),X_.prototype.forEach=function(n){this.Ve.Xt(function(t,e){return n(t),!1})},X_.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},X_.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},X_.prototype.isEqual=function(t){if(!(t instanceof X_))return!1;if(this.size!==t.size)return!1;for(var e=this.Ve.te(),n=t.Ve.te();e.ce();){var r=e.oe().key,i=n.oe().key;if(!r.isEqual(i))return!1}return!0},X_.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},X_.prototype.copy=function(t,e){var n=new X_;return n.H=this.H,n.ge=t,n.Ve=e,n},X_),L_=(Y_.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);!n||0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):Jy()},Y_.prototype.ve=function(){var n=[];return this.be.Xt(function(t,e){n.push(e)}),n},Y_),M_=(Q_.Ne=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Q_(t,e,D_.pe(e),i,n,r,!0,!1)},Object.defineProperty(Q_.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),Q_.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&yb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Q_),F_=(K_.Me=function(t,e){var n=new Map;return n.set(t,j_.Le(t,e)),new K_(Ng.min(),n,x_,C_,R_())},K_),j_=(W_.Le=function(t,e){return new W_(ig.T,e,R_(),R_(),R_())},W_),U_=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},V_=function(t,e){this.targetId=t,this.je=e},q_=function(t,e,n,r){void 0===n&&(n=ig.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},B_=(Object.defineProperty(G_.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(G_.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),G_.prototype.tn=function(t){0<t.l()&&(this.Ye=!0,this.He=t)},G_.prototype.en=function(){var n=R_(),r=R_(),i=R_();return this.ze.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Jy()}}),new j_(this.He,this.Je,n,r,i)},G_.prototype.nn=function(){this.Ye=!1,this.ze=$_()},G_.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},G_.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},G_.prototype.on=function(){this.Ge+=1},G_.prototype.cn=function(){--this.Ge},G_.prototype.an=function(){this.Ye=!0,this.Je=!0},G_),H_=(z_.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof mm?this.wn(r,t.We):t.We instanceof bm&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},z_.prototype.Tn=function(n){var r=this;this.In(n,function(t){var e=r.mn(t);switch(n.state){case 0:r.An(t)&&e.tn(n.resumeToken);break;case 1:e.cn(),e.Xe||e.nn(),e.tn(n.resumeToken);break;case 2:e.cn(),e.Xe||r.removeTarget(t);break;case 3:r.An(t)&&(e.an(),e.tn(n.resumeToken));break;case 4:r.An(t)&&(r.Rn(t),e.tn(n.resumeToken));break;default:Jy()}})},z_.prototype.In=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.hn.forEach(function(t,e){r.An(e)&&n(e)})},z_.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,t=this.yn(e);t&&(Nm(t=t.target)?0===n?(t=new Rg(t.path),this.En(e,t,new bm(t,Ng.min()))):$y(1===n):this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e)))},z_.prototype.Vn=function(r){var i=this,o=new Map;this.hn.forEach(function(t,e){var n=i.yn(e);n&&(t.Be&&Nm(n.target)&&(n=new Rg(n.target.path),null!==i.ln.get(n)||i.pn(e,n)||i.En(e,n,new bm(n,r))),t.Ze&&(o.set(e,t.en()),t.nn()))});var s=R_();this._n.forEach(function(t,e){var n=!0;e.Ae(function(t){t=i.yn(t);return!t||2===t.Ft||(n=!1)}),n&&(s=s.add(t))});var t=new F_(r,o,this.fn,this.ln,s);return this.ln=C_,this._n=J_(),this.fn=new T_(eg),t},z_.prototype.wn=function(t,e){var n;this.An(t)&&(n=this.pn(t,e.key)?2:0,this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t)))},z_.prototype.En=function(t,e,n){var r;this.An(t)&&(r=this.mn(t),this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n)))},z_.prototype.removeTarget=function(t){this.hn.delete(t)},z_.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},z_.prototype.on=function(t){this.mn(t).on()},z_.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new B_,this.hn.set(t,e)),e},z_.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new T_(eg),this._n=this._n.zt(t,e)),e},z_.prototype.An=function(t){var e=null!==this.yn(t);return e||Ky("WatchChangeAggregator","Detected inactive target",t),e},z_.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},z_.prototype.Rn=function(e){var n=this;this.hn.set(e,new B_),this.un.vn(e).forEach(function(t){n.En(e,t,null)})},z_.prototype.pn=function(t,e){return this.un.vn(t).has(e)},z_);function z_(t){this.un=t,this.hn=new Map,this.ln=C_,this._n=J_(),this.fn=new T_(eg)}function G_(){this.Ge=0,this.ze=$_(),this.He=ig.T,this.Je=!1,this.Ye=!0}function W_(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}function K_(t,e,n,r,i){this.Ot=t,this.$e=e,this.Fe=n,this.Oe=r,this.ke=i}function Q_(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}function Y_(){this.be=new g_(Rg.H)}function X_(n){this.H=n?function(t,e){return n(t,e)||Rg.H(t.key,e.key)}:function(t,e){return Rg.H(t.key,e.key)},this.ge=k_,this.Ve=new g_(this.H)}function J_(){return new g_(Rg.H)}function $_(){return new g_(Rg.H)}var Z_={asc:"ASCENDING",desc:"DESCENDING"},tw={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ew=function(t,e){this.t=t,this.Bt=e};function nw(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function rw(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function iw(t){return $y(!!t),Ng.K((t=Gg(t),new Ag(t.seconds,t.nanos)))}function ow(t,e){return new kg(["projects",t.projectId,"databases",t.database]).child("documents").child(e).rt()}function sw(t){t=kg.ot(t);return $y(Cw(t)),t}function aw(t,e){return ow(t.t,e.path)}function uw(t,e){e=sw(e);if(e.get(1)!==t.t.projectId)throw new ug(ag.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new ug(ag.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new Rg(fw(e))}function cw(t,e){return ow(t.t,e)}function hw(t){t=sw(t);return 4===t.length?kg.ct():fw(t)}function lw(t){return new kg(["projects",t.t.projectId,"databases",t.t.database]).rt()}function fw(t){return $y(4<t.length&&"documents"===t.get(4)),t.Y(5)}function pw(t,e,n){return{name:aw(t,e),fields:n.proto.mapValue.fields}}function dw(t,e,n){var r=uw(t,e.name),t=iw(e.updateTime),e=new lm({mapValue:{fields:e.fields}});return new mm(r,t,e,{hasCommittedMutations:!!n})}function vw(t,e){var n,r,i;if(e instanceof Zb)n={update:pw(t,e.key,e.value)};else if(e instanceof l_)n={delete:aw(t,e.key)};else if(e instanceof t_)n={update:pw(t,e.key,e.data),updateMask:(i=e.Gt,r=[],i.fields.forEach(function(t){return r.push(t.rt())}),{fieldPaths:r})};else{if(!(e instanceof f_))return Jy();n={verify:aw(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof kb)return{fieldPath:t.field.rt(),setToServerValue:"REQUEST_TIME"};if(e instanceof Pb)return{fieldPath:t.field.rt(),appendMissingElements:{values:e.elements}};if(e instanceof Lb)return{fieldPath:t.field.rt(),removeAllFromArray:{values:e.elements}};if(e instanceof Ub)return{fieldPath:t.field.rt(),increment:e.Ut};throw Jy()})),e.jt.Wt||(n.currentDocument=void 0!==(i=e.jt).updateTime?{updateTime:(e=t,t=i.updateTime,nw(e,t.j()))}:void 0!==i.exists?{exists:i.exists}:Jy()),n}function yw(e,t){var n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?Gb.updateTime(iw(s.updateTime)):void 0!==s.exists?Gb.exists(s.exists):Gb.Kt():Gb.Kt(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?($y("REQUEST_TIME"===e.setToServerValue),r=new kb):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new Pb(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new Lb(n)):"increment"in e?r=new Ub(t,e.increment):Jy();e=Og.lt(e.fieldPath);return new zb(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=uw(e,t.update.name),o=new lm({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=(s=t.updateMask.fieldPaths||[],new Bg(s.map(function(t){return Og.lt(t)})));return new t_(i,o,s,n,r)}return new Zb(i,o,n,r)}if(t.delete){r=uw(e,t.delete);return new l_(r,n)}if(t.verify){t=uw(e,t.verify);return new f_(t,n)}return Jy()}function gw(t,e){return{documents:[cw(t,e.path)]}}function mw(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=cw(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cw(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(cm(t.value))return{unaryFilter:{field:Iw(t.field),op:"IS_NAN"}};if(um(t.value))return{unaryFilter:{field:Iw(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(cm(t.value))return{unaryFilter:{field:Iw(t.field),op:"IS_NOT_NAN"}};if(um(t.value))return{unaryFilter:{field:Iw(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iw(t.field),op:(e=t.op,tw[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:Iw((t=t).field),direction:(t=t.dir,Z_[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.Bt||Xg(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=_w(e.startAt)),e.endAt&&(n.structuredQuery.endAt=_w(e.endAt)),n}function bw(t){var e=hw(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&($y(1===r),(a=n.from[0]).allDescendants?i=a.collectionId:e=e.child(a.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[Sw(t)]:void 0!==t.fieldFilter?[Tw(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):Jy():[]}(n.where));var s=[],t=null,r=null,a=null;return sb(e,i,s=n.orderBy?n.orderBy.map(function(t){return new nb(Ew((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}):s,o,t=n.limit?Xg(o="object"==typeof(o=n.limit)?o.value:o)?null:o:t,"F",r=n.startAt?ww(n.startAt):r,a=n.endAt?ww(n.endAt):a)}function _w(t){return{before:t.before,values:t.position}}function ww(t){var e=!!t.before,t=t.values||[];return new Xm(t,e)}function Iw(t){return{fieldPath:t.rt()}}function Ew(t){return Og.lt(t.fieldPath)}function Tw(t){return Pm.create(Ew(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Jy()}}(),t.fieldFilter.value)}function Sw(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Ew(t.unaryFilter.field);return Pm.create(e,"==",{doubleValue:NaN});case"IS_NULL":e=Ew(t.unaryFilter.field);return Pm.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=Ew(t.unaryFilter.field);return Pm.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":n=Ew(t.unaryFilter.field);return Pm.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Jy()}}function Cw(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var Aw,Nw=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},kw=(jw.prototype.catch=function(t){return this.next(void 0,t)},jw.prototype.next=function(r,i){var o=this;return this.Nn&&Jy(),this.Nn=!0,this.xn?this.error?this.$n(i,this.error):this.Fn(r,this.result):new jw(function(e,n){o.Dn=function(t){o.Fn(r,t).next(e,n)},o.Cn=function(t){o.$n(i,t).next(e,n)}})},jw.prototype.On=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},jw.prototype.kn=function(t){try{var e=t();return e instanceof jw?e:jw.resolve(e)}catch(t){return jw.reject(t)}},jw.prototype.Fn=function(t,e){return t?this.kn(function(){return t(e)}):jw.resolve(e)},jw.prototype.$n=function(t,e){return t?this.kn(function(){return t(e)}):jw.reject(e)},jw.resolve=function(n){return new jw(function(t,e){t(n)})},jw.reject=function(n){return new jw(function(t,e){e(n)})},jw.Mn=function(t){return new jw(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},jw.Ln=function(t){for(var n=jw.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?jw.resolve(t):e()})}(r[e]);return n},jw.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Mn(i)},jw),Pw=(Fw.open=function(t,e,n,r){try{return new Fw(e,t.transaction(r,n))}catch(t){throw new xw(e,t)}},Object.defineProperty(Fw.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),Fw.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Ky("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Fw.prototype.store=function(t){t=this.transaction.objectStore(t);return new Vw(t)},Fw),Ow=(Mw.delete=function(t){return Ky("SimpleDb","Removing database:",t),Bw(window.indexedDB.deleteDatabase(t)).On()},Mw.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(Mw.Wn())return!0;var t=vo(),e=Mw.Qn(t),n=0<e&&e<10,e=Mw.jn(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},Mw.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},Mw.zn=function(t,e){return t.store(e)},Mw.Qn=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},Mw.jn=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},Mw.prototype.Hn=function(o){return $i(this,void 0,void 0,function(){var e,i=this;return Zi(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Ky("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new xw(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new ug(ag.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new xw(o,t))},r.onupgradeneeded=function(t){Ky("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Un.Jn(e,r.transaction,t.oldVersion,i.version).next(function(){Ky("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return i.Yn(t)}),this.db)]}})})},Mw.prototype.Xn=function(e){this.Yn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},Mw.prototype.runTransaction=function(a,n,u,c){return $i(this,void 0,void 0,function(){var i,o,s,e;return Zi(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Hn(a)];case 2:return s.db=t.sent(),e=Pw.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),kw.reject(t)}).On(),r={},n.catch(function(){}),[4,e.qn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Ky("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},Mw.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},Mw),Rw=(Object.defineProperty(Lw.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(Lw.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(Lw.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),Lw.prototype.done=function(){this.ts=!0},Lw.prototype.ss=function(t){this.es=t},Lw.prototype.delete=function(){return Bw(this.Zn.delete())},Lw),xw=(Xi(Dw,Aw=ug),Dw);function Dw(t,e){var n=this;return(n=Aw.call(this,ag.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function Lw(t){this.Zn=t,this.ts=!1,this.es=null}function Mw(t,e,n){this.name=t,this.version=e,this.Un=n,12.2===Mw.Qn(vo())&&Qy("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Fw(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Bn=new Nw,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){t.error?n.Bn.reject(new xw(e,t.error)):n.Bn.resolve()},this.transaction.onerror=function(t){t=zw(t.target.error);n.Bn.reject(new xw(e,t))}}function jw(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}function Uw(t){return"IndexedDbTransactionError"===t.name}var Vw=(qw.prototype.put=function(t,e){t=void 0!==e?(Ky("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Ky("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return Bw(t)},qw.prototype.add=function(t){return Ky("SimpleDb","ADD",this.store.name,t,t),Bw(this.store.add(t))},qw.prototype.get=function(e){var n=this;return Bw(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Ky("SimpleDb","GET",n.store.name,e,t),t})},qw.prototype.delete=function(t){return Ky("SimpleDb","DELETE",this.store.name,t),Bw(this.store.delete(t))},qw.prototype.count=function(){return Ky("SimpleDb","COUNT",this.store.name),Bw(this.store.count())},qw.prototype.rs=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.os(e,function(t,e){n.push(e)}).next(function(){return n})},qw.prototype.cs=function(t,e){Ky("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.us=!1;e=this.cursor(e);return this.os(e,function(t,e,n){return n.delete()})},qw.prototype.hs=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.os(n,e)},qw.prototype.ls=function(r){var t=this.cursor({});return new kw(function(n,e){t.onerror=function(t){t=zw(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},qw.prototype.os=function(t,i){var o=[];return new kw(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new Rw(n),(t=i(n.primaryKey,n.value,e))instanceof kw&&(t=t.catch(function(t){return e.done(),kw.reject(t)}),o.push(t)),e.xn?r():null===e.ns?n.continue():n.continue(e.ns)):r()}}).next(function(){return kw.Mn(o)})},qw.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},qw.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},qw);function qw(t){this.store=t}function Bw(t){return new kw(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=zw(t.target.error);n(t)}})}var Hw=!1;function zw(t){var e=Ow.Qn(vo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new ug("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Hw||(Hw=!0,setTimeout(function(){throw n},0)),n}}return t}var Gw=(Ww.Ts=function(t,e,n,r,i){i=new Ww(t,e,Date.now()+n,r,i);return i.start(n),i},Ww.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},Ww.prototype.Rs=function(){return this.As()},Ww.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new ug(ag.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Ww.prototype.As=function(){var e=this;this._s.Ps(function(){return null!==e.Is?(e.clearTimeout(),e.op().then(function(t){return e.Es.resolve(t)})):Promise.resolve()})},Ww.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},Ww);function Ww(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Nw,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}function Kw(t,e){if(Qy("AsyncQueue",e+": "+t),Uw(t))return new ug(ag.UNAVAILABLE,e+": "+t);throw t}var Qw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sn=(Yw.prototype.gs=function(t){this.ys.push(t)},Yw.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},Yw);function Yw(){this.ys=[]}function Xw(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=Jw(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return Jw(e)}function Jw(t){return t+""}function $w(t){var e=t.length;if($y(2<=e),2===e)return $y(""===t.charAt(0)&&""===t.charAt(1)),kg.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&Jy(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Jy()}o=s+2}return new kg(r)}function Zw(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var tI=function(t,e){this.seconds=t,this.nanoseconds=e};Zw.store="owner",Zw.key="owner";function eI(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}eI.store="mutationQueues",eI.keyPath="userId";function nI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}nI.store="mutations",nI.keyPath="batchId",nI.userMutationsIndex="userMutationsIndex",nI.userMutationsKeyPath=["userId","batchId"];var rI=(iI.prefixForUser=function(t){return[t]},iI.prefixForPath=function(t,e){return[t,Xw(e)]},iI.key=function(t,e,n){return[t,Xw(e),n]},iI);function iI(){}rI.store="documentMutations",rI.PLACEHOLDER=new rI;function oI(t,e){this.path=t,this.readTime=e}function sI(t,e){this.path=t,this.version=e}var aI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};aI.store="remoteDocuments",aI.readTimeIndex="readTimeIndex",aI.readTimeIndexPath="readTime",aI.collectionReadTimeIndex="collectionReadTimeIndex",aI.collectionReadTimeIndexPath=["parentPath","readTime"];function uI(t){this.byteSize=t}uI.store="remoteDocumentGlobal",uI.key="remoteDocumentGlobalKey";function cI(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}cI.store="targets",cI.keyPath="targetId",cI.queryTargetsIndexName="queryTargetsIndex",cI.queryTargetsKeyPath=["canonicalId","targetId"];var hI=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};hI.store="targetDocuments",hI.keyPath=["targetId","path"],hI.documentTargetsIndex="documentTargetsIndex",hI.documentTargetsKeyPath=["path","targetId"];function lI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}lI.key="targetGlobalKey",lI.store="targetGlobal";function fI(t,e){this.collectionId=t,this.parent=e}fI.store="collectionParents",fI.keyPath=["collectionId","parent"];function pI(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}pI.store="clientMetadata",pI.keyPath="clientId";function dI(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}dI.store="bundles",dI.keyPath="bundleId";function vI(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}vI.store="namedQueries",vI.keyPath="name";var yI,gI=ro(ro(ro(ro([eI.store,nI.store,rI.store,aI.store,cI.store,Zw.store,lI.store,hI.store],[pI.store]),[uI.store]),[fI.store]),[dI.store,vI.store]),mI=(Xi(bI,yI=Sn),bI);function bI(t,e){var n=this;return(n=yI.call(this)||this).ps=t,n.bs=e,n}function _I(t,e){return Ow.zn(t.ps,e)}var wI=(SI.prototype.Ss=function(t,e,n){for(var r,i,o,s,a,u,c=n.Ds,h=0;h<this.mutations.length;h++){var l=this.mutations[h];l.key.isEqual(t)&&(r=l,i=e,o=c[h],l=u=a=s=void 0,e=r instanceof Zb?(a=o,u=(s=r).value,l=i_(s.fieldTransforms,i,a.transformResults),u=s_(s.fieldTransforms,u,l),new mm(s.key,a.version,u,{hasCommittedMutations:!0})):r instanceof t_?function(t,e,n){if(!Kb(t.jt,e))return new _m(t.key,n.version);e=r_(t,e,i_(t.fieldTransforms,e,n.transformResults));return new mm(t.key,n.version,e,{hasCommittedMutations:!0})}(r,i,o):new bm(r.key,o.version,{hasCommittedMutations:!0}))}return e},SI.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(i=r[n]).key.isEqual(t)&&(e=Qb(i,e,this.vs));for(var i,o=0,s=this.mutations;o<s.length;o++)(i=s[o]).key.isEqual(t)&&(e=Qb(i,e,this.vs));return e},SI.prototype.xs=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Cs(t.key,n.get(t.key));e&&(i=i.zt(t.key,e))}),i},SI.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},R_())},SI.prototype.isEqual=function(t){return this.batchId===t.batchId&&ng(this.mutations,t.mutations,Yb)&&ng(this.baseMutations,t.baseMutations,Yb)},SI),II=(TI.from=function(t,e,n){$y(t.mutations.length===n.length);for(var r=P_,i=t.mutations,o=0;o<i.length;o++)r=r.zt(i[o].key,n[o].version);return new TI(t,e,n,r)},TI),EI=function(t){this.Fs=t};function TI(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.$s=r}function SI(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}function CI(t,e){if(e.document)return dw(t.Fs,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Rg.Et(e.noDocument.path),r=OI(e.noDocument.readTime);return new bm(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){n=Rg.Et(e.unknownDocument.path),r=OI(e.unknownDocument.version);return new _m(n,r)}return Jy()}function AI(t,e,n){var r=NI(n),n=e.key.path.X().it();if(e instanceof mm){var i={name:aw(o=t.Fs,(s=e).key),fields:s.bt().mapValue.fields,updateTime:nw(o,s.version.j())},o=e.hasCommittedMutations;return new aI(null,null,i,o,r,n)}if(e instanceof bm){var s=e.key.path.it(),i=PI(e.version),o=e.hasCommittedMutations;return new aI(null,new oI(s,i),null,o,r,n)}if(e instanceof _m){o=e.key.path.it(),e=PI(e.version);return new aI(new sI(o,e),null,null,!0,r,n)}return Jy()}function NI(t){t=t.j();return[t.seconds,t.nanoseconds]}function kI(t){t=new Ag(t[0],t[1]);return Ng.K(t)}function PI(t){t=t.j();return new tI(t.seconds,t.nanoseconds)}function OI(t){t=new Ag(t.seconds,t.nanoseconds);return Ng.K(t)}function RI(e,t){for(var n=(t.baseMutations||[]).map(function(t){return yw(e.Fs,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var s=t.mutations.map(function(t){return yw(e.Fs,t)}),a=Ag.fromMillis(t.localWriteTimeMs);return new wI(t.batchId,a,n,s)}function xI(t){var e=OI(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?OI(t.lastLimboFreeSnapshotVersion):Ng.min(),r=void 0!==t.query.documents?($y(1===(r=t.query).documents.length),db(ab(hw(r.documents[0])))):db(bw(t.query));return new wb(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ig.fromBase64String(t.resumeToken))}function DI(t,e){var n=PI(e.Ot),r=PI(e.lastLimboFreeSnapshotVersion),i=(Nm(e.target)?gw:mw)(t.Fs,e.target),t=e.resumeToken.toBase64();return new cI(e.targetId,Cm(e.target),n,t,e.sequenceNumber,r,i)}function LI(t){var e=bw({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?vb(e,e.limit,"L"):e}var MI=(FI.prototype.Os=function(t,e){return jI(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:OI(t.createTime),version:t.version}})},FI.prototype.ks=function(t,e){return jI(t).put({bundleId:(e=e).id,createTime:PI(iw(e.createTime)),version:e.version})},FI.prototype.Ms=function(t,e){return UI(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:LI(t.bundledQuery),readTime:OI(t.readTime)}})},FI.prototype.Ls=function(t,e){return UI(t).put({name:(e=e).name,readTime:PI(iw(e.readTime)),bundledQuery:e.bundledQuery})},FI);function FI(){}function jI(t){return _I(t,dI.store)}function UI(t){return _I(t,vI.store)}var VI=(GI.prototype.qs=function(t,e){return this.Bs.add(e),kw.resolve()},GI.prototype.Us=function(t,e){return kw.resolve(this.Bs.getEntries(e))},GI),qI=(zI.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new T_(kg.H),t=!r.has(n);return this.index[e]=r.add(n),t},zI.prototype.has=function(t){var e=t.tt(),t=t.X(),e=this.index[e];return e&&e.has(t)},zI.prototype.getEntries=function(t){return(this.index[t]||new T_(kg.H)).it()},zI),BI=(HI.prototype.qs=function(t,e){var n=this;if(this.Qs.has(e))return kw.resolve();var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});i={collectionId:r,parent:Xw(i)};return WI(t).put(i)},HI.prototype.Us=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[rg(i),""],!1,!0);return WI(t).rs(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push($w(r.parent))}return o})},HI);function HI(){this.Qs=new qI}function zI(){this.index={}}function GI(){this.Bs=new qI}function WI(t){return _I(t,fI.store)}var KI={Ks:!1,Ws:0,js:0,Gs:0},QI=(YI.Ys=function(t){return new YI(t,YI.Xs,YI.Zs)},YI);function YI(t,e,n){this.zs=t,this.Hs=e,this.Js=n}function XI(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(e.code!==ag.FAILED_PRECONDITION||e.message!==Qw)throw e;return Ky("LocalStore","Unexpectedly lost primary lease"),[2]})})}QI.Xs=10,QI.Zs=1e3,QI.ti=new QI(41943040,QI.Xs,QI.Zs),QI.ei=new QI(-1,0,0);var JI=(ZI.prototype.get=function(t){var e=this.ni(t),e=this.ii[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.si(o,t))return i}},ZI.prototype.has=function(t){return void 0!==this.get(t)},ZI.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},ZI.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},ZI.prototype.forEach=function(s){Vg(this.ii,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},ZI.prototype.et=function(){return qg(this.ii)},ZI),W=($I.prototype.ci=function(t){t=this.ri.get(t);return t?t.readTime:Ng.min()},$I.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},$I.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},$I.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?kw.resolve(n.hi):this.fi(t,e)},$I.prototype.getEntries=function(t,e){return this.di(t,e)},$I.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},$I.prototype.ui=function(){},$I);function $I(){this.ri=new JI(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}function ZI(t,e){this.ni=t,this.si=e,this.ii={}}function tE(t,e,n){var r=t.store(nI.store),i=t.store(rI.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.hs({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){$y(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=rI.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return kw.Mn(o).next(function(){return a})}function eE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Jy();e=t.noDocument}return JSON.stringify(e).length}var nE=(rE.mi=function(t,e,n,r){return $y(""!==t.uid),new rE(t.m()?t.uid:"",e,n,r)},rE.prototype.Ai=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return oE(t).hs({index:nI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},rE.prototype.Ri=function(d,v,y,g){var m=this,b=sE(d),_=oE(d);return _.add({}).next(function(t){$y("number"==typeof t);for(var e,n,r,i,o,s=new wI(t,v,y,g),a=(e=m.Qt,n=m.userId,i=(r=s).baseMutations.map(function(t){return vw(e.Fs,t)}),o=r.mutations.map(function(t){return vw(e.Fs,t)}),new nI(n,r.batchId,r.vs.toMillis(),i,o)),u=[],c=new T_(function(t,e){return eg(t.rt(),e.rt())}),h=0,l=g;h<l.length;h++){var f=l[h],p=rI.key(m.userId,f.key.path,t),c=c.add(f.key.path.X());u.push(_.put(a)),u.push(b.put(p,rI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ei.qs(d,t))}),d.gs(function(){m.Ii[t]=s.keys()}),kw.Mn(u).next(function(){return s})})},rE.prototype.Pi=function(t,e){var n=this;return oE(t).get(e).next(function(t){return t?($y(t.userId===n.userId),RI(n.Qt,t)):null})},rE.prototype.yi=function(t,e){var n=this;return this.Ii[e]?kw.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){t=t.keys();return n.Ii[e]=t}return null})},rE.prototype.gi=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return oE(t).hs({index:nI.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&($y(e.batchId>=i),o=RI(r.Qt,e)),n.done()}).next(function(){return o})},rE.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return oE(t).hs({index:nI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},rE.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return oE(t).rs(nI.userMutationsIndex,n).next(function(t){return t.map(function(t){return RI(e.Qt,t)})})},rE.prototype.bi=function(o,s){var a=this,t=rI.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return sE(o).hs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=$w(i);if(r===a.userId&&s.path.isEqual(i))return oE(o).get(t).next(function(t){if(!t)throw Jy();$y(t.userId===a.userId),u.push(RI(a.Qt,t))});n.done()}).next(function(){return u})},rE.prototype.vi=function(e,t){var s=this,a=new T_(eg),n=[];return t.forEach(function(o){var t=rI.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=sE(e).hs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=$w(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),kw.Mn(n).next(function(){return s.Si(e,a)})},rE.prototype.Di=function(t,e){var o=this,s=e.path,a=s.length+1,e=rI.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new T_(eg);return sE(t).hs({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=$w(i);r===o.userId&&s.nt(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Si(t,u)})},rE.prototype.Si=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(oE(e).get(t).next(function(t){if(null===t)throw Jy();$y(t.userId===n.userId),r.push(RI(n.Qt,t))}))}),kw.Mn(i).next(function(){return r})},rE.prototype.Ci=function(e,n){var r=this;return tE(e.ps,this.userId,n).next(function(t){return e.gs(function(){r.xi(n.batchId)}),kw.forEach(t,function(t){return r.Ti.Ni(e,t)})})},rE.prototype.xi=function(t){delete this.Ii[t]},rE.prototype.$i=function(e){var i=this;return this.Ai(e).next(function(t){if(!t)return kw.resolve();var t=IDBKeyRange.lowerBound(rI.prefixForUser(i.userId)),r=[];return sE(e).hs({range:t},function(t,e,n){t[0]===i.userId?(t=$w(t[1]),r.push(t)):n.done()}).next(function(){$y(0===r.length)})})},rE.prototype.Fi=function(t,e){return iE(t,this.userId,e)},rE.prototype.Oi=function(t){var e=this;return aE(t).get(this.userId).next(function(t){return t||new eI(e.userId,-1,"")})},rE);function rE(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}function iE(t,o,e){var e=rI.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return sE(t).hs({range:e,us:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function oE(t){return _I(t,nI.store)}function sE(t){return _I(t,rI.store)}function aE(t){return _I(t,eI.store)}var uE=(lE.prototype.next=function(){return this.ki+=2,this.ki},lE.Mi=function(){return new lE(0)},lE.Li=function(){return new lE(-1)},lE),cE=(hE.prototype.Bi=function(n){var r=this;return this.qi(n).next(function(t){var e=new uE(t.highestTargetId);return t.highestTargetId=e.next(),r.Ui(n,t).next(function(){return t.highestTargetId})})},hE.prototype.Qi=function(t){return this.qi(t).next(function(t){return Ng.K(new Ag(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},hE.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},hE.prototype.Wi=function(e,n,r){var i=this;return this.qi(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.j()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Ui(e,t)})},hE.prototype.ji=function(e,n){var r=this;return this.Gi(e,n).next(function(){return r.qi(e).next(function(t){return t.targetCount+=1,r.zi(n,t),r.Ui(e,t)})})},hE.prototype.Hi=function(t,e){return this.Gi(t,e)},hE.prototype.Ji=function(e,t){var n=this;return this.Yi(e,t.targetId).next(function(){return fE(e).delete(t.targetId)}).next(function(){return n.qi(e)}).next(function(t){return $y(0<t.targetCount),--t.targetCount,n.Ui(e,t)})},hE.prototype.Xi=function(n,r,i){var o=this,s=0,a=[];return fE(n).hs(function(t,e){e=xI(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.Ji(n,e)))}).next(function(){return kw.Mn(a)}).next(function(){return s})},hE.prototype.In=function(t,n){return fE(t).hs(function(t,e){e=xI(e);n(e)})},hE.prototype.qi=function(t){return pE(t).get(lI.key).next(function(t){return $y(null!==t),t})},hE.prototype.Ui=function(t,e){return pE(t).put(lI.key,e)},hE.prototype.Gi=function(t,e){return fE(t).put(DI(this.Qt,e))},hE.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},hE.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},hE.prototype.tr=function(t,r){var e=Cm(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return fE(t).hs({range:e,index:cI.queryTargetsIndexName},function(t,e,n){e=xI(e);Am(r,e.target)&&(i=e,n.done())}).next(function(){return i})},hE.prototype.er=function(n,t,r){var i=this,o=[],s=dE(n);return t.forEach(function(t){var e=Xw(t.path);o.push(s.put(new hI(r,e))),o.push(i.Ti.nr(n,r,t))}),kw.Mn(o)},hE.prototype.sr=function(n,t,r){var i=this,o=dE(n);return kw.forEach(t,function(t){var e=Xw(t.path);return kw.Mn([o.delete([r,e]),i.Ti.ir(n,r,t)])})},hE.prototype.Yi=function(t,e){t=dE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},hE.prototype.rr=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=dE(t),r=R_();return t.hs({range:e,us:!0},function(t,e,n){t=$w(t[1]),t=new Rg(t);r=r.add(t)}).next(function(){return r})},hE.prototype.Fi=function(t,e){var e=Xw(e.path),e=IDBKeyRange.bound([e],[rg(e)],!1,!0),i=0;return dE(t).hs({index:hI.documentTargetsIndex,us:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},hE.prototype.Sn=function(t,e){return fE(t).get(e).next(function(t){return t?xI(t):null})},hE);function hE(t,e){this.Ti=t,this.Qt=e}function lE(t){this.ki=t}function fE(t){return _I(t,cI.store)}function pE(t){return _I(t,lI.store)}function dE(t){return _I(t,hI.store)}function vE(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=eg(n,t);return 0===t?eg(r,e):t}var yE=(EE.prototype.ur=function(){return++this.ar},EE.prototype.hr=function(t){var e=[t,this.ur()];this.buffer.size<this.cr?this.buffer=this.buffer.add(e):vE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(EE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),EE),gE=(IE.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},IE.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(IE.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),IE.prototype.wr=function(n){var t=this,e=this._r?3e5:6e4;Ky("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.dr=this._s.Tr("lru_garbage_collection",e,function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:this.dr=null,this._r=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.Ir(this.lr)];case 2:return t.sent(),[3,7];case 3:return Uw(e=t.sent())?(Ky("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,XI(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.wr(n)];case 8:return t.sent(),[2]}})})})},IE),mE=(wE.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},wE.prototype.Pr=function(t,e){var n=this;if(0===e)return kw.resolve(bg.q);var r=new yE(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},wE.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},wE.prototype.gr=function(t,e){return this.mr.gr(t,e)},wE.prototype.Vr=function(e,n){var r=this;return-1===this.params.zs?(Ky("LruGarbageCollector","Garbage collection skipped; disabled"),kw.resolve(KI)):this.pr(e).next(function(t){return t<r.params.zs?(Ky("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.zs),KI):r.br(e,n)})},wE.prototype.pr=function(t){return this.mr.pr(t)},wE.prototype.br=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Ar(e,this.params.Hs).next(function(t){return i=t>h.params.Js?(Ky("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Js+" from "+t),h.params.Js):t,s=Date.now(),h.Pr(e,i)}).next(function(t){return r=t,a=Date.now(),h.Xi(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.gr(e,r)}).next(function(t){return c=Date.now(),Wy()<=us.DEBUG&&Ky("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),kw.resolve({Ks:!0,Ws:i,js:o,Gs:t})})},wE),bE=(_E.prototype.Rr=function(t){var n=this.vr(t);return this.db.Sr().Zi(t).next(function(e){return n.next(function(t){return e+t})})},_E.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},_E.prototype.In=function(t,e){return this.db.Sr().In(t,e)},_E.prototype.yr=function(t,n){return this.Dr(t,function(t,e){return n(e)})},_E.prototype.nr=function(t,e,n){return TE(t,n)},_E.prototype.ir=function(t,e,n){return TE(t,n)},_E.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},_E.prototype.Ni=TE,_E.prototype.Cr=function(t,e){return r=e,i=!1,aE(n=t).ls(function(t){return iE(n,t,r).next(function(t){return t&&(i=!0),kw.resolve(!t)})}).next(function(){return i});var n,r,i},_E.prototype.gr=function(n,r){var i=this,o=this.db.$r().Nr(),s=[],a=0;return this.Dr(n,function(e,t){t<=r&&(t=i.Cr(n,e).next(function(t){if(!t)return a++,o._i(n,e).next(function(){return o.li(e),dE(n).delete([0,Xw(e.path)])})}),s.push(t))}).next(function(){return kw.Mn(s)}).next(function(){return o.apply(n)}).next(function(){return a})},_E.prototype.removeTarget=function(t,e){e=e.kt(t.bs);return this.db.Sr().Hi(t,e)},_E.prototype.Fr=TE,_E.prototype.Dr=function(t,r){var i,t=dE(t),o=bg.q;return t.hs({index:hI.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==bg.q&&r(new Rg($w(i)),o),o=e,i=t):o=bg.q}).next(function(){o!==bg.q&&r(new Rg($w(i)),o)})},_E.prototype.pr=function(t){return this.db.$r().Or(t)},_E);function _E(t,e){this.db=t,this.lr=new mE(this,e)}function wE(t,e){this.mr=t,this.params=e}function IE(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}function EE(t){this.cr=t,this.buffer=new T_(vE),this.ar=0}function TE(t,e){return dE(t).put((t=t.bs,new hI(0,Xw(e.path),t)))}var SE,CE=(kE.prototype.ai=function(t,e,n){return OE(t).put(RE(e),n)},kE.prototype.li=function(t,e){t=OE(t),e=RE(e);return t.delete(e)},kE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.kr(e,t)})},kE.prototype._i=function(t,e){var n=this;return OE(t).get(RE(e)).next(function(t){return n.Mr(t)})},kE.prototype.Lr=function(t,e){var n=this;return OE(t).get(RE(e)).next(function(t){var e=n.Mr(t);return e?{hi:e,size:eE(t)}:null})},kE.prototype.getEntries=function(t,e){var n=this,r=C_;return this.Br(t,e,function(t,e){e=n.Mr(e);r=r.zt(t,e)}).next(function(){return r})},kE.prototype.qr=function(t,e){var r=this,i=C_,o=new g_(Rg.H);return this.Br(t,e,function(t,e){var n=r.Mr(e);o=n?(i=i.zt(t,n),o.zt(t,eE(e))):(i=i.zt(t,null),o.zt(t,0))}).next(function(){return{Ur:i,Qr:o}})},kE.prototype.Br=function(t,e,i){if(e.et())return kw.resolve();var n=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),o=e.te(),s=o.oe();return OE(t).hs({range:n},function(t,e,n){for(var r=Rg.Et(t);s&&Rg.H(s,r)<0;)i(s,null),s=o.oe();s&&s.isEqual(r)&&(i(s,e),s=o.ce()?o.oe():null),s?n.ss(s.path.it()):n.done()}).next(function(){for(;s;)i(s,null),s=o.ce()?o.oe():null})},kE.prototype.Kr=function(t,r,e){var n,i=this,o=k_,s=r.path.length+1,a={};return e.isEqual(Ng.min())?(n=r.path.it(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.it(),e=NI(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=aI.collectionReadTimeIndex),OE(t).hs(a,function(t,e,n){t.length===s&&(e=CI(i.Qt,e),r.path.nt(e.key.path)?e instanceof mm&&bb(r,e)&&(o=o.zt(e.key,e)):n.done())}).next(function(){return o})},kE.prototype.Nr=function(t){return new AE(this,!!t&&t.Wr)},kE.prototype.Or=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},kE.prototype.getMetadata=function(t){return PE(t).get(uI.key).next(function(t){return $y(!!t),t})},kE.prototype.kr=function(t,e){return PE(t).put(uI.key,e)},kE.prototype.Mr=function(t){if(t){t=CI(this.Qt,t);return t instanceof bm&&t.version.isEqual(Ng.min())?null:t}return null},kE),AE=(Xi(NE,SE=W),NE.prototype.wi=function(i){var o=this,s=[],a=0,u=new T_(function(t,e){return eg(t.rt(),e.rt())});return this.ri.forEach(function(t,e){var n,r=o.Gr.get(t);e.hi?(n=AI(o.jr.Qt,e.hi,o.ci(t)),u=u.add(t.path.X()),e=eE(n),a+=e-r,s.push(o.jr.ai(i,t,n))):(a-=r,o.Wr?(r=AI(o.jr.Qt,new bm(t,Ng.min()),o.ci(t)),s.push(o.jr.ai(i,t,r))):s.push(o.jr.li(i,t)))}),u.forEach(function(t){s.push(o.jr.Ei.qs(i,t))}),s.push(this.jr.updateMetadata(i,a)),kw.Mn(s)},NE.prototype.fi=function(t,e){var n=this;return this.jr.Lr(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},NE.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},NE);function NE(t,e){var n=this;return(n=SE.call(this)||this).jr=t,n.Wr=e,n.Gr=new JI(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function kE(t,e){this.Qt=t,this.Ei=e}function PE(t){return _I(t,uI.store)}function OE(t){return _I(t,aI.store)}function RE(t){return t.path.it()}var xE=(DE.prototype.Jn=function(e,n,t,r){var i=this;$y(t<r&&0<=t&&r<=11);var o=new Pw("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(Zw.store),(s=e).createObjectStore(eI.store,{keyPath:eI.keyPath}),s.createObjectStore(nI.store,{keyPath:nI.keyPath,autoIncrement:!0}).createIndex(nI.userMutationsIndex,nI.userMutationsKeyPath,{unique:!0}),s.createObjectStore(rI.store),LE(e),e.createObjectStore(aI.store));var s,a=kw.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(hI.store),s.deleteObjectStore(cI.store),s.deleteObjectStore(lI.store),LE(e)),a=a.next(function(){return t=o.store(lI.store),e=new lI(0,0,Ng.min().j(),0),t.put(lI.key,e);var t,e})),t<4&&4<=r&&(a=(a=0!==t?a.next(function(){return n=e,(r=o).store(nI.store).rs().next(function(t){n.deleteObjectStore(nI.store),n.createObjectStore(nI.store,{keyPath:nI.keyPath,autoIncrement:!0}).createIndex(nI.userMutationsIndex,nI.userMutationsKeyPath,{unique:!0});var e=r.store(nI.store),t=t.map(function(t){return e.put(t)});return kw.Mn(t)});var n,r}):a).next(function(){e.createObjectStore(pI.store,{keyPath:pI.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.zr(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(uI.store),i.Hr(o)})),t<7&&7<=r&&(a=a.next(function(){return i.Jr(o)})),t<8&&8<=r&&(a=a.next(function(){return i.Yr(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(aI.store)).createIndex(aI.readTimeIndex,aI.readTimeIndexPath,{unique:!1}),t.createIndex(aI.collectionReadTimeIndex,aI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.Xr(o)})),a=t<11&&11<=r?a.next(function(){e.createObjectStore(dI.store,{keyPath:dI.keyPath}),e.createObjectStore(vI.store,{keyPath:vI.keyPath})}):a},DE.prototype.Hr=function(e){var n=0;return e.store(aI.store).hs(function(t,e){n+=eE(e)}).next(function(){var t=new uI(n);return e.store(uI.store).put(uI.key,t)})},DE.prototype.zr=function(n){var r=this,t=n.store(eI.store),i=n.store(nI.store);return t.rs().next(function(t){return kw.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.rs(nI.userMutationsIndex,t).next(function(t){return kw.forEach(t,function(t){$y(t.userId===e.userId);t=RI(r.Qt,t);return tE(n,e.userId,t).next(function(){})})})})})},DE.prototype.Jr=function(t){var o=t.store(hI.store),e=t.store(aI.store);return t.store(lI.store).get(lI.key).next(function(r){var i=[];return e.hs(function(t,e){var n=new kg(t),t=[0,Xw(n)];i.push(o.get(t).next(function(t){return t?kw.resolve():o.put(new hI(0,Xw(n),r.highestListenSequenceNumber))}))}).next(function(){return kw.Mn(i)})})},DE.prototype.Yr=function(t,e){t.createObjectStore(fI.store,{keyPath:fI.keyPath});function r(t){if(i.add(t)){var e=t.tt(),t=t.X();return n.put({collectionId:e,parent:Xw(t)})}}var n=e.store(fI.store),i=new qI;return e.store(aI.store).hs({us:!0},function(t,e){t=new kg(t);return r(t.X())}).next(function(){return e.store(rI.store).hs({us:!0},function(t,e){t[0];var n=t[1],n=(t[2],$w(n));return r(n.X())})})},DE.prototype.Xr=function(t){var n=this,r=t.store(cI.store);return r.hs(function(t,e){e=xI(e),e=DI(n.Qt,e);return r.put(e)})},DE);function DE(t){this.Qt=t}function LE(t){t.createObjectStore(hI.store,{keyPath:hI.keyPath}).createIndex(hI.documentTargetsIndex,hI.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(cI.store,{keyPath:cI.keyPath}).createIndex(cI.queryTargetsIndexName,cI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(lI.store)}var ME="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",FE=(jE.prototype.start=function(){var e=this;return this.To().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ug(ag.FAILED_PRECONDITION,ME);return e.Io(),e.mo(),e.Ao(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e._o.Ki(t)})}).then(function(t){e.so=new bg(t,e.eo)}).then(function(){e.io=!0}).catch(function(t){return e.lo&&e.lo.close(),Promise.reject(t)})},jE.prototype.Ro=function(n){var t=this;return this.uo=function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.Er?[2,n(e)]:[2]})})},n(this.isPrimary)},jE.prototype.Po=function(n){var t=this;this.lo.Xn(function(e){return $i(t,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},jE.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},jE.prototype.To=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return VE(e).put(new pI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Vo(e).next(function(t){t||(n.isPrimary=!1,n.Zr.po(function(){return n.uo(!1)}))})}).next(function(){return n.bo(e)}).next(function(t){return n.isPrimary&&!t?n.vo(e).next(function(){return!1}):!!t&&n.So(e).next(function(){return!0})})}).catch(function(t){if(Uw(t))return Ky("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Ky("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Zr.po(function(){return n.uo(t)}),n.isPrimary=t})},jE.prototype.Vo=function(t){var e=this;return UE(t).get(Zw.key).next(function(t){return kw.resolve(e.Do(t))})},jE.prototype.Co=function(t){return VE(t).delete(this.clientId)},jE.prototype.xo=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o=this;return Zi(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=_I(t,pI.store);return r.rs().next(function(t){var e=o.$o(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return kw.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Eo)for(n=0,r=e;n<r.length;n++)i=r[n],this.Eo.removeItem(this.Fo(i.clientId));t.label=2;case 2:return[2]}})})},jE.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},jE.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},jE.prototype.bo=function(e){var r=this;return this.no?kw.resolve(!0):UE(e).get(Zw.key).next(function(t){if(null!==t&&r.No(t.leaseTimestampMs,5e3)&&!r.Oo(t.ownerId)){if(r.Do(t)&&r.networkEnabled)return!0;if(!r.Do(t)){if(!t.allowTabSynchronization)throw new ug(ag.FAILED_PRECONDITION,ME);return!1}}return!(!r.networkEnabled||!r.inForeground)||VE(e).rs().next(function(t){return void 0===r.$o(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Ky("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},jE.prototype.ko=function(){return $i(this,void 0,void 0,function(){var n=this;return Zi(this,function(t){switch(t.label){case 0:return this.io=!1,this.Mo(),this.co&&(this.co.cancel(),this.co=null),this.Lo(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[Zw.store,pI.store],function(t){var e=new mI(t,bg.q);return n.vo(e).next(function(){return n.Co(e)})})];case 1:return t.sent(),this.lo.close(),this.qo(),[2]}})})},jE.prototype.$o=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.Oo(t.clientId)})},jE.prototype.Uo=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return VE(t).rs().next(function(t){return e.$o(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(jE.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),jE.prototype.Qo=function(t){return nE.mi(t,this.Qt,this.Ei,this.Ti)},jE.prototype.Sr=function(){return this._o},jE.prototype.$r=function(){return this.fo},jE.prototype.Ko=function(){return this.Ei},jE.prototype.Wo=function(){return this.wo},jE.prototype.runTransaction=function(e,n,r){var i=this;Ky("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.lo.runTransaction(e,t,gI,function(t){return o=new mI(t,i.so?i.so.next():bg.q),"readwrite-primary"===n?i.Vo(o).next(function(t){return!!t||i.bo(o)}).next(function(t){if(!t)throw Qy("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new ug(ag.FAILED_PRECONDITION,Qw);return r(o)}).next(function(t){return i.So(o).next(function(){return t})}):i.jo(o).next(function(){return r(o)})}).then(function(t){return o.Vs(),t})},jE.prototype.jo=function(t){var e=this;return UE(t).get(Zw.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.Oo(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ug(ag.FAILED_PRECONDITION,ME)})},jE.prototype.So=function(t){var e=new Zw(this.clientId,this.allowTabSynchronization,Date.now());return UE(t).put(Zw.key,e)},jE.Kn=function(){return Ow.Kn()},jE.prototype.vo=function(t){var e=this,n=UE(t);return n.get(Zw.key).next(function(t){return e.Do(t)?(Ky("IndexedDbPersistence","Releasing primary lease."),n.delete(Zw.key)):kw.resolve()})},jE.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Qy("Detected an update time that is in the future: "+t+" > "+n),1))},jE.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},jE.prototype.Lo=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},jE.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Mo(),e.Zr.Ps(function(){return e.ko()})},this.window.addEventListener("unload",this.ro))},jE.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},jE.prototype.Oo=function(t){try{var e=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Fo(t)));return Ky("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Qy("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},jE.prototype.Mo=function(){if(this.Eo)try{this.Eo.setItem(this.Fo(this.clientId),String(Date.now()))}catch(t){Qy("Failed to set zombie client id.",t)}},jE.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Fo(this.clientId))}catch(t){}},jE.prototype.Fo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},jE);function jE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Zr=i,this.window=o,this.document=s,this.eo=u,this.no=c,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!jE.Kn())throw new ug(ag.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new bE(this,r),this.ho=e+"main",this.Qt=new EI(a),this.lo=new Ow(this.ho,11,new xE(this.Qt)),this._o=new cE(this.Ti,this.Qt),this.Ei=new BI,this.fo=(e=this.Qt,a=this.Ei,new CE(e,a)),this.wo=new MI,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===c&&Qy("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function UE(t){return _I(t,Zw.store)}function VE(t){return _I(t,pI.store)}function qE(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function BE(t,e){this.progress=t,this.Go=e}var HE=(XE.prototype.Ho=function(e,n){var r=this;return this.zo.bi(e,n).next(function(t){return r.Jo(e,n,t)})},XE.prototype.Jo=function(t,r,i){return this.fo._i(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Cs(r,t);return t})},XE.prototype.Yo=function(t,e,i){var o=C_;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Cs(t,e);o=o.zt(t,e)}),o},XE.prototype.Xo=function(e,t){var n=this;return this.fo.getEntries(e,t).next(function(t){return n.Zo(e,t)})},XE.prototype.Zo=function(e,r){var i=this;return this.zo.vi(e,r).next(function(t){var t=i.Yo(e,r,t),n=C_;return t.forEach(function(t,e){e=e||new bm(t,Ng.min()),n=n.zt(t,e)}),n})},XE.prototype.Kr=function(t,e,n){return r=e,Rg.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):fb(e)?this.ec(t,e,n):this.nc(t,e,n);var r},XE.prototype.tc=function(t,e){return this.Ho(t,new Rg(e)).next(function(t){var e=k_;return e=t instanceof mm?e.zt(t.key,t):e})},XE.prototype.ec=function(n,r,i){var o=this,s=r.collectionGroup,a=k_;return this.Ei.Us(n,s).next(function(t){return kw.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new ob(t,null,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.nc(n,e,i).next(function(t){t.forEach(function(t,e){a=a.zt(t,e)})})}).next(function(){return a})})},XE.prototype.nc=function(e,n,t){var u,c,r=this;return this.fo.Kr(e,n,t).next(function(t){return u=t,r.zo.Di(e,n)}).next(function(t){return c=t,r.sc(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=Qb(s,u.get(a),r.vs);u=s instanceof mm?u.zt(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){bb(n,e)||(u=u.remove(t))}),u})},XE.prototype.sc=function(t,e,n){for(var r=R_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof t_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof mm&&(c=c.zt(t,e))}),c})},XE),zE=(YE.oc=function(t,e){for(var n=R_(),r=R_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new YE(t,e.fromCache,n,r)},YE),GE=(QE.prototype.cc=function(t){this.ac=t},QE.prototype.Kr=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.xt.length||1===r.xt.length&&r.xt[0].field.ut())||i.isEqual(Ng.min())?this.uc(e,r):this.ac.Xo(e,o).next(function(t){var n=s.hc(r,t);return(ub(r)||cb(r))&&s.lc(r.limitType,n,o,i)?s.uc(e,r):(Wy()<=us.DEBUG&&Ky("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),mb(r)),s.ac.Kr(e,r,i).next(function(e){return n.forEach(function(t){e=e.zt(t.key,t)}),e}))})},QE.prototype.hc=function(n,t){var r=new T_(_b(n));return t.forEach(function(t,e){e instanceof mm&&bb(n,e)&&(r=r.add(e))}),r},QE.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version._(r))},QE.prototype.uc=function(t,e){return Wy()<=us.DEBUG&&Ky("QueryEngine","Using full collection scan to execute query:",mb(e)),this.ac.Kr(t,e,Ng.min())},QE),WE=(KE.prototype.Ir=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Vr(t,n.fc)})},KE);function KE(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new g_(eg),this.dc=new JI(Cm,Am),this.wc=Ng.min(),this.zo=t.Qo(n),this.Ec=t.$r(),this._o=t.Sr(),this.Tc=new HE(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}function QE(){}function YE(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}function XE(t,e,n){this.fo=t,this.zo=e,this.Ei=n}function JE(t,e,n,r){return new WE(t,e,n,r)}function $E(i,o){return $i(this,void 0,void 0,function(){var e,n,m,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).zo,m=e.Tc,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.zo.pi(y).next(function(t){return g=t,n=e.persistence.Qo(o),m=new HE(e.Ec,n,e.persistence.Ko()),n.pi(y)}).next(function(t){for(var e=[],n=[],r=R_(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Xo(y,r).next(function(t){return{Ic:t,mc:e,Ac:n}})})})];case 1:return r=t.sent(),[2,(e.zo=n,e.Tc=m,e._c.cc(e.Tc),r)]}})})}function ZE(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Ec.Nr({Wr:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=kw.resolve(),n.forEach(function(n){a=a.next(function(){return o._i(r,n)}).next(function(t){var e=t,t=i.$s.get(n);$y(null!==t),(!e||e.version._(t)<0)&&(e=s.Ss(n,e,i))&&o.ai(e,i.Ns)})}),a.next(function(){return e.zo.Ci(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.zo.$i(t)}).next(function(){return l.Tc.Xo(t,u)})})}function tT(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function eT(t,r){var u=t,c=r.Ot,h=u.fc;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=u.Ec.Nr({Wr:!0});h=u.fc;var a=[];r.$e.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(a.push(u._o.sr(s,t.Qe,e).next(function(){return u._o.er(s,t.qe,e)})),0<(i=t.resumeToken).l()&&(n=o.Mt(i,c).kt(s.bs),h=h.zt(e,n),r=o,i=t,$y(0<(o=n).resumeToken.l()),(0===r.resumeToken.l()||3e8<=o.Ot.W()-r.Ot.W()||0<i.qe.size+i.Ue.size+i.Qe.size)&&a.push(u._o.Hi(s,n))))});var e,n=C_;return r.Oe.forEach(function(t,e){r.ke.has(t)&&a.push(u.persistence.Ti.Fr(s,t))}),a.push(nT(s,t,r.Oe,c,void 0).next(function(t){n=t})),c.isEqual(Ng.min())||(e=u._o.Qi(s).next(function(t){return u._o.Wi(s,s.bs,c)}),a.push(e)),kw.Mn(a).next(function(){return t.apply(s)}).next(function(){return u.Tc.Zo(s,n)})}).then(function(t){return u.fc=h,t})}function nT(t,s,e,a,u){var n=R_();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=C_;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||a;e instanceof bm&&e.version.isEqual(Ng.min())?(s.li(t,r),o=o.zt(t,e)):null==n||0<e.version._(n.version)||0===e.version._(n.version)&&n.hasPendingWrites?(s.ai(e,r),o=o.zt(t,e)):Ky("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function rT(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i._o.tr(e,r).next(function(t){return t?(n=t,kw.resolve(n)):i._o.Bi(e).next(function(t){return n=new wb(r,t,0,e.bs),i._o.ji(e,n).next(function(){return n})})})}).then(function(t){var e=i.fc.get(t.targetId);return(null===e||0<t.Ot._(e.Ot))&&(i.fc=i.fc.zt(t.targetId,t),i.dc.set(r,t.targetId)),t})}function iT(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:n=(e=i).fc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Ti.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Uw(r=t.sent()))throw r;return Ky("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.fc=e.fc.remove(o),e.dc.delete(n.target),[2]}})})}function oT(t,o,s){var a=t,u=Ng.min(),c=R_();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=db(o),(void 0!==(t=(i=t).dc.get(r))?kw.resolve(i.fc.get(t)):i._o.tr(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a._o.rr(e,t.targetId).next(function(t){c=t})}).next(function(){return a._c.Kr(e,o,s?u:Ng.min(),s?c:R_())}).next(function(t){return{documents:t,Rc:c}});var t,n,r,i})}function sT(t,e){var n=t,r=n._o,t=n.fc.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function aT(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Ec,n=t,t=s.wc,r=e,i=C_,o=NI(t),t=OE(n),n=IDBKeyRange.lowerBound(o,!0),t.hs({index:aI.readTimeIndex,range:n},function(t,e){var n=CI(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:kI(o)}});var e,n,r,i,o}).then(function(t){var e=t.Go,t=t.readTime;return s.wc=t,e})}function uT(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=OE(t),r=Ng.min(),t.hs({index:aI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=kI(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.wc=t})]})})}var cT,hT,lT=(PT.prototype.Os=function(t,e){return kw.resolve(this.Vc.get(e))},PT.prototype.ks=function(t,e){return this.Vc.set(e.id,{id:e.id,version:e.version,createTime:iw(e.createTime)}),kw.resolve()},PT.prototype.Ms=function(t,e){return kw.resolve(this.bc.get(e))},PT.prototype.Ls=function(t,e){return this.bc.set(e.name,{name:(e=e).name,query:LI(e.bundledQuery),readTime:iw(e.readTime)}),kw.resolve()},PT),fT=(kT.prototype.et=function(){return this.vc.et()},kT.prototype.nr=function(t,e){e=new pT(t,e);this.vc=this.vc.add(e),this.Dc=this.Dc.add(e)},kT.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},kT.prototype.ir=function(t,e){this.Nc(new pT(t,e))},kT.prototype.$c=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},kT.prototype.Fc=function(t){var e=this,n=new Rg(new kg([])),r=new pT(n,t),t=new pT(n,t+1),i=[];return this.Dc.me([r,t],function(t){e.Nc(t),i.push(t.key)}),i},kT.prototype.Oc=function(){var e=this;this.vc.forEach(function(t){return e.Nc(t)})},kT.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},kT.prototype.kc=function(t){var e=new Rg(new kg([])),n=new pT(e,t),t=new pT(e,t+1),r=R_();return this.Dc.me([n,t],function(t){r=r.add(t.key)}),r},kT.prototype.Fi=function(t){var e=new pT(t,0),e=this.vc.Re(e);return null!==e&&t.isEqual(e.key)},kT),pT=(NT.Sc=function(t,e){return Rg.H(t.key,e.key)||eg(t.Mc,e.Mc)},NT.Cc=function(t,e){return eg(t.Mc,e.Mc)||Rg.H(t.key,e.key)},NT),dT=(AT.prototype.Ai=function(t){return kw.resolve(0===this.zo.length)},AT.prototype.Ri=function(t,e,n,r){var i=this.Lc;this.Lc++,0<this.zo.length&&this.zo[this.zo.length-1];n=new wI(i,e,n,r);this.zo.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.Bc=this.Bc.add(new pT(a.key,i)),this.Ei.qs(t,a.key.path.X())}return kw.resolve(n)},AT.prototype.Pi=function(t,e){return kw.resolve(this.qc(e))},AT.prototype.gi=function(t,e){e+=1,e=this.Uc(e),e=e<0?0:e;return kw.resolve(this.zo.length>e?this.zo[e]:null)},AT.prototype.Vi=function(){return kw.resolve(0===this.zo.length?-1:this.Lc-1)},AT.prototype.pi=function(t){return kw.resolve(this.zo.slice())},AT.prototype.bi=function(t,e){var n=this,r=new pT(e,0),e=new pT(e,Number.POSITIVE_INFINITY),i=[];return this.Bc.me([r,e],function(t){t=n.qc(t.Mc);i.push(t)}),kw.resolve(i)},AT.prototype.vi=function(t,e){var n=this,r=new T_(eg);return e.forEach(function(t){var e=new pT(t,0),t=new pT(t,Number.POSITIVE_INFINITY);n.Bc.me([e,t],function(t){r=r.add(t.Mc)})}),kw.resolve(this.Qc(r))},AT.prototype.Di=function(t,e){var n=e.path,r=n.length+1,e=n;Rg.wt(e)||(e=e.child(""));var e=new pT(new Rg(e),0),i=new T_(eg);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(i=i.add(t.Mc)),!0)},e),kw.resolve(this.Qc(i))},AT.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){t=e.qc(t);null!==t&&n.push(t)}),n},AT.prototype.Ci=function(n,r){var i=this;$y(0===this.Kc(r.batchId,"removed")),this.zo.shift();var o=this.Bc;return kw.forEach(r.mutations,function(t){var e=new pT(t.key,r.batchId);return o=o.delete(e),i.Ti.Ni(n,t.key)}).next(function(){i.Bc=o})},AT.prototype.xi=function(t){},AT.prototype.Fi=function(t,e){var n=new pT(e,0),n=this.Bc.Re(n);return kw.resolve(e.isEqual(n&&n.key))},AT.prototype.$i=function(t){return this.zo.length,kw.resolve()},AT.prototype.Kc=function(t,e){return this.Uc(t)},AT.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},AT.prototype.qc=function(t){t=this.Uc(t);return t<0||t>=this.zo.length?null:this.zo[t]},AT),vT=(CT.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:i,readTime:n}),this.size+=i-o,this.Ei.qs(t,r.path.X())},CT.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},CT.prototype._i=function(t,e){e=this.docs.get(e);return kw.resolve(e?e.hi:null)},CT.prototype.getEntries=function(t,e){var n=this,r=C_;return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),kw.resolve(r)},CT.prototype.Kr=function(t,e,n){for(var r=k_,i=new Rg(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,s=u.hi,u=u.readTime;if(!e.path.nt(a.path))break;u._(n)<=0||s instanceof mm&&bb(e,s)&&(r=r.zt(s.key,s))}return kw.resolve(r)},CT.prototype.jc=function(t,e){return kw.forEach(this.docs,function(t){return e(t)})},CT.prototype.Nr=function(t){return new yT(this)},CT.prototype.Or=function(t){return kw.resolve(this.size)},CT),yT=(Xi(ST,hT=W),ST.prototype.wi=function(n){var r=this,i=[];return this.ri.forEach(function(t,e){e&&e.hi?i.push(r.jr.ai(n,e.hi,r.ci(t))):r.jr.li(t)}),kw.Mn(i)},ST.prototype.fi=function(t,e){return this.jr._i(t,e)},ST.prototype.di=function(t,e){return this.jr.getEntries(t,e)},ST),gT=(TT.prototype.In=function(t,n){return this.Gc.forEach(function(t,e){return n(e)}),kw.resolve()},TT.prototype.Qi=function(t){return kw.resolve(this.lastRemoteSnapshotVersion)},TT.prototype.Ki=function(t){return kw.resolve(this.zc)},TT.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),kw.resolve(this.highestTargetId)},TT.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),kw.resolve()},TT.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new uE(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},TT.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,kw.resolve()},TT.prototype.Hi=function(t,e){return this.Gi(e),kw.resolve()},TT.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Fc(e.targetId),--this.targetCount,kw.resolve()},TT.prototype.Xi=function(n,r,i){var o=this,s=0,a=[];return this.Gc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Gc.delete(t),a.push(o.Yi(n,e.targetId)),s++)}),kw.Mn(a).next(function(){return s})},TT.prototype.Zi=function(t){return kw.resolve(this.targetCount)},TT.prototype.tr=function(t,e){e=this.Gc.get(e)||null;return kw.resolve(e)},TT.prototype.er=function(t,e,n){return this.Hc.xc(e,n),kw.resolve()},TT.prototype.sr=function(e,t,n){this.Hc.$c(t,n);var r=this.persistence.Ti,i=[];return r&&t.forEach(function(t){i.push(r.Ni(e,t))}),kw.Mn(i)},TT.prototype.Yi=function(t,e){return this.Hc.Fc(e),kw.resolve()},TT.prototype.rr=function(t,e){e=this.Hc.kc(e);return kw.resolve(e)},TT.prototype.Fi=function(t,e){return kw.resolve(this.Hc.Fi(e))},TT),mT=(ET.prototype.start=function(){return Promise.resolve()},ET.prototype.ko=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(ET.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),ET.prototype.Po=function(){},ET.prototype.yo=function(){},ET.prototype.Ko=function(){return this.Ei},ET.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new dT(this.Ei,this.Ti),this.Yc[t.A()]=e),e},ET.prototype.Sr=function(){return this._o},ET.prototype.$r=function(){return this.fo},ET.prototype.Wo=function(){return this.wo},ET.prototype.runTransaction=function(t,e,n){var r=this;Ky("MemoryPersistence","Starting transaction:",t);var i=new bT(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).On().then(function(t){return i.Vs(),t})},ET.prototype.ea=function(e,n){return kw.Ln(Object.values(this.Yc).map(function(t){return function(){return t.Fi(e,n)}}))},ET),bT=(Xi(IT,cT=Sn),IT),_T=(wT.ia=function(t){return new wT(t)},Object.defineProperty(wT.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw Jy()},enumerable:!1,configurable:!0}),wT.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),kw.resolve()},wT.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),kw.resolve()},wT.prototype.Ni=function(t,e){return this.ra.add(e.toString()),kw.resolve()},wT.prototype.removeTarget=function(t,e){var n=this;this.na.Fc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},wT.prototype.Zc=function(){this.sa=new Set},wT.prototype.ta=function(n){var r=this,i=this.persistence.$r().Nr();return kw.forEach(this.ra,function(t){var e=Rg._t(t);return r.oa(n,e).next(function(t){t||i.li(e)})}).next(function(){return r.sa=null,i.apply(n)})},wT.prototype.Fr=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},wT.prototype.Xc=function(t){return 0},wT.prototype.oa=function(t,e){var n=this;return kw.Ln([function(){return kw.resolve(n.na.Fi(e))},function(){return n.persistence.Sr().Fi(t,e)},function(){return n.persistence.ea(t,e)}])},wT);function wT(t){this.persistence=t,this.na=new fT,this.sa=null}function IT(t){var e=this;return(e=cT.call(this)||this).bs=t,e}function ET(t,e){var n=this;this.Yc={},this.so=new bg(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new gT(this),this.Ei=new VI,this.fo=(t=this.Ei,new vT(t,function(t){return n.Ti.Xc(t)})),this.Qt=new EI(e),this.wo=new lT(this.Qt)}function TT(t){this.persistence=t,this.Gc=new JI(Cm,Am),this.lastRemoteSnapshotVersion=Ng.min(),this.highestTargetId=0,this.zc=0,this.Hc=new fT,this.targetCount=0,this.Jc=uE.Mi()}function ST(t){var e=this;return(e=hT.call(this)||this).jr=t,e}function CT(t,e){this.Ei=t,this.Wc=e,this.docs=new g_(Rg.H),this.size=0}function AT(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.Lc=1,this.Bc=new T_(pT.Sc)}function NT(t,e){this.key=t,this.Mc=e}function kT(){this.vc=new T_(pT.Sc),this.Dc=new T_(pT.Cc)}function PT(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}function OT(t,e){return"firestore_clients_"+t+"_"+e}function RT(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.m()&&(n+="_"+e.uid),n}function xT(t,e){return"firestore_targets_"+t+"_"+e}var DT,LT=(iS.ca=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ug(i.error.code,i.error.message)),o?new iS(t,e,i.state,r):(Qy("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},iS.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},iS),MT=(rS.ca=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new ug(r.error.code,r.error.message)),i?new rS(t,r.state,n):(Qy("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},rS.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},rS),FT=(nS.ca=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=x_,o=0;r&&o<n.activeTargetIds.length;++o)r=$g(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new nS(t,i):(Qy("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},nS),jT=(eS.ca=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new eS(e.clientId,e.onlineState):(Qy("SharedClientState","Failed to parse online state: "+t),null)},eS),UT=(tS.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},tS.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},tS.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},tS),VT=(ZT.Kn=function(t){return!(!t||!t.localStorage)},ZT.prototype.start=function(){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this._a.Uo()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(OT(this.persistenceKey,r)))&&(o=FT.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",function(){return l.ko()}),this.Er=!0,[2]}})})},ZT.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},ZT.prototype.va=function(){return this.Sa(this.Ea)},ZT.prototype.Da=function(n){var r=!1;return this.Ea.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},ZT.prototype.Ca=function(t){this.xa(t,"pending")},ZT.prototype.Na=function(t,e,n){this.xa(t,e,n),this.$a(t)},ZT.prototype.Fa=function(t){var e,n="not-current";return this.Da(t)&&(!(e=this.storage.getItem(xT(this.persistenceKey,t)))||(e=MT.ca(t,e))&&(n=e.state)),this.Oa.ua(t),this.Va(),n},ZT.prototype.ka=function(t){this.Oa.ha(t),this.Va()},ZT.prototype.Ma=function(t){return this.Oa.activeTargetIds.has(t)},ZT.prototype.La=function(t){this.removeItem(xT(this.persistenceKey,t))},ZT.prototype.Ba=function(t,e,n){this.qa(t,e,n)},ZT.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.$a(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},ZT.prototype.Qa=function(t){this.Ka(t)},ZT.prototype.Wa=function(){this.ja()},ZT.prototype.ko=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},ZT.prototype.getItem=function(t){var e=this.storage.getItem(t);return Ky("SharedClientState","READ",t,e),e},ZT.prototype.setItem=function(t,e){Ky("SharedClientState","SET",t,e),this.storage.setItem(t,e)},ZT.prototype.removeItem=function(t){Ky("SharedClientState","REMOVE",t),this.storage.removeItem(t)},ZT.prototype.wa=function(t){var e=this,o=t;o.storageArea===this.storage&&(Ky("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.Ia?this.Zr.po(function(){return $i(e,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){if(this.Er){if(null!==o.key)if(this.Aa.test(o.key)){if(null==o.newValue)return e=this.Ga(o.key),[2,this.za(e,null)];if(e=this.Ha(o.key,o.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(o.key)){if(null!==o.newValue&&(n=this.Ja(o.key,o.newValue)))return[2,this.Ya(n)]}else if(this.Pa.test(o.key)){if(null!==o.newValue&&(r=this.Xa(o.key,o.newValue)))return[2,this.Za(r)]}else if(o.key===this.ya){if(null!==o.newValue&&(i=this.pa(o.newValue)))return[2,this.ba(i)]}else if(o.key===this.ma)(i=function(t){var e=bg.q;if(null!=t)try{var n=JSON.parse(t);$y("number"==typeof n),e=n}catch(t){Qy("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==bg.q&&this.k(i);else if(o.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(o);return[2]})})}):Qy("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(ZT.prototype,"Oa",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),ZT.prototype.Va=function(){this.setItem(this.Ia,this.Oa.aa())},ZT.prototype.xa=function(t,e,n){n=new LT(this.currentUser,t,e,n),t=RT(this.persistenceKey,this.currentUser,t);this.setItem(t,n.aa())},ZT.prototype.$a=function(t){t=RT(this.persistenceKey,this.currentUser,t);this.removeItem(t)},ZT.prototype.Ka=function(t){t={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(t))},ZT.prototype.qa=function(t,e,n){var r=xT(this.persistenceKey,t),n=new MT(t,e,n);this.setItem(r,n.aa())},ZT.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},ZT.prototype.Ga=function(t){t=this.Aa.exec(t);return t?t[1]:null},ZT.prototype.Ha=function(t,e){t=this.Ga(t);return FT.ca(t,e)},ZT.prototype.Ja=function(t,e){var n=this.Ra.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return LT.ca(new hg(n),t,e)},ZT.prototype.Xa=function(t,e){t=this.Pa.exec(t),t=Number(t[1]);return MT.ca(t,e)},ZT.prototype.pa=function(t){return jT.ca(t)},ZT.prototype.Ya=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e.user.uid===this.currentUser.uid?[2,this._a.eu(e.batchId,e.state,e.error)]:(Ky("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},ZT.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},ZT.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},ZT.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},ZT.prototype.Sa=function(t){var n=x_;return t.forEach(function(t,e){n=n.Pe(e.activeTargetIds)}),n},ZT),qT=($T.prototype.Ca=function(t){},$T.prototype.Na=function(t,e,n){},$T.prototype.Fa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},$T.prototype.Ba=function(t,e,n){this.ru[t]=e},$T.prototype.ka=function(t){this.iu.ha(t)},$T.prototype.Ma=function(t){return this.iu.activeTargetIds.has(t)},$T.prototype.La=function(t){delete this.ru[t]},$T.prototype.va=function(){return this.iu.activeTargetIds},$T.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},$T.prototype.start=function(){return this.iu=new UT,Promise.resolve()},$T.prototype.Ua=function(t,e,n){},$T.prototype.Qa=function(t){},$T.prototype.ko=function(){},$T.prototype.B=function(t){},$T.prototype.Wa=function(){},$T),BT=(JT.prototype.ou=function(t){},JT.prototype.ko=function(){},JT),HT=(XT.prototype.ou=function(t){this.lu.push(t)},XT.prototype.ko=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},XT.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},XT.prototype.au=function(){Ky("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},XT.prototype.hu=function(){Ky("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},XT.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},XT),zT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},GT=(YT.prototype.wu=function(t){this.Eu=t},YT.prototype.Tu=function(t){this.Iu=t},YT.prototype.onMessage=function(t){this.mu=t},YT.prototype.close=function(){this.du()},YT.prototype.send=function(t){this.fu(t)},YT.prototype.Au=function(){this.Eu()},YT.prototype.Ru=function(t){this.Iu(t)},YT.prototype.Pu=function(t){this.mu(t)},YT),WT=(QT.prototype.pu=function(e,t,n,r){var i=this.bu(e,t);Ky("RestConnection","Sending: ",i,n);t={};return this.vu(t,r),this.Su(e,i,t,n).then(function(t){return Ky("RestConnection","Received: ",t),t},function(t){throw Yy("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},QT.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},QT.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.10",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},QT.prototype.bu=function(t,e){t=zT[t];return this.gu+"/v1/"+e+":"+t},Xi(KT,DT=QT),KT.prototype.Su=function(o,e,s,a){return new Promise(function(n,r){var i=new qy;i.listenOnce(My.COMPLETE,function(){try{switch(i.getLastErrorCode()){case Ly.NO_ERROR:var t=i.getResponseJson();Ky("Connection","XHR received:",JSON.stringify(t)),n(t);break;case Ly.TIMEOUT:Ky("Connection",'RPC "'+o+'" timed out'),r(new ug(ag.DEADLINE_EXCEEDED,"Request time out"));break;case Ly.HTTP_ERROR:var e=i.getStatus();Ky("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(ag).indexOf(e)?e:ag.UNKNOWN,r(new ug(e,t.message))):r(new ug(ag.UNKNOWN,"Server responded with status "+i.getStatus())):r(new ug(ag.UNAVAILABLE,"Connection failed."));break;default:Jy()}}finally{Ky("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},KT.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ky,i=Dy(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(t.initMessageHeaders,e),yo()||mo()||0<=vo().indexOf("Electron/")||(0<=(e=vo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=vo().indexOf("MSAppHost/")||go()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Ky("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),s=!1,a=!1,u=new GT({fu:function(t){a?Ky("Connection","Not sending because WebChannel is closed:",t):(s||(Ky("Connection","Opening WebChannel transport."),o.open(),s=!0),Ky("Connection","WebChannel sending:",t),o.send(t))},du:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,Vy.EventType.OPEN,function(){a||Ky("Connection","WebChannel transport opened.")}),t(o,Vy.EventType.CLOSE,function(){a||(a=!0,Ky("Connection","WebChannel transport closed"),u.Ru())}),t(o,Vy.EventType.ERROR,function(t){a||(a=!0,Yy("Connection","WebChannel transport errored:",t),u.Ru(new ug(ag.UNAVAILABLE,"The operation could not be completed")))}),t(o,Vy.EventType.MESSAGE,function(t){var e,n,r,i;a||($y(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Ky("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=u_[r];if(void 0!==t)return y_(t)}(),i=n.message,void 0===t&&(t=ag.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,u.Ru(new ug(t,i)),o.close()):(Ky("Connection","WebChannel received:",e),u.Pu(e)))}),t(i,Fy.STAT_EVENT,function(t){t.stat===jy?Ky("Connection","Detected buffering proxy"):t.stat===Uy&&Ky("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Au()},0),u},KT);function KT(t){var e=this;return(e=DT.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function QT(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function YT(t){this.fu=t.fu,this.du=t.du}function XT(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}function JT(){}function $T(){this.iu=new UT,this.ru={},this.fa=null,this.k=null}function ZT(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.k=null,this.da=this.wa.bind(this),this.Ea=new g_(eg),this.Er=!1,this.Ta=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=OT(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new UT),this.Aa=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.ya="firestore_online_state_"+this.persistenceKey,this.ga="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.da)}function tS(){this.activeTargetIds=x_}function eS(t,e){this.clientId=t,this.onlineState=e}function nS(t,e){this.clientId=t,this.activeTargetIds=e}function rS(t,e,n){this.targetId=t,this.state=e,this.error=n}function iS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function oS(){return"undefined"!=typeof window?window:null}function sS(){return"undefined"!=typeof document?document:null}function aS(t){return new ew(t,!0)}function uS(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.$h=[],this.Fh=i,this.Fh.ou(function(t){n.Ps(function(){return $i(o,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return OS(this)?(Ky("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).Nh.add(4),[4,TS(e)];case 1:return t.sent(),e.Oh.set("Unknown"),e.Nh.delete(4),[4,ES(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Oh=new yS(n,r)}var cS,hS,lS,fS=(IS.prototype.reset=function(){this.Fu=0},IS.prototype.Mu=function(){this.Fu=this.$u},IS.prototype.Lu=function(t){var e=this;this.cancel();var n=Math.floor(this.Fu+this.Bu()),r=Math.max(0,Date.now()-this.ku),i=Math.max(0,n-r);0<i&&Ky("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Fu+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ou=this.Zr.Tr(this.fs,i,function(){return e.ku=Date.now(),t()}),this.Fu*=this.Nu,this.Fu<this.xu&&(this.Fu=this.xu),this.Fu>this.$u&&(this.Fu=this.$u)},IS.prototype.qu=function(){null!==this.Ou&&(this.Ou.Rs(),this.Ou=null)},IS.prototype.cancel=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},IS.prototype.Bu=function(){return(Math.random()-.5)*this.Fu},IS),W=(wS.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},wS.prototype.Hu=function(){return 2===this.state},wS.prototype.start=function(){3!==this.state?this.auth():this.Ju()},wS.prototype.stop=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},wS.prototype.Yu=function(){this.state=0,this.Gu.reset()},wS.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},wS.prototype.th=function(t){this.eh(),this.stream.send(t)},wS.prototype.Zu=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},wS.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},wS.prototype.close=function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==e?this.Gu.reset():n&&n.code===ag.RESOURCE_EXHAUSTED?(Qy(n.toString()),Qy("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Mu()):n&&n.code===ag.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Tu(n)];case 1:return t.sent(),[2]}})})},wS.prototype.nh=function(){},wS.prototype.auth=function(){var n=this;this.state=1;var t=this.sh(this.Wu),e=this.Wu;this.Ku.getToken().then(function(t){n.Wu===e&&n.ih(t)},function(e){t(function(){var t=new ug(ag.UNKNOWN,"Fetching auth token failed: "+e.message);return n.rh(t)})})},wS.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},wS.prototype.Ju=function(){var t=this;this.state=4,this.Gu.Lu(function(){return $i(t,void 0,void 0,function(){return Zi(this,function(t){return this.state=0,this.start(),[2]})})})},wS.prototype.rh=function(t){return Ky("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},wS.prototype.sh=function(e){var n=this;return function(t){n.Zr.Ps(function(){return n.Wu===e?t():(Ky("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},wS),pS=(Xi(_S,lS=W),_S.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},_S.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Jy(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.Bt?($y(void 0===s||"string"==typeof s),ig.fromBase64String(s||"")):($y(void 0===s||s instanceof Uint8Array),ig.fromUint8Array(s||new Uint8Array))),o=(a=e.targetChange.cause)&&(u=void 0===(c=a).code?ag.UNKNOWN:y_(c.code),new ug(u,c.message||"")),s=new q_(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=uw(t,n.document.name),i=iw(n.document.updateTime);var a=new lm({mapValue:{fields:n.document.fields}}),u=(o=new mm(r,i,a,{}),n.targetIds||[]),c=n.removedTargetIds||[];s=new U_(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=uw(t,n.document),i=n.readTime?iw(n.readTime):Ng.min(),a=new bm(r,i),o=n.removedTargetIds||[],s=new U_([],o,a.key,a);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=uw(t,n.document),i=n.removedTargetIds||[],s=new U_([],i,r,null);else{if(!("filter"in e))return Jy();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new a_(n),i=e.targetId,s=new V_(i,r)}return s}(this.Qt,t),t=function(t){if(!("targetChange"in t))return Ng.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?iw(t.readTime):Ng.min()}(t);return this.listener.ah(e,t)},_S.prototype.uh=function(t){var e,n,r,i={};i.database=lw(this.Qt),i.addTarget=(e=this.Qt,(r=Nm(r=(n=t).target)?{documents:gw(e,r)}:{query:mw(e,r)}).targetId=n.targetId,0<n.resumeToken.l()?r.resumeToken=rw(e,n.resumeToken):0<n.Ot._(Ng.min())&&(r.readTime=nw(e,n.Ot.j())),r);var o,t=(this.Qt,o=t,null==(t=function(){switch(o.Ft){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jy()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.th(i)},_S.prototype.hh=function(t){var e={};e.database=lw(this.Qt),e.removeTarget=t,this.th(e)},_S),dS=(Xi(bS,hS=W),Object.defineProperty(bS.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),bS.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,hS.prototype.start.call(this)},bS.prototype.nh=function(){this.lh&&this.fh([])},bS.prototype.oh=function(t){return this.Qu.Cu("Write",t)},bS.prototype.onMessage=function(t){if($y(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?($y(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?iw(e.updateTime):iw(n)).isEqual(Ng.min())&&(t=iw(n)),new Hb(t,e.transformResults||[]);var e,n})):[]),n=iw(t.commitTime);return this.listener.dh(n,e)}var n,r;return $y(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},bS.prototype.Eh=function(){var t={};t.database=lw(this.Qt),this.th(t)},bS.prototype.fh=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return vw(e.Qt,t)})};this.th(t)},bS),vS=(Xi(mS,cS=function(){}),mS.prototype.Ih=function(){if(this.Th)throw new ug(ag.FAILED_PRECONDITION,"The client has already been terminated.")},mS.prototype.pu=function(e,n,r){var i=this;return this.Ih(),this.credentials.getToken().then(function(t){return i.Qu.pu(e,n,r,t)}).catch(function(t){throw t.code===ag.UNAUTHENTICATED&&i.credentials.p(),t})},mS.prototype.Du=function(e,n,r){var i=this;return this.Ih(),this.credentials.getToken().then(function(t){return i.Qu.Du(e,n,r,t)}).catch(function(t){throw t.code===ag.UNAUTHENTICATED&&i.credentials.p(),t})},mS.prototype.terminate=function(){this.Th=!1},mS),yS=(gS.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},gS.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,1<=this.mh&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},gS.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},gS.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},gS.prototype.gh=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(Qy(t),this.Rh=!1):Ky("OnlineStateTracker",t)},gS.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},gS);function gS(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}function mS(t,e,n){var r=this;return(r=cS.call(this)||this).credentials=t,r.Qu=e,r.Qt=n,r.Th=!1,r}function bS(t,e,n,r,i){var o=this;return(o=hS.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).Qt=r,o.lh=!1,o}function _S(t,e,n,r,i){var o=this;return(o=lS.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).Qt=r,o}function wS(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new fS(t,e)}function IS(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.$u=i,this.Fu=0,this.Ou=null,this.ku=Date.now(),this.reset()}function ES(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:if(!OS(r))return[3,4];e=0,n=r.$h,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function TS(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=0,n=r.$h,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function SS(t,e){t.xh.has(e.targetId)||(t.xh.set(e.targetId,e),PS(t)?kS(t):VS(t).Hu()&&AS(t,e))}function CS(t,e){var n=t,t=VS(n);n.xh.delete(e),t.Hu()&&NS(n,e),0===n.xh.size&&(t.Hu()?t.Xu():OS(n)&&n.Oh.set("Unknown"))}function AS(t,e){t.kh.on(e.targetId),VS(t).uh(e)}function NS(t,e){t.kh.on(e),VS(t).hh(e)}function kS(e){e.kh=new H_({vn:function(t){return e.Dh.vn(t)},Sn:function(t){return e.xh.get(t)||null}}),VS(e).start(),e.Oh.Ph()}function PS(t){return OS(t)&&!VS(t).zu()&&0<t.xh.size}function OS(t){return 0===t.Nh.size}function RS(t){t.kh=void 0}function xS(s,a,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:if(s.Oh.set("Online"),!(a instanceof q_&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.xh.has(i)?[4,o.Dh.Mh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.xh.delete(i),o.kh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Ky("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,DS(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof U_?s.kh.dn(a):a instanceof V_?s.kh.Pn(a):s.kh.Tn(a),u.isEqual(Ng.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,tT(s.bh)];case 8:return o=t.sent(),0<=u._(o)?[4,(i=u,(e=(r=s).kh.Vn(i)).$e.forEach(function(t,e){var n;0<t.resumeToken.l()&&((n=r.xh.get(e))&&r.xh.set(e,n.Mt(t.resumeToken,i)))}),e.Fe.forEach(function(t){var e=r.xh.get(t);e&&(r.xh.set(t,e.Mt(ig.T,e.Ot)),NS(r,t),e=new wb(e.target,t,1,e.sequenceNumber),AS(r,e))}),r.Dh.Lh(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Ky("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,DS(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function DS(n,r,i){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:if(!Uw(r))throw r;return n.Nh.add(1),[4,TS(n)];case 1:return t.sent(),n.Oh.set("Offline"),i=i||function(){return tT(n.bh)},n._s.po(function(){return $i(e,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return Ky("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Nh.delete(1),[4,ES(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function LS(e,n){return n().catch(function(t){return DS(e,t,n)})}function MS(u){return $i(this,void 0,void 0,function(){var i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:o=qS(i=u),s=0<i.Ch.length?i.Ch[i.Ch.length-1].batchId:-1,t.label=1;case 1:if(!(OS(i)&&i.Ch.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.bh,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.zo.gi(t,n)}))];case 3:return null===(a=t.sent())?(0===i.Ch.length&&o.Xu(),[3,7]):(s=a.batchId,function(t,e){t.Ch.push(e);t=qS(t);t.Hu()&&t._h&&t.fh(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,DS(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return FS(i)&&jS(i),[2]}var e,n,r})})}function FS(t){return OS(t)&&!qS(t).zu()&&0<t.Ch.length}function jS(t){qS(t).start()}function US(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,r?(e.Nh.delete(2),[4,ES(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Nh.add(2),[4,TS(e)]);case 3:t.sent(),e.Oh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function VS(n){var t,e,r,i=this;return n.Uh||(n.Uh=(t=n.Sh,e=n._s,r={wu:function(n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return n.xh.forEach(function(t,e){AS(n,t)}),[2]})})}.bind(null,n),Tu:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return RS(e),PS(e)?(e.Oh.Vh(n),kS(e)):e.Oh.set("Unknown"),[2]})})}.bind(null,n),ah:xS.bind(null,n)},t.Ih(),new pS(e,t.Qu,t.credentials,t.Qt,r)),n.$h.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Uh.Yu(),PS(n)?kS(n):n.Oh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Uh.stop()];case 2:t.sent(),RS(n),t.label=3;case 3:return[2]}})})})),n.Uh}function qS(n){var t,e,r,i=this;return n.Qh||(n.Qh=(t=n.Sh,e=n._s,r={wu:function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return qS(e).Eh(),[2]})})}.bind(null,n),Tu:function(e,n){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return n&&qS(e)._h?[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return v_(n=i.code)&&n!==ag.ABORTED?(e=r.Ch.shift(),qS(r).Yu(),[4,LS(r,function(){return r.Dh.qh(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,MS(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return FS(e)&&jS(e),[2]}})})}.bind(null,n),wh:function(o){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){for(e=qS(o),n=0,r=o.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]})})}.bind(null,n),dh:function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=r.Ch.shift(),n=II.from(e,i,o),[4,LS(r,function(){return r.Dh.Bh(n)})];case 1:return t.sent(),[4,MS(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Ih(),new dS(e,t.Qu,t.credentials,t.Qt,r)),n.$h.push(function(e){return $i(i,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e?(n.Qh.Yu(),[4,MS(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Qh.stop()];case 3:t.sent(),0<n.Ch.length&&(Ky("RemoteStore","Stopping write stream with "+n.Ch.length+" pending writes"),n.Ch=[]),t.label=4;case 4:return[2]}})})})),n.Qh}function BS(){this.queries=new JI(gb,yb),this.onlineState="Unknown",this.Wh=new Set}var HS=function(){this.Kh=void 0,this.listeners=[]};function zS(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new HS),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.jh(n)];case 2:return o.Kh=t.sent(),[3,4];case 3:return o=t.sent(),o=Kw(o,"Initialization of query '"+mb(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.Gh(e.onlineState),i.Kh&&a.zh(i.Kh)&&WS(e),[2]}})})}function GS(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Hh(n))]:[2]})})}function WS(t){t.Wh.forEach(function(t){t.next()})}var KS=(tC.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new M_(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},tC.prototype.onError=function(t){this.Jh.error(t)},tC.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},tC.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},tC.prototype.Zh=function(t){if(0<t.docChanges.length)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},tC.prototype.el=function(t){t=M_.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},tC),QS=(ZS.prototype.sl=function(){return"metadata"in this.payload},ZS),YS=($S.prototype.Pc=function(t){return uw(this.Qt,t)},$S.prototype.yc=function(t){return t.metadata.exists?dw(this.Qt,t.document,!1):new bm(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},$S.prototype.gc=iw,$S),XS=(JS.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},JS.prototype.ol=function(t){for(var e=new Map,n=new YS(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||R_()).add(s);e.set(c,h)}}return e},JS.prototype.complete=function(){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return $i(this,void 0,void 0,function(){var n,r,i,o,e,s,a,u,c,h;return Zi(this,function(t){switch(t.label){case 0:for(n=l,r=R_(),i=C_,o=P_,e=0,s=p;e<s.length;e++)a=s[e],u=f.Pc(a.metadata.name),a.document&&(r=r.add(u)),i=i.zt(u,f.yc(a)),o=o.zt(u,f.gc(a.metadata.readTime));return c=n.Ec.Nr({Wr:!0}),[4,rT(n,db(ab(kg.ot("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return nT(e,c,i,Ng.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n._o.Yi(e,h.targetId).next(function(){return n._o.er(e,r,h.targetId)}).next(function(){return n.Tc.Zo(e,t)})})})]}})})}(this.bh,new YS(this.Qt),this.documents,this.il.id)];case 1:e=t.sent(),n=this.ol(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=R_()),$i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,rT(e,db(LI(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=iw(i.readTime);if(0<=n.Ot._(e))return r.wo.Ls(t,i);e=n.Mt(ig.T,e);return r.fc=r.fc.zt(e.targetId,e),r._o.Hi(t,e).next(function(){return r._o.Yi(t,n.targetId)}).next(function(){return r._o.er(t,o,n.targetId)}).next(function(){return r.wo.Ls(t,i)})})]}})})}(this.bh,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new BE(Object.assign({},this.progress),e))]}})})},JS);function JS(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=eC(t)}function $S(t){this.Qt=t}function ZS(t,e){this.payload=t,this.byteLength=e}function tC(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}function eC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var nC=function(t){this.key=t},rC=function(t){this.key=t},iC=(Object.defineProperty(cC.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),cC.prototype.fl=function(t,e){var s=this,a=e?e.dl:new L_,u=(e||this).ll,c=(e||this).De,h=u,l=!1,f=ub(this.query)&&u.size===this.query.limit?u.last():null,p=cb(this.query)&&u.size===this.query.limit?u.first():null;if(t.Xt(function(t,e){var n=u.get(t),r=(r=e instanceof mm?e:null)&&(bb(s.query,r)?r:null),i=!!n&&s.De.has(n.key),o=!!r&&(r.Vt||s.De.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.wl(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.hl(r,f)||p&&s.hl(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),ub(this.query)||cb(this.query))for(;h.size>this.query.limit;){var n=ub(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{ll:h,dl:a,lc:l,De:c}},cC.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},cC.prototype.wi=function(t,e,n){var o=this,r=this.ll;this.ll=t.ll,this.De=t.De;var i=t.dl.ve();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.hl(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jy()}}var r,i}),this.El(n);var s=e?this.Tl():[],n=0===this.ul.size&&this.Be?1:0,e=n!==this.al;return this.al=n,0!==i.length||e?{snapshot:new M_(this.query,t.ll,r,i,t.De,0==n,e,!1),Il:s}:{Il:s}},cC.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new L_,De:this.De,lc:!1},!1)):{Il:[]}},cC.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},cC.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},cC.prototype.Tl=function(){var e=this;if(!this.Be)return[];var n=this.ul;this.ul=R_(),this.ll.forEach(function(t){e.ml(t.key)&&(e.ul=e.ul.add(t.key))});var r=[];return n.forEach(function(t){e.ul.has(t)||r.push(new rC(t))}),this.ul.forEach(function(t){n.has(t)||r.push(new nC(t))}),r},cC.prototype.Al=function(t){this.cl=t.Rc,this.ul=R_();t=this.fl(t.documents);return this.wi(t,!0)},cC.prototype.Rl=function(){return M_.Ne(this.query,this.ll,this.De,0===this.al)},cC),oC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},sC=function(t){this.key=t,this.Pl=!1},aC=(Object.defineProperty(uC.prototype,"Ml",{get:function(){return!0===this.kl},enumerable:!1,configurable:!0}),uC);function uC(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new JI(gb,yb),this.Sl=new Map,this.Dl=new Set,this.Cl=new g_(Rg.H),this.xl=new Map,this.Nl=new fT,this.$l={},this.Fl=new Map,this.Ol=uE.Li(),this.onlineState="Unknown",this.kl=void 0}function cC(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=R_(),this.De=R_(),this.hl=_b(t),this.ll=new D_(this.hl)}function hC(i,o,s,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.Ll=function(t,e,n){return function(r,i,o,s){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=i.view.fl(o)).lc?[4,oT(r.bh,i.query,!1).then(function(t){t=t.documents;return i.view.fl(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.$e.get(i.targetId),n=i.view.wi(e,r.Ml,n),[2,(_C(r,i.targetId,n.Il),n.snapshot)]}})})}(i,t,e,n)},[4,oT(i.bh,o,!0)];case 1:return n=t.sent(),r=new iC(o,n.Rc),e=r.fl(n.documents),n=j_.Le(s,a&&"Offline"!==i.onlineState),n=r.wi(e,i.Ml,n),_C(i,s,n.Il),r=new oC(o,s,r),[2,(i.vl.set(o,r),i.Sl.has(s)?i.Sl.get(s).push(o):i.Sl.set(s,[o]),n.snapshot)]}})})}function lC(f,p,d){return $i(this,void 0,void 0,function(){var s,a;return Zi(this,function(t){switch(t.label){case 0:a=kC(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.bh,u=p,h=i,l=Ag.now(),o=u.reduce(function(t,e){return t.add(e.key)},R_()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Tc.Xo(a,o).next(function(t){c=t;for(var e,n=[],r=0,i=u;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof mm?e.field(o.field):void 0,s=Cb(o.transform,s||null);null!=s&&(n=(null==n?new fm:n).set(o.field,s))}return n?n.Pt():null}(e.fieldTransforms,s));null!=s&&n.push(new t_(o.key,s,function s(t){var a=[];return Vg(t.fields||{},function(t,e){var n=new Og([t]);if(hm(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Bg(a)}(s.proto.mapValue),Gb.exists(!0)))}return h.zo.Ri(a,l,n,u)})}).then(function(t){var e=t.xs(c);return{batchId:t.batchId,ri:e}}))];case 2:return s=t.sent(),a.Vl.Ca(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.$l[e.currentUser.A()])||new g_(eg)).zt(n,r),e.$l[e.currentUser.A()]=i,[4,IC(a,s.ri)];case 3:return t.sent(),[4,MS(a.yl)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=Kw(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function fC(r,i){return $i(this,void 0,void 0,function(){var n,e;return Zi(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,eT(n.bh,i)];case 2:return e=t.sent(),i.$e.forEach(function(t,e){e=n.xl.get(e);e&&($y(t.qe.size+t.Ue.size+t.Qe.size<=1),0<t.qe.size?e.Pl=!0:0<t.Ue.size?$y(e.Pl):0<t.Qe.size&&($y(e.Pl),e.Pl=!1))}),[4,IC(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,XI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function pC(t,n,e){var r,t=t;(t.Ml&&0===e||!t.Ml&&1===e)&&(r=[],t.vl.forEach(function(t,e){e=e.view.Gh(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Gh(i)&&(o=!0)}),o&&WS(t)}(t.gl,n),r.length&&t.bl.ah(r),t.onlineState=n,t.Ml&&t.Vl.Qa(n))}function dC(s,a,u){return $i(this,void 0,void 0,function(){var n,o;return Zi(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.bh,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.zo.Pi(e,r).next(function(t){return $y(null!==t),n=t.keys(),i.zo.Ci(e,t)}).next(function(){return i.zo.$i(e)}).next(function(){return i.Tc.Xo(e,n)})}))];case 2:return o=t.sent(),gC(n,a,u),yC(n,a),n.Vl.Na(a,"rejected",u),[4,IC(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,XI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function vC(o,s){return $i(this,void 0,void 0,function(){var n,r,i;return Zi(this,function(t){switch(t.label){case 0:OS((n=o).yl)||Ky("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.bh).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Fl.get(r)||[]).push(s),n.Fl.set(r,i),[3,4]);case 3:return i=t.sent(),i=Kw(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function yC(t,e){(t.Fl.get(e)||[]).forEach(function(t){t.resolve()}),t.Fl.delete(e)}function gC(t,e,n){var r=t,i=r.$l[r.currentUser.A()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.$l[r.currentUser.A()]=i)}function mC(e,t,n){void 0===n&&(n=null),e.Vl.ka(t);for(var r=0,i=e.Sl.get(t);r<i.length;r++){var o=i[r];e.vl.delete(o),n&&e.bl.Bl(o,n)}e.Sl.delete(t),e.Ml&&e.Nl.Fc(t).forEach(function(t){e.Nl.Fi(t)||bC(e,t)})}function bC(t,e){t.Dl.delete(e.path.rt());var n=t.Cl.get(e);null!==n&&(CS(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),wC(t))}function _C(t,e,n){for(var r,i,o,s=0,a=n;s<a.length;s++){var u=a[s];u instanceof nC?(t.Nl.nr(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.rt(),r.Cl.get(o)||r.Dl.has(i)||(Ky("SyncEngine","New document in limbo: "+o),r.Dl.add(i),wC(r))):u instanceof rC?(Ky("SyncEngine","Document no longer in limbo: "+u.key),t.Nl.ir(u.key,e),t.Nl.Fi(u.key)||bC(t,u.key)):Jy()}}function wC(t){for(;0<t.Dl.size&&t.Cl.size<t.pl;){var e=t.Dl.values().next().value;t.Dl.delete(e);var n=new Rg(kg.ot(e)),e=t.Ol.next();t.xl.set(e,new sC(n)),t.Cl=t.Cl.zt(n,e),SS(t.yl,new wb(db(ab(n.path)),e,2,bg.q))}}function IC(e,s,a){return $i(this,void 0,void 0,function(){var n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).vl.et()?[3,3]:(n.vl.forEach(function(t,e){o.push(n.Ll(e,s,a).then(function(t){t&&(n.Ml&&n.Vl.Ba(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=zE.oc(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.bl.ah(r),[4,function(u,c){return $i(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return kw.forEach(c,function(e){return kw.forEach(e.ic,function(t){return r.persistence.Ti.nr(n,e.targetId,t)}).next(function(){return kw.forEach(e.rc,function(t){return r.persistence.Ti.ir(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Uw(e=t.sent()))throw e;return Ky("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.fc.get(o),a=s.Ot,a=s.Lt(a),r.fc=r.fc.zt(o,a));return[2]}})})}(n.bh,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function EC(i,o){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Ky("SyncEngine","User change. New user:",o.A()),[4,$E(n.bh,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Fl.forEach(function(t){t.forEach(function(t){t.reject(new ug(ag.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Fl.clear(),n.Vl.Ua(o,r.mc,r.Ac),[4,IC(n,r.Ic)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function TC(a,u,c,h){return $i(this,void 0,void 0,function(){var o,s;return Zi(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).bh,n=u,i=(r=e).zo,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.yi(e,n).next(function(t){return t?r.Tc.Xo(e,t):kw.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,MS(o.yl)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(gC(o,u,h||null),yC(o,u),o.bh.zo.xi(u)):Jy(),t.label=4;case 4:return[4,IC(o,s)];case 5:return t.sent(),[3,7];case 6:Ky("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function SC(h,l){return $i(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Zi(this,function(t){switch(t.label){case 0:return NC(r=h),kC(r),!0!==l||!0===r.kl?[3,3]:(e=r.Vl.va(),[4,CC(r,e.it())]);case 1:return i=t.sent(),r.kl=!0,[4,US(r.yl,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],SS(r.yl,a);return[3,7];case 3:return!1!==l||!1===r.kl?[3,7]:(u=[],c=Promise.resolve(),r.Sl.forEach(function(t,e){r.Vl.Ma(e)?u.push(e):c=c.then(function(){return mC(r,e),iT(r.bh,e,!0)}),CS(r.yl,e)}),[4,c]);case 4:return t.sent(),[4,CC(r,u)];case 5:return t.sent(),(n=r).xl.forEach(function(t,e){CS(n.yl,e)}),n.Nl.Oc(),n.xl=new Map,n.Cl=new g_(Rg.H),r.kl=!1,[4,US(r.yl,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function CC(p,d){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return Zi(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Sl.get(s))&&0!==u.length?[4,rT(e.bh,db(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.vl.get(l),[4,function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,oT((e=r).bh,i.query,!0)];case 1:return n=t.sent(),n=i.view.Al(n),[2,(e.Ml&&_C(e,i.targetId,n.Il),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,sT(e.bh,s)];case 8:return f=t.sent(),[4,rT(e.bh,f)];case 9:return a=t.sent(),[4,hC(e,AC(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.bl.ah(r),n)]}})})}function AC(t){return sb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function NC(t){return t.yl.Dh.Lh=fC.bind(null,t),t.yl.Dh.vn=function(t,e){var n=t;if((t=n.xl.get(e))&&t.Pl)return R_().add(t.key);var r=R_();if(!(e=n.Sl.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.vl.get(s),r=r.Pe(s.view._l);return r}.bind(null,t),t.yl.Dh.Mh=function(o,s,a){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return(e=o).Vl.Ba(s,"rejected",a),i=e.xl.get(s),(n=i&&i.key)?(r=(r=new g_(Rg.H)).zt(n,new bm(n,Ng.min())),i=R_().add(n),i=new F_(Ng.min(),new Map,new T_(eg),r,i),[4,fC(e,i)]):[3,2];case 1:return t.sent(),e.Cl=e.Cl.remove(n),e.xl.delete(s),wC(e),[3,4];case 2:return[4,iT(e.bh,s,!1).then(function(){return mC(e,s,a)}).catch(XI)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.bl.ah=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&WS(n)}.bind(null,t.gl),t.bl.Bl=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.gl),t}function kC(t){return t.yl.Dh.Bh=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,ZE(e.bh,o)];case 2:return r=t.sent(),gC(e,n,null),yC(e,n),e.Vl.Na(n,"acknowledged"),[4,IC(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,XI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.yl.Dh.qh=dC.bind(null,t),t}function PC(t,e,n){var r=t;(function(f,p,d){return $i(this,void 0,void 0,function(){var a,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return a=t.sent(),[4,(r=f.bh,o=r,s=iw((i=a).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.wo.Os(t,i.id)}).then(function(t){return!!t&&0<=t.createTime._(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d.ql({taskState:"Success",documentsLoaded:a.totalDocuments,bytesLoaded:a.totalBytes,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}))];case 4:return d.Ul(eC(a)),u=new XS(a,f.bh,p.Qt),[4,p.Ql()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.rl(c)]:[3,10];case 7:return(h=t.sent())&&d.Ul(h),[4,p.Ql()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,IC(f,l.Go,void 0)];case 12:return t.sent(),[4,(r=f.bh,e=a,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.wo.ks(t,e)}))];case 13:return t.sent(),d.ql(l.progress),[3,15];case 14:return Yy("SyncEngine","Loading bundle failed with "+(l=t.sent())),d.Kl(l),[3,15];case 15:return[2]}var e,n,r,i,o,s})})})(r,e,n).then(function(){r.Vl.Wa()})}var OC,RC,xC=(VC.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.Qt=aS(e.yu.t),this.Vl=this.Wl(e),this.persistence=this.jl(e),[4,this.persistence.start()];case 1:return t.sent(),this.Gl=this.zl(e),this.bh=this.Hl(e),[2]}})})},VC.prototype.zl=function(t){return null},VC.prototype.Hl=function(t){return JE(this.persistence,new GE,t.Jl,this.Qt)},VC.prototype.jl=function(t){return new mT(_T.ia,this.Qt)},VC.prototype.Wl=function(t){return new qT},VC.prototype.terminate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.ko()];case 1:return t.sent(),[4,this.persistence.ko()];case 2:return t.sent(),[2]}})})},VC),DC=(Xi(UC,RC=xC),UC.prototype.initialize=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,RC.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,uT(this.bh)];case 2:return t.sent(),[4,this.Yl.initialize(this,e)];case 3:return t.sent(),[4,kC(this.Yl._a)];case 4:return t.sent(),[4,MS(this.Yl.yl)];case 5:return t.sent(),[2]}})})},UC.prototype.Hl=function(t){return JE(this.persistence,new GE,t.Jl,this.Qt)},UC.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new gE(e,t._s)},UC.prototype.jl=function(t){var e=qE(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?QI.Ys(this.cacheSizeBytes):QI.ti;return new FE(this.synchronizeTabs,e,t.clientId,n,t._s,oS(),sS(),this.Qt,this.Vl,!!this.forceOwnership)},UC.prototype.Wl=function(t){return new qT},UC),LC=(Xi(jC,OC=DC),jC.prototype.initialize=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:return[4,OC.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Yl._a,this.Vl instanceof VT?(this.Vl._a={eu:TC.bind(null,e),nu:function(i,o,s,a){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return(e=i).kl?(Ky("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Sl.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,aT(e.bh)];case 3:return n=t.sent(),r=F_.Me(o,"current"===s),[4,IC(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,iT(e.bh,o,!0)];case 6:return t.sent(),mC(e,o,a),[3,8];case 7:Jy(),t.label=8;case 8:return[2]}})})}.bind(null,e),su:function(c,h,l){return $i(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return Zi(this,function(t){switch(t.label){case 0:if(!(n=NC(c)).kl)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Sl.has(r)?(Ky("SyncEngine","Adding an already active target "+r),[3,5]):[4,sT(n.bh,r)]):[3,6];case 2:return i=t.sent(),[4,rT(n.bh,i)];case 3:return o=t.sent(),[4,hC(n,AC(i),o.targetId,!1)];case 4:t.sent(),SS(n.yl,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Zi(this,function(t){switch(t.label){case 0:return n.Sl.has(e)?[4,iT(n.bh,e,!1).then(function(){CS(n.yl,e),mC(n,e)}).catch(XI)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Uo:function(t){return t.bh.persistence.Uo()}.bind(null,e),tu:function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return[2,aT((e=n).bh).then(function(t){return IC(e,t)})]})})}.bind(null,e)},[4,this.Vl.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Ro(function(e){return $i(n,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,SC(this.Yl._a,e)];case 1:return t.sent(),this.Gl&&(e&&!this.Gl.Er?this.Gl.start(this.bh):e||this.Gl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},jC.prototype.Wl=function(t){var e=oS();if(!VT.Kn(e))throw new ug(ag.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=qE(t.yu.t,t.yu.persistenceKey);return new VT(e,t._s,n,t.clientId,t.Jl)},jC),MC=(FC.prototype.initialize=function(n,r){return $i(this,void 0,void 0,function(){var e=this;return Zi(this,function(t){switch(t.label){case 0:return this.bh?[3,2]:(this.bh=n.bh,this.Vl=n.Vl,this.Sh=this.Xl(r),this.yl=this.Zl(r),this.gl=this.t_(r),this._a=this.e_(r,!n.synchronizeTabs),this.Vl.fa=function(t){return pC(e._a,t,1)},this.yl.Dh.n_=EC.bind(null,this._a),[4,US(this.yl,this._a.Ml)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},FC.prototype.t_=function(t){return new BS},FC.prototype.Xl=function(t){var e=aS(t.yu.t),n=(n=t.yu,new WT(n));return t=t.credentials,new vS(t,n,e)},FC.prototype.Zl=function(t){var e=this,n=this.bh,r=this.Sh,i=t._s,o=function(t){return pC(e._a,t,0)},t=new(HT.Kn()?HT:BT);return new uS(n,r,i,o,t)},FC.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){o=new aC(t,e,n,r,i,o);return s&&(o.kl=!0),o}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},FC.prototype.terminate=function(){return function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=n,Ky("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,TS(e)];case 1:return t.sent(),e.Fh.ko(),e.Oh.set("Unknown"),[2]}})})}(this.yl)},FC);function FC(){}function jC(t,e){var n=this;return(n=OC.call(this,t,e,!1)||this).Yl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function UC(t,e,n){var r=this;return(r=RC.call(this)||this).Yl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function VC(){this.synchronizeTabs=!1}function qC(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2]})})},releaseLock:function(){}}}var BC=(YC.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},YC.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},YC.prototype.i_=function(){this.muted=!0},YC.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},YC),HC=(QC.prototype.close=function(){return this.r_.cancel()},QC.prototype.getMetadata=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return[2,this.metadata.promise]})})},QC.prototype.Ql=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},QC.prototype.c_=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,this.a_()];case 1:return null===(e=t.sent())?[2,null]:(r=this.o_.decode(e),n=Number(r),isNaN(n)&&this.u_("length string ("+r+") is not valid number"),[4,this.h_(n)]);case 2:return r=t.sent(),[2,new QS(JSON.parse(r),e.length+n)]}})})},QC.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},QC.prototype.a_=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},QC.prototype.h_=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.__()]:[3,3];case 1:t.sent()&&this.u_("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},QC.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},QC.prototype.__=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.r_.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},QC),zC=(KC.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},KC),GC=function(t){this._methodName=t},WC=function(t){this.d_=t};function KC(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ug(ag.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Og(t)}function QC(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Nw,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function YC(t){this.observer=t,this.muted=!1}function XC(t,e,n){if(!n)throw new ug(ag.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function JC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ug(ag.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function $C(t,e,n,r){if(!0===e&&!0===r)throw new ug(ag.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ZC(t){if(!Rg.wt(t))throw new ug(ag.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function tA(t){if(Rg.wt(t))throw new ug(ag.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function eA(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Jy();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function nA(t,e){if((t="_delegate"in t?t.d_:t)instanceof e)return t;if(e.name===t.constructor.name)throw new ug(ag.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=eA(t);throw new ug(ag.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function rA(t,e){if(e<=0)throw new ug(ag.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var iA,oA=(vA.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},vA),sA=new Map,aA=(Object.defineProperty(dA.prototype,"app",{get:function(){if(!this.A_)throw new ug(ag.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(dA.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(dA.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),dA.prototype.g_=function(t){if(this.T_)throw new ug(ag.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new oA(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new vg;switch(t.type){case"gapi":var e=t.client;return $y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new mg(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ug(ag.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},dA.prototype.V_=function(){return this.E_},dA.prototype.p_=function(){return this.T_=!0,this.E_},dA.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},dA.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},dA.prototype.b_=function(){return(t=sA.get(this))&&(Ky("ComponentProvider","Removing Datastore"),sA.delete(this),t.terminate()),Promise.resolve();var t},dA),uA=(Object.defineProperty(pA.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(pA.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(pA.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(pA.prototype,"parent",{get:function(){return new hA(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),pA.prototype.withConverter=function(t){return new pA(this.firestore,t,this.S_)},pA),cA=(fA.prototype.withConverter=function(t){return new fA(this.firestore,t,this.C_)},fA),hA=(Xi(lA,iA=cA),Object.defineProperty(lA.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(lA.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(lA.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new uA(this.firestore,null,new Rg(t))},enumerable:!1,configurable:!0}),lA.prototype.withConverter=function(t){return new lA(this.firestore,t,this.D_)},lA);function lA(t,e,n){var r=this;return(r=iA.call(this,t,e,ab(n))||this).firestore=t,r.D_=n,r.type="collection",r}function fA(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}function pA(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}function dA(t,e){this.w_="(lite)",this.E_=new oA({}),this.T_=!1,t instanceof Hy?(this.I_=t,this.m_=new vg):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ug(ag.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hy(t.options.projectId)}(t),this.m_=new yg(e))}function vA(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ug(ag.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ug(ag.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,$C("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function yA(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof WC&&(t=t.d_),XC("collection","path",e),t instanceof aA)return tA(n=kg.ot.apply(kg,ro([e],r))),new hA(t,null,n);if(!(t instanceof uA||t instanceof hA))throw new ug(ag.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return tA(n=kg.ot.apply(kg,ro([t.path],r)).child(kg.ot(e))),new hA(t.firestore,null,n)}function gA(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof WC&&(t=t.d_),XC("doc","path",e=1===arguments.length?Zy.u():e),t instanceof aA)return ZC(n=kg.ot.apply(kg,ro([e],r))),new uA(t,null,new Rg(n));if(!(t instanceof uA||t instanceof hA))throw new ug(ag.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ZC(n=t.D_.child(kg.ot.apply(kg,ro([e],r)))),new uA(t.firestore,t instanceof hA?t.v_:null,new Rg(n))}function mA(t,e){return t instanceof WC&&(t=t.d_),e instanceof WC&&(e=e.d_),(t instanceof uA||t instanceof hA)&&(e instanceof uA||e instanceof hA)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function bA(t,e){return t instanceof WC&&(t=t.d_),e instanceof WC&&(e=e.d_),t instanceof cA&&e instanceof cA&&t.firestore===e.firestore&&yb(t.C_,e.C_)&&t.v_===e.v_}var _A=(Object.defineProperty(CA.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(CA.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),CA.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},CA.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},CA.prototype.U=function(t){return eg(this.x_,t.x_)||eg(this.N_,t.N_)},CA),wA=/^__.*__$/,IA=(SA.prototype.F_=function(t,e){return null!==this.Gt?new t_(t,this.data,this.Gt,e,this.fieldTransforms):new Zb(t,this.data,e,this.fieldTransforms)},SA),EA=(TA.prototype.F_=function(t,e){return new t_(t,this.data,this.Gt,e,this.fieldTransforms)},TA);function TA(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}function SA(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}function CA(t,e){if(!isFinite(t)||t<-90||90<t)throw new ug(ag.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new ug(ag.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}function AA(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Jy()}}var NA=(Object.defineProperty(OA.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(OA.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),OA.prototype.M_=function(t){return new OA(Object.assign(Object.assign({},this.settings),t),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},OA.prototype.L_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.M_({path:e,B_:!1});return e.q_(t),e},OA.prototype.U_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.M_({path:t,B_:!1});return t.O_(),t},OA.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},OA.prototype.K_=function(t){return sN(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},OA.prototype.contains=function(e){return void 0!==this.Gt.find(function(t){return e.nt(t)})||void 0!==this.fieldTransforms.find(function(t){return e.nt(t.field)})},OA.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},OA.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(AA(this.k_)&&wA.test(t))throw this.K_('Document fields cannot begin and end with "__"')},OA),kA=(PA.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new NA({k_:t,methodName:e,j_:n,path:Og.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},PA);function PA(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||aS(t)}function OA(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}function RA(t){var e=t.p_(),n=aS(t.I_);return new kA(t.I_,!!e.ignoreUndefinedProperties,n)}function xA(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);nN("Data must be an object, but it was:",s,r);var a,u,r=tN(r,s);if(o.merge)a=new Bg(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=rN(e,l[h],n);if(!s.contains(f))throw new ug(ag.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");aN(c,f)||c.push(f)}a=new Bg(c),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new IA(new lm(r),a,u)}var DA,LA=(Xi(MA,DA=GC),MA.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},MA.prototype.isEqual=function(t){return t instanceof MA},MA);function MA(){return null!==DA&&DA.apply(this,arguments)||this}function FA(t,e,n){return new NA({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var jA,UA,VA,qA,BA=(Xi(YA,qA=GC),YA.prototype.z_=function(t){return new zb(t.path,new kb)},YA.prototype.isEqual=function(t){return t instanceof YA},YA),HA=(Xi(QA,VA=GC),QA.prototype.z_=function(t){var e=FA(this,t,!0),n=this.H_.map(function(t){return ZA(t,e)}),n=new Pb(n);return new zb(t.path,n)},QA.prototype.isEqual=function(t){return this===t},QA),zA=(Xi(KA,UA=GC),KA.prototype.z_=function(t){var e=FA(this,t,!0),n=this.H_.map(function(t){return ZA(t,e)}),n=new Lb(n);return new zb(t.path,n)},KA.prototype.isEqual=function(t){return this===t},KA),GA=(Xi(WA,jA=GC),WA.prototype.z_=function(t){var e=new Ub(t.Qt,Sb(t.Qt,this.J_));return new zb(t.path,e)},WA.prototype.isEqual=function(t){return this===t},WA);function WA(t,e){var n=this;return(n=jA.call(this,t)||this).J_=e,n}function KA(t,e){var n=this;return(n=UA.call(this,t)||this).H_=e,n}function QA(t,e){var n=this;return(n=VA.call(this,t)||this).H_=e,n}function YA(){return null!==qA&&qA.apply(this,arguments)||this}function XA(t,r,i,e){var o=t.G_(1,r,i);nN("Data must be an object, but it was:",o,e);var s=[],a=new fm;Vg(e,function(t,e){var n=oN(r,t,i);e instanceof WC&&(e=e.d_);t=o.U_(n);e instanceof LA?s.push(n):null!=(t=ZA(e,t))&&(s.push(n),a.set(n,t))});e=new Bg(s);return new EA(a.Pt(),e,o.fieldTransforms)}function JA(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[rN(e,r,n)],u=[i];if(o.length%2!=0)throw new ug(ag.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(rN(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new fm,v=a.length-1;0<=v;--v)aN(p,a[v])||(h=a[v],(l=u[v])instanceof WC&&(l=l.d_),f=s.U_(h),l instanceof LA?p.push(h):null!=(f=ZA(l,f))&&(p.push(h),d.set(h,f)));i=new Bg(p);return new EA(d.Pt(),i,s.fieldTransforms)}function $A(t,e,n,r){return void 0===r&&(r=!1),ZA(n,t.G_(r?4:3,e))}function ZA(s,t){if(eN(s=s instanceof WC?s.d_:s))return nN("Unsupported field value:",t,s),tN(s,t);if(s instanceof GC)return function(t,e){if(!AA(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");t=t.z_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(void 0===s&&t.ignoreUndefinedProperties)return null;if(t.path&&t.Gt.push(t.path),s instanceof Array){if(t.settings.B_&&4!==t.k_)throw t.K_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=ZA(i[r],t.Q_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===(t=t instanceof WC?t.d_:t))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Sb(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ag.fromDate(t);return{timestampValue:nw(e.Qt,n)}}if(t instanceof Ag)return n=new Ag(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:nw(e.Qt,n)};if(t instanceof _A)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof cg)return{bytesValue:rw(e.Qt,t.I)};if(t instanceof uA){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ow(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+eA(t))}(s,t)}function tN(t,n){var r={};return qg(t)?n.path&&0<n.path.length&&n.Gt.push(n.path):Vg(t,function(t,e){e=ZA(e,n.L_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function eN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ag||t instanceof _A||t instanceof cg||t instanceof uA||t instanceof GC)}function nN(t,e,n){if(!eN(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=eA(n);throw"an object"===n?e.K_(t+" a custom object"):e.K_(t+" "+n)}var r}function rN(t,e,n){if((e=e instanceof WC?e.d_:e)instanceof zC)return e.f_;if("string"==typeof e)return oN(t,e);throw sN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var iN=new RegExp("[~\\*/\\[\\]]");function oN(e,n,r){if(0<=n.search(iN))throw sN("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(zC.bind.apply(zC,ro([void 0],n.split("."))))).f_}catch(t){throw sN("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function sN(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new ug(ag.INVALID_ARGUMENT,(e+=". ")+t+n)}function aN(t,e){return t.some(function(t){return t.isEqual(e)})}var uN=(pN.prototype.ef=function(r){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.nf(),0<this.mutations.length)throw new ug(ag.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return $i(this,void 0,void 0,function(){var n,e,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=lw((n=s).Qt)+"/documents",r={documents:a.map(function(t){return aw(n.Qt,t)})},[4,n.Du("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.Qt,"found"in(t=t)?function(t,e){$y(!!e.found),e.found.name,e.found.updateTime;var n=uw(t,e.found.name),t=iw(e.found.updateTime),e=new lm({mapValue:{fields:e.found.fields}});return new mm(n,t,e,{})}(e,t):"missing"in t?function(t,e){$y(!!e.missing),$y(!!e.readTime);t=uw(t,e.missing),e=iw(e.readTime);return new bm(t,e)}(e,t):Jy());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());$y(!!t),o.push(t)}),o)]}})})}(this.Sh,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof bm||t instanceof mm?n.sf(t):Jy()}),e)]}})})},pN.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},pN.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},pN.prototype.delete=function(t){this.write(new l_(t,this.jt(t))),this.tf.add(t.toString())},pN.prototype.commit=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return e=this.Y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Rg._t(e);n.mutations.push(new f_(e,n.jt(e)))}),[4,function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=lw((e=i).Qt)+"/documents",r={writes:o.map(function(t){return vw(e.Qt,t)})},[4,e.pu("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return t.sent(),this.X_=!0,[2]}})})},pN.prototype.sf=function(t){var e;if(t instanceof mm)e=t.version;else{if(!(t instanceof bm))throw Jy();e=Ng.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ug(ag.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},pN.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Gb.updateTime(e):Gb.Kt()},pN.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(this.tf.has(t.toString())||!e)return Gb.exists(!0);if(e.isEqual(Ng.min()))throw new ug(ag.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gb.updateTime(e)},pN.prototype.write=function(t){this.nf(),this.mutations.push(t)},pN.prototype.nf=function(){},pN),cN=(fN.prototype.run=function(){this.af()},fN.prototype.af=function(){var t=this;this.Gu.Lu(function(){return $i(t,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){return e=new uN(this.Sh),(n=this.uf(e))&&n.then(function(t){r._s.Ps(function(){return e.commit().then(function(){r.Es.resolve(t)}).catch(function(t){r.hf(t)})})}).catch(function(t){r.hf(t)}),[2]})})})},fN.prototype.uf=function(t){try{var e=this.updateFunction(t);return!Xg(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},fN.prototype.hf=function(t){var e=this;0<this.cf&&this.lf(t)?(--this.cf,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},fN.prototype.lf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!v_(t)},fN),hN=(lN.prototype.getConfiguration=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},lN.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},lN.prototype.df=function(){if(this._s.wf)throw new ug(ag.FAILED_PRECONDITION,"The client has already been terminated.")},lN.prototype.terminate=function(){var t=this;this._s.Ef();var n=new Nw;return this._s.Tf(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.S(),n.resolve(),[3,6];case 5:return e=t.sent(),e=Kw(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},lN);function lN(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=hg.UNAUTHENTICATED,this.clientId=Zy.u(),this._f=function(){},this.C=new Nw,this.credentials.v(function(t){Ky("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}function fN(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new fS(this._s,"transaction_retry")}function pN(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}function dN(i,o){return $i(this,void 0,void 0,function(){var e,n,r=this;return Zi(this,function(t){switch(t.label){case 0:return i._s.Af(),Ky("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.Jl,i.ff(function(e){n.isEqual(e)||(n=e,i._s.po(function(){return $i(r,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,$E(o.bh,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.Po(function(){return i.terminate()}),i.mf=o,[2]}})})}function vN(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r._s.Af(),[4,yN(r)];case 1:return e=t.sent(),Ky("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.ff(function(t){return r._s.po(function(){return function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return(e=r)._s.Af(),Ky("RemoteStore","RemoteStore received new credentials"),n=OS(e),e.Nh.add(3),[4,TS(e)];case 1:return t.sent(),n&&e.Oh.set("Unknown"),[4,e.Dh.n_(i)];case 2:return t.sent(),e.Nh.delete(3),[4,ES(e)];case 3:return t.sent(),[2]}})})}(i.yl,t)})}),r.If=i,[2]}})})}function yN(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(Ky("FirestoreClient","Using default OfflineComponentProvider"),[4,dN(e,new xC)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function gN(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(Ky("FirestoreClient","Using default OnlineComponentProvider"),[4,vN(e,new MC)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function mN(t){return yN(t).then(function(t){return t.persistence})}function bN(t){return yN(t).then(function(t){return t.bh})}function _N(t){return gN(t).then(function(t){return t.yl})}function wN(t){return gN(t).then(function(t){return t._a})}function IN(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,gN(r)];case 1:return e=t.sent(),[2,((n=e.gl).jh=function(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=NC(s),(o=e.vl.get(a))?(n=o.targetId,e.Vl.Fa(n),r=o.view.Rl(),[3,4]):[3,1];case 1:return[4,rT(e.bh,db(a))];case 2:return i=t.sent(),o=e.Vl.Fa(i.targetId),n=i.targetId,[4,hC(e,a,n,"current"===o)];case 3:r=t.sent(),e.Ml&&SS(e.yl,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e._a),n.Hh=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return n=(e=i).vl.get(o),1<(r=e.Sl.get(n.targetId)).length?[2,(e.Sl.set(n.targetId,r.filter(function(t){return!yb(t,o)})),void e.vl.delete(o))]:e.Ml?(e.Vl.ka(n.targetId),e.Vl.Da(n.targetId)?[3,2]:[4,iT(e.bh,n.targetId,!1).then(function(){e.Vl.La(n.targetId),CS(e.yl,n.targetId),mC(e,n.targetId)}).catch(XI)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return mC(e,n.targetId),[4,iT(e.bh,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e._a),n)]}})})}function EN(n,r,i){var t=this;void 0===i&&(i={});var o=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new BC({next:function(t){r.Ps(function(){return GS(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new ug(ag.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new ug(ag.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new KS(ab(i.path),t,{includeMetadataChanges:!0,nl:!0});return zS(n,a)},[4,IN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n._s,r,i,o])]}})})}),o.promise}function TN(n,r,i){var t=this;void 0===i&&(i={});var o=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new BC({next:function(t){n.Ps(function(){return GS(e,s)}),t.fromCache&&"server"===r.source?i.reject(new ug(ag.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new KS(t,o,{includeMetadataChanges:!0,nl:!0});return zS(e,s)},[4,IN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n._s,r,i,o])]}})})}),o.promise}var SN=(Object.defineProperty(CN.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),CN.prototype.Ps=function(t){this.enqueue(t)},CN.prototype.Tf=function(t){this.Sf(),this.Df(t)},CN.prototype.Ef=function(){var t;this.yf||(this.yf=!0,(t=sS())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf))},CN.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},CN.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},CN.prototype.Cf=function(){return $i(this,void 0,void 0,function(){var e,n=this;return Zi(this,function(t){switch(t.label){case 0:if(0===this.Pf.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return t.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Uw(e=t.sent()))throw e;return Ky("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Pf.length&&this.Gu.Lu(function(){return n.Cf()}),t.label=5;case 5:return[2]}})})},CN.prototype.Df=function(t){var r=this,e=this.Rf.then(function(){return r.pf=!0,t().catch(function(t){throw r.Vf=t,r.pf=!1,Qy("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",n=e.stack?e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack:n)),t;var e,n}).then(function(t){return r.pf=!1,t})});return this.Rf=e},CN.prototype.Tr=function(t,e,n){var r=this;this.Sf(),-1<this.bf.indexOf(t)&&(e=0);n=Gw.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(n),n},CN.prototype.Sf=function(){this.Vf&&Jy()},CN.prototype.Af=function(){},CN.prototype.Nf=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,e=this.Rf];case 1:t.sent(),t.label=2;case 2:if(e!==this.Rf)return[3,0];t.label=3;case 3:return[2]}})})},CN.prototype.$f=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},CN.prototype.Ff=function(r){var i=this;return this.Nf().then(function(){i.gf.sort(function(t,e){return t.ds-e.ds});for(var t=0,e=i.gf;t<e.length;t++){var n=e[t];if(n.Rs(),"all"!==r&&n.fs===r)break}return i.Nf()})},CN.prototype.Of=function(t){this.bf.push(t)},CN.prototype.xf=function(t){t=this.gf.indexOf(t);this.gf.splice(t,1)},CN);function CN(){var e=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new fS(this,"async_queue_retry"),this.vf=function(){var t=sS();t&&Ky("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Gu.qu()};var t=sS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.vf)}function AN(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var NN,kN=(RN.prototype.onProgress=function(t,e,n){this.kf={next:t,error:e,complete:n}},RN.prototype.catch=function(t){return this.Mf.promise.catch(t)},RN.prototype.then=function(t,e){return this.Mf.promise.then(t,e)},RN.prototype.ql=function(t){this.Ul(t),this.kf.complete&&this.kf.complete(),this.Mf.resolve(t)},RN.prototype.Kl=function(t){this.Lf.taskState="Error",this.kf.next&&this.kf.next(this.Lf),this.kf.error&&this.kf.error(t),this.Mf.reject(t)},RN.prototype.Ul=function(t){this.Lf=t,this.kf.next&&this.kf.next(t)},RN),PN=(Xi(ON,NN=aA),ON.prototype.b_=function(){return this.qf||DN(this),this.qf.terminate()},ON);function ON(t,e){var n=this;return(n=NN.call(this,t,e)||this).Bf=new SN,n.w_="name"in t?t.name:"[DEFAULT]",n}function RN(){this.kf={},this.Mf=new Nw,this.Lf={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function xN(t){return t.qf||DN(t),t.qf.df(),t.qf}function DN(t){var e,n,r=t.p_(),r=(e=t.I_,n=t.w_,new By(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new hN(t.m_,t.Bf,r)}function LN(r,i,o){var t=this,s=new Nw;return r._s.enqueue(function(){return $i(t,void 0,void 0,function(){var n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,dN(r,o)];case 1:return t.sent(),[4,vN(r,i)];case 2:return t.sent(),s.resolve(),[3,4];case 3:if(!("FirebaseError"===(e=n=t.sent()).name?e.code===ag.FAILED_PRECONDITION||e.code===ag.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw n;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+n),s.reject(n),[3,4];case 4:return[2]}var e})})}).then(function(){return s.promise})}function MN(t){if(t.R_||t.P_)throw new ug(ag.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var FN,Sn=(BN.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),Zg(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Wg(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Kg(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw Jy()}},BN.prototype.Hf=function(t,n){var r=this,i={};return Vg(t.fields||{},function(t,e){i[t]=r.Uf(e,n)}),i},BN.prototype.Gf=function(t){return new _A(Wg(t.latitude),Wg(t.longitude))},BN.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},BN.prototype.Kf=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return Qg(e)?t(e):e}(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(Yg(t));default:return null}},BN.prototype.Qf=function(t){t=Gg(t);return new Ag(t.seconds,t.nanos)},BN.prototype.Jf=function(t,e){var n=kg.ot(t);$y(Cw(n));t=new Hy(n.get(1),n.get(3)),n=new Rg(n.Y(5));return t.isEqual(e)||Qy("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},BN),jN=(Object.defineProperty(qN.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(qN.prototype,"ref",{get:function(){return new uA(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),qN.prototype.exists=function(){return null!==this.Zf},qN.prototype.data=function(){if(this.Zf){if(this.v_){var t=new UN(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},qN.prototype.get=function(t){if(this.Zf){t=this.Zf.data().field(HN("DocumentSnapshot.get",t));if(null!==t)return this.Xf.Uf(t)}},qN),UN=(Xi(VN,FN=jN),VN.prototype.data=function(){return FN.prototype.data.call(this)},VN);function VN(){return null!==FN&&FN.apply(this,arguments)||this}function qN(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}function BN(){}function HN(t,e){return"string"==typeof e?oN(t,e):(e instanceof WC?e.d_:e).f_}function zN(t){if(cb(t)&&0===t.xt.length)throw new ug(ag.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}W=function(){};function GN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r].td(t);return t}var WN,KN,QN,YN,XN,JN=(Xi(sk,XN=W),sk.prototype.td=function(t){var e=RA(t.firestore),e=function(t,e,n,r,i,o){if(r.ut()){if("array-contains"===i||"array-contains-any"===i)throw new ug(ag.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){ck(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(uk(n,t,c))}h={arrayValue:{values:s}}}else h=uk(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||ck(o,i),h=$A(e,"where",o,"in"===i||"not-in"===i);var h=Pm.create(r,i,h);return function(t,e){if(e.Ct()){var n=lb(t);if(null!==n&&!n.isEqual(e.field))throw new ug(ag.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=hb(t);null!==n&&hk(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new ug(ag.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new ug(ag.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.C_,e,t.firestore.I_,this.ed,this.nd,this.sd);return new cA(t.firestore,t.v_,(t=t.C_,e=t.filters.concat([e]),new ob(t.path,t.collectionGroup,t.xt.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},sk),$N=(Xi(ok,YN=W),ok.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ug(ag.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ug(ag.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new nb(e,n);return e=r,null!==hb(n=t)||null!==(t=lb(n))&&hk(0,t,e.field),r}(t.C_,this.ed,this.rd);return new cA(t.firestore,t.v_,(t=t.C_,e=t.xt.concat([e]),new ob(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},ok),ZN=(Xi(ik,QN=W),ik.prototype.td=function(t){return new cA(t.firestore,t.v_,vb(t.C_,this.od,this.ad))},ik),tk=(Xi(rk,KN=W),rk.prototype.td=function(t){var e=ak(t,this.type,this.ud,this.hd);return new cA(t.firestore,t.v_,(t=t.C_,e=e,new ob(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},rk),ek=(Xi(nk,WN=W),nk.prototype.td=function(t){var e=ak(t,this.type,this.ud,this.hd);return new cA(t.firestore,t.v_,(t=t.C_,e=e,new ob(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},nk);function nk(t,e,n){var r=this;return(r=WN.call(this)||this).type=t,r.ud=e,r.hd=n,r}function rk(t,e,n){var r=this;return(r=KN.call(this)||this).type=t,r.ud=e,r.hd=n,r}function ik(t,e,n){var r=this;return(r=QN.call(this)||this).type=t,r.od=e,r.ad=n,r}function ok(t,e){var n=this;return(n=YN.call(this)||this).ed=t,n.rd=e,n.type="orderBy",n}function sk(t,e,n){var r=this;return(r=XN.call(this)||this).ed=t,r.nd=e,r.sd=n,r.type="where",r}function ak(t,c,e,n){if(e[0]instanceof WC&&(e[0]=e[0].d_),e[0]instanceof jN)return function(t,e,n,r){if(!n)throw new ug(ag.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=pb(t);o<s.length;o++){var a=s[o];if(a.field.ut())i.push(om(e,n.key));else{var u=n.field(a.field);if(Qg(u))throw new ug(ag.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.rt();throw new ug(ag.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new Xm(i,r)}(t.C_,t.firestore.I_,e[0].Zf,n);var r=RA(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new ug(ag.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new ug(ag.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!fb(t)&&-1!==c.indexOf("/"))throw new ug(ag.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(kg.ot(c));if(!Rg.wt(h))throw new ug(ag.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Rg(h);a.push(om(e,h))}else{c=$A(n,r,c);a.push(c)}}return new Xm(a,o)}(t.C_,t.firestore.I_,r,c,e,n)}function uk(t,e,n){if("string"==typeof(n=n instanceof WC?n.d_:n)){if(""===n)throw new ug(ag.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fb(e)&&-1!==n.indexOf("/"))throw new ug(ag.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(kg.ot(n));if(!Rg.wt(e))throw new ug(ag.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return om(t,new Rg(e))}if(n instanceof uA)return om(t,n.S_);throw new ug(ag.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+eA(n)+".")}function ck(t,e){if(!Array.isArray(t)||0===t.length)throw new ug(ag.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new ug(ag.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function hk(t,e,n){if(!n.isEqual(e))throw new ug(ag.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function lk(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var fk,pk,dk,vk=(Xi(Tk,dk=Sn),Tk.prototype.Wf=function(t){return new cg(t)},Tk.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return new uA(this.firestore,null,t)},Tk),yk=(Ek.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Ek),gk=(Xi(Ik,pk=jN),Ik.prototype.exists=function(){return pk.prototype.exists.call(this)},Ik.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new mk(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},Ik.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){t=this.Zf.data().field(HN("DocumentSnapshot.get",t));if(null!==t)return this.Xf.Uf(t,e.serverTimestamps)}},Ik),mk=(Xi(wk,fk=gk),wk.prototype.data=function(t){return void 0===t&&(t={}),fk.prototype.data.call(this,t)},wk),bk=(Object.defineProperty(_k.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(_k.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(_k.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),_k.prototype.forEach=function(e,n){var r=this;this._d.docs.forEach(function(t){e.call(n,new mk(r.Yf,r.Xf,t.key,t,new yk(r._d.De.has(t.key),r._d.fromCache),r.query.v_))})},_k.prototype.docChanges=function(t){t=!!(t=void 0===t?{}:t).includeMetadataChanges;if(t&&this._d.xe)throw new ug(ag.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===t||(this.fd=function(i,e){if(i._d.Se.et()){var n=0;return i._d.docChanges.map(function(t){var e=new mk(i.Yf,i.Xf,t.doc.key,t.doc,new yk(i._d.De.has(t.doc.key),i._d.fromCache),i.query.v_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i._d.Se;return i._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new mk(i.Yf,i.Xf,t.doc.key,t.doc,new yk(i._d.De.has(t.doc.key),i._d.fromCache),i.query.v_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jy()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.dd=t),this.fd},_k);function _k(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new yk(r.hasPendingWrites,r.fromCache),this.query=n}function wk(){return null!==fk&&fk.apply(this,arguments)||this}function Ik(t,e,n,r,i,o){var s=this;return(s=pk.call(this,t,e,n,r,o)||this).Yf=t,s.ld=t,s.metadata=i,s}function Ek(t,e){this.hasPendingWrites=t,this.fromCache=e}function Tk(t){var e=this;return(e=dk.call(this)||this).firestore=t,e}function Sk(t,e){return t instanceof gk&&e instanceof gk?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof bk&&e instanceof bk&&t.Yf===e.Yf&&bA(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var Ck,Ak=(Xi(Nk,Ck=Sn),Nk.prototype.Wf=function(t){return new cg(t)},Nk.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return new uA(this.firestore,null,t)},Nk);function Nk(t){var e=this;return(e=Ck.call(this)||this).firestore=t,e}function kk(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=nA(t,uA);var o=nA(t.firestore,PN),s=RA(o);return Ok(o,[("string"==typeof(e=e instanceof WC?e.d_:e)||e instanceof zC?JA(s,"updateDoc",t.S_,e,n,r):XA(s,"updateDoc",t.S_,e)).F_(t.S_,Gb.exists(!0))])}function Pk(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof WC&&(e=e.d_);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||AN(n[i])||(r=n[i],i++);var o,s,a,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return AN(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof uA?(a=nA(e.firestore,PN),u=ab(e.S_.path),h={next:function(t){n[i]&&n[i](Rk(a,e,t))},error:n[i+1],complete:n[i+2]}):(s=nA(e,cA),a=nA(s.firestore,PN),u=s.C_,c=new Ak(a),h={next:function(t){n[i]&&n[i](new bk(a,c,s,t))},error:n[i+1],complete:n[i+2]},zN(e.C_)),function(n,t,e){var r=this,i=new BC(h),o=new KS(t,i,e);return n._s.Ps(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=zS,[4,IN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.i_(),n._s.Ps(function(){return $i(r,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=GS,[4,IN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(xN(a),u,l)}function Ok(t,e){return function(n,r){var t=this,i=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=lC,[4,wN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(xN(t),e)}function Rk(t,e,n){var r=n.docs.get(e.S_),i=new Ak(t);return new gk(t,i,e.S_,r,new yk(n.hasPendingWrites,n.fromCache),e.v_)}var xk=(Dk.prototype.set=function(t,e,n){this.md();t=Lk(t,this.Yf),e=lk(t.v_,e,n),n=xA(this.Id,"WriteBatch.set",t.S_,e,null!==t.v_,n);return this.Ed.push(n.F_(t.S_,Gb.Kt())),this},Dk.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();t=Lk(t,this.Yf),e="string"==typeof(e=e instanceof WC?e.d_:e)||e instanceof zC?JA(this.Id,"WriteBatch.update",t.S_,e,n,r):XA(this.Id,"WriteBatch.update",t.S_,e);return this.Ed.push(e.F_(t.S_,Gb.exists(!0))),this},Dk.prototype.delete=function(t){this.md();t=Lk(t,this.Yf);return this.Ed=this.Ed.concat(new l_(t.S_,Gb.Kt())),this},Dk.prototype.commit=function(){return this.md(),this.Td=!0,0<this.Ed.length?this.wd(this.Ed):Promise.resolve()},Dk.prototype.md=function(){if(this.Td)throw new ug(ag.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Dk);function Dk(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=RA(t)}function Lk(t,e){if((t=t instanceof WC?t.d_:t).firestore!==e)throw new ug(ag.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Mk,Fk=(Uk.prototype.get=function(t){var e=this,n=Lk(t,this.Yf),r=new vk(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return Jy();t=t[0];if(t instanceof bm)return new jN(e.Yf,r,n.S_,null,n.v_);if(t instanceof mm)return new jN(e.Yf,r,t.key,t,n.v_);throw Jy()})},Uk.prototype.set=function(t,e,n){t=Lk(t,this.Yf),e=lk(t.v_,e,n),n=xA(this.Id,"Transaction.set",t.S_,e,null!==t.v_,n);return this.Ad.set(t.S_,n),this},Uk.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Lk(t,this.Yf),e="string"==typeof(e=e instanceof WC?e.d_:e)||e instanceof zC?JA(this.Id,"Transaction.update",t.S_,e,n,r):XA(this.Id,"Transaction.update",t.S_,e);return this.Ad.update(t.S_,e),this},Uk.prototype.delete=function(t){t=Lk(t,this.Yf);return this.Ad.delete(t.S_),this},Xi(jk,Mk=Uk),jk.prototype.get=function(t){var e=this,n=Lk(t,this.Yf),r=new Ak(this.Yf);return Mk.prototype.get.call(this,t).then(function(t){return new gk(e.Yf,r,n.S_,t.Zf,new yk(!1,!1),n.v_)})},jk);function jk(t,e){var n=this;return(n=Mk.call(this,t,e)||this).Yf=t,n}function Uk(t,e){this.Yf=t,this.Ad=e,this.Id=RA(t)}function Vk(){if("undefined"==typeof Uint8Array)throw new ug(ag.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function qk(){if("undefined"==typeof atob)throw new ug(ag.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Bk,Hk,zk,Gk=(Xi($k,zk=WC),$k.fromBase64String=function(t){return qk(),new $k(cg.fromBase64String(t))},$k.fromUint8Array=function(t){return Vk(),new $k(cg.fromUint8Array(t))},$k.prototype.toBase64=function(){return qk(),this.d_.toBase64()},$k.prototype.toUint8Array=function(){return Vk(),this.d_.toUint8Array()},$k.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},$k.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},$k),Wk=(Jk.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){MN(t=nA(t,PN));var n=xN(t),r=t.p_(),t=new MC;return LN(n,t,new DC(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},Jk.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){MN(t=nA(t,PN));var e=xN(t),n=t.p_(),t=new MC;return LN(e,t,new LC(t,n.cacheSizeBytes))}(t.d_)},Jk.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.R_&&!n.P_)throw new ug(ag.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new Nw;return n.Bf.Tf(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return Ow.Kn()?(e=n+"main",[4,Ow.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(qE(n.I_,n.w_))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.d_)},Jk),Kk=(Xi(Xk,Hk=WC),Object.defineProperty(Xk.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),Xk.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},Xk.prototype.useEmulator=function(t,e){var n,r;n=this.d_,r=t,t=e,"firestore.googleapis.com"!==(e=(n=nA(n,aA)).V_()).host&&e.host!==r&&Yy("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},Xk.prototype.enableNetwork=function(){return function(i){var t=this;return i._s.enqueue(function(){return $i(t,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,mN(i)];case 1:return n=t.sent(),[4,_N(i)];case 2:return r=t.sent(),[2,(n.yo(!0),(e=r).Nh.delete(0),ES(e))]}var e})})})}(xN(nA(this.d_,PN)))},Xk.prototype.disableNetwork=function(){return function(r){var t=this;return r._s.enqueue(function(){return $i(t,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,mN(r)];case 1:return e=t.sent(),[4,_N(r)];case 2:return n=t.sent(),[2,(e.yo(!1),function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=n).Nh.add(0),[4,TS(e)];case 1:return t.sent(),e.Oh.set("Offline"),[2]}})})}(n))]}})})})}(xN(nA(this.d_,PN)))},Xk.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&$C("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},Xk.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},Xk.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},Xk.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=vC,[4,wN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(xN(nA(this.d_,PN)))},Xk.prototype.onSnapshotsInSync=function(t){return e=this.d_,t=t,function(n,t){var e=this,r=new BC(t);return n._s.Ps(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Wh.add(e),e.next()},[4,IN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.i_(),n._s.Ps(function(){return $i(e,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Wh.delete(e)},[4,IN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(xN(nA(e,PN)),AN(t)?t:{next:t});var e},Object.defineProperty(Xk.prototype,"app",{get:function(){if(!this.Pd)throw new ug(ag.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),Xk.prototype.collection=function(t){try{return new SP(this,yA(this.d_,t))}catch(t){throw lP(t,"collection()","Firestore.collection()")}},Xk.prototype.doc=function(t){try{return new cP(this,gA(this.d_,t))}catch(t){throw lP(t,"doc()","Firestore.doc()")}},Xk.prototype.collectionGroup=function(t){try{return new IP(this,function(t,e){if(t=nA(t,aA),XC("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new ug(ag.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new cA(t,null,(e=e,new ob(kg.ct(),e)))}(this.d_,t))}catch(t){throw lP(t,"collectionGroup()","Firestore.collectionGroup()")}},Xk.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,gN(n).then(function(t){return t.Sh})];case 1:return e=t.sent(),new cN(n._s,e,r,i).run(),[2]}})})}),i.promise}(xN(n=this.d_),function(t){return t=new Fk(n,t),e(new nP(r,t))})},Xk.prototype.batch=function(){var e=this;return xN(this.d_),new rP(new xk(this.d_,function(t){return Ok(e.d_,t)}))},Xk.prototype.loadBundle=function(t){throw new ug(ag.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},Xk.prototype.namedQuery=function(t){throw new ug(ag.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},Xk),Qk=(Xi(Yk,Bk=Sn),Yk.prototype.Wf=function(t){return new Gk(new cg(t))},Yk.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return cP.yd(t,this.firestore,null)},Yk);function Yk(t){var e=this;return(e=Bk.call(this)||this).firestore=t,e}function Xk(t,e,n){var r=this;return(r=Hk.call(this,e)||this).Rd=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof Hy||(r.Pd=t),r}function Jk(){}function $k(){return null!==zk&&zk.apply(this,arguments)||this}var Zk,tP,eP,nP=(Xi(aP,eP=WC),aP.prototype.get=function(t){var e=this,n=RP(t);return this.d_.get(n).then(function(t){return new _P(e.Yf,new gk(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},aP.prototype.set=function(t,e,n){t=RP(t);return n?(JC("Transaction.set",n),this.d_.set(t,e,n)):this.d_.set(t,e),this},aP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=RP(t);return 2===arguments.length?this.d_.update(o,e):(t=this.d_).update.apply(t,ro([o,e,n],r)),this},aP.prototype.delete=function(t){t=RP(t);return this.d_.delete(t),this},aP),rP=(Xi(sP,tP=WC),sP.prototype.set=function(t,e,n){t=RP(t);return n?(JC("WriteBatch.set",n),this.d_.set(t,e,n)):this.d_.set(t,e),this},sP.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=RP(t);return 2===arguments.length?this.d_.update(o,e):(t=this.d_).update.apply(t,ro([o,e,n],r)),this},sP.prototype.delete=function(t){t=RP(t);return this.d_.delete(t),this},sP.prototype.commit=function(){return this.d_.commit()},sP),iP=(Xi(oP,Zk=WC),oP.prototype.fromFirestore=function(t,e){t=new mk(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new wP(this.Yf,t),null!=e?e:{})},oP.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},oP.gd=function(t,e){var n=oP.Vd,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new oP(t,new Qk(t),e),r.set(e,n)),n},oP);function oP(t,e,n){var r=this;return(r=Zk.call(this,n)||this).Yf=t,r.Xf=e,r}function sP(){return null!==tP&&tP.apply(this,arguments)||this}function aP(t,e){var n=this;return(n=eP.call(this,e)||this).Yf=t,n.Xf=new Qk(t),n}iP.Vd=new WeakMap;var uP,cP=(Xi(hP,uP=WC),hP.pd=function(t,e,n){if(t.length%2!=0)throw new ug(ag.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new hP(e,new uA(e.d_,n,new Rg(t)))},hP.yd=function(t,e,n){return new hP(e,new uA(e.d_,n,t))},Object.defineProperty(hP.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(hP.prototype,"parent",{get:function(){return new SP(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(hP.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),hP.prototype.collection=function(t){try{return new SP(this.firestore,yA(this.d_,t))}catch(t){throw lP(t,"collection()","DocumentReference.collection()")}},hP.prototype.isEqual=function(t){return(t=t instanceof WC?t.d_:t)instanceof uA&&mA(this.d_,t)},hP.prototype.set=function(t,e){e=JC("DocumentReference.set",e);try{return function(t,e,n){t=nA(t,uA);var r=nA(t.firestore,PN),e=lk(t.v_,e,n);return Ok(r,[xA(RA(r),"setDoc",t.S_,e,null!==t.v_,n).F_(t.S_,Gb.Kt())])}(this.d_,t,e)}catch(t){throw lP(t,"setDoc()","DocumentReference.set()")}},hP.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?kk(this.d_,t):kk.apply(void 0,ro([this.d_,t,e],n))}catch(t){throw lP(t,"updateDoc()","DocumentReference.update()")}},hP.prototype.delete=function(){return Ok(nA((t=this.d_).firestore,PN),[new l_(t.S_,Gb.Kt())]);var t},hP.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fP(t),i=pP(t,function(t){return new _P(e.firestore,new gk(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))});return Pk(this.d_,r,i)},hP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=nA(e,uA);var n=nA(e.firestore,PN),t=xN(n),r=new Ak(n);return function(n,r){var t=this,i=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(o,s,a){return $i(this,void 0,void 0,function(){var r,i;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)}))];case 1:return(i=t.sent())instanceof mm?a.resolve(i):i instanceof bm?a.resolve(null):a.reject(new ug(ag.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=Kw(r,"Failed to get document '"+s+" from cache"),a.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,bN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.S_).then(function(t){return new gk(n,r,e.S_,t,new yk(t instanceof mm&&t.Vt,!0),e.v_)})}:"server"===(null==t?void 0:t.source)?function(e){e=nA(e,uA);var n=nA(e.firestore,PN);return EN(xN(n),e.S_,{source:"server"}).then(function(t){return Rk(n,e,t)})}:function(e){e=nA(e,uA);var n=nA(e.firestore,PN);return EN(xN(n),e.S_).then(function(t){return Rk(n,e,t)})})(this.d_).then(function(t){return new _P(e.firestore,new gk(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},hP.prototype.withConverter=function(t){return new hP(this.firestore,this.d_.withConverter(iP.gd(this.firestore,t)))},hP);function hP(t,e){var n=this;return(n=uP.call(this,e)||this).firestore=t,n.Xf=new Qk(t),n}function lP(t,e,n){return t.message=t.message.replace(e,n),t}function fP(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!AN(r))return r}return{}}function pP(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=AN(t[0])?t[0]:AN(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var dP,vP,yP,gP,mP,bP,_P=(Xi(OP,bP=WC),Object.defineProperty(OP.prototype,"ref",{get:function(){return new cP(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(OP.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(OP.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(OP.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),OP.prototype.data=function(t){return this.d_.data(t)},OP.prototype.get=function(t,e){return this.d_.get(t,e)},OP.prototype.isEqual=function(t){return Sk(this.d_,t.d_)},OP),wP=(Xi(PP,mP=_P),PP.prototype.data=function(t){return this.d_.data(t)},PP),IP=(Xi(kP,gP=WC),kP.prototype.where=function(t,e,n){try{return new kP(this.firestore,GN(this.d_,(r=n,i=e,o=HN("where",t),new JN(o,i,r))))}catch(t){throw lP(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},kP.prototype.orderBy=function(t,e){try{return new kP(this.firestore,GN(this.d_,(n=void 0===e?"asc":e,r=HN("orderBy",t),new $N(r,n))))}catch(t){throw lP(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},kP.prototype.limit=function(t){try{return new kP(this.firestore,GN(this.d_,(rA("limit",e=t),new ZN("limit",e,"F"))))}catch(t){throw lP(t,"limit()","Query.limit()")}var e},kP.prototype.limitToLast=function(t){try{return new kP(this.firestore,GN(this.d_,(rA("limitToLast",e=t),new ZN("limitToLast",e,"L"))))}catch(t){throw lP(t,"limitToLast()","Query.limitToLast()")}var e},kP.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new kP(this.firestore,GN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tk("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw lP(t,"startAt()","Query.startAt()")}},kP.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new kP(this.firestore,GN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new tk("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw lP(t,"startAfter()","Query.startAfter()")}},kP.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new kP(this.firestore,GN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ek("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw lP(t,"endBefore()","Query.endBefore()")}},kP.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new kP(this.firestore,GN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ek("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw lP(t,"endAt()","Query.endAt()")}},kP.prototype.isEqual=function(t){return bA(this.d_,t.d_)},kP.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=nA(e,cA);var n=nA(e.firestore,PN),t=xN(n),r=new Ak(n);return function(n,r){var t=this,i=new Nw;return n._s.Ps(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,oT(i,o,!0)];case 1:return r=t.sent(),e=new iC(o,r.Rc),n=e.fl(r.documents),n=e.wi(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=Kw(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,bN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.C_).then(function(t){return new bk(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=nA(e,cA);var n=nA(e.firestore,PN),t=xN(n),r=new Ak(n);return TN(t,e.C_,{source:"server"}).then(function(t){return new bk(n,r,e,t)})}:function(e){e=nA(e,cA);var n=nA(e.firestore,PN),t=xN(n),r=new Ak(n);return zN(e.C_),TN(t,e.C_).then(function(t){return new bk(n,r,e,t)})})(this.d_).then(function(t){return new TP(e.firestore,new bk(e.firestore.d_,e.Xf,e.d_,t._d))})},kP.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fP(t),i=pP(t,function(t){return new TP(e.firestore,new bk(e.firestore.d_,e.Xf,e.d_,t._d))});return Pk(this.d_,r,i)},kP.prototype.withConverter=function(t){return new kP(this.firestore,this.d_.withConverter(iP.gd(this.firestore,t)))},kP),EP=(Xi(NP,yP=WC),Object.defineProperty(NP.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(NP.prototype,"doc",{get:function(){return new wP(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(NP.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(NP.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),NP),TP=(Xi(AP,vP=WC),Object.defineProperty(AP.prototype,"query",{get:function(){return new IP(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(AP.prototype,"docs",{get:function(){var e=this;return this.d_.docs.map(function(t){return new wP(e.Yf,t)})},enumerable:!1,configurable:!0}),AP.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new EP(e.Yf,t)})},AP.prototype.forEach=function(e,n){var r=this;this.d_.forEach(function(t){e.call(n,new wP(r.Yf,t))})},AP.prototype.isEqual=function(t){return Sk(this.d_,t.d_)},AP),SP=(Xi(CP,dP=IP),Object.defineProperty(CP.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(CP.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(CP.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new cP(this.firestore,t):null},enumerable:!1,configurable:!0}),CP.prototype.doc=function(t){try{return new cP(this.firestore,void 0===t?gA(this.d_):gA(this.d_,t))}catch(t){throw lP(t,"doc()","CollectionReference.doc()")}},CP.prototype.add=function(t){var e,n,r,i=this;return e=this.d_,n=t,t=nA(e.firestore,PN),r=gA(e),n=lk(e.v_,n),Ok(t,[xA(RA(e.firestore),"addDoc",r.S_,n,null!==e.v_,{}).F_(r.S_,Gb.exists(!1))]).then(function(){return r}).then(function(t){return new cP(i.firestore,t)})},CP.prototype.isEqual=function(t){return mA(this.d_,t.d_)},CP.prototype.withConverter=function(t){return new CP(this.firestore,this.d_.withConverter(iP.gd(this.firestore,t)))},CP);function CP(t,e){var n=this;return(n=dP.call(this,t,e)||this).firestore=t,n.d_=e,n}function AP(t,e){var n=this;return(n=vP.call(this,e)||this).Yf=t,n}function NP(t,e){var n=this;return(n=yP.call(this,e)||this).Yf=t,n}function kP(t,e){var n=this;return(n=gP.call(this,e)||this).firestore=t,n.Xf=new Qk(t),n}function PP(){return null!==mP&&mP.apply(this,arguments)||this}function OP(t,e){var n=this;return(n=bP.call(this,e)||this).Yf=t,n}function RP(t){return nA(t=t instanceof WC?t.d_:t,uA)}var xP,DP,W=(Xi(MP,DP=WC),MP.documentId=function(){return new MP(Og.ht().rt())},MP.prototype.isEqual=function(t){return(t=t instanceof WC?t.d_:t)instanceof zC&&this.d_.f_.isEqual(t.f_)},MP),Sn=(Xi(LP,xP=WC),LP.serverTimestamp=function(){var t=new BA("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new LP(t)},LP.delete=function(){var t=new LA("deleteField");return t._methodName="FieldValue.delete",new LP(t)},LP.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new HA("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new LP(n)},LP.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zA("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new LP(n)},LP.increment=function(t){t=new GA("increment",t);return t._methodName="FieldValue.increment",new LP(t)},LP.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},LP);function LP(){return null!==xP&&xP.apply(this,arguments)||this}function MP(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return DP.call(this,new(zC.bind.apply(zC,ro([void 0],t))))||this}function FP(t){return e=this.d_,s=t,n=xN(e=nA(e,PN)),t=new kN,function(n,t,r){var e,i=this,o=(e=s,t=aS(t),e=function(t){if(t instanceof Uint8Array)return qC(t,void 0);if(t instanceof ArrayBuffer)return qC(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new HC(e,t));n._s.Ps(function(){return $i(i,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=PC,[4,wN(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e.I_,t),t;var e,s,n}function jP(t){var e=this,n=this.d_,t=t;return function(n,r){var t=this;return n._s.enqueue(function(){return $i(t,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.wo.Ms(t,e)})},[4,bN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(xN(n=nA(n,PN)),t).then(function(t){return t?new cA(n,null,t.query):null}).then(function(t){return t?new IP(e,t):null})}var UP,VP,qP={Firestore:Kk,GeoPoint:_A,Timestamp:Ag,Blob:Gk,Transaction:nP,WriteBatch:rP,DocumentReference:cP,DocumentSnapshot:_P,Query:IP,QueryDocumentSnapshot:wP,QuerySnapshot:TP,CollectionReference:SP,FieldPath:W,FieldValue:Sn,setLogLevel:function(t){zy.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(UP=Jl).INTERNAL.registerComponent(new ts("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new Kk(e,new PN(e,t),new Wk)},"PUBLIC").setServiceProps(Object.assign({},qP))),UP.registerVersion("@firebase/firestore","2.1.7"),(VP=Kk).prototype.loadBundle=FP,VP.prototype.namedQuery=jP;var BP,HP={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},zP=(Xi(GP,BP=Error),GP);function GP(t,e,n){e=BP.call(this,e)||this;return Object.setPrototypeOf(e,GP.prototype),e.code=t,e.details=n,e}function WP(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!HP[a])return new zP("internal","internal");r=HP[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new zP(r,i,o)}var KP=(QP.prototype.getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},QP.prototype.getInstanceIdToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},QP.prototype.getContext=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},QP);function QP(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function YP(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var XP=(JP.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return YP(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},JP.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?YP(t,function(t){return e.decode(t)}):t},JP);function JP(){}var $P=(Object.defineProperty(ZP.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),ZP.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},ZP.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},ZP.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},ZP.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},ZP.prototype.postJSON=function(r,i,o){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},ZP.prototype.call=function(c,h,l){return $i(this,void 0,void 0,function(){var i,o,s,a,u;return Zi(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new zP("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([tO(u,this.postJSON(i,o,s)),a,tO(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new zP("cancelled","Firebase Functions instance was deleted.");if(u=WP(a.status,a.json,this.serializer))throw u;if(!a.json)throw new zP("internal","Response is not valid JSON object.");if(void 0===(u=void 0===(u=a.json.data)?a.json.result:u))throw new zP("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},ZP);function ZP(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new XP,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new KP(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function tO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var eO,nO,rO;function iO(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function oO(n,r,i){var o,t=new Promise(function(t,e){iO(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function sO(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function aO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return oO(this[n],t,arguments)})})}function uO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function cO(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=oO(t,n,arguments)).then(function(t){if(t)return new lO(t,e.request)});var t,e})})}function hO(t){this._index=t}function lO(t,e){this._cursor=t,this._request=e}function fO(t){this._store=t}function pO(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function dO(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new pO(n)}function vO(t){this._db=t}function yO(t,e,n){var e=oO(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new dO(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new vO(t)})}function gO(t){return oO(indexedDB,"deleteDatabase",[t])}eO=Jl,nO=fetch.bind(self),rO={Functions:$P},eO.INTERNAL.registerComponent(new ts("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new $P(n,r,t,e,nO)},"PUBLIC").setServiceProps(rO).setMultipleInstances(!0)),Jl.registerVersion("@firebase/functions","0.6.2"),sO(hO,"_index",["name","keyPath","multiEntry","unique"]),aO(hO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),cO(hO,"_index",IDBIndex,["openCursor","openKeyCursor"]),sO(lO,"_cursor",["direction","key","primaryKey","value"]),aO(lO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(lO.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),iO(e._request).then(function(t){if(t)return new lO(t,e._request)})})})}),fO.prototype.createIndex=function(){return new hO(this._store.createIndex.apply(this._store,arguments))},fO.prototype.index=function(){return new hO(this._store.index.apply(this._store,arguments))},sO(fO,"_store",["name","keyPath","indexNames","autoIncrement"]),aO(fO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),cO(fO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),uO(fO,"_store",IDBObjectStore,["deleteIndex"]),pO.prototype.objectStore=function(){return new fO(this._tx.objectStore.apply(this._tx,arguments))},sO(pO,"_tx",["objectStoreNames","mode"]),uO(pO,"_tx",IDBTransaction,["abort"]),dO.prototype.createObjectStore=function(){return new fO(this._db.createObjectStore.apply(this._db,arguments))},sO(dO,"_db",["name","version","objectStoreNames"]),uO(dO,"_db",IDBDatabase,["deleteObjectStore","close"]),vO.prototype.transaction=function(){return new pO(this._db.transaction.apply(this._db,arguments))},sO(vO,"_db",["name","version","objectStoreNames"]),uO(vO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[fO,hO].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[hO,fO].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var mO=1e4,bO="w:0.4.20",_O="FIS_v2",wO="https://firebaseinstallations.googleapis.com/v1",IO=36e5,Sn=((W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["not-registered"]="Firebase Installation is not registered.",W["installation-not-found"]="Firebase Installation not found.",W["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',W["app-offline"]="Could not process request. Application offline.",W["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",W),EO=new Ao("installations","Installations",Sn);function TO(t){return t instanceof So&&t.code.includes("request-failed")}function SO(t){t=t.projectId;return wO+"/projects/"+t+"/installations"}function CO(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function AO(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,EO.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function NO(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function kO(t,e){e=e.refreshToken,t=NO(t);return t.append("Authorization",_O+" "+e),t}function PO(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function OO(e){return new Promise(function(t){setTimeout(t,e)})}var RO=/^[cdef][\w-]{21}$/,xO="";function DO(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,no(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return RO.test(t)?t:xO}catch(t){return xO}}function LO(t){return t.appName+"!"+t.appId}var MO=new Map;function FO(t,e){var n=LO(t);jO(n,e),t=n,n=e,(e=VO())&&e.postMessage({key:t,fid:n}),qO()}function jO(t,e){var n,r,i=MO.get(t);if(i)try{for(var o=to(i),s=o.next();!s.done;s=o.next())(0,s.value)(e)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var UO=null;function VO(){return!UO&&"BroadcastChannel"in self&&((UO=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){jO(t.data.key,t.data.fid)}),UO}function qO(){0===MO.size&&UO&&(UO.close(),UO=null)}var BO,HO="firebase-installations-database",zO=1,GO="firebase-installations-store",WO=null;function KO(){return WO=WO||yO(HO,zO,function(t){0===t.oldVersion&&t.createObjectStore(GO)})}function QO(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=LO(o),[4,KO()];case 1:return r=t.sent(),n=r.transaction(GO,"readwrite"),[4,(r=n.objectStore(GO)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||FO(o,s.fid),[2,s]}})})}function YO(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=LO(r),[4,KO()];case 1:return n=t.sent(),[4,(n=n.transaction(GO,"readwrite")).objectStore(GO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function XO(s,a){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=LO(s),[4,KO()];case 1:return r=t.sent(),n=r.transaction(GO,"readwrite"),[4,(r=n.objectStore(GO)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||FO(s,o.fid),[2,o]}})})}function JO(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,XO(i,function(t){t=ZO(t||{fid:DO(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,$O(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,OO(100)];case 3:return t.sent(),[4,$O(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,JO(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(EO.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=SO(s),n=NO(s),o={fid:a,authVersion:_O,appId:s.appId,sdkVersion:bO},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,PO(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:CO(o.authToken)}];case 3:return[4,AO("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,QO(r,e)];case 2:return TO(n=t.sent())&&409===n.customData.serverCode?[4,YO(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,QO(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==xO?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function $O(t){return XO(t,function(t){if(!t)throw EO.create("installation-not-found");return ZO(t)})}function ZO(t){return 1===(e=t).registrationStatus&&e.registrationTime+mO<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function tR(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return SO(t)+"/"+e+"/authTokens:generate"}(a,s),n=kO(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:bO}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,PO(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,CO(o)];case 3:return[4,AO("Generate Auth Token",i)];case 4:throw t.sent()}})})}function eR(i,o){return void 0===o&&(o=!1),$i(this,void 0,void 0,function(){var r,e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,XO(i.appConfig,function(t){if(!rR(t))throw EO.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+IO}(e)){if(1===n.requestStatus)return r=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,nR(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,OO(100)];case 3:return t.sent(),[4,nR(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,eR(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw EO.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},Ji(Ji({},e),{authToken:n}));return r=function(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,tR(i,o)];case 1:return e=t.sent(),r=Ji(Ji({},o),{authToken:e}),[4,QO(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!TO(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,YO(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Ji(Ji({},o),{authToken:{requestStatus:0}}),[4,QO(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function nR(t){return XO(t,function(t){if(!rR(t))throw EO.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+mO<Date.now()?Ji(Ji({},t),{authToken:{requestStatus:0}}):t})}function rR(t){return void 0!==t&&2===t.registrationStatus}function iR(e,n){return void 0===n&&(n=!1),$i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,JO(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,eR(e,n)];case 2:return[2,t.sent().token]}})})}function oR(i,o){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return SO(t)+"/"+e}(i,o),r=kO(i,o),n={method:"DELETE",headers:r},[4,PO(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,AO("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function sR(t,r){var i=t.appConfig;return function(t,e){VO();var n=LO(t);(t=MO.get(n))||(t=new Set,MO.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=LO(t=i),(t=MO.get(n))&&(t.delete(e),0===t.size&&MO.delete(n),qO())}}function aR(t){return EO.create("missing-app-config-values",{valueName:t})}(BO=Jl).INTERNAL.registerComponent(new ts("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw aR("App Configuration");if(!t.name)throw aR("App Name");try{for(var r=to(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw aR(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,JO(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||eR(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return iR(n,t)},delete:function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,XO(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw EO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw EO.create("app-offline");case 3:return[4,oR(e,n)];case 4:return t.sent(),[4,YO(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return sR(n,t)}}},"PUBLIC")),BO.registerVersion("@firebase/installations","0.4.20");var uR,Sn=((W={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',W["only-available-in-window"]="This method is available in a Window context.",W["only-available-in-sw"]="This method is available in a service worker context.",W["permission-default"]="The notification permission was not granted and dismissed instead.",W["permission-blocked"]="The notification permission was not granted and blocked instead.",W["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",W["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",W["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",W["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",W["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",W["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",W["token-update-no-token"]="FCM returned no token when updating the user to push.",W["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",W["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",W["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",W["invalid-vapid-key"]="The public VAPID key must be a string.",W["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",W),cR=new Ao("messaging","Messaging",Sn),hR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",lR="https://fcmregistrations.googleapis.com/v1",fR="FCM_MSG",pR="google.c.a.c_id";function dR(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,no(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(W=uR=uR||{}).PUSH_RECEIVED="push-received",W.NOTIFICATION_CLICKED="notification-clicked";var vR="fcm_token_details_db",yR=5,gR="fcm_token_object_Store";function mR(s){return $i(this,void 0,void 0,function(){var e,o,n=this;return Zi(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(vR))return[2,null];t.label=2;case 2:return o=null,[4,yO(vR,yR,function(i){return $i(n,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(gR)?[4,(r=i.transaction.objectStore(gR)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:dR(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:dR(n.auth),p256dh:dR(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:dR(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,gO(vR)];case 4:return t.sent(),[4,gO("fcm_vapid_details_db")];case 5:return t.sent(),[4,gO("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var bR="firebase-messaging-database",_R=1,wR="firebase-messaging-store",IR=null;function ER(){return IR=IR||yO(bR,_R,function(t){0===t.oldVersion&&t.createObjectStore(wR)})}function TR(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=CR(r),[4,ER()];case 1:return[4,t.sent().transaction(wR).objectStore(wR).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,mR(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,SR(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function SR(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=CR(r),[4,ER()];case 1:return n=t.sent(),[4,(n=n.transaction(wR,"readwrite")).objectStore(wR).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function CR(t){return t.appConfig.appId}function AR(r,i){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,kR(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(NR(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,cR.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),cR.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function NR(t){t=t.projectId;return lR+"/projects/"+t+"/registrations"}function kR(t){var n=t.appConfig,r=t.installations;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function PR(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==hR&&(e.web.applicationPubKey=t),e}function OR(c,h,l){return $i(this,void 0,void 0,function(){var s,a,u;return Zi(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw cR.create("permission-blocked");return[4,function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,TR(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:dR(u.getKey("auth")),p256dh:dR(u.getKey("p256dh"))},s?[3,3]:[2,xR(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,AR(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,xR(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,kR(o)];case 1:e=t.sent(),n=PR(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(NR(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),cR.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,cR.create("token-update-failed",{errorInfo:i});if(!r.token)throw cR.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=Ji(Ji({},i),{token:e,createTime:Date.now()}),[4,SR(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,RR(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function RR(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,TR(n)];case 1:return(e=t.sent())?[4,AR(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return e=CR(r),[4,ER()];case 1:return n=t.sent(),[4,(n=n.transaction(wR,"readwrite")).objectStore(wR).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function xR(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,function(o,s){return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return[4,kR(o)];case 1:e=t.sent(),n=PR(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(NR(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),cR.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,cR.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw cR.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,SR(n,e)];case 2:return t.sent(),[2,e.token]}})})}function DR(t){return"object"==typeof t&&t&&pR in t}function LR(e){return new Promise(function(t){setTimeout(t,e)})}var MR=(Object.defineProperty(FR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),FR.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw cR.create("invalid-bg-handler");this.bgMessageHandler=t},FR.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},FR.prototype.getToken=function(){var n;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,TR(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:hR,t.label=2;case 2:return[2,OR(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},FR.prototype.deleteToken=function(){return RR(this.firebaseDependencies,self.registration)},FR.prototype.requestPermission=function(){throw cR.create("only-available-in-window")},FR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw cR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw cR.create("invalid-vapid-key");this.vapidKey=t},FR.prototype.useServiceWorker=function(){throw cR.create("only-available-in-window")},FR.prototype.onMessage=function(){throw cR.create("only-available-in-window")},FR.prototype.onTokenRefresh=function(){throw cR.create("only-available-in-window")},FR.prototype.onPush=function(c){return $i(this,void 0,void 0,function(){var s,a,u;return Zi(this,function(t){switch(t.label){case 0:return(u=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(c))?[4,jR()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(s=t.sent(),s.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=uR.PUSH_RECEIVED;try{for(var i=to(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(s,u)]:(a=!1,u.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((o=Ji({},(r=u).notification)).data=((i={})[fR]=r,i),o))]:[3,3]);case 2:t.sent(),a=!0,t.label=3;case 3:return!0===a&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(n={from:(e=u).from,collapseKey:e.collapse_key},r=n,(i=e).notification&&(r.notification={},(o=i.notification.title)&&(r.notification.title=o),(o=i.notification.body)&&(r.notification.body=o),(i=i.notification.image)&&(r.notification.image=i)),r=n,(i=e).data&&(r.data=i.data),r=n,(i=e).fcmOptions&&(r.fcmOptions={},(e=i.fcmOptions.link)&&(r.fcmOptions.link=e),(i=i.fcmOptions.analytics_label)&&(r.fcmOptions.analyticsLabel=i)),u=n,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,LR(1e3)]);case 4:return t.sent(),[2]}var e,n,r,i,o})})},FR.prototype.onSubChange=function(n){var r;return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,RR(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,TR(this.firebaseDependencies)];case 3:return e=t.sent(),[4,RR(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,OR(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:hR)];case 5:return t.sent(),[2]}})})},FR.prototype.onNotificationClick=function(s){var a;return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[fR])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return DR(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return $i(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:return[4,jR()];case 1:e=t.sent();try{for(n=to(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,LR(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=uR.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},FR);function FR(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function jR(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var UR=(Object.defineProperty(VR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),VR.prototype.messageEventListener=function(i){return $i(this,void 0,void 0,function(){var n,r;return Zi(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===uR.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),DR(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},VR.prototype.getVapidKey=function(){return this.vapidKey},VR.prototype.getSwReg=function(){return this.swRegistration},VR.prototype.getToken=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw cR.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,OR(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},VR.prototype.updateVapidKey=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=hR),[2]})})},VR.prototype.updateSwReg=function(e){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw cR.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},VR.prototype.registerDefaultSw=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),cR.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},VR.prototype.deleteToken=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,RR(this.firebaseDependencies,this.swRegistration)]}})})},VR.prototype.requestPermission=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?cR.create("permission-blocked"):cR.create("permission-default")}})})},VR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw cR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw cR.create("invalid-vapid-key");this.vapidKey=t},VR.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw cR.create("invalid-sw-registration");if(this.swRegistration)throw cR.create("use-sw-after-get-token");this.swRegistration=t},VR.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},VR.prototype.setBackgroundMessageHandler=function(){throw cR.create("only-available-in-sw")},VR.prototype.onBackgroundMessage=function(){throw cR.create("only-available-in-sw")},VR.prototype.onTokenRefresh=function(){return function(){}},VR.prototype.logEvent=function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case uR.NOTIFICATION_CLICKED:return"notification_open";case uR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[pR],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},VR);function VR(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function qR(t){return cR.create("missing-app-config-values",{valueName:t})}Sn={isSupported:BR};function BR(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Jl.INTERNAL.registerComponent(new ts("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw qR("App Configuration Object");if(!t.name)throw qR("App Name");var r=t.options;try{for(var i=to(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw qR(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!BR())throw cR.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?MR:UR)(t)},"PUBLIC").setServiceProps(Sn));var HR,zR="firebasestorage.googleapis.com",GR="storageBucket",WR=(Xi(KR,HR=So),KR.prototype._codeEquals=function(t){return QR(t)===this.code},Object.defineProperty(KR.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(KR.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),KR);function KR(t,e){t=HR.call(this,QR(t),"Firebase Storage: "+e+" ("+QR(t)+")")||this;return t.customData={serverResponse:null},Object.setPrototypeOf(t,KR.prototype),t}function QR(t){return"storage/"+t}function YR(){return new WR("unknown","An unknown error occurred, please check the error payload for server response.")}function XR(){return new WR("canceled","User canceled the upload/download.")}function JR(){return new WR("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $R(t){return new WR("invalid-argument",t)}function ZR(){return new WR("app-deleted","The Firebase app was deleted.")}function tx(t){return new WR("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ex(t,e){return new WR("invalid-format","String does not match format '"+t+"': "+e)}function nx(t){throw new WR("internal-error","Internal error: "+t)}var rx={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},ix=function(t,e){this.data=t,this.contentType=e||null};function ox(t,e){switch(t){case rx.RAW:return new ix(sx(e));case rx.BASE64:case rx.BASE64URL:return new ix(ax(t,e));case rx.DATA_URL:return new ix(function(t){t=new ux(t);return t.base64?ax(rx.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw ex(rx.DATA_URL,"Malformed data URL.")}return sx(e)}(t.rest)}(e),new ux(e).contentType)}throw YR()}function sx(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function ax(e,t){switch(e){case rx.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw ex(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case rx.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw ex(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw ex(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var ux=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw ex(rx.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var cx,hx={STATE_CHANGED:"state_changed"},lx={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function fx(t){switch(t){case"running":case"pausing":case"canceling":return lx.RUNNING;case"paused":return lx.PAUSED;case"success":return lx.SUCCESS;case"canceled":return lx.CANCELED;case"error":default:return lx.ERROR}}(W=cx=cx||{})[W.NO_ERROR=0]="NO_ERROR",W[W.NETWORK_ERROR=1]="NETWORK_ERROR",W[W.ABORT=2]="ABORT";var px=(dx.prototype.send=function(t,e,n,r){if(this.sent_)throw nx("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},dx.prototype.getErrorCode=function(){if(!this.sent_)throw nx("cannot .getErrorCode() before sending");return this.errorCode_},dx.prototype.getStatus=function(){if(!this.sent_)throw nx("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},dx.prototype.getResponseText=function(){if(!this.sent_)throw nx("cannot .getResponseText() before sending");return this.xhr_.responseText},dx.prototype.abort=function(){this.xhr_.abort()},dx.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},dx.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},dx.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},dx);function dx(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=cx.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=cx.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=cx.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var vx=(yx.prototype.createXhrIo=function(){return new px},yx);function yx(){}function gx(t){return"string"==typeof t||t instanceof String}function mx(t){return bx()&&t instanceof Blob}function bx(){return"undefined"!=typeof Blob}function _x(t,e,n,r){if(r<e)throw $R("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw $R("Invalid value for '"+t+"'. Expected "+n+" or less.")}function wx(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(bx())return new Blob(t);throw new WR("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Ix=(Ex.prototype.size=function(){return this.size_},Ex.prototype.type=function(){return this.type_},Ex.prototype.slice=function(t,e){if(mx(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new Ex(r)}var i,r;return new Ex(new Uint8Array(this.data_.buffer,t,e-t),!0)},Ex.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(bx()){var n=t.map(function(t){return t instanceof Ex?t.data_:t});return new Ex(wx.apply(null,n))}var n=t.map(function(t){return gx(t)?ox(rx.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new Ex(i,!0)},Ex.prototype.uploadData=function(){return this.data_},Ex);function Ex(t,e){var n=0,r="";mx(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var Tx=(Object.defineProperty(Sx.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Sx.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Sx.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},Sx.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Sx.makeFromBucketSpec=function(e){var t;try{t=Sx.makeFromUrl(e)}catch(t){return new Sx(e,"")}if(""===t.path)return t;throw new WR("invalid-default-bucket","Invalid default bucket '"+e+"'.")},Sx.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=zR.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new Sx(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw new WR("invalid-url","Invalid URL '"+t+"'.");return e},Sx);function Sx(t,e){this.bucket=t,this.path_=e}function Cx(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Ax(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Nx(t){return"https://"+zR+"/v0"+t}function kx(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r=r.slice(0,-1)}function Px(t,e){return e}var Ox=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Px},Rx=null;function xx(){if(Rx)return Rx;var t=[];t.push(new Ox("bucket")),t.push(new Ox("generation")),t.push(new Ox("metageneration")),t.push(new Ox("name","fullPath",!0));var e=new Ox("name");e.xform=function(t,e){return!gx(e=e)||e.length<2?e:Ax(e)},t.push(e);e=new Ox("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new Ox("timeCreated")),t.push(new Ox("updated")),t.push(new Ox("md5Hash",null,!0)),t.push(new Ox("cacheControl",null,!0)),t.push(new Ox("contentDisposition",null,!0)),t.push(new Ox("contentEncoding",null,!0)),t.push(new Ox("contentLanguage",null,!0)),t.push(new Ox("contentType",null,!0)),t.push(new Ox("metadata","customMetadata",!0)),Rx=t}function Dx(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new Tx(t,e);return r._makeStorageReference(e)}})}function Lx(t,e,n){e=Cx(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return Dx(r,t),r}(t,e,n)}function Mx(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Fx="prefixes",jx="items";function Ux(t,e,n){n=Cx(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Fx])for(var i=0,o=n[Fx];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new Tx(e,s));r.prefixes.push(a)}if(n[jx])for(var u=0,c=n[jx];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new Tx(e,h.name));r.items.push(a)}return r}(t,e,n)}var Vx=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function qx(t){if(!t)throw YR()}function Bx(n,r){return function(t,e){return qx(null!==(e=Lx(n,e,r))),e}}function Hx(n,r){return function(t,e){return qx(null!==(e=Ux(n,r,e))),e}}function zx(r,i){return function(t,e){var n=Lx(r,e,i);return qx(null!==n),function(r,t){if(null===(t=Cx(t)))return null;if(!gx(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return Nx("/b/"+i(e)+"/o/"+i(n))+kx({alt:"media",token:t})})[0]}(n,e)}}function Gx(i){return function(t,e){var n,r=401===t.getStatus()?new WR("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new WR("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new WR("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function Wx(r){var i=Gx(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new WR("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function Kx(t,e,n){var r=Nx(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new Vx(r,"GET",Bx(t,n),i);return i.errorHandler=Wx(e),i}function Qx(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function Yx(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Qx(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Mx(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=Ix.getBlob(i,r,a);if(null===r)throw JR();a={name:u.fullPath},u=Nx(o),o=t.maxUploadRetryTime,o=new Vx(u,"POST",Bx(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=Gx(e),o}var Xx=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Jx(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){qx(!1)}return qx(!!n&&-1!==(e||["active"]).indexOf(n)),n}function $x(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Qx(e,r,i),i={name:s.fullPath},o=Nx(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=Mx(s,n),t=t.maxUploadRetryTime;t=new Vx(o,"POST",function(t){var e;Jx(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){qx(!1)}return qx(gx(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=Gx(e),t}function Zx(t,e,n,i){t=t.maxUploadRetryTime,t=new Vx(n,"POST",function(t){var e=Jx(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){qx(!1)}n||qx(!1);var r=Number(n);return qx(!isNaN(r)),new Xx(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=Gx(e),t}function tD(t,o,e,s,n,a,r,i){var u=new Xx(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new WR("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw JR();n=o.maxUploadRetryTime,n=new Vx(e,"POST",function(t,e){var n=Jx(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?Bx(o,a)(t,e):null;return new Xx(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=Gx(t),n}var eD=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function nD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var rD=(iD.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},iD.prototype._shouldDoResumable=function(t){return 262144<t.size()},iD.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},iD.prototype._resolveToken=function(e){var n=this;this._ref.storage._getAuthToken().then(function(t){switch(n._state){case"running":e(t);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},iD.prototype._createResumable=function(){var n=this;this._resolveToken(function(t){var e=$x(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._uploadUrl=t,n._needToFetchStatus=!1,n.completeTransitions_()},n._errorHandler)})},iD.prototype._fetchStatus=function(){var n=this,r=this._uploadUrl;this._resolveToken(function(t){var e=Zx(n._ref.storage,n._ref._location,r,n._blob),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._updateProgress(t.current),n._needToFetchStatus=!1,t.finalized&&(n._needToFetchMetadata=!0),n.completeTransitions_()},n._errorHandler)})},iD.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new Xx(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=tD(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition("error")}t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition("success")):n.completeTransitions_()},n._errorHandler)})},iD.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},iD.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=Kx(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition("success")},n._metadataErrorHandler)})},iD.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=Yx(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition("success")},n._errorHandler)})},iD.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},iD.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=XR(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},iD.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(iD.prototype,"snapshot",{get:function(){var t=fx(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),iD.prototype.on=function(t,e,n,r){var i=this,o=new eD(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},iD.prototype.then=function(t,e){return this._promise.then(t,e)},iD.prototype.catch=function(t){return this.then(null,t)},iD.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},iD.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},iD.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},iD.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(fx(this._state)){case lx.SUCCESS:nD(this._resolve.bind(null,this.snapshot))();break;case lx.CANCELED:case lx.ERROR:nD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},iD.prototype._notifyObserver=function(t){switch(fx(this._state)){case lx.RUNNING:case lx.PAUSED:t.next&&nD(t.next.bind(t,this.snapshot))();break;case lx.SUCCESS:t.complete&&nD(t.complete.bind(t))();break;case lx.CANCELED:case lx.ERROR:t.error&&nD(t.error.bind(t,this._error))();break;default:t.error&&nD(t.error.bind(t,this._error))()}},iD.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},iD.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},iD.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},iD);function iD(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=xx(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var oD=(sD.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},sD.prototype._newRef=function(t,e){return new sD(t,e)},Object.defineProperty(sD.prototype,"root",{get:function(){var t=new Tx(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(sD.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(sD.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(sD.prototype,"name",{get:function(){return Ax(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(sD.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(sD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new Tx(this._location.bucket,t);return new sD(this._service,t)},enumerable:!1,configurable:!0}),sD.prototype._throwIfRoot=function(t){if(""===this._location.path)throw tx(t)},sD);function sD(t,e){this._service=t,this._location=e instanceof Tx?e:Tx.makeFromUrl(e)}function aD(t){var e={prefixes:[],items:[]};return function r(i,o,s){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,uD(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function uD(c,h){return $i(this,void 0,void 0,function(){var a,u;return Zi(this,function(t){switch(t.label){case 0:return null!=h&&"number"==typeof h.maxResults&&_x("options.maxResults",1,1e3,h.maxResults),[4,c.storage._getAuthToken()];case 1:return a=t.sent(),u=h||{},e=c.storage,n=c._location,r="/",i=u.pageToken,o=u.maxResults,s={},n.isRoot?s.prefix="":s.prefix=n.path+"/",r&&0<r.length&&(s.delimiter=r),i&&(s.pageToken=i),o&&(s.maxResults=o),i=Nx(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new Vx(i,"GET",Hx(e,n.bucket),o)).urlParams=s,o.errorHandler=Gx(n),[2,c.storage._makeRequest(o,a).getPromise()]}var e,n,r,i,o,s})})}function cD(u,c){return $i(this,void 0,void 0,function(){var a;return Zi(this,function(t){switch(t.label){case 0:return u._throwIfRoot("updateMetadata"),[4,u.storage._getAuthToken()];case 1:return a=t.sent(),e=u.storage,n=u._location,r=c,i=xx(),o=Nx(n.fullServerUrl()),s=Mx(r,i),r=e.maxOperationRetryTime,(r=new Vx(o,"PATCH",Bx(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=s,r.errorHandler=Wx(n),[2,u.storage._makeRequest(r,a).getPromise()]}var e,n,r,i,o,s})})}function hD(a){return $i(this,void 0,void 0,function(){var s;return Zi(this,function(t){switch(t.label){case 0:return a._throwIfRoot("getDownloadURL"),[4,a.storage._getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=xx(),i=Nx(n.fullServerUrl()),o=e.maxOperationRetryTime,(o=new Vx(i,"GET",zx(e,r),o)).errorHandler=Wx(n),[2,a.storage._makeRequest(o,s).getPromise().then(function(t){if(null===t)throw new WR("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i,o})})}function lD(o){return $i(this,void 0,void 0,function(){var i;return Zi(this,function(t){switch(t.label){case 0:return o._throwIfRoot("deleteObject"),[4,o.storage._getAuthToken()];case 1:return i=t.sent(),e=o.storage,n=o._location,r=Nx(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new Vx(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=Wx(n),[2,o.storage._makeRequest(e,i).getPromise()]}var e,n,r})})}function fD(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new Tx(t._location.bucket,e);return new oD(t.storage,e)}var pD=(Object.defineProperty(dD.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(dD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(dD.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(dD.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),dD);function dD(t,e,n){this._delegate=t,this.task=e,this.ref=n}var vD=(Object.defineProperty(yD.prototype,"snapshot",{get:function(){return new pD(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),yD.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new pD(t,n,n._ref))},t)},yD.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new pD(t,i,i._ref))}:{next:e.next?function(t){return e.next(new pD(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},yD);function yD(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var gD=(Object.defineProperty(mD.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new bD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(mD.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new bD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(mD.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),mD);function mD(t,e){this._delegate=t,this._service=e}var bD=(Object.defineProperty(_D.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(_D.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(_D.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),_D.prototype.toString=function(){return this._delegate.toString()},_D.prototype.child=function(t){return new _D(fD(this._delegate,t),this.storage)},Object.defineProperty(_D.prototype,"root",{get:function(){return new _D(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(_D.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new _D(t,this.storage)},enumerable:!1,configurable:!0}),_D.prototype.put=function(t,e){return this._throwIfRoot("put"),new vD((n=this._delegate,t=t,e=e,n._throwIfRoot("uploadBytesResumable"),new rD(n,new Ix(t),e)),this);var n},_D.prototype.putString=function(t,e,n){void 0===e&&(e=rx.RAW),this._throwIfRoot("putString");t=ox(e,t),n=Ji({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new vD(new rD(this._delegate,new Ix(t.data,!0),n),this)},_D.prototype.listAll=function(){var e=this;return aD(this._delegate).then(function(t){return new gD(t,e.storage)})},_D.prototype.list=function(t){var e=this;return uD(this._delegate,t).then(function(t){return new gD(t,e.storage)})},_D.prototype.getMetadata=function(){return function(r){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage._getAuthToken()];case 1:return e=t.sent(),n=Kx(r.storage,r._location,xx()),[2,r.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},_D.prototype.updateMetadata=function(t){return cD(this._delegate,t)},_D.prototype.getDownloadURL=function(){return hD(this._delegate)},_D.prototype.delete=function(){return this._throwIfRoot("delete"),lD(this._delegate)},_D.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw tx(t)},_D);function _D(t,e){this._delegate=t,this.storage=e}var wD=(ID.prototype.getPromise=function(){return this.promise_},ID.prototype.cancel=function(t){},ID);function ID(t){this.promise_=Promise.reject(t)}var ED=(TD.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=YR()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?ZR:XR)()):i(n=new WR("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,ro([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new SD(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new SD(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===cx.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new SD(n,t))):(t=t.getErrorCode()===cx.ABORT,r(!1,new SD(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){o=!0,v(!0)},t),v)},TD.prototype.getPromise=function(){return this.promise_},TD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},TD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},TD);function TD(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var SD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function CD(t){return/^[A-Za-z]+:\/\//.test(t)}function AD(t,e){if(t instanceof kD){var n=t;if(null==n._bucket)throw new WR("no-default-bucket","No default bucket found. Did you set the '"+GR+"' property when initializing the app?");n=new oD(n,n._bucket);return null!=e?AD(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw $R('`path` param cannot contain ".."');return fD(t,e)}function ND(t,e){if(e&&CD(e)){if(t instanceof kD)return new oD(t,e);throw $R("To use ref(service, url), the first argument must be a Storage instance.")}return AD(t,e)}var kD=(Object.defineProperty(PD.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){_x("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(PD.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){_x("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),PD.prototype._getAuthToken=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},PD.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},PD.prototype._makeStorageReference=function(t){return new oD(this,t)},PD.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new wD(ZR());var r,i,o,s,a,u,c=(r=t,i=this._appId,o=e,s=this._pool,a=this._firebaseVersion,u=kx(r.urlParams),t=r.url+u,e=Object.assign({},r.headers),u=e,(i=i)&&(u["X-Firebase-GMPID"]=i),i=e,null!==(o=o)&&0<o.length&&(i.Authorization="Firebase "+o),a=a,e["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager"),new ED(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(c),c.getPromise().then(function(){return n._requests.delete(c)},function(){return n._requests.delete(c)}),c},PD);function PD(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Tx.makeFromBucketSpec(r):null==(r=null==(r=this.app.options)?void 0:r[GR])?null:Tx.makeFromBucketSpec(r)}var OD=(Object.defineProperty(RD.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(RD.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),RD.prototype.ref=function(t){if(CD(t))throw $R("ref() expected a child path but got a URL, use refFromURL instead.");return new bD(ND(this._delegate,t),this)},RD.prototype.refFromURL=function(t){if(!CD(t))throw $R("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Tx.makeFromUrl(t)}catch(t){throw $R("refFromUrl() expected a valid full URL but got an invalid one.")}return new bD(ND(this._delegate,t),this)},RD.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},RD.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},RD);function RD(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var xD,DD;function LD(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new OD(n,new kD(n,t,new vx,e,Jl.SDK_VERSION))}DD={TaskState:lx,TaskEvent:hx,StringFormat:rx,Storage:kD,Reference:bD},(xD=Jl).INTERNAL.registerComponent(new ts("storage",LD,"PUBLIC").setServiceProps(DD).setMultipleInstances(!0)),xD.registerVersion("@firebase/storage","0.4.3");var MD,FD,jD="0.4.6",UD="FB-PERF-TRACE-MEASURE",VD="@firebase/performance/config",qD="@firebase/performance/configexpire",Sn="Performance",W=((W={})["trace started"]="Trace {$traceName} was started before.",W["trace stopped"]="Trace {$traceName} is not running.",W["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",W["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",W["no window"]="Window is not available.",W["no app id"]="App id is not available.",W["no project id"]="Project id is not available.",W["no api key"]="Api key is not available.",W["invalid cc log"]="Attempted to queue invalid cc event",W["FB not default"]="Performance can only start when Firebase app instance is the default one.",W["RC response not ok"]="RC response is not ok",W["invalid attribute name"]="Attribute name {$attributeName} is invalid.",W["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",W["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",W["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",W),BD=new Ao("performance",Sn,W),HD=new ds(Sn);HD.logLevel=us.INFO;var zD,GD=(WD.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},WD.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},WD.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},WD.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},WD.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},WD.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},WD.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!_o()||(HD.info("IndexedDB is not supported by current browswer"),!1):(HD.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},WD.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},WD.getInstance=function(){return MD=void 0===MD?new WD(FD):MD},WD);function WD(t){if(!(this.window=t))throw BD.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function KD(t,e){var n=t.length-e.length;if(n<0||1<n)throw BD.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var QD,YD,XD=(JD.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw BD.create("no app id");return t},JD.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw BD.create("no project id");return t},JD.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw BD.create("no api key");return t},JD.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},JD.getInstance=function(){return zD=void 0===zD?new JD:zD},JD);function JD(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=KD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=KD("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Sn=YD=YD||{})[Sn.UNKNOWN=0]="UNKNOWN",Sn[Sn.VISIBLE=1]="VISIBLE",Sn[Sn.HIDDEN=2]="HIDDEN";var $D=["firebase_","google_","ga_"],ZD=new RegExp("^[a-zA-Z]\\w*$");function tL(){switch(GD.getInstance().document.visibilityState){case"visible":return YD.VISIBLE;case"hidden":return YD.HIDDEN;default:return YD.UNKNOWN}}var eL="0.0.1",nL={loggingEnabled:!0},rL="FIREBASE_INSTALLATIONS_AUTH";function iL(t){var n,e=function(){var t=GD.getInstance().localStorage;if(!t)return;var e=t.getItem(qD);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(VD);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(sL(e),Promise.resolve()):(n=t,function(){var t=XD.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+XD.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+XD.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:rL+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:XD.getInstance().getAppId(),app_version:jD,sdk_version:eL})});return fetch(t).then(function(t){if(t.ok)return t.json();throw BD.create("RC response not ok")})}).catch(function(){HD.info(oL)}).then(sL).then(function(t){var e=GD.getInstance().localStorage;if(!t||!e)return;e.setItem(VD,JSON.stringify(t)),e.setItem(qD,String(Date.now()+60*XD.getInstance().configTimeToLive*60*1e3))},function(){}))}var oL="Could not fetch config, will use default configs";function sL(t){if(!t)return t;var e=XD.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):nL.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=aL(e.tracesSamplingRate),e.logNetworkAfterSampling=aL(e.networkRequestsSamplingRate),t}function aL(t){return Math.random()<=t}var uL,cL=1;function hL(){return cL=2,uL=uL||function(){var n=GD.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=XD.getInstance().installationsService.getId()).then(function(t){QD=t}),t;var t}).then(iL).then(lL,lL)}function lL(){cL=3}var fL,pL=1e4,dL=5500,vL=3,yL=1e3,gL=vL,mL=[],bL=!1;function _L(t){setTimeout(function(){var t,e;if(0!==gL)return mL.length?(t=mL.splice(0,yL),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=XD.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||HD.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=pL;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(mL=ro(r,mL),HD.info("Retry transport request later.")),gL=vL,_L(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:XD.getInstance().logSource,log_event:e},t).catch(function(){mL=ro(t,mL),gL--,HD.info("Tries left: "+gL+"."),_L(pL)})):_L(pL)},t)}function wL(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw BD.create("invalid cc log");mL=ro(mL,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function IL(t,e){(fL=fL||wL(SL))(t,e)}function EL(t){var e=XD.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&GD.getInstance().requiredApisAvailable()&&(t.isAuto&&tL()!==YD.VISIBLE||(3===cL?TL(t):hL().then(function(){return TL(t)},function(){return TL(t)})))}function TL(t){var e;!QD||(e=XD.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return IL(t,1)},0)}function SL(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:CL(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:CL(),trace_metric:e};return JSON.stringify(e)})(t)}function CL(){return{google_app_id:XD.getInstance().getAppId(),app_instance_id:QD,web_app_info:{sdk_version:jD,page_url:GD.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=GD.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:tL(),effective_connection_type:function(){var t=GD.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var AL=["_fp","_fcp","_fid"];var NL=(kL.prototype.start=function(){if(1!==this.state)throw BD.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},kL.prototype.stop=function(){if(2!==this.state)throw BD.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),EL(this)},kL.prototype.record=function(t,e,n){if(t<=0)throw BD.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw BD.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Ji({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}EL(this)},kL.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},kL.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<AL.indexOf(n))&&n.startsWith("_"))throw BD.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&HD.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},kL.prototype.getMetric=function(t){return this.counters[t]||0},kL.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!$D.some(function(t){return n.startsWith(t)})&&!!n.match(ZD)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw BD.create("invalid attribute name",{attributeName:t});if(!r)throw BD.create("invalid attribute value",{attributeValue:e})}},kL.prototype.getAttribute=function(t){return this.customAttributes[t]},kL.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},kL.prototype.getAttributes=function(){return Ji({},this.customAttributes)},kL.prototype.setStartTime=function(t){this.startTimeUs=t},kL.prototype.setDuration=function(t){this.durationUs=t},kL.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},kL.createOobTrace=function(t,e,n){var r,i=GD.getInstance().getUrl();i&&(r=new kL("_wt_"+i,!0),i=Math.floor(1e3*GD.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),EL(r))},kL.createUserTimingTrace=function(t){EL(new kL(t,!1,t))},kL);function kL(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=GD.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||UD+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function PL(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=GD.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=XD.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return IL(e,0)},0)))}var OL=5e3;function RL(){QD&&(setTimeout(function(){var t=GD.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){NL.createOobTrace(e,n),r=void 0},OL),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),NL.createOobTrace(e,n,t))})):NL.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=GD.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++)PL(r[n]);t.setupObserver("resource",PL)},0),setTimeout(function(){for(var t=GD.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++)xL(r[n]);t.setupObserver("measure",xL)},0))}function xL(t){t=t.name;t.substring(0,UD.length)!==UD&&NL.createUserTimingTrace(t)}var DL=(LL.prototype.trace=function(t){return new NL(t)},Object.defineProperty(LL.prototype,"instrumentationEnabled",{get:function(){return XD.getInstance().instrumentationEnabled},set:function(t){XD.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(LL.prototype,"dataCollectionEnabled",{get:function(){return XD.getInstance().dataCollectionEnabled},set:function(t){XD.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),LL);function LL(t){this.app=t,GD.getInstance().requiredApisAvailable()&&wo().then(function(t){t&&(bL||(_L(dL),bL=!0),hL().then(RL,RL))}).catch(function(t){HD.info("Environment doesn't support IndexedDB: "+t)})}var ML;function FL(t,e){if("[DEFAULT]"!==t.name)throw BD.create("FB not default");if("undefined"==typeof window)throw BD.create("no window");return FD=window,XD.getInstance().firebaseAppInstance=t,XD.getInstance().installationsService=e,new DL(t)}(ML=Jl).INTERNAL.registerComponent(new ts("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return FL(e,t)},"PUBLIC")),ML.registerVersion("@firebase/performance","0.4.6");var jL,UL,VL="firebase_id",qL="origin",BL=6e4,HL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",zL="https://www.googletagmanager.com/gtag/js";(Sn=jL=jL||{}).EVENT="event",Sn.SET="set",Sn.CONFIG="config",(Sn=UL=UL||{}).ADD_SHIPPING_INFO="add_shipping_info",Sn.ADD_PAYMENT_INFO="add_payment_info",Sn.ADD_TO_CART="add_to_cart",Sn.ADD_TO_WISHLIST="add_to_wishlist",Sn.BEGIN_CHECKOUT="begin_checkout",Sn.CHECKOUT_PROGRESS="checkout_progress",Sn.EXCEPTION="exception",Sn.GENERATE_LEAD="generate_lead",Sn.LOGIN="login",Sn.PAGE_VIEW="page_view",Sn.PURCHASE="purchase",Sn.REFUND="refund",Sn.REMOVE_FROM_CART="remove_from_cart",Sn.SCREEN_VIEW="screen_view",Sn.SEARCH="search",Sn.SELECT_CONTENT="select_content",Sn.SELECT_ITEM="select_item",Sn.SELECT_PROMOTION="select_promotion",Sn.SET_CHECKOUT_OPTION="set_checkout_option",Sn.SHARE="share",Sn.SIGN_UP="sign_up",Sn.TIMING_COMPLETE="timing_complete",Sn.VIEW_CART="view_cart",Sn.VIEW_ITEM="view_item",Sn.VIEW_ITEM_LIST="view_item_list",Sn.VIEW_PROMOTION="view_promotion",Sn.VIEW_SEARCH_RESULTS="view_search_results";var GL=new ds("@firebase/analytics");function WL(o,s,a,u){return function(n,r,i){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==jL.EVENT?[3,2]:[4,function(u,c,h,l,f){return $i(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return Zi(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(jL.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),GL.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==jL.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),GL.error(n),[3,8];case 8:return r(jL.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(jL.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),GL.error(e),[3,7];case 7:return[2]}})})}}var Sn=((Sn={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Sn["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Sn["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Sn["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Sn["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Sn["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Sn["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Sn["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Sn["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Sn),KL=new Ao("analytics","Analytics",Sn),QL=30;function YL(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var XL=new(YL.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},YL.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},YL.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},YL);function JL(o){var s;return $i(this,void 0,void 0,function(){var e,n,r,i;return Zi(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=HL.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw KL.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function $L(a,u,c){return void 0===u&&(u=XL),$i(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Zi(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw KL.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new eM,setTimeout(function(){return $i(s,void 0,void 0,function(){return Zi(this,function(t){return o.abort(),[2]})})},void 0!==c?c:BL),[2,function s(a,t,u,c){var h=t.throttleEndTimeMillis,l=t.backoffCount;void 0===c&&(c=XL);return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:e=a.appId,n=a.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,ZL(u,h)];case 2:return t.sent(),[3,4];case 3:if(i=t.sent(),n)return GL.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+i.message+"]"),[2,{appId:e,measurementId:n}];throw i;case 4:return t.trys.push([4,6,,7]),[4,JL(a)];case 5:return o=t.sent(),c.deleteThrottleMetadata(e),[2,o];case 6:if(tM(r=t.sent()))return i=503===Number(r.customData.httpStatus)?Zo(l,c.intervalMillis,QL):Zo(l,c.intervalMillis),o={throttleEndTimeMillis:Date.now()+i,backoffCount:l+1},c.setThrottleMetadata(e,o),GL.debug("Calling attemptFetch again in "+i+" millis"),[2,s(a,o,u,c)];if(c.deleteThrottleMetadata(e),n)return GL.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw KL.create("no-api-key")})})}function ZL(i,o){return new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(KL.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}function tM(t){if(t instanceof So&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var eM=(nM.prototype.addEventListener=function(t){this.listeners.push(t)},nM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},nM);function nM(){this.listeners=[]}function rM(a,u,c,h,l,f){return $i(this,void 0,void 0,function(){var i,o,s;return Zi(this,function(t){switch(t.label){case 0:return(i=$L(a)).then(function(t){c[t.measurementId]=t.appId,a.options.measurementId&&t.measurementId!==a.options.measurementId&&GL.warn("The measurement ID in the local Firebase config ("+a.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return GL.error(t)}),u.push(i),o=function(){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return _o()?[3,1]:(GL.warn(KL.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),GL.warn(KL.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){if(t)return h.getId()}),[4,Promise.all([i,o])];case 1:return s=t.sent(),i=s[0],o=s[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(zL))return r}}()||(e=f,n=i.measurementId,(r=document.createElement("script")).src=zL+"?l="+e+"&id="+n,r.async=!0,document.head.appendChild(r)),l("js",new Date),(s={})[qL]="firebase",s.update=!0,s=s,null!=o&&(s[VL]=o),l(jL.CONFIG,i.measurementId,s),[2,i.measurementId]}var e,n,r})})}var iM,oM,sM={},aM=[],uM={},cM="dataLayer",hM="gtag",lM=!1;function fM(t){if(lM)throw KL.create("already-initialized");t.dataLayerName&&(cM=t.dataLayerName),t.gtagName&&(hM=t.gtagName)}function pM(t,e){i=[],go()&&i.push("This is a browser extension environment."),Io()||i.push("Cookies are not available."),0<i.length&&(i=i.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),i=KL.create("invalid-analytics-context",{errorInfo:i}),GL.warn(i.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw KL.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw KL.create("no-api-key");GL.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=sM[u])throw KL.create("already-exists",{id:u});return lM||(s=cM,a=[],Array.isArray(window[s])?a=window[s]:window[s]=a,n=sM,r=aM,i=uM,o=cM,s=hM,a=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[o].push(arguments)},window[s]&&"function"==typeof window[s]&&(a=window[s]),window[s]=WL(a,n,r,i),s={gtagCore:a,wrappedGtag:window[s]},oM=s.wrappedGtag,iM=s.gtagCore,lM=!0),sM[u]=rM(t,aM,uM,e,iM,cM),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return s&&s.global?(n(jL.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=Ji(Ji({},o),{send_to:e}),n(jL.EVENT,i,e),t.label=3;case 3:return[2]}})})})(oM,sM[u],t,e,n).catch(function(t){return GL.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(jL.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(jL.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(oM,sM[u],t,e).catch(function(t){return GL.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(jL.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(jL.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(oM,sM[u],t,e).catch(function(t){return GL.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return $i(this,void 0,void 0,function(){var e,n,r,i,o;return Zi(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(jL.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(jL.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(oM,sM[u],t,e).catch(function(t){return GL.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(sM[u],t).catch(function(t){return GL.error(t)})},INTERNAL:{delete:function(){return delete sM[u],Promise.resolve()}}}}var dM,vM="analytics";function yM(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:if(go())return[2,!1];if(!Io())return[2,!1];if(!_o())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(dM=Jl).INTERNAL.registerComponent(new ts(vM,function(t){return pM(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:fM,EventName:UL,isSupported:yM})),dM.INTERNAL.registerComponent(new ts("analytics-internal",function(t){try{return{logEvent:t.getProvider(vM).getImmediate().logEvent}}catch(t){throw KL.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),dM.registerVersion("@firebase/analytics","0.6.4");var gM=(mM.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},mM.prototype.fetch=function(i){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},mM);function mM(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Sn=((Sn={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Sn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Sn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Sn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Sn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Sn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Sn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Sn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Sn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Sn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Sn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Sn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Sn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Sn),bM=new Ao("remoteconfig","Remote Config",Sn);var _M=(wM.prototype.fetch=function(f){return $i(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(e=void 0===e?navigator:e).languages&&e.languages[0]||e.language},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),bM.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),bM.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw bM.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},wM);function wM(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var IM=(EM.prototype.addEventListener=function(t){this.listeners.push(t)},EM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},EM);function EM(){this.listeners=[]}var TM=["1","true","t","yes","y","on"],SM=(CM.prototype.asString=function(){return this._value},CM.prototype.asBoolean=function(){return"static"!==this._source&&0<=TM.indexOf(this._value.toLowerCase())},CM.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return t=isNaN(t)?0:t},CM.prototype.getSource=function(){return this._source},CM);function CM(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var AM=(NM.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=us.DEBUG;break;case"silent":this._logger.logLevel=us.SILENT;break;default:this._logger.logLevel=us.ERROR}},Object.defineProperty(NM.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(NM.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),NM.prototype.activate=function(){return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},NM.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},NM.prototype.fetch=function(){return $i(this,void 0,void 0,function(){var r,i,o,s=this;return Zi(this,function(t){switch(t.label){case 0:r=new IM,setTimeout(function(){return $i(s,void 0,void 0,function(){return Zi(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof So&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},NM.prototype.fetchAndActivate=function(){return $i(this,void 0,void 0,function(){return Zi(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},NM.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Ji(Ji({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},NM.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},NM.prototype.getNumber=function(t){return this.getValue(t).asNumber()},NM.prototype.getString=function(t){return this.getValue(t).asString()},NM.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new SM("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new SM("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new SM("static"))},NM);function NM(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function kM(t,e){t=t.target.error||void 0;return bM.create(e,{originalErrorMessage:t&&t.message})}var PM="app_namespace_store",OM="firebase_remote_config",RM=1;var xM=(DM.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},DM.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},DM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},DM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},DM.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},DM.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},DM.prototype.getActiveConfig=function(){return this.get("active_config")},DM.prototype.setActiveConfig=function(t){return this.set("active_config",t)},DM.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},DM.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},DM.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},DM.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},DM.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},DM.prototype.get=function(a){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([PM],"readonly").objectStore(PM),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(kM(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(bM.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},DM.prototype.set=function(a,u){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([PM],"readwrite").objectStore(PM),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(kM(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(bM.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},DM.prototype.delete=function(a){return $i(this,void 0,void 0,function(){var o,s=this;return Zi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([PM],"readwrite").objectStore(PM),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(kM(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(bM.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},DM.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},DM);function DM(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(OM,RM);t.onerror=function(t){n(kM(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(PM,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var LM=(MM.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},MM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},MM.prototype.getActiveConfig=function(){return this.activeConfig},MM.prototype.loadFromStorage=function(){return $i(this,void 0,void 0,function(){var e,n,r;return Zi(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},MM.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},MM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},MM.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},MM);function MM(t){this.storage=t}var FM=(jM.prototype.fetch=function(n){return $i(this,void 0,void 0,function(){var e;return Zi(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},jM.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return $i(this,void 0,void 0,function(){var e,n;return Zi(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(bM.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof So&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+Zo(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},jM);function jM(t,e){this.client=t,this.storage=e}var UM,VM="@firebase/remote-config";return(UM=Jl).INTERNAL.registerComponent(new ts("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw bM.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw bM.create("registration-project-id");if(!s)throw bM.create("registration-api-key");if(!a)throw bM.create("registration-app-id");e=e||"firebase";var u=new xM(a,n.name,e),t=new LM(u),i=new ds(VM);i.logLevel=us.ERROR;a=new _M(r,UM.SDK_VERSION,e,o,s,a),a=new FM(a,u),a=new gM(a,u,t,i),i=new AM(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),UM.registerVersion(VM,"0.1.31"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Jl.registerVersion("firebase","8.2.10","cdn"),Jl});
//# sourceMappingURL=firebase.js.map
