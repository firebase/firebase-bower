!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";!function(t){var e,n,s,r,i,o,a,u,c,h;function l(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return t="string"!=typeof t?String(t):t}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function g(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function v(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function y(t){var e=new FileReader,n=v(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(s&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(r&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(i&&s&&a(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s&&(this.blob=function(){var t=g(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?g(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(y)}),this.text=function(){var t,e,n=g(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=v(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function _(t,e){var n,r=(e=e||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function I(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,s="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,(i="ArrayBuffer"in t)&&(o=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<o.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=l(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[l(t)]},d.prototype.get=function(t){return t=l(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(l(t))},d.prototype.set=function(t,e){this.map[l(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),p(n)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),p(e)},d.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),p(n)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this._bodyInit})},b.call(_.prototype),b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},I.error=function(){var t=new I(null,{status:0,statusText:""});return t.type="error",t},h=[301,302,303,307,308],I.redirect=function(t,e){if(-1===h.indexOf(e))throw new RangeError("Invalid status code");return new I(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=_,t.Response=I,t.fetch=function(n,o){return new Promise(function(r,t){var e=new _(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new d,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new I(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&s&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function e(t){var e={exports:{}};return t(e,e.exports),e.exports}function v(t){try{return!!t()}catch(t){return!0}}function g(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function r(t){return l.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return w(s(t))}function y(t){return"object"==typeof t?null!==t:"function"==typeof t}function i(t,e){if(!y(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!y(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!y(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function _(t){return Object(s(t))}function n(t){return S?E.createElement(t):{}}function m(t){if(!y(t))throw TypeError(String(t)+" is not an object");return t}function c(e,n){try{P(b,e,n)}catch(t){b[e]=n}return n}var o=function(t){return t&&t.Math==Math&&t},b=o("object"==typeof globalThis&&globalThis)||o("object"==typeof window&&window)||o("object"==typeof self&&self)||o("object"==typeof t&&t)||function(){return this}()||Function("return this")(),f=!v(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),a={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,p={f:h&&!a.call({1:2},1)?function(t){t=h(this,t);return!!t&&t.enumerable}:a},l={}.toString,d="".split,w=v(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==r(t)?d.call(t,""):Object(t)}:Object,I={}.hasOwnProperty,T=Object.hasOwn||function(t,e){return I.call(_(t),e)},E=b.document,S=y(E)&&y(E.createElement),k=!f&&!v(function(){return 7!=Object.defineProperty(n("div"),"a",{get:function(){return 7}}).a}),C=Object.getOwnPropertyDescriptor,A={f:f?C:function(t,e){if(t=u(t),e=i(e,!0),k)try{return C(t,e)}catch(t){}if(T(t,e))return g(!p.f.call(t,e),t[e])}},N=Object.defineProperty,R={f:f?N:function(t,e,n){if(m(t),e=i(e,!0),m(n),k)try{return N(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},P=f?function(t,e,n){return R.f(t,e,g(1,n))}:function(t,e,n){return t[e]=n,t},O="__core-js_shared__",D=b[O]||c(O,{}),x=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(t){return x.call(t)});function L(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Y+X).toString(36)}var M,F,j,U,q,V,B,K,W=D.inspectSource,H=b.WeakMap,z="function"==typeof H&&/native code/.test(W(H)),G=!1,Q=e(function(t){(t.exports=function(t,e){return D[t]||(D[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.15.1",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})}),Y=0,X=Math.random(),$=Q("keys"),o=function(t){return $[t]||($[t]=L(t))},J={},Z="Object already initialized",t=b.WeakMap;B=z||D.state?(M=D.state||(D.state=new t),F=M.get,j=M.has,U=M.set,q=function(t,e){if(j.call(M,t))throw new TypeError(Z);return e.facade=t,U.call(M,t,e),e},V=function(t){return F.call(M,t)||{}},function(t){return j.call(M,t)}):(K=o("state"),J[K]=!0,q=function(t,e){if(T(t,K))throw new TypeError(Z);return e.facade=t,P(t,K,e),e},V=function(t){return T(t,K)?t[K]:{}},function(t){return T(t,K)});function tt(t){return"function"==typeof t?t:void 0}function et(t,e){return arguments.length<2?tt(ft[t])||tt(b[t]):ft[t]&&ft[t][e]||b[t]&&b[t][e]}function nt(t){return isNaN(t=+t)?0:(0<t?dt:pt)(t)}function rt(t){return 0<t?gt(nt(t),9007199254740991):0}function it(t,e){var n,r=u(t),i=0,o=[];for(n in r)!T(J,n)&&T(r,n)&&o.push(n);for(;e.length>i;)T(r,n=e[i++])&&(~mt(o,n)||o.push(n));return o}function ot(t,e){for(var n=Tt(e),r=R.f,i=A.f,o=0;o<n.length;o++){var s=n[o];T(t,s)||r(t,s,i(e,s))}}function st(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?b:a?b[o]||c(o,{}):(b[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Rt(u,n))&&i.value:u[n],!Nt(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;ot(r,i)}(t.sham||i&&i.sham)&&P(r,"sham",!0),lt(u,n,r,t)}}function at(){}function ut(t){return"<script>"+t+"</"+Ut+">"}var ct,ht={set:q,get:V,has:B,enforce:function(t){return B(t)?V(t):q(t,{})},getterFor:function(n){return function(t){var e;if(!y(t)||(e=V(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},lt=e(function(t){var e=ht.get,a=ht.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||T(n,"name")||P(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==b?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:P(t,e,n)):o?t[e]=n:c(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||W(this)})}),ft=b,pt=Math.ceil,dt=Math.floor,gt=Math.min,vt=Math.max,yt=Math.min,a=function(a){return function(t,e,n){var r,i=u(t),o=rt(i.length),s=function(t,e){t=nt(t);return t<0?vt(t+e,0):yt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},mt={includes:a(!0),indexOf:a(!1)}.indexOf,bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_t=bt.concat("length","prototype"),wt={f:Object.getOwnPropertyNames||function(t){return it(t,_t)}},It={f:Object.getOwnPropertySymbols},Tt=et("Reflect","ownKeys")||function(t){var e=wt.f(m(t)),n=It.f;return n?e.concat(n(t)):e},Et=/#|\.prototype\./,O=function(t,e){t=kt[St(t)];return t==At||t!=Ct&&("function"==typeof e?v(e):!!e)},St=O.normalize=function(t){return String(t).replace(Et,".").toLowerCase()},kt=O.data={},Ct=O.NATIVE="N",At=O.POLYFILL="P",Nt=O,Rt=A.f,H=!v(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Pt=o("IE_PROTO"),Ot=Object.prototype,Dt=H?Object.getPrototypeOf:function(t){return t=_(t),T(t,Pt)?t[Pt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ot:null},xt=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return m(t),function(t){if(!y(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Lt=Object.keys||function(t){return it(t,bt)},Mt=f?Object.defineProperties:function(t,e){m(t);for(var n,r=Lt(e),i=r.length,o=0;o<i;)R.f(t,n=r[o++],e[n]);return t},Ft=et("document","documentElement"),jt="prototype",Ut="script",qt=o("IE_PROTO"),Vt=function(){try{ct=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;Vt=ct?function(t){t.write(ut("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ct):((t=n("iframe")).style.display="none",Ft.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ut("document.F=Object")),t.close(),t.F);for(var e=bt.length;e--;)delete Vt[jt][bt[e]];return Vt()};J[qt]=!0;var Bt=Object.create||function(t,e){var n;return null!==t?(at[jt]=m(t),n=new at,at[jt]=null,n[qt]=t):n=Vt(),void 0===e?n:Mt(n,e)},z=et("navigator","userAgent")||"",t=b.process,a=t&&t.versions,O=a&&a.v8;O?Pe=(Re=O.split("."))[0]<4?1:Re[0]+Re[1]:z&&(!(Re=z.match(/Edge\/(\d+)/))||74<=Re[1])&&(Re=z.match(/Chrome\/(\d+)/))&&(Pe=Re[1]);function Kt(t){return T(Yt,t)&&(Qt||"string"==typeof Yt[t])||(Qt&&T(Xt,t)?Yt[t]=Xt[t]:Yt[t]=$t("Symbol."+t)),Yt[t]}function Wt(t){return void 0!==t&&(Jt.Array===t||te[Zt]===t)}function Ht(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function zt(r,i,t){if(Ht(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var Gt=Pe&&+Pe,Qt=!!Object.getOwnPropertySymbols&&!v(function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&Gt&&Gt<41}),H=Qt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Yt=Q("wks"),Xt=b.Symbol,$t=H?Xt:Xt&&Xt.withoutSetter||L,Jt={},Zt=Kt("iterator"),te=Array.prototype,t={};t[Kt("toStringTag")]="z";function ee(t){if(null!=t)return t[ue]||t["@@iterator"]||Jt[ae(t)]}function ne(t){var e=t.return;return void 0!==e&&m(e.call(t)).value}function re(t,e){this.stopped=t,this.result=e}function ie(t,e,n){function r(t){return o&&ne(o),new re(!0,t)}function i(t){return f?(m(t),d?g(t[0],t[1],r):g(t[0],t[1])):d?g(t,r):g(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),g=zt(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=ee(t)))throw TypeError("Target is not iterable");if(Wt(p)){for(s=0,a=rt(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof re)return u;return new re(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw ne(o),t}if("object"==typeof u&&u&&u instanceof re)return u}return new re(!1)}var a="[object z]"===String(t),oe=Kt("toStringTag"),se="Arguments"==r(function(){return arguments}()),ae=a?r:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),oe))?t:se?r(e):"Object"==(t=r(e))&&"function"==typeof e.callee?"Arguments":t},ue=Kt("iterator"),ce=function(t,e){var n=this;if(!(n instanceof ce))return new ce(t,e);xt&&(n=xt(new Error(void 0),Dt(n))),void 0!==e&&P(n,"message",String(e));e=[];return ie(t,e.push,{that:e}),P(n,"errors",e),n};ce.prototype=Bt(Error.prototype,{constructor:g(5,ce),message:g(5,""),name:g(5,"AggregateError")}),st({global:!0},{AggregateError:ce}),a||lt(Object.prototype,"toString",a?{}.toString:function(){return"[object "+ae(this)+"]"},{unsafe:!0});function he(t,e,n){for(var r in e)lt(t,r,e[r],n);return t}function le(t,e,n){t&&!T(t=n?t:t.prototype,ve)&&ge(t,ve,{configurable:!0,value:e})}function fe(t){var e=et(t),t=R.f;f&&e&&!e[ye]&&t(e,ye,{configurable:!0,get:function(){return this}})}function pe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var de=b.Promise,ge=R.f,ve=Kt("toStringTag"),ye=Kt("species"),me=Kt("iterator"),be=!1;try{var _e=0,we={next:function(){return{done:!!_e++}},return:function(){be=!0}};we[me]=function(){return this},Array.from(we,function(){throw 2})}catch(js){}function Ie(t,e){if(!e&&!be)return!1;var n=!1;try{var r={};r[me]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Te(t,e){var n;return void 0===(t=m(t).constructor)||null==(n=m(t)[Ce])?e:Ht(n)}function Ee(t){var e;Le.hasOwnProperty(t)&&(e=Le[t],delete Le[t],e())}function Se(t){return function(){Ee(t)}}var ke,Ce=Kt("species"),O=/(?:iphone|ipod|ipad).*applewebkit/i.test(z),Ae="process"==r(b.process),Ne=b.location,Re=b.setImmediate,Pe=b.clearImmediate,Oe=b.process,t=b.MessageChannel,De=b.Dispatch,xe=0,Le={},Me="onreadystatechange",a=function(t){Ee(t.data)},we=function(t){b.postMessage(t+"",Ne.protocol+"//"+Ne.host)};Re&&Pe||(Re=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return Le[++xe]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},ke(xe),xe},Pe=function(t){delete Le[t]},Ae?ke=function(t){Oe.nextTick(Se(t))}:De&&De.now?ke=function(t){De.now(Se(t))}:t&&!O?(He=(t=new t).port2,t.port1.onmessage=a,ke=zt(He.postMessage,He,1)):b.addEventListener&&"function"==typeof postMessage&&!b.importScripts&&Ne&&"file:"!==Ne.protocol&&!v(we)?(ke=we,b.addEventListener("message",a,!1)):ke=Me in n("script")?function(t){Ft.appendChild(n("script"))[Me]=function(){Ft.removeChild(this),Ee(t)}}:function(t){setTimeout(Se(t),0)});var Fe,je,Ue,qe,Ve,Be,Ke,We,He={set:Re,clear:Pe},we=/web0s(?!.*chrome)/i.test(z),a=A.f,ze=He.set,Re=b.MutationObserver||b.WebKitMutationObserver,Pe=b.document,Ge=b.process,z=b.Promise,a=a(b,"queueMicrotask"),a=a&&a.value;a||(Fe=function(){var t,e;for(Ae&&(t=Ge.domain)&&t.exit();je;){e=je.fn,je=je.next;try{e()}catch(t){throw je?qe():Ue=void 0,t}}Ue=void 0,t&&t.enter()},qe=O||Ae||we||!Re||!Pe?z&&z.resolve?((Ke=z.resolve(void 0)).constructor=z,We=Ke.then,function(){We.call(Ke,Fe)}):Ae?function(){Ge.nextTick(Fe)}:function(){ze.call(b,Fe)}:(Ve=!0,Be=Pe.createTextNode(""),new Re(Fe).observe(Be,{characterData:!0}),function(){Be.data=Ve=!Ve}));function Qe(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ht(n),this.reject=Ht(r)}function Ye(t,e){return m(t),y(e)&&e.constructor===t?e:((0,(t=un.f(t)).resolve)(e),t.promise)}function Xe(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}function $e(t){var e;return!(!y(t)||"function"!=typeof(e=t.then))&&e}function Je(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,an(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&An(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(yn("Promise-chain cycle")):(i=$e(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&kn(l)}))}function Ze(t,e,n){var r,i;In?((r=mn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),b.dispatchEvent(r)):r={promise:e,reason:n},!Tn&&(i=b["on"+t])?i(r):t===En&&function(t,e){var n=b.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function tn(e,n,r){return function(t){e(n,t,r)}}function en(t,e,n){t.done||(t.done=!0,(t=n?n:t).value=e,t.state=2,Je(t,!0))}var nn,rn,on,sn,an=a||function(t){t={fn:t,next:void 0};Ue&&(Ue.next=t),je||(je=t,qe()),Ue=t},un={f:function(t){return new Qe(t)}},cn="object"==typeof window,hn=He.set,ln=Kt("species"),fn="Promise",pn=ht.get,dn=ht.set,gn=ht.getterFor(fn),Pe=de&&de.prototype,vn=de,Re=Pe,yn=b.TypeError,mn=b.document,bn=b.process,_n=un.f,wn=_n,In=!!(mn&&mn.createEvent&&b.dispatchEvent),Tn="function"==typeof PromiseRejectionEvent,En="unhandledrejection",Sn=!1,a=Nt(fn,function(){var t=W(vn)!==String(vn);if(!t&&66===Gt)return!0;if(51<=Gt&&/native code/.test(vn))return!1;function e(t){t(function(){},function(){})}var n=new vn(function(t){t(1)});return(n.constructor={})[ln]=e,!(Sn=n.then(function(){})instanceof e)||!t&&cn&&!Tn}),He=a||!Ie(function(t){vn.all(t).catch(function(){})}),kn=function(i){hn.call(b,function(){var t,e=i.facade,n=i.value,r=Cn(i);if(r&&(t=Xe(function(){Ae?bn.emit("unhandledRejection",n,e):Ze(En,e,n)}),i.rejection=Ae||Cn(i)?2:1,t.error))throw t.value})},Cn=function(t){return 1!==t.rejection&&!t.parent},An=function(e){hn.call(b,function(){var t=e.facade;Ae?bn.emit("rejectionHandled",t):Ze("rejectionhandled",t,e.value)})},Nn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw yn("Promise can't be resolved itself");var r=$e(t);r?an(function(){var e={done:!1};try{r.call(t,tn(Nn,e,n),tn(en,e,n))}catch(t){en(e,t,n)}}):(n.value=t,n.state=1,Je(n,!1))}catch(t){en({done:!1},t,n)}}};if(a&&(Re=(vn=function(t){pe(this,vn,fn),Ht(t),nn.call(this);var e=pn(this);try{t(tn(Nn,e),tn(en,e))}catch(t){en(e,t)}}).prototype,(nn=function(t){dn(this,{type:fn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=he(Re,{then:function(t,e){var n=gn(this),r=_n(Te(this,vn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Ae?bn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Je(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),rn=function(){var t=new nn,e=pn(t);this.promise=t,this.resolve=tn(Nn,e),this.reject=tn(en,e)},un.f=_n=function(t){return t===vn||t===on?new rn:wn(t)},"function"==typeof de&&Pe!==Object.prototype)){sn=Pe.then,Sn||(lt(Pe,"then",function(t,e){var n=this;return new vn(function(t,e){sn.call(n,t,e)}).then(t,e)},{unsafe:!0}),lt(Pe,"catch",Re.catch,{unsafe:!0}));try{delete Pe.constructor}catch(js){}xt&&xt(Pe,Re)}st({global:!0,wrap:!0,forced:a},{Promise:vn}),le(vn,fn,!1),fe(fn),on=et(fn),st({target:fn,stat:!0,forced:a},{reject:function(t){var e=_n(this);return e.reject.call(void 0,t),e.promise}}),st({target:fn,stat:!0,forced:a},{resolve:function(t){return Ye(this,t)}}),st({target:fn,stat:!0,forced:He},{all:function(t){var a=this,e=_n(a),u=e.resolve,c=e.reject,n=Xe(function(){var r=Ht(a.resolve),i=[],o=0,s=1;ie(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=_n(n),i=r.reject,e=Xe(function(){var e=Ht(n.resolve);ie(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),st({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=un.f(a),u=e.resolve,n=e.reject,r=Xe(function(){var r=Ht(a.resolve),i=[],o=0,s=1;ie(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var Rn="No one promise resolved";st({target:"Promise",stat:!0},{any:function(t){var u=this,e=un.f(u),c=e.resolve,h=e.reject,n=Xe(function(){var r=Ht(u.resolve),i=[],o=0,s=1,a=!1;ie(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(et("AggregateError"))(i,Rn)))})}),--s||h(new(et("AggregateError"))(i,Rn))});return n.error&&h(n.value),e.promise}});Pe=!!de&&v(function(){de.prototype.finally.call({then:function(){}},function(){})});st({target:"Promise",proto:!0,real:!0,forced:Pe},{finally:function(e){var n=Te(this,et("Promise")),t="function"==typeof e;return this.then(t?function(t){return Ye(n,e()).then(function(){return t})}:e,t?function(t){return Ye(n,e()).then(function(){throw t})}:e)}}),"function"==typeof de&&(Mn=et("Promise").prototype.finally,de.prototype.finally!==Mn&&lt(de.prototype,"finally",Mn,{unsafe:!0}));var Pn,Re=function(o){return function(t,e){var n,r=String(s(t)),i=nt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},a={codeAt:Re(!1),charAt:Re(!0)},On=Kt("iterator"),He=!1;[].keys&&("next"in(lr=[].keys())?(fr=Dt(Dt(lr)))!==Object.prototype&&(Pn=fr):He=!0);Pe=null==Pn||v(function(){var t={};return Pn[On].call(t)!==t});T(Pn=Pe?{}:Pn,On)||P(Pn,On,function(){return this});function Dn(){return this}function xn(){return this}function Ln(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!Un&&t in f)return f[t];switch(t){case"keys":case Vn:case Bn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=Bt(Fn,{next:g(1,n)}),le(t,e,!1),Jt[e]=Dn}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[qn]||f["@@iterator"]||i&&f[i],d=!Un&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=Dt(r.call(new t)),jn!==Object.prototype&&t.next&&(Dt(t)!==jn&&(xt?xt(t,jn):"function"!=typeof t[qn]&&P(t,qn,xn)),le(t,h,!0))),i==Vn&&p&&p.name!==Vn&&(l=!0,d=function(){return p.call(this)}),f[qn]!==d&&P(f,qn,d),Jt[e]=d,i)if(u={values:a(Vn),keys:o?d:a("keys"),entries:a(Bn)},s)for(c in u)!Un&&!l&&c in f||lt(f,c,u[c]);else st({target:e,proto:!0,forced:Un||l},u);return u}var Mn={IteratorPrototype:Pn,BUGGY_SAFARI_ITERATORS:He},Fn=Mn.IteratorPrototype,jn=Mn.IteratorPrototype,Un=Mn.BUGGY_SAFARI_ITERATORS,qn=Kt("iterator"),Vn="values",Bn="entries",Kn=a.charAt,Wn="String Iterator",Hn=ht.set,zn=ht.getterFor(Wn);Ln(String,"String",function(t){Hn(this,{type:Wn,string:String(t),index:0})},function(){var t=zn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Kn(e,n),t.index+=n.length,{value:n,done:!1})});var Gn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Qn=Kt("unscopables"),Yn=Array.prototype;null==Yn[Qn]&&R.f(Yn,Qn,{configurable:!0,value:Bt(null)});var Re=function(t){Yn[Qn][t]=!0},Xn="Array Iterator",$n=ht.set,Jn=ht.getterFor(Xn),Zn=Ln(Array,"Array",function(t,e){$n(this,{type:Xn,target:u(t),index:0,kind:e})},function(){var t=Jn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Jt.Arguments=Jt.Array,Re("keys"),Re("values"),Re("entries");var tr,er=Kt("iterator"),nr=Kt("toStringTag"),rr=Zn.values;for(tr in Gn){var ir=b[tr],or=ir&&ir.prototype;if(or){if(or[er]!==rr)try{P(or,er,rr)}catch(js){or[er]=rr}if(or[nr]||P(or,nr,tr),Gn[tr])for(var sr in Zn)if(or[sr]!==Zn[sr])try{P(or,sr,Zn[sr])}catch(js){or[sr]=Zn[sr]}}}ft.Promise,st({target:"Promise",stat:!0},{try:function(t){var e=un.f(this),t=Xe(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function ar(t,e){var n;return new(void 0===(n=ur(t)&&("function"==typeof(n=t.constructor)&&(n===Array||ur(n.prototype))||y(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===e?0:e)}var ur=Array.isArray||function(t){return"Array"==r(t)},cr=Kt("species"),hr=[].push,lr=function(f){var p=1==f,d=2==f,g=3==f,v=4==f,y=6==f,m=7==f,b=5==f||y;return function(t,e,n,r){for(var i,o,s=_(t),a=w(s),u=zt(e,n,3),c=rt(a.length),h=0,r=r||ar,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((b||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:hr.call(l,i)}else switch(f){case 4:return!1;case 7:hr.call(l,i)}return y?-1:g||v?v:l}},fr={forEach:lr(0),map:lr(1),filter:lr(2),some:lr(3),every:lr(4),find:lr(5),findIndex:lr(6),filterOut:lr(7)},pr=fr.find,Pe="find",dr=!0;Pe in[]&&Array(1)[Pe](function(){dr=!1}),st({target:"Array",proto:!0,forced:dr},{find:function(t){return pr(this,t,1<arguments.length?arguments[1]:void 0)}}),Re(Pe);var gr=Function.call,He=function(t,e,n){return zt(gr,b[t].prototype[e],n)};He("Array","find");var vr=fr.findIndex,Mn="findIndex",yr=!0;Mn in[]&&Array(1)[Mn](function(){yr=!1}),st({target:"Array",proto:!0,forced:yr},{findIndex:function(t){return vr(this,t,1<arguments.length?arguments[1]:void 0)}}),Re(Mn),He("Array","findIndex");function mr(t,e,n){(e=i(e))in t?R.f(t,e,g(0,n)):t[e]=n}a=!Ie(function(t){Array.from(t)});st({target:"Array",stat:!0,forced:a},{from:function(t){var e,n,r,i,o,s,a=_(t),u="function"==typeof this?this:Array,c=arguments.length,h=1<c?arguments[1]:void 0,l=void 0!==h,t=ee(a),f=0;if(l&&(h=zt(h,2<c?arguments[2]:void 0,2)),null==t||u==Array&&Wt(t))for(n=new u(e=rt(a.length));f<e;f++)s=l?h(a[f],f):a[f],mr(n,f,s);else for(o=(i=t.call(a)).next,n=new u;!(r=o.call(i)).done;f++)s=l?function(e,t,n,r){try{return r?t(m(n)[0],n[1]):t(n)}catch(t){throw ne(e),t}}(i,h,[r.value,f],!0):r.value,mr(n,f,s);return n.length=f,n}}),ft.Array.from;var br,_r,wr=fr.some,lr=!!(_r=[]["some"])&&v(function(){_r.call(null,br||function(){throw 1},1)});st({target:"Array",proto:!0,forced:!lr},{some:function(t){return wr(this,t,1<arguments.length?arguments[1]:void 0)}}),He("Array","some");function Ir(t){return!!y(t)&&(t=ae(t),T(Nr,t)||T(Rr,t))}var Tr,Pe="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Re=R.f,Mn=b.Int8Array,Er=Mn&&Mn.prototype,a=b.Uint8ClampedArray,lr=a&&a.prototype,Sr=Mn&&Dt(Mn),kr=Er&&Dt(Er),a=Object.prototype,Mn=(a.isPrototypeOf,Kt("toStringTag")),Cr=L("TYPED_ARRAY_TAG"),Ar=Pe&&!!xt&&"Opera"!==ae(b.opera),Pe=!1,Nr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Rr={BigInt64Array:8,BigUint64Array:8};for(Tr in Nr)b[Tr]||(Ar=!1);if((!Ar||"function"!=typeof Sr||Sr===Function.prototype)&&(Sr=function(){throw TypeError("Incorrect invocation")},Ar))for(Tr in Nr)b[Tr]&&xt(b[Tr],Sr);if((!Ar||!kr||kr===a)&&(kr=Sr.prototype,Ar))for(Tr in Nr)b[Tr]&&xt(b[Tr].prototype,kr);if(Ar&&Dt(lr)!==kr&&xt(lr,kr),f&&!T(kr,Mn))for(Tr in Pe=!0,Re(kr,Mn,{get:function(){return y(this)?this[Cr]:void 0}}),Nr)b[Tr]&&P(b[Tr],Cr,Tr);var lr=function(t){if(Ir(t))return t;throw TypeError("Target is not a typed array")},Re=function(t,e,n){if(f){if(n)for(var r in Nr){r=b[r];if(r&&T(r.prototype,t))try{delete r.prototype[t]}catch(t){}}kr[t]&&!n||lt(kr,t,!n&&Ar&&Er[t]||e)}},Mn=Kt("iterator"),Pe=b.Uint8Array,Pr=Zn.values,Or=Zn.keys,Dr=Zn.entries,xr=lr,lr=Re,Re=Pe&&Pe.prototype[Mn],Pe=!!Re&&("values"==Re.name||null==Re.name),Re=function(){return Pr.call(xr(this))};lr("entries",function(){return Dr.call(xr(this))}),lr("keys",function(){return Or.call(xr(this))}),lr("values",Re,!Pe),lr(Mn,Re,!Pe);var Lr=Object.assign,Mr=Object.defineProperty,Re=!Lr||v(function(){if(f&&1!==Lr({b:1},Lr(Mr({},"a",{enumerable:!0,get:function(){Mr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Lr({},t)[n]||Lt(Lr({},e)).join("")!=r})?function(t,e){for(var n=_(t),r=arguments.length,i=1,o=It.f,s=p.f;i<r;)for(var a,u=w(arguments[i++]),c=o?Lt(u).concat(o(u)):Lt(u),h=c.length,l=0;l<h;)a=c[l++],f&&!s.call(u,a)||(n[a]=u[a]);return n}:Lr;st({target:"Object",stat:!0,forced:Object.assign!==Re},{assign:Re}),ft.Object.assign;var Fr=p.f,Pe=function(a){return function(t){for(var e,n=u(t),r=Lt(n),i=r.length,o=0,s=[];o<i;)e=r[o++],f&&!Fr.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},Re={entries:Pe(!0),values:Pe(!1)},jr=Re.entries;st({target:"Object",stat:!0},{entries:function(t){return jr(t)}}),ft.Object.entries;var Ur=Re.values;st({target:"Object",stat:!0},{values:function(t){return Ur(t)}}),ft.Object.values;function qr(t){if(y(e=t)&&(void 0!==(n=e[Vr])?!!n:"RegExp"==r(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var Vr=Kt("match"),Br=Kt("match"),Pe=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Br]=!1,"/./"[e](n)}catch(t){}}return!1};st({target:"String",proto:!0,forced:!Pe("includes")},{includes:function(t){return!!~String(s(this)).indexOf(qr(t),1<arguments.length?arguments[1]:void 0)}}),He("String","includes");var Kr,Re=A.f,Wr="".startsWith,Hr=Math.min,Pe=Pe("startsWith"),Kr=!(Pe||(!(Kr=Re(String.prototype,"startsWith"))||Kr.writable));st({target:"String",proto:!0,forced:!Kr&&!Pe},{startsWith:function(t){var e=String(s(this));qr(t);var n=rt(Hr(1<arguments.length?arguments[1]:void 0,e.length)),t=String(t);return Wr?Wr.call(e,t,n):e.slice(n,n+t.length)===t}}),He("String","startsWith");st({target:"String",proto:!0},{repeat:function(t){var e=String(s(this)),n="",r=nt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),He("String","repeat");var zr,Gr=Kt("species"),Qr=Kt("isConcatSpreadable"),Yr=9007199254740991,Xr="Maximum allowed index exceeded",Pe=51<=Gt||!v(function(){var t=[];return t[Qr]=!1,t.concat()[0]!==t}),He=(zr="concat",51<=Gt||!v(function(){var t=[];return(t.constructor={})[Gr]=function(){return{foo:1}},1!==t[zr](Boolean).foo}));st({target:"Array",proto:!0,forced:!Pe||!He},{concat:function(t){for(var e,n,r,i=_(this),o=ar(i,0),s=0,a=-1,u=arguments.length;a<u;a++)if(function(t){if(!y(t))return!1;var e=t[Qr];return void 0!==e?!!e:ur(t)}(r=-1===a?i:arguments[a])){if(n=rt(r.length),Yr<s+n)throw TypeError(Xr);for(e=0;e<n;e++,s++)e in r&&mr(o,s,r[e])}else{if(Yr<=s)throw TypeError(Xr);mr(o,s++,r)}return o.length=s,o}});function $r(t){var e=ft.Symbol||(ft.Symbol={});T(e,t)||ii(e,t,{value:ri.f(t)})}function Jr(t,e){var n=mi[t]=Bt(fi[ui]);return ci(n,{type:ai,tag:t,description:e}),f||(n.description=e),n}function Zr(e,t){m(e);var n=u(t),t=Lt(n).concat(Ci(n));return oi(t,function(t){f&&!ki.call(n,t)||Si(e,t,n[t])}),e}var ti=wt.f,ei={}.toString,ni="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],He={f:function(t){return ni&&"[object Window]"==ei.call(t)?function(t){try{return ti(t)}catch(t){return ni.slice()}}(t):ti(u(t))}},ri={f:Kt},ii=R.f,oi=fr.forEach,si=o("hidden"),ai="Symbol",ui="prototype",fr=Kt("toPrimitive"),ci=ht.set,hi=ht.getterFor(ai),li=Object[ui],fi=b.Symbol,pi=et("JSON","stringify"),di=A.f,gi=R.f,vi=He.f,yi=p.f,mi=Q("symbols"),bi=Q("op-symbols"),_i=Q("string-to-symbol-registry"),wi=Q("symbol-to-string-registry"),o=Q("wks"),Q=b.QObject,Ii=!Q||!Q[ui]||!Q[ui].findChild,Ti=f&&v(function(){return 7!=Bt(gi({},"a",{get:function(){return gi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=di(li,e);r&&delete li[e],gi(t,e,n),r&&t!==li&&gi(li,e,r)}:gi,Ei=H?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof fi},Si=function(t,e,n){t===li&&Si(bi,e,n),m(t);e=i(e,!0);return m(n),T(mi,e)?(n.enumerable?(T(t,si)&&t[si][e]&&(t[si][e]=!1),n=Bt(n,{enumerable:g(0,!1)})):(T(t,si)||gi(t,si,g(1,{})),t[si][e]=!0),Ti(t,e,n)):gi(t,e,n)},ki=function(t){var e=i(t,!0),t=yi.call(this,e);return!(this===li&&T(mi,e)&&!T(bi,e))&&(!(t||!T(this,e)||!T(mi,e)||T(this,si)&&this[si][e])||t)},Q=function(t,e){var n=u(t),t=i(e,!0);if(n!==li||!T(mi,t)||T(bi,t)){e=di(n,t);return!e||!T(mi,t)||T(n,si)&&n[si][t]||(e.enumerable=!0),e}},H=function(t){var t=vi(u(t)),e=[];return oi(t,function(t){T(mi,t)||T(J,t)||e.push(t)}),e},Ci=function(t){var e=t===li,t=vi(e?bi:u(t)),n=[];return oi(t,function(t){!T(mi,t)||e&&!T(li,t)||n.push(mi[t])}),n};Qt||(lt((fi=function(){if(this instanceof fi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=L(t),n=function(t){this===li&&n.call(bi,t),T(this,si)&&T(this[si],e)&&(this[si][e]=!1),Ti(this,e,g(1,t))};return f&&Ii&&Ti(li,e,{configurable:!0,set:n}),Jr(e,t)})[ui],"toString",function(){return hi(this).tag}),lt(fi,"withoutSetter",function(t){return Jr(L(t),t)}),p.f=ki,R.f=Si,A.f=Q,wt.f=He.f=H,It.f=Ci,ri.f=function(t){return Jr(Kt(t),t)},f&&(gi(fi[ui],"description",{configurable:!0,get:function(){return hi(this).description}}),lt(li,"propertyIsEnumerable",ki,{unsafe:!0}))),st({global:!0,wrap:!0,forced:!Qt,sham:!Qt},{Symbol:fi}),oi(Lt(o),function(t){$r(t)}),st({target:ai,stat:!0,forced:!Qt},{for:function(t){var e=String(t);if(T(_i,e))return _i[e];t=fi(e);return _i[e]=t,wi[t]=e,t},keyFor:function(t){if(!Ei(t))throw TypeError(t+" is not a symbol");if(T(wi,t))return wi[t]},useSetter:function(){Ii=!0},useSimple:function(){Ii=!1}}),st({target:"Object",stat:!0,forced:!Qt,sham:!f},{create:function(t,e){return void 0===e?Bt(t):Zr(Bt(t),e)},defineProperty:Si,defineProperties:Zr,getOwnPropertyDescriptor:Q}),st({target:"Object",stat:!0,forced:!Qt},{getOwnPropertyNames:H,getOwnPropertySymbols:Ci}),st({target:"Object",stat:!0,forced:v(function(){It.f(1)})},{getOwnPropertySymbols:function(t){return It.f(_(t))}}),pi&&(qi=!Qt||v(function(){var t=fi();return"[null]"!=pi([t])||"{}"!=pi({a:t})||"{}"!=pi(Object(t))}),st({target:"JSON",stat:!0,forced:qi},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((y(r=e)||void 0!==t)&&!Ei(t))return ur(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Ei(e))return e}),i[1]=e,pi.apply(null,i)}})),fi[ui][fr]||P(fi[ui],fr,fi[ui].valueOf),le(fi,ai),J[si]=!0,$r("asyncIterator");var Ai,Ni,Ri,Pi,Oi,Q=R.f,Di=b.Symbol;!f||"function"!=typeof Di||"description"in Di.prototype&&void 0===Di().description||(Ai={},ot(Ni=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Ni?new Di(t):void 0===t?Di():Di(t);return""===t&&(Ai[e]=!0),e},Di),(Ki=Ni.prototype=Di.prototype).constructor=Ni,Ri=Ki.toString,Pi="Symbol(test)"==String(Di("test")),Oi=/^Symbol\((.*)\)[^)]+$/,Q(Ki,"description",{configurable:!0,get:function(){var t=y(this)?this.valueOf():this,e=Ri.call(t);if(T(Ai,t))return"";e=Pi?e.slice(7,-1):e.replace(Oi,"$1");return""===e?void 0:e}}),st({global:!0,forced:!0},{Symbol:Ni})),$r("hasInstance"),$r("isConcatSpreadable"),$r("iterator"),$r("match"),$r("matchAll"),$r("replace"),$r("search"),$r("species"),$r("split"),$r("toPrimitive"),$r("toStringTag"),$r("unscopables"),le(b.JSON,"JSON",!0),le(Math,"Math",!0),st({global:!0},{Reflect:{}}),le(b.Reflect,"Reflect",!0),ft.Symbol,$r("asyncDispose"),$r("dispose"),$r("matcher"),$r("metadata"),$r("observable"),$r("patternMatch"),$r("replaceAll"),ri.f("iterator");var xi=!v(function(){return Object.isExtensible(Object.preventExtensions({}))}),Li=e(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=R.f,r=L("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!y(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!T(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!T(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return xi&&s.REQUIRED&&o(t)&&!T(t,r)&&n(t),t}};J[r]=!0}),H=function(s,t,e){function n(t){var n=p[t];lt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!y(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!y(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!y(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=b[s],p=f&&f.prototype,d=f,g={};return Nt(s,"function"!=typeof f||!(h||p.forEach&&!v(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),Li.REQUIRED=!0):Nt(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=v(function(){r.has(1)}),a=Ie(function(t){new f(t)}),u=!h&&v(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){pe(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,xt&&"function"==typeof(i=r.constructor)&&i!==t&&y(o=i.prototype)&&o!==t.prototype&&xt(n,o),n);return null!=e&&ie(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),g[s]=d,st({global:!0,forced:d!=f},g),le(d,s),h||e.setStrong(d,s,c),d},Mi=R.f,Fi=Li.fastKey,ji=ht.set,Ui=ht.getterFor,qi={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=Fi(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),f?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){pe(t,s,n),ji(t,{type:n,index:Bt(null),first:void 0,last:void 0,size:0}),f||(t.size=0),null!=e&&ie(e,t[i],{that:t,AS_ENTRIES:r})}),a=Ui(n),u=function(t,e){var n,r=a(t),t=Fi(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return he(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),f?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=zt(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!u(this,t)}}),he(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),f&&Mi(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=Ui(e),o=Ui(r);Ln(t,e,function(t,e){ji(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),fe(e)}};H("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},qi),ft.Map;fr=function(t){var e,n,r,i,o=arguments.length,s=1<o?arguments[1]:void 0;return Ht(this),(e=void 0!==s)&&Ht(s),null==t?new this:(n=[],e?(r=0,i=zt(s,2<o?arguments[2]:void 0,2),ie(t,function(t){n.push(i(t,r++))})):ie(t,n.push,{that:n}),new this(n))};st({target:"Map",stat:!0},{from:fr});Q=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};st({target:"Map",stat:!0},{of:Q});function Vi(){for(var t,e=m(this),n=Ht(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}st({target:"Map",proto:!0,real:!0,forced:G},{deleteAll:function(){return Vi.apply(this,arguments)}});st({target:"Map",proto:!0,real:!0,forced:G},{emplace:function(t,e){var n=m(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function Bi(t){return Map.prototype.entries.call(t)}st({target:"Map",proto:!0,real:!0,forced:G},{every:function(t){var r=m(this),e=Bi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return!ie(e,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:G},{filter:function(t){var n=m(this),e=Bi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Ht(i.set);return ie(e,function(t,e){r(e,t,n)&&o.call(i,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:G},{find:function(t){var r=m(this),e=Bi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return ie(e,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:G},{findKey:function(t){var r=m(this),e=Bi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return ie(e,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ht(n);var i=Ht(r.has),o=Ht(r.get),s=Ht(r.set);return ie(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});st({target:"Map",proto:!0,real:!0,forced:G},{includes:function(i){return ie(Bi(m(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ht(e);var r=Ht(n.set);return ie(t,function(t){r.call(n,e(t),t)}),n}}),st({target:"Map",proto:!0,real:!0,forced:G},{keyOf:function(r){return ie(Bi(m(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Map",proto:!0,real:!0,forced:G},{mapKeys:function(t){var n=m(this),e=Bi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Ht(i.set);return ie(e,function(t,e){o.call(i,r(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:G},{mapValues:function(t){var n=m(this),e=Bi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(n,et("Map"))),o=Ht(i.set);return ie(e,function(t,e){o.call(i,t,r(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),st({target:"Map",proto:!0,real:!0,forced:G},{merge:function(t){for(var e=m(this),n=Ht(e.set),r=0;r<arguments.length;)ie(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),st({target:"Map",proto:!0,real:!0,forced:G},{reduce:function(n){var r=m(this),t=Bi(r),i=arguments.length<2,o=i?void 0:arguments[1];if(Ht(n),ie(t,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),st({target:"Map",proto:!0,real:!0,forced:G},{some:function(t){var r=m(this),e=Bi(r),i=zt(t,1<arguments.length?arguments[1]:void 0,3);return ie(e,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Map",proto:!0,real:!0,forced:G},{update:function(t,e){var n=m(this),r=arguments.length;Ht(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");r=i?n.get(t):Ht(2<r?arguments[2]:void 0)(t,n);return n.set(t,e(r,t,n)),n}});var Ki=function(t,e){var n,r=m(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};st({target:"Map",proto:!0,real:!0,forced:G},{upsert:Ki}),st({target:"Map",proto:!0,real:!0,forced:G},{updateOrInsert:Ki}),H("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},qi),ft.Set,st({target:"Set",stat:!0},{from:fr}),st({target:"Set",stat:!0},{of:Q});st({target:"Set",proto:!0,real:!0,forced:G},{addAll:function(){return function(){for(var t=m(this),e=Ht(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),st({target:"Set",proto:!0,real:!0,forced:G},{deleteAll:function(){return Vi.apply(this,arguments)}});function Wi(t){return Set.prototype.values.call(t)}st({target:"Set",proto:!0,real:!0,forced:G},{every:function(t){var n=m(this),e=Wi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return!ie(e,function(t,e){if(!r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:G},{difference:function(t){var e=m(this),n=new(Te(e,et("Set")))(e),r=Ht(n.delete);return ie(t,function(t){r.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:G},{filter:function(t){var e=m(this),n=Wi(e),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Ht(i.add);return ie(n,function(t){r(t,t,e)&&o.call(i,t)},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:G},{find:function(t){var n=m(this),e=Wi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return ie(e,function(t,e){if(r(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),st({target:"Set",proto:!0,real:!0,forced:G},{intersection:function(t){var e=m(this),n=new(Te(e,et("Set"))),r=Ht(e.has),i=Ht(n.add);return ie(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:G},{isDisjointFrom:function(t){var n=m(this),r=Ht(n.has);return!ie(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:G},{isSubsetOf:function(t){var e=function(t){var e=ee(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return m(e.call(t))}(this),n=m(t),r=n.has;return"function"!=typeof r&&(n=new(et("Set"))(t),r=Ht(n.has)),!ie(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:G},{isSupersetOf:function(t){var n=m(this),r=Ht(n.has);return!ie(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:G},{join:function(t){var e=m(this),n=Wi(e),e=void 0===t?",":String(t),t=[];return ie(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),st({target:"Set",proto:!0,real:!0,forced:G},{map:function(t){var e=m(this),n=Wi(e),r=zt(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,et("Set"))),o=Ht(i.add);return ie(n,function(t){o.call(i,r(t,t,e))},{IS_ITERATOR:!0}),i}}),st({target:"Set",proto:!0,real:!0,forced:G},{reduce:function(e){var n=m(this),t=Wi(n),r=arguments.length<2,i=r?void 0:arguments[1];if(Ht(e),ie(t,function(t){i=r?(r=!1,t):e(i,t,t,n)},{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),st({target:"Set",proto:!0,real:!0,forced:G},{some:function(t){var n=m(this),e=Wi(n),r=zt(t,1<arguments.length?arguments[1]:void 0,3);return ie(e,function(t,e){if(r(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),st({target:"Set",proto:!0,real:!0,forced:G},{symmetricDifference:function(t){var e=m(this),n=new(Te(e,et("Set")))(e),r=Ht(n.delete),i=Ht(n.add);return ie(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),st({target:"Set",proto:!0,real:!0,forced:G},{union:function(t){var e=m(this),e=new(Te(e,et("Set")))(e);return ie(t,Ht(e.add),{that:e}),e}});var Hi=Math.floor;st({target:"Number",stat:!0},{isInteger:function(t){return!y(t)&&isFinite(t)&&Hi(t)===t}}),ft.Number.isInteger,st({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),ft.Number.isNaN;var zi=function(t,e){return(zi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}zi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Qi=function(){return(Qi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Yi(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Xi(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,(e=s?[2&e[0],s.value]:e)[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function $i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ji(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Zi(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function to(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function eo(t){try{return oo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var no={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ro=function(t,e){if(!t)throw io(e)},io=function(t){return new Error("Firebase Database ("+no.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},oo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(h=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[h],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(to(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function so(t){return ao(void 0,t)}function ao(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=ao(t[n],e[n]));return t}var uo=(co.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},co);function co(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function ho(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,e=t.sub||t.user_id;if(!e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");t=Qi({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:e,user_id:e,firebase:{sign_in_provider:"custom",identities:{}}},t);return[oo.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),oo.encodeString(JSON.stringify(t),!1),""].join(".")}function lo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function fo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lo())}function po(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}function go(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function vo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function yo(){return!0===no.NODE_ADMIN}function mo(){return"indexedDB"in self&&null!=indexedDB}function bo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function _o(){return!(!navigator||!navigator.cookieEnabled)}var wo,Io="FirebaseError",To=(Gi(Eo,wo=Error),Eo);function Eo(t,e,n){e=wo.call(this,e)||this;return e.code=t,e.customData=n,e.name=Io,Object.setPrototypeOf(e,Eo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,So.prototype.create),e}var So=(ko.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Co,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new To(o,t,i)},ko);function ko(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Co=/\{\$([^}]+)}/g;function Ao(t){return JSON.parse(t)}function No(t){return JSON.stringify(t)}function Ro(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Ao(eo(o[0])||""),n=Ao(eo(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Po(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Oo(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Do(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xo(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function Lo(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}var Mo=(Fo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Fo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],h=this.chain_[4],r=0;r<80;r++)var l=r<40?r<20?(o=c^a&(u^c),1518500249):(o=a^u^c,1859775393):r<60?(o=a&u|c&(a|u),2400959708):(o=a^u^c,3395469782),i=(s<<5|s>>>27)+o+h+l+n[r]&4294967295,h=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},Fo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Fo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Fo);function Fo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function jo(t,e){e=new Uo(t,e);return e.subscribe.bind(e)}var Uo=(qo.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},qo.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},qo.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},qo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=Vo),void 0===r.error&&(r.error=Vo),void 0===r.complete&&(r.complete=Vo);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},qo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},qo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},qo.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},qo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},qo);function qo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function Vo(){}function Bo(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Ko(t,e){return t+" failed: "+e+" argument "}function Wo(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Ko(t,e)+"must be a valid function.")}function Ho(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Ko(t,e)+"must be a valid context object.")}function zo(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var Go=1e3,Qo=2,Yo=144e5,Xo=.5;function $o(t,e,n){void 0===n&&(n=Qo);n=(e=void 0===e?Go:e)*Math.pow(n,t),t=Math.round(Xo*n*(Math.random()-.5)*2);return Math.min(Yo,n+t)}function Jo(t){return t&&t._delegate?t._delegate:t}var Zo=(ts.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},ts.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},ts.prototype.setServiceProps=function(t){return this.serviceProps=t,this},ts.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},ts);function ts(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var es="[DEFAULT]",ns=(rs.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){t=new uo;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{var n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}}return this.instancesDeferred.get(e).promise},rs.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),e=null!==(e=null==e?void 0:e.optional)&&void 0!==e&&e;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(t){if(e)return null;throw t}},rs.prototype.getComponent=function(){return this.component},rs.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:es})}catch(t){}try{for(var r=$i(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ji(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},rs.prototype.clearInstance=function(t){this.instancesDeferred.delete(t=void 0===t?es:t),this.instances.delete(t)},rs.prototype.delete=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Zi(Zi([],Ji(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Ji(e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return t.sent(),[2]}})})},rs.prototype.isComponentSet=function(){return null!=this.component},rs.prototype.isInitialized=function(t){return this.instances.has(t=void 0===t?es:t)},rs.prototype.initialize=function(t){var e,n,r=(t=void 0===t?{}:t).options,r=void 0===r?{}:r,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:r});try{for(var s=$i(this.instancesDeferred.entries()),a=s.next();!a.done;a=s.next()){var u=Ji(a.value,2),c=u[0],h=u[1];i===this.normalizeInstanceIdentifier(c)&&h.resolve(o)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o},rs.prototype.onInit=function(t,e){var n=this.normalizeInstanceIdentifier(e),r=null!==(e=this.onInitCallbacks.get(n))&&void 0!==e?e:new Set;r.add(t),this.onInitCallbacks.set(n,r);e=this.instances.get(n);return e&&t(e,n),function(){r.delete(t)}},rs.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=$i(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},rs.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,t=this.instances.get(e);if(!t&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===es?void 0:n,options:r}),this.instances.set(e,t),this.invokeOnInitCallbacks(t,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,t)}catch(t){}return t||null},rs.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=es),!this.component||this.component.multipleInstances?t:es},rs.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},rs);function rs(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}var is=(os.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},os.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},os.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ns(t,this);return this.providers.set(t,e),e},os.prototype.getProviders=function(){return Array.from(this.providers.values())},os);function os(t){this.name=t,this.providers=new Map}var ss,as=[];(fr=ss=ss||{})[fr.DEBUG=0]="DEBUG",fr[fr.VERBOSE=1]="VERBOSE",fr[fr.INFO=2]="INFO",fr[fr.WARN=3]="WARN",fr[fr.ERROR=4]="ERROR",fr[fr.SILENT=5]="SILENT";function us(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ls[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Zi(["["+i+"]  "+t.name+":"],n))}}var cs={debug:ss.DEBUG,verbose:ss.VERBOSE,info:ss.INFO,warn:ss.WARN,error:ss.ERROR,silent:ss.SILENT},hs=ss.INFO,ls=((Q={})[ss.DEBUG]="log",Q[ss.VERBOSE]="log",Q[ss.INFO]="info",Q[ss.WARN]="warn",Q[ss.ERROR]="error",Q),fs=(Object.defineProperty(ps.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ss))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ps.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?cs[t]:t},Object.defineProperty(ps.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ps.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ps.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,ss.DEBUG],t)),this._logHandler.apply(this,Zi([this,ss.DEBUG],t))},ps.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,ss.VERBOSE],t)),this._logHandler.apply(this,Zi([this,ss.VERBOSE],t))},ps.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,ss.INFO],t)),this._logHandler.apply(this,Zi([this,ss.INFO],t))},ps.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,ss.WARN],t)),this._logHandler.apply(this,Zi([this,ss.WARN],t))},ps.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Zi([this,ss.ERROR],t)),this._logHandler.apply(this,Zi([this,ss.ERROR],t))},ps);function ps(t){this.name=t,this._logLevel=hs,this._logHandler=us,this._userLogHandler=null,as.push(this)}function ds(e){as.forEach(function(t){t.setLogLevel(e)})}function gs(s,e){for(var t=0,n=as;t<n.length;t++)!function(t){var o=null;e&&e.level&&(o=cs[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:ss[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}var fr=((G={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",G["bad-app-name"]="Illegal App name: '{$appName}",G["duplicate-app"]="Firebase App named '{$appName}' already exists",G["app-deleted"]="Firebase App named '{$appName}' already deleted",G["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",G["invalid-log-argument"]="First argument to `onLog` must be null or a function.",G),vs=new So("app","Firebase",fr),ys="@firebase/app",ms="[DEFAULT]",bs=((Q={})[ys]="fire-core",Q["@firebase/analytics"]="fire-analytics",Q["@firebase/app-check"]="fire-app-check",Q["@firebase/auth"]="fire-auth",Q["@firebase/database"]="fire-rtdb",Q["@firebase/functions"]="fire-fn",Q["@firebase/installations"]="fire-iid",Q["@firebase/messaging"]="fire-fcm",Q["@firebase/performance"]="fire-perf",Q["@firebase/remote-config"]="fire-rc",Q["@firebase/storage"]="fire-gcs",Q["@firebase/firestore"]="fire-fst",Q["fire-js"]="fire-js",Q["firebase-wrapper"]="fire-js-all",Q),_s=new fs("@firebase/app"),ws=(Object.defineProperty(Is.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Is.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Is.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Is.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Is.prototype._getService=function(t,e){void 0===e&&(e=ms),this.checkDestroyed_();var n=this.container.getProvider(t);return n.isInitialized()||"EXPLICIT"!==(null===(t=n.getComponent())||void 0===t?void 0:t.instantiationMode)||n.initialize(),n.getImmediate({identifier:e})},Is.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=ms),this.container.getProvider(t).clearInstance(e)},Is.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){_s.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Is.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Is.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Is.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw vs.create("app-deleted",{appName:this.name_})},Is);function Is(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=so(t),this.container=new is(e.name),this._addComponent(new Zo("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}ws.prototype.name&&ws.prototype.options||ws.prototype.delete||console.log("dc");var Ts="8.9.1";function Es(s){var a={},u=new Map,c={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});"object"==typeof e&&null!==e||(e={name:e});var n=e;void 0===n.name&&(n.name=ms);e=n.name;if("string"!=typeof e||!e)throw vs.create("bad-app-name",{appName:String(e)});if(Po(a,e))throw vs.create("duplicate-app",{appName:e});n=new s(t,n,c);return a[e]=n},app:h,registerVersion:function(t,e,n){var r=null!==(i=bs[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);i||t?(n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),_s.warn(n.join(" "))):o(new Zo(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:ds,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw vs.create("invalid-log-argument");gs(t,e)},apps:null,SDK_VERSION:Ts,INTERNAL:{registerComponent:o,removeApp:function(t){delete a[t]},components:u,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function h(t){if(!Po(a,t=t||ms))throw vs.create("no-app",{appName:t});return a[t]}function o(n){var t,r=n.name;if(u.has(r))return _s.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?c[r]:null;u.set(r,n),"PUBLIC"===n.type&&(t=function(t){if("function"!=typeof(t=void 0===t?h():t)[r])throw vs.create("invalid-app-argument",{appName:r});return t[r]()},void 0!==n.serviceProps&&ao(t,n.serviceProps),c[r]=t,s.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])});for(var e=0,i=Object.keys(a);e<i.length;e++){var o=i[e];a[o]._addComponent(n)}return"PUBLIC"===n.type?c[r]:null}return c.default=c,Object.defineProperty(c,"apps",{get:function(){return Object.keys(a).map(function(t){return a[t]})}}),h.App=s,c}var G=function t(){var e=Es(ws);return e.INTERNAL=Qi(Qi({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){ao(e,t)},createSubscribe:jo,ErrorFactory:So,deepExtend:ao}),e}(),Ss=(ks.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},ks);function ks(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(_s.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(za=self.firebase.SDK_VERSION)&&0<=za.indexOf("LITE")&&_s.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Cs=G.initializeApp;G.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return po()&&_s.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Cs.apply(void 0,t)};var As,Ns,Jl=G;(As=Jl).INTERNAL.registerComponent(new Zo("platform-logger",function(t){return new Ss(t)},"PRIVATE")),As.registerVersion(ys,"0.6.29",Ns),As.registerVersion("fire-js","");Jl.registerVersion("firebase","8.9.1","app"),Jl.SDK_VERSION="8.9.1";!function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},s.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Ra(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Ra(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Ra(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function g(t){return"function"==p(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function b(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t){return t}function I(t,e,n){this.code=S+t,this.message=e||k[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(S.length),t.message,t.serverResponse):null}_(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var E,S="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in C)if(C[e].id===t)return t=C[e],{firebaseEndpoint:t.Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function N(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function R(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,R):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");R.call(this,n+t[r])}function O(t){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function x(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}E=A("__EID__")?"__EID__":void 0,_(R,Error),R.prototype.name="CustomError",_(P,R),P.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var M=new D(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++)a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n));return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},B=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=j(t,e)}function W(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function z(){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,$=/</g,J=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}t:{var ot=l.navigator;if(ot){ot=ot.userAgent;if(ot){Q=ot;break t}}Q=""}function st(t){return rt(Q,t)}function at(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ut(t){for(var e in t)return;return 1}function ct(t){var e,n={};for(e in t)n[e]=t[e];return n}var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function lt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function ft(t,e){t:{try{var n,r=t&&t.ownerDocument;if((n=(n=r&&(r.defaultView||r.parentWindow))||l).Element&&n.Location){var i=n;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;O("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function pt(t,e){this.a=t===yt&&e||"",this.b=vt}function dt(t){return t instanceof pt&&t.constructor===pt&&t.b===vt?t.a:(O("expected object of type Const, got '"+t+"'"),"type_error:Const")}pt.prototype.ta=!0,pt.prototype.sa=function(){return this.a},pt.prototype.toString=function(){return"Const{"+this.a+"}"};var gt,vt={},yt={};function mt(){if(void 0===gt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:w,createScript:w,createScriptURL:w})}catch(t){l.console&&l.console.error(t.message)}gt=t}else gt=t}return gt}function bt(t,e){this.a=e===Et?t:""}function _t(t){return t instanceof bt&&t.constructor===bt?t.a:(O("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function wt(t,n){var e,r=dt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof pt?dt(t):encodeURIComponent(String(t))}),e=t,t=mt(),new bt(e=t?t.createScriptURL(e):e,Et)}bt.prototype.ta=!0,bt.prototype.sa=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Et={};function St(t,e){this.a=e===Ot?t:""}function kt(t){return t instanceof St&&t.constructor===St?t.a:(O("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}St.prototype.ta=!0,St.prototype.sa=function(){return this.a.toString()},St.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,At=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Rt(t){return t instanceof St?t:(t="object"==typeof t&&t.ta?t.sa():String(t),t=Nt.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(At))&&Ct.test(e[1])?new St(t,Ot):null);var e}function Pt(t){return t instanceof St?t:(t="object"==typeof t&&t.ta?t.sa():String(t),new St(t=!Nt.test(t)?"about:invalid#zClosurez":t,Ot))}var Ot={},Dt=new St("about:invalid#zClosurez",Ot);function xt(t,e,n){this.a=n===Lt?t:""}xt.prototype.ta=!0,xt.prototype.sa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Lt={};function Mt(t,e,n,r){return t=t instanceof St?t:Pt(t),e=e||l,n=n instanceof pt?dt(n):n||"",e.open(kt(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function jt(t){return nt.test(t)&&(-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace(X,"&amp;"):t).indexOf("<")?t.replace($,"&lt;"):t).indexOf(">")?t.replace(J,"&gt;"):t).indexOf('"')?t.replace(Z,"&quot;"):t).indexOf("'")?t.replace(tt,"&#39;"):t).indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}Ut[" "]=s;var qt,Vt=st("Opera"),Bt=st("Trident")||st("MSIE"),Kt=st("Edge"),Wt=Kt||Bt,Ht=st("Gecko")&&!(rt(Q.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),zt=rt(Q.toLowerCase(),"webkit")&&!st("Edge");function Gt(){var t=l.document;return t?t.documentMode:void 0}t:{var Qt="",Yt=(Yt=Q,Ht?/rv:([^\);]+)(\)|;)/.exec(Yt):Kt?/Edge\/([\d\.]+)/.exec(Yt):Bt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Yt):zt?/WebKit\/(\S+)/.exec(Yt):Vt?/(?:Version)[ \/]?(\S+)/.exec(Yt):void 0);if(Yt&&(Qt=Yt?Yt[1]:""),Bt){Yt=Gt();if(null!=Yt&&Yt>parseFloat(Qt)){qt=String(Yt);break t}}qt=Qt}var Xt={};function $t(a){return t=a,e=function(){for(var t=0,e=Y(String(qt)).split("."),n=Y(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=it(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||it(0==o[2].length,0==s[2].length)||it(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Jt=l.document&&Bt&&(Gt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Zt=!Bt||9<=Number(Jt);function te(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ee(n,t){at(t,function(t,e){t&&"object"==typeof t&&t.ta&&(t=t.sa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ie.hasOwnProperty(e)?n.setAttribute(ie[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ne,re,ie={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function oe(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Zt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',jt(i.name),'"'),i.type&&(r.push(' type="',jt(i.type),'"'),lt(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=se(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ee(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(g(o)){s="function"==typeof o.item;break t}}s=!1}U(s?G(o):o,r)}}}(n,r,e),r}function se(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ae(t){l.setTimeout(function(){throw t},0)}function ue(t,e){re||function(){{var t;re=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(le)}):function(){var t=le;!g(l.setImmediate)||l.Window&&l.Window.prototype&&!st("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(ne=ne||function(){var t=l.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")?function(){var t=se(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||st("Trident")||st("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Hb,n.Hb=null,t())},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}}(),ce||(re(),ce=!0),he.add(t,e)}var ce=!1,he=new L;function le(){for(var t,e;e=t=void 0,e=null,(t=he).a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e=e;){try{e.a.call(e.b)}catch(t){ae(t)}x(M,e)}ce=!1}function fe(t,e){if(this.a=pe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Se(n,de,t)},function(t){if(!(t instanceof Oe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Se(n,ge,t)})}catch(t){Se(this,ge,t)}}var pe=0,de=2,ge=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new D(function(){return new ve},function(t){t.reset()});function me(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof fe)return t;var e=new fe(s);return Se(e,de,t),e}function _e(n){return new fe(function(t,e){e(n)})}function we(t,e,n){ke(t,e,n,null)||ue(b(e,t))}function Ie(n){return new fe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Qb:!0,value:n}:{Qb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)we(n[e],b(t,e,!0),b(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=de&&t.a!=ge||Ce(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ee(t,i,o,s){var e=me(null,null,null);return e.a=new fe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Oe?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Se(t,e,n){var r,i;t.a==pe&&(t===n&&(e=ge,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ce(t),e!=ge||n instanceof Oe||(i=n,(r=t).g=!0,ue(function(){r.g&&Pe.call(null,i)}))))}function ke(t,e,n,r){if(t instanceof fe)return Te(t,me(e||s,n||null,r)),1;if(N(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(g(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ce(t){t.h||(t.h=!0,ue(t.gc,t))}function Ae(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ne(t,e,n,r){if(n==ge&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Re(e,n,r);else try{e.c?e.g.call(e.f):Re(e,n,r)}catch(t){Pe.call(null,t)}x(ye,e)}function Re(t,e,n){e==de?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}fe.prototype.then=function(t,e,n){return Ee(this,g(t)?t:null,g(e)?e:null,n)},fe.prototype.$goog_Thenable=!0,(t=fe.prototype).oa=function(t,e){return(t=me(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Ee(this,null,t,e)},t.cancel=function(t){var e;this.a==pe&&(e=new Oe(t),ue(function(){!function t(e,n){if(e.a==pe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,!((o=a.a==e?a:o)&&1<i)));a=a.next)o||(s=a);o&&(r.a==pe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ae(r),Ne(r,o,ge,n)))}e.c=null}else Se(e,ge,n)}(this,e)},this))},t.$c=function(t){this.a=pe,Se(this,de,t)},t.ad=function(t){this.a=pe,Se(this,ge,t)},t.gc=function(){for(var t;t=Ae(this);)Ne(this,t,this.a,this.i);this.h=!1};var Pe=ae;function Oe(t){R.call(this,t)}function De(){this.ya=this.ya,this.pa=this.pa}_(Oe,R);var xe=0,Le={};function Me(t){t.ya||(t.ya=!0,t.Da(),0==xe)||(t=t,t=Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r),delete Le[t])}De.prototype.ya=!(Oe.prototype.name="cancel"),De.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Fe=Object.freeze||function(t){return t},je=!Bt||9<=Number(Jt),Ue=Bt&&!$t("9"),qe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function Ve(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(Ve.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Ht){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ke[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ve.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Be,Ve);var Ke=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.g=function(){return this.a};var We="closure_listenable_"+(1e6*Math.random()|0),He=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++He,this.wa=this.Qa=!1}function Ge(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new ze(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var $e="closure_lm_"+(1e6*Math.random()|0),Je={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[We]?pn(t,e,n,v(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=cn(t);if(c||(t[$e]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,a=je?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r=a).src=t,r.listener=n,t.addEventListener)void 0===(i=!qe?u:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[We]?dn(t,e,n,v(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=ln(n),t&&t[We]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Xe(o=t.a[e],n,r,i))&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&cn(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Xe(e,n,r,i):t)?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.wa&&((e=t.src)&&e[We]?Ye(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[$e]=null)):Ge(t)))}function on(t){return t in Je?Je[t]:Je[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&rn(t),n.call(r,e)}function un(t,e){if(t.wa)return!0;if(je)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[$e])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return g(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){De.call(this),this.v=new Qe(this),(this.bc=this).hb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function gn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.wa&&u.capture==n&&(s=u.listener,a=u.Wa||u.src,u.Qa&&Ye(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function vn(t,e,n){if(g(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function yn(n){var r=null;return new fe(function(t,e){-1==(r=vn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function bn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function _n(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _n)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];In(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)In(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function In(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(fn,De),fn.prototype[We]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e;if(n=this.hb)for(e=[];n;n=n.hb)e.push(n);var n=this.bc,r=t.type||t;if("string"==typeof t?t=new Ve(t,n):t instanceof Ve?t.target=t.target||n:(s=t,lt(t=new Ve(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=gn(o,r,!0,t)&&s;if(s=gn(o=t.b=n,r,!0,t)&&s,s=gn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=gn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Da=function(){if(fn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ge(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=_n.prototype).X=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return In(this.b,t)?this.b[t]:e},t.set=function(t,e){In(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Tn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function En(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof En?(this.i=void 0!==e?e:t.i,Sn(this,t.c),this.l=t.l,this.a=t.a,kn(this,t.g),this.f=t.f,Cn(this,zn(t.b)),this.h=t.h):t&&(n=String(t).match(Tn))?(this.i=!!e,Sn(this,n[1]||"",!0),this.l=On(n[2]||""),this.a=On(n[3]||"",!0),kn(this,n[4]),this.f=On(n[5]||"",!0),Cn(this,n[6]||"",!0),this.h=On(n[7]||"")):(this.i=!!e,this.b=new qn(null,this.i))}function Sn(t,e,n){t.c=n?On(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function kn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Cn(t,e,n){var r,i;e instanceof qn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Vn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Kn(this,e),Hn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,jn)),t.b=new qn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function Nn(t,e){return t.b.get(e)}function Rn(t){return t instanceof En?new En(t):new En(t,void 0)}function Pn(t,e,n,r){var i=new En(null,void 0);return t&&Sn(i,t),e&&(i.a=e),n&&kn(i,n),r&&(i.f=r),i}function On(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}En.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Dn(e,Ln,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Dn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Dn(n,Un)),t.join("")},En.prototype.resolve=function(t){var e=new En(this),n=!!t.c;n?Sn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)kn(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(rt(i,"./")||rt(i,"/.")){for(var r=0==i.lastIndexOf("/",0),i=i.split("/"),o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Cn(e,zn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,jn=/[#\?@]/g,Un=/#/g;function qn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Vn(n){n.a||(n.a=new _n,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Bn(t){var e=bn(t);if(void 0===e)throw Error("Keys are undefined");var n=new qn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Hn(n,i,o):n.add(i,o)}return n}function Kn(t,e){Vn(t),e=Gn(t,e),In(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,In((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Wn(t,e){return Vn(t),e=Gn(t,e),In(t.a.b,e)}function Hn(t,e,n){Kn(t,e),0<n.length&&(t.c=null,t.a.set(Gn(t,e),G(n)),t.b+=n.length)}function zn(t){var e=new qn;return e.c=t.c,t.a&&(e.a=new _n(t.a),e.b=t.b),e}function Gn(t,e){return e=String(e),e=t.f?e.toLowerCase():e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),Jn(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Jn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=qn.prototype).add=function(t,e){Vn(this),this.c=null,t=Gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Vn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){Vn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Vn(this);var e=[];if("string"==typeof t)Wn(this,t)&&(e=z(e,this.a.get(Gn(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},t.set=function(t,e){return Vn(this),this.c=null,Wn(this,t=Gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.X(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},$n=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Jn(t,e){e.push('"',t.replace($n,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return Bt&&Jt&&11==Jt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=kt(Rt(t)||Dt)),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),gr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof St?n:Rt(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(ft(s=se(document,"A"),"HTMLAnchorElement"),e=e instanceof St?e:Pt(e),s.href=kt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Mt("",r,n,s),t=kt(e),s&&(Wt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">',t=new xt(t=(r=mt())?r.createHTML(t):t,0,Lt),r=s.document)&&(r.write((o=t)instanceof xt&&o.constructor===xt?o.a:(O("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Mt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new fe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Tr()&&"ionic:"!==Tr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Jl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Jl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function gr(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?pr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var vr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function yr(t,e){e=e||[];var n,r=[],i={};for(n in vr)i[vr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=gr(i=mr()):"Worker"===r&&(r=gr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return e=n!=t.length?void 0:e}function _r(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Ir()||"chrome-extension:"===Tr()||ur())&&!fr()&&_r()&&!hr()}function Ir(){return"http:"===Tr()||"https:"===Tr()}function Tr(){return l.location&&l.location.protocol||null}function Er(t){return!nr(t=t||mr())&&gr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function kr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Cr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=gr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Rr(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Or(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(){var e=l.document,n=null;return Or()||!e?be():new fe(function(t){n=function(){Or()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t})}function xr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Lr(){return br("fireauth.oauthhelper",l)||br("fireauth.iframe",l)}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Ir()&&"chrome-extension:"!==Tr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Mr,Fr={};function jr(t){Fr[t]||(Fr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Ur={};Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Ur,"abcd",{configurable:!0,enumerable:!0,value:2}),Mr=2==Ur.abcd}catch(t){Mr=!1}function qr(t,e,n){Mr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Vr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&qr(t,n,e[n])}function Br(t){var e={};return Vr(e,t),e}function Kr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)qr(e,n,Kr(t[n]));return e}function Wr(t){var e=t&&(t[Yr]?"phone":null);if(!(e&&t&&t[Qr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");qr(this,"uid",t[Qr]),qr(this,"displayName",t[zr]||null);var n=null;qr(this,"enrollmentTime",n=t[Gr]?new Date(t[Gr]).toUTCString():n),qr(this,"factorId",e)}function Hr(t){try{var e=new Xr(t)}catch(t){e=null}return e}Wr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var zr="displayName",Gr="enrolledAt",Qr="mfaEnrollmentId",Yr="phoneInfo";function Xr(t){Wr.call(this,t),qr(this,"phoneNumber",t[Yr])}function $r(t){var e={},n=t[ei],r=t[ri],i=t[ii];if(t=Hr(t[ni]),!i||i!=Zr&&i!=ti&&!n||i==ti&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==ti?(e[si]=n||null,e[ui]=n||null,e[oi]=r):(e[si]=r||null,e[ui]=r||null,e[oi]=n||null),e[ai]=t||null,qr(this,hi,i),qr(this,ci,Kr(e))}_(Xr,Wr),Xr.prototype.w=function(){var t=Xr.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",Zr="EMAIL_SIGNIN",ti="VERIFY_AND_CHANGE_EMAIL",ei="email",ni="mfaInfo",ri="newEmail",ii="requestType",oi="email",si="fromEmail",ai="multiFactorInfo",ui="previousEmail",ci="data",hi="operation";function li(t){var e=Nn(t=Rn(t),fi)||null,n=Nn(t,pi)||null,r=(r=Nn(t,vi)||null)&&mi[r]||null;if(!e||!n||!r)throw new I("argument-error",fi+", "+pi+"and "+vi+" are required in a valid action code URL.");Vr(this,{apiKey:e,operation:r,code:n,continueUrl:Nn(t,di)||null,languageCode:Nn(t,gi)||null,tenantId:Nn(t,yi)||null})}var fi="apiKey",pi="oobCode",di="continueUrl",gi="languageCode",vi="mode",yi="tenantId",mi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:Zr,verifyAndChangeEmail:ti,verifyEmail:"VERIFY_EMAIL"};function bi(t){try{return new li(t)}catch(t){return null}}function _i(t){if(void 0===(e=t[Si]))throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[wi])&&"object"==typeof r){var e=r[Ai],n=r[ki],r=r[Ci];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",ki+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ci+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Ai+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",wi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ei])&&"object"==typeof e){if("string"==typeof(e=e[Ni])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ni+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ei+" property must be a non null object when specified.");if(void 0!==(e=t[Ti])&&"boolean"!=typeof e)throw new I("argument-error",Ti+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ii])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",Ii+" property must be a non empty string when specified.");this.i=t||null}var wi="android",Ii="dynamicLinkDomain",Ti="handleCodeInApp",Ei="iOS",Si="url",ki="installApp",Ci="minimumVersion",Ai="packageName",Ni="bundleId";function Ri(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Pi=null;function Oi(t){var e=[];return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Pi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Pi){Pi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Pi[o]&&(Pi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e.push(t)}),e}function Di(t){var e=Li(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function xi(t){try{return new Di(t)}catch(t){return null}}function Li(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Oi(t);for(t=[],n=e=0;e<r.length;){var i,o,s,a=r[e++];a<128?t[n++]=String.fromCharCode(a):191<a&&a<224?(i=r[e++],t[n++]=String.fromCharCode((31&a)<<6|63&i)):239<a&&a<365?(s=((7&a)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Di.prototype.T=function(){return this.f},Di.prototype.l=function(){return this.c},Di.prototype.toString=function(){return this.h};var Mi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Fi=["client_id","response_type","scope","redirect_uri","state"],ji={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Fi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Fi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Fi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Mi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ui(t){for(var e in ji)if(ji[e].fa==t)return ji[e];return null}function qi(t){var e={};e["facebook.com"]=Hi,e["google.com"]=Gi,e["github.com"]=zi,e["twitter.com"]=Qi;var n=t&&t[Bi];try{if(n)return new(e[n]||Wi)(t);if(void 0!==t[Vi])return new Ki(t)}catch(t){}return null}var Vi="idToken",Bi="providerId";function Ki(t){var e,n=t[Bi];if(n||!t[Vi]||(e=xi(t[Vi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),qr(this,"providerId",n="anonymous"==n||"custom"==n?null:n),qr(this,"isNewUser",e)}function Wi(t){Ki.call(this,t),qr(this,"profile",Kr((t=Cr(t.rawUserInfo||"{}"))||{}))}function Hi(t){if(Wi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Wi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",this.profile&&this.profile.login||null)}function Gi(t){if(Wi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Qi(t){if(Wi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");qr(this,"username",t.screenName||null)}function Yi(t){var e=Nn(r=Rn(t),"link"),n=Nn(Rn(e),"link"),r=Nn(r,"deep_link_id");return Nn(Rn(r),"link")||r||n||e||t}function Xi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?$i:Ji}_(Wi,Ki),_(Hi,Wi),_(zi,Wi),_(Gi,Wi),_(Qi,Wi);var $i="enroll",Ji="signin";function Zi(){}function to(t,n){return t.then(function(t){if(t[Ks]){var e=xi(t[Ks]);if(!e||n!=e.i)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==S+"user-not-found"?new I("user-mismatch"):t})}function eo(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,qr(this,"providerId",t),qr(this,"signInMethod",t)}function no(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function ro(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new eo(t.providerId,t.pendingToken)}catch(t){}return null}function io(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&qr(this,"idToken",e.idToken),e.accessToken&&qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");qr(this,"accessToken",e.oauthToken),qr(this,"secret",e.oauthTokenSecret)}qr(this,"providerId",t),qr(this,"signInMethod",n)}function oo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function so(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new io(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ao(t,e){this.Qc=e||[],Vr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Ui(t)||{}).Ja||null,this.pb=null}function uo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');ao.call(this,t,[])}function co(t){ao.call(this,t,Fi),this.a=[]}function ho(){co.call(this,"facebook.com")}function lo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){co.call(this,"github.com")}function po(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new fo).credential({accessToken:e})}function go(){co.call(this,"google.com"),this.Ca("profile")}function vo(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new go).credential({idToken:n,accessToken:e})}function yo(){ao.call(this,"twitter.com",Mi)}function mo(t,e){var n=t;if(!(n=!v(n)?{oauthToken:t,oauthTokenSecret:e}:n).oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new io("twitter.com",n,"twitter.com")}function bo(t,e,n){this.a=t,this.f=e,qr(this,"providerId","password"),qr(this,"signInMethod",n===wo.EMAIL_LINK_SIGN_IN_METHOD?wo.EMAIL_LINK_SIGN_IN_METHOD:wo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new bo(t.email,t.password,t.signInMethod):null}function wo(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function Io(t,e){if(!(e=To(e)))throw new I("argument-error","Invalid email link!");return new bo(t,e.code,wo.EMAIL_LINK_SIGN_IN_METHOD)}function To(t){return(t=bi(t=Yi(t)))&&t.operation===Zr?t:null}function Eo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new I("internal-error");this.a=t,qr(this,"providerId","phone"),this.fa="phone",qr(this,"signInMethod","phone")}function So(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Eo(n)}return null}function ko(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Co(t){try{this.a=t||Jl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function Ao(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new Eo({fb:t,eb:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new Eo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return vo(o,n);case"facebook.com":return lo(n);case"github.com":return po(n);case"twitter.com":return mo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new eo(e,s):new io(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new co(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Po(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Oo(t){return(t=t||{}).type?new Po(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Do(){this.b=null,this.a=[]}Xi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Xi.prototype.w=function(){return this.type==$i?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Zi.prototype.ka=function(){},Zi.prototype.b=function(){},Zi.prototype.c=function(){},Zi.prototype.w=function(){},eo.prototype.ka=function(t){return la(t,no(this))},eo.prototype.b=function(t,e){var n=no(this);return n.idToken=e,fa(t,n)},eo.prototype.c=function(t,e){return to(pa(t,no(this)),e)},eo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},io.prototype.ka=function(t){return la(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,fa(t,n)},io.prototype.c=function(t,e){return to(pa(t,oo(this)),e)},io.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ao.prototype.Ka=function(t){return this.Jb=ct(t),this},_(uo,ao),_(co,ao),co.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},co.prototype.Rb=function(){return G(this.a)},co.prototype.credential=function(t,e){e=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new io(this.providerId,e,this.providerId)},_(ho,co),qr(ho,"PROVIDER_ID","facebook.com"),qr(ho,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(fo,co),qr(fo,"PROVIDER_ID","github.com"),qr(fo,"GITHUB_SIGN_IN_METHOD","github.com"),_(go,co),qr(go,"PROVIDER_ID","google.com"),qr(go,"GOOGLE_SIGN_IN_METHOD","google.com"),_(yo,ao),qr(yo,"PROVIDER_ID","twitter.com"),qr(yo,"TWITTER_SIGN_IN_METHOD","twitter.com"),bo.prototype.ka=function(t){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,wa,{email:this.a,oobCode:this.f}):Qa(t,Ka,{email:this.a,password:this.f})},bo.prototype.b=function(t,e){return this.signInMethod==wo.EMAIL_LINK_SIGN_IN_METHOD?Qa(t,Ia,{idToken:e,email:this.a,oobCode:this.f}):Qa(t,La,{idToken:e,email:this.a,password:this.f})},bo.prototype.c=function(t,e){return to(this.ka(t),e)},bo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Vr(wo,{PROVIDER_ID:"password"}),Vr(wo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(wo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Eo.prototype.ka=function(t){return t.gb(ko(this))},Eo.prototype.b=function(t,e){var n=ko(this);return n.idToken=e,Qa(t,Ha,n)},Eo.prototype.c=function(t,e){var n=ko(this);return n.operation="REAUTH",to(t=Qa(t,za,n),e)},Eo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Co.prototype.gb=function(r,i){var o=this.a.a;return be(i.verify()).then(function(e){if("string"!=typeof e)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=v(r)?r.session:null,n=v(r)?r.phoneNumber:r,t=t&&t.type==$i?t.Ha().then(function(t){return Qa(o,Fa,{idToken:t,phoneEnrollmentInfo:{phoneNumber:n,recaptchaToken:e}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Ji?t.Ha().then(function(t){return t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:e}},Qa(o,ja,t).then(function(t){return t.phoneResponseInfo.sessionInfo})}):Qa(o,Da,{phoneNumber:n,recaptchaToken:e});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},Vr(Co,{PROVIDER_ID:"phone"}),Vr(Co,{PHONE_SIGN_IN_METHOD:"phone"}),Po.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Po.prototype.T=function(){return this.h},Po.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var xo,Lo=null;function Mo(t){var e="unauthorized-domain",n=void 0,r=Rn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Fo(t,e,n){I.call(this,t,n),(t=e||{}).Kb&&qr(this,"email",t.Kb),t.ea&&qr(this,"phoneNumber",t.ea),t.credential&&qr(this,"credential",t.credential),t.$b&&qr(this,"tenantId",t.$b)}function jo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:No(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Fo(e,n,t.message)}return null}function Uo(){}function qo(t){return t.c||(t.c=t.b())}function Vo(){}function Bo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Ko(){}function Wo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Tb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Ho(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Go(t){this.f=t,this.b=this.c=this.a=null}function Qo(t,e){this.name=t,this.value=e}_(Mo,I),_(Fo,I),Fo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&lt(t,e),t},Fo.prototype.toJSON=function(){return this.w()},Uo.prototype.c=null,_(Vo,Uo),Vo.prototype.a=function(){var t=Bo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Vo.prototype.b=function(){var t={};return Bo(this)&&(t[0]=!0,t[1]=!0),t},xo=new Vo,_(Ko,Uo),Ko.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Wo;throw Error("Unsupported browser")},Ko.prototype.b=function(){return{}},(t=Wo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Ho(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Ho(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Ho(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},zo.prototype.a=null,zo.prototype.reset=function(t,e,n,r,i){delete this.a},Qo.prototype.toString=function(){return this.name};var Yo=new Qo("SEVERE",1e3),Xo=new Qo("WARNING",900),$o=new Qo("CONFIG",700),Jo=new Qo("FINE",500);Go.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(O("Root logger has no level set."),null))}(this).value)for(g(e)&&(e=e()),t=new zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Zo,ts={},es=null;function ns(t){var e,n,r;return es||(es=new Go(""),(ts[""]=es).c=$o),(e=ts[t])||(e=new Go(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ns(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,ts[t]=e),e}function rs(t,e){t&&t.log(Jo,e,void 0)}function is(t){this.f=t}function os(t){fn.call(this),this.u=t,this.h=void 0,this.readyState=ss,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=ns("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(is,Uo),is.prototype.a=function(){return new os(this.f)},is.prototype.b=(Zo={},function(){return Zo}),_(os,fn);var ss=0;function as(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function us(t){t.readyState=4,t.g=null,t.c=null,t.m=null,cs(t)}function cs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function hs(t){fn.call(this),this.headers=new _n,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ls,this.u=this.S=!1}(t=os.prototype).open=function(t,e){if(this.readyState!=ss)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,cs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,us(this)),this.readyState=ss},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,cs(this)),this.a&&(this.readyState=3,cs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,as(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?us:cs)(this),3==this.readyState&&as(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,us(this))},t.sc=function(t){this.a&&(this.response=t,us(this))},t.Va=function(t){var e=this.i;e&&e.log(Xo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&us(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Xo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Xo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(os.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(hs,fn);var ls="";hs.prototype.b=ns("goog.net.XhrIo");var fs=/^https?$/i,ps=["POST","PUT"];function ds(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.J=!1,e.c=!0,e.a=(e.D||xo).a(),e.C=e.D?qo(e.D):qo(xo),e.a.onreadystatechange=m(e.Wb,e);try{rs(e.b,Ts(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){return rs(e.b,Ts(e,"Error opening Xhr: "+t.message)),void vs(e,t)}t=r||"";var o,s=new _n(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)U(t,e,void 0);else for(var n=bn(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=gs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!K(ps,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{_s(e),0<e.g&&(e.u=(o=e.a,Bt&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),rs(e.b,Ts(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=vn(e.Ma,e.g,e)),rs(e.b,Ts(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){rs(e.b,Ts(e,"Send error: "+t.message)),vs(e,t)}}function gs(t){return"content-type"==t.toLowerCase()}function vs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ys(t),bs(t)}function ys(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ms(e){if(e.c&&void 0!==h)if(e.C[1]&&4==ws(e)&&2==Is(e))rs(e.b,Ts(e,"Local request error detected and ignored"));else if(e.i&&4==ws(e))vn(e.Wb,0,e);else if(e.dispatchEvent("readystatechange"),4==ws(e)){rs(e.b,Ts(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=Is(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(Tn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!fs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<ws(e)?e.a.statusText:""}catch(t){rs(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Is(e)+"]",ys(e)}}finally{bs(e)}}}function bs(e,t){if(e.a){_s(e);var n=e.a,r=e.C[0]?s:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Yo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function ws(t){return t.a?t.a.readyState:0}function Is(t){try{return 2<ws(t)?t.a.status:-1}catch(t){return-1}}function Ts(t,e){return e+" ["+t.P+" "+t.l+" "+Is(t)+"]"}function Es(t){var e=Ls;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ss(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function ks(t){if(t.a){if(!t.v)throw new Rs;t.v=!1}}function Cs(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function As(t){return B(t.g,function(t){return g(t[1])})}function Ns(e){var n;e.h&&e.a&&As(e)&&(r=e.h,(n=Ds[r])&&(l.clearTimeout(n.a),delete Ds[r]),e.h=0),e.b&&(e.b.l--,delete e.b);for(var r=e.c,t=n=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,r);void 0!==a&&(e.f=e.f&&(a==r||a instanceof Error),e.c=r=a),(N(r)||"function"==typeof l.Promise&&r instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){r=t,e.f=!0,As(e)||(n=!0)}}e.c=r,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),r instanceof Es?(Cs(r,a,t),r.C=!0):r.then(a,t)),n&&(r=new Os(r),Ds[r.a]=r,e.h=r.a)}function Rs(){R.call(this)}function Ps(){R.call(this)}function Os(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=hs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",rs(this.b,Ts(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(rs(this.b,Ts(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),bs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),bs(this,!0)),hs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ms(this):this.Jc())},t.Jc=function(){ms(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ls:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Yo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return rs(this.b,"Can not get response: "+t.message),null}},Es.prototype.cancel=function(t){var e;this.a?this.c instanceof Es&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ps,ks(this),Ss(this,!1,t)))},Es.prototype.m=function(t,e){this.i=!1,Ss(this,t,e)},Es.prototype.then=function(t,e,n){var r,i,o=new fe(function(t,e){r=t,i=e});return Cs(this,r,function(t){t instanceof Ps?o.cancel():i(t)}),o.then(t,e,n)},Es.prototype.$goog_Thenable=!0,_(Rs,R),Rs.prototype.message="Deferred has already fired",Rs.prototype.name="AlreadyCalledError",_(Ps,R),Ps.prototype.message="Deferred was canceled",Ps.prototype.name="CanceledError",Os.prototype.c=function(){throw delete Ds[this.a],this.b};var Ds={};function xs(t){var e=document,n=_t(t).toString(),r=se(document,"SCRIPT"),i={Xb:r,Ma:void 0},o=new Es(i),s=window.setTimeout(function(){Ms(r,!0);var t=new Us(js,"Timeout reached for loading script "+n);ks(o),Ss(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ms(r,!1,s),ks(o),Ss(o,!0,null))},r.onerror=function(){Ms(r,!0,s);var t=new Us(Fs,"Error while loading script "+n);ks(o),Ss(o,!1,t)},lt(i={},{type:"text/javascript",charset:"UTF-8"}),ee(r,i),i=t,ft(t=r,"HTMLScriptElement"),t.src=_t(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):a=null===a?f(l.document):a)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Ls(){var t;this&&this.Xb&&((t=this.Xb)&&"SCRIPT"==t.tagName&&Ms(t,!0,this.Ma))}function Ms(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Fs=0,js=1;function Us(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),R.call(this,n),this.code=t}function qs(t){this.f=t}function Vs(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ws,this.g=ct(t.secureTokenHeaders||Hs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||zs,this.a=ct(t.firebaseHeaders||Gs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Jl.INTERNAL.node&&Jl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new is(self):fr()?this.f=new qs(n):this.f=new Ko,this.b=null}_(Us,R),_(qs,Uo),qs.prototype.a=function(){return new this.f},qs.prototype.b=function(){return{}};var Bs,Ks="idToken",Ws=new Pr(3e4,6e4),Hs={"Content-Type":"application/x-www-form-urlencoded"},zs=new Pr(3e4,6e4),Gs={"Content-Type":"application/json"};function Qs(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ys(t,e){e&&(t.l=Xs("https://securetoken.googleapis.com/v1/token",e),t.h=Xs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Xs("https://identitytoolkit.googleapis.com/v2/",e))}function Xs(t,e){return t=Rn(t),e=Rn(e.url),t.f=t.a+t.f,Sn(t,e.c),t.a=e.a,kn(t,e.g),t.toString()}function $s(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){var a;(t=((a=gr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Bt&&Jt&&!(9<Jt))&&!hr()?(Bs=Bs||new fe(function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(l[ta]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(t,e){Cs(t,null,e,void 0)}(xs(wt(Zs,{onload:ta})),function(){r(Error("CORS_UNSUPPORTED"))}))}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,s)}Vs.prototype.T=function(){return this.b},Vs.prototype.u=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new hs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return rs(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),ds(a,t,e,r,i)};var Zs=new pt(yt,"https://apis.google.com/js/client.js?onload=%{onload}"),ta="__fcb"+Math.floor(1e6*Math.random()).toString();function ea(t,e,n,r,i,o,s){var a=Rn(e+n);An(a,"key",t.c),s&&An(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new fe(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Xa(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Qn(kr(i)),t.a,t.v.get())})}function na(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new I("invalid-email")}function ra(t){"email"in t&&na(t)}function ia(t){if(!t[Ks]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ct(t));throw new I("internal-error")}}function oa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}Vs.prototype.s=function(t,n,r,i,o){var s=this;Bs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Vs.prototype.Ab=function(){return Qa(this,Ma,{})},Vs.prototype.Cb=function(t,e){return Qa(this,xa,{idToken:t,email:e})},Vs.prototype.Db=function(t,e){return Qa(this,La,{idToken:t,password:e})};var sa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function aa(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function ua(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ca(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Wn(t=new qn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ha(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=jo(t)):t.errorMessage&&(e=Ya(t.errorMessage)),e)throw e;ia(t)}function la(t,e){return e.returnIdpCredential=!0,Qa(t,Ua,e)}function fa(t,e){return e.returnIdpCredential=!0,Qa(t,Va,e)}function pa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Qa(t,qa,e)}function da(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=Vs.prototype).Eb=function(t,r){var i={idToken:t},o=[];return at(sa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Qa(this,xa,i)},t.wb=function(t,e){return lt(t={requestType:"PASSWORD_RESET",email:t},e),Qa(this,Na,t)},t.xb=function(t,e){return lt(t={requestType:"EMAIL_SIGNIN",email:t},e),Qa(this,ka,t)},t.vb=function(t,e){return lt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Qa(this,Ca,t)},t.Fb=function(t,e,n){return lt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Qa(this,Aa,t)},t.gb=function(t){return Qa(this,Wa,t)},t.ob=function(t,e){return Qa(this,Oa,{oobCode:t,newPassword:e})},t.Sa=function(t){return Qa(this,va,{oobCode:t})},t.kb=function(t){return Qa(this,ga,{oobCode:t})};var ga={endpoint:"setAccountInfo",A:da,Z:"email",B:!0},va={endpoint:"resetPassword",A:da,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},B:!0},ya={endpoint:"signupNewUser",A:function(t){if(na(t),!t.password)throw new I("weak-password")},G:ia,V:!0,B:!0},ma={endpoint:"createAuthUri",B:!0},ba={endpoint:"deleteAccount",O:["idToken"]},_a={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},wa={endpoint:"emailLinkSignin",O:["email","oobCode"],A:na,G:ia,V:!0,B:!0},Ia={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:na,G:ia,V:!0},Ta={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:aa,G:ia,B:!0,Na:!0},Ea={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:aa,G:ia,B:!0,Na:!0},Sa={endpoint:"getAccountInfo"},ka={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");na(t)},Z:"email",B:!0},Ca={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Aa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");na(t)},Z:"email",B:!0},Ra={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Pa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Oa={endpoint:"resetPassword",A:da,Z:"email",B:!0},Da={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},xa={endpoint:"setAccountInfo",O:["idToken"],A:ra,V:!0},La={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(ra(t),!t.password)throw new I("weak-password")},G:ia,V:!0},Ma={endpoint:"signupNewUser",G:ia,V:!0,B:!0},Fa={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},ja={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Ua={endpoint:"verifyAssertion",A:ua,Za:ca,G:ha,V:!0,B:!0},qa={endpoint:"verifyAssertion",A:ua,Za:ca,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Ya(t.errorMessage);ia(t)},V:!0,B:!0},Va={endpoint:"verifyAssertion",A:function(t){if(ua(t),!t.idToken)throw new I("internal-error")},Za:ca,G:ha,V:!0},Ba={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:ia,V:!0,B:!0},Ka={endpoint:"verifyPassword",A:function(t){if(na(t),!t.password)throw new I("wrong-password")},G:ia,V:!0,B:!0},Wa={endpoint:"verifyPhoneNumber",A:oa,G:ia,B:!0},Ha={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");oa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",jo(t);ia(t)}},za={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:oa,G:ia,B:!0},Ga={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ks]^!!t.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function Qa(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.O))return _e(new I("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return be(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ea(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)}).then(function(t){return r=t,e.Za?e.Za(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Ya(t){return Xa({error:{errors:[{message:t}],code:400,message:t}})}function Xa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",lt(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return new I("internal-error",e=!e&&t?Sr(t):e)}function $a(t){var o;this.b=t,this.a=null,this.sb=(o=this,(eu=eu||new fe(function(t,e){function n(){Rr(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Rr(),e(Error("Network Error"))},timeout:Za.get()})}var r;br("gapi.iframes.Iframe")?t():br("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},be(xs(r=wt(Ja,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw eu=null,t})).then(function(){return new fe(function(r,i){br("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},tu.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ja=new pt(yt,"https://apis.google.com/js/api.js?onload=%{onload}"),Za=new Pr(3e4,6e4),tu=new Pr(5e3,15e3),eu=null;function nu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Pn((t=Rn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Pn("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function ru(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function iu(t){try{return Jl.app(t).auth().Ga()}catch(t){return[]}}function ou(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function su(t){var a=tr();return Qa(t,Ra,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=Rn(a)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?Rn(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Mo(tr())})}function au(i){return i.m||(i.m=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=iu(i.b),(r=new nu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=G(n||[]),i.u=r.toString()),i.v=new $a(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then(function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Oo(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",be(e)}return e.status="ERROR",be(e)})}(i)}),i.m)}function uu(t){return t.l||(t.C=t.c?yr(t.c,iu(t.b)):null,t.l=new Vs(t.g,A(t.i),t.C),t.f&&Ys(t.l,t.f)),t.l}function cu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new ru(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ct(u||null),t.f=c,t.zb(h).toString()}function hu(t){if(this.a=t||Jl.INTERNAL.reactNative&&Jl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function lu(t){this.b=t,this.a={},this.f=m(this.c,this)}nu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Kn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):Kn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Kn(this.a.b,"fw"),this.a.toString()},ru.prototype.zb=function(t){return this.h=t,this},ru.prototype.toString=function(){var t;if(An(t=this.v?Pn((t=Rn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Pn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(t,"appName",this.c),An(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Jl.app(this.c).auth().la()}catch(t){n=null}for(r in e.pb=n,An(t,"providerId",this.a.providerId),e=kr((n=this.a).Jb))e[r]=e[r].toString();for(var r=n.Qc,e=ct(e),i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ut(e)||An(t,"customParameters",Sr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&An(t,"scopes",n.join(","))),this.l?An(t,"redirectUrl",this.l):Kn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):Kn(t.b,"eventId"),this.i?An(t,"v",this.i):Kn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Nn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Kn(t.b,"tid"),this.f?An(t,"eid",this.f):Kn(t.b,"eid"),(s=iu(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=ou.prototype).Pb=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},au(t=o).then(function(){return e=t.v,n=r,e.sb.then(function(){return new fe(function(t){e.a.send(n.type,n,t,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new fe(function(e){return function t(){yn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return yn(t).then(function(){n(r)})})},t.Yb=function(){var t=mr();return!Er(t)&&!Nr(t)},t.Ub=function(){return!1},t.Nb=function(e,t,n,r,i,o,s,a){if(!e)return _e(new I("popup-blocked"));if(s&&!Er())return this.ma().o(function(t){rr(e),i(t)}),r(),be();this.a||(this.a=su(uu(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){Ro(n),s||er(cu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Ob=function(t,e,n,r){this.a||(this.a=su(uu(this)));var i=this;return this.a.then(function(){Ro(e),er(cu(i.s,i.g,i.b,t,e,tr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return au(this).then(function(){return t.v.sb}).o(function(){throw t.a=null,new I("network-request-failed")})},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(e){H(this.h,function(t){return t==e})},(t=hu.prototype).get=function(t){return be(this.a.getItem(t)).then(function(t){return t&&Cr(t)})},t.set=function(t,e){return be(this.a.setItem(t,Sr(e)))},t.U=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var fu,pu=[];function du(t,e,n){ut(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function gu(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return _e(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new fe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return mu(r,c),t}).o(function(t){throw mu(r,c),t})}function mu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function bu(){if(!Tu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,U(pu,function(t){t.b==n&&(e=t)}),e||(e=new lu(n),pu.push(e)),e),du(this.v,"keyChanged",function(t,n){return Au(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:K(e,n.key)}})}),du(this.v,"ping",function(){return be(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?be().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):be(null)).then(function(t){(r.h=t)&&(r.g=new vu(new gu(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function _u(i){return new fe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new fe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return _u(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function wu(t){return t.i||(t.i=_u(t)),t.i}function Iu(i,t){var o=0;return new fe(function e(n,r){wu(i).then(t).then(n).o(function(t){return 3<++o?void r(t):wu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Tu(){try{return l.indexedDB}catch(t){return}}function Eu(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ku(t){return new fe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):be();var n}function Au(r){return wu(r).then(function(t){var i=Eu(Su(t,!1));return i.getAll?ku(i.getAll()):new fe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Nu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Ru(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then(function(){if(Tu()){var e=Ar(),n="__sak"+e;return fu=fu||new bu,(i=fu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){U(r.a,function(t){t(e)})}),t})}function Pu(){this.a={},this.type="inMemory"}function Ou(){if(!function(){var t="Node"==lr();if(!(t=Du()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Du()||Jl.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==lr();if(!(t=Mu()||t&&Jl.INTERNAL.node&&Jl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Mu()||Jl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Fu(){var t={};t.Browser=qu,t.Node=Vu,t.ReactNative=Bu,t.Worker=Ku,this.a=t[lr()]}lu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(be().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},gu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)mu(this,this.a[0]);this.b=!0},(t=bu.prototype).set=function(r,i){var o=this,s=!1;return Iu(this,function(t){return ku((t=Eu(Su(t,!0))).get(r))}).then(function(n){return Iu(o,function(t){if(t=Eu(Su(t,!0)),n)return n.value=i,ku(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,ku(t.add(e))})}).then(function(){return o.c[r]=i,Cu(o,r)}).oa(function(){s&&o.b--})},t.get=function(e){return Iu(this,function(t){return ku(Eu(Su(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return Iu(this,function(t){return r=!0,n.b++,ku(Eu(Su(t,!0)).delete(e))}).then(function(){return delete n.c[e],Cu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Nu(n=this),function e(){n.f=setTimeout(function(){n.l=Au(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&Nu(this)},(t=Ru.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e})},(t=Pu.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.U=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=Ou.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ze(l.window,"storage",t)},t.ia=function(t){l.window&&nn(l.window,"storage",t)},(t=xu.prototype).get=function(){return be(null)},t.set=function(){return be()},t.U=function(){return be()},t.ca=function(){},t.ia=function(){},(t=Lu.prototype).get=function(t){var e=this;return be().then(function(){return Cr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var ju,Uu,qu={F:Ou,cb:Lu},Vu={F:Ou,cb:Lu},Bu={F:hu,cb:xu},Ku={F:Ou,cb:xu},Wu={rd:"local",NONE:"none",td:"session"};function Hu(){var t=!(Nr(mr())||!cr()),e=Er(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},t=ju=ju||new Fu;try{this.g=!Zn()&&Lr()||!l.indexedDB?new t.a.F:new Ru(new(hr()?Pu:t.a.F))}catch(t){this.g=new Pu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Pu}this.v=new Pu,this.f=m(this.Zb,this),this.b={}}function zu(){return Uu=Uu||new Hu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Yu(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).U(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function $u(t){this.a=t,this.b=zu()}(t=Hu.prototype).get=function(t,e){return Gu(this,t.F).get(Qu(t,e))},t.set=function(e,t,n){var r=Qu(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Qu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ut(this.a)&&(Gu(this,"local").ca(this.f),this.h||(Zn()||!Lr())&&l.indexedDB||!this.l||(Xu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Zb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ut(this.a)&&(Gu(this,"local").ia(this.f),Xu(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ia(this.f):Xu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.nb(e))};Bt&&Jt&&10==Jt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.nb,this))},t.nb=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Ju,Zu={name:"authEvent",F:"local"};function tc(){this.a=zu()}function ec(t,e){this.b=nc,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ju&&(Ju=l.Int32Array?new Int32Array(cc):cc),this.reset()}_(ec,function(){this.b=-1});for(var nc=64,rc=nc-1,ic=[],oc=0;oc<rc;oc++)ic[oc]=0;var sc=z(128,ic);function ac(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){var i=0|n[e-15],r=0|n[e-2],o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ju[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function uc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ac(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ac(t),i=0)}}t.c=i,t.g+=n}ec.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):G(this.h)};var cc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){ec.call(this,8,lc)}_(hc,ec);var lc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function fc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new tc,this.g=new $u(this.h),this.f=null,this.b=[],this.a=this.c=null}function pc(t){return new I("invalid-cordova-configuration",t)}function dc(t){var e=new hc;uc(e,t),t=[];var n=8*e.g;e.c<56?uc(e,sc,56-e.c):uc(e,sc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ac(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function gc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function vc(a){return a.f||(a.f=a.ma().then(function(){return new fe(function(n){function e(r){t=!0,s&&s.cancel(),yc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,n=(e=-1!=(n=Yi(r.url)).indexOf("/__/auth/callback")?(e="object"==typeof(e=Cr(Nn(e=Rn(n),"firebaseError")||null))?T(e):null)?new Po(t.c,t.b,null,null,e,null,t.T()):new Po(t.c,t.b,n,t.f,null,null,t.T()):e)||o),gc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Ta(t),!1}),i=a,o=new Po("unknown",null,null,null,new I("no-auth-event")),t=!1,s=yn(500).then(function(){return yc(i).then(function(){t||gc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Lo=Lo||new Do,function(t){var n=Lo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=br("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function yc(e){var t,n=null;return(t=e.g).b.get(Zu,t.a).then(Oo).then(function(t){return n=t,Yu((t=e.g).b,Zu,t.a)}).then(function(){return n})}function mc(t){this.a=t,this.b=zu()}(t=fc.prototype).ma=function(){return this.Ia||(this.Ia=(ur(void 0)?ar().then(function(){return new fe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):_e(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof br("universalLinks.subscribe",l))throw pc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",l))throw pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",l))throw pc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",l))throw pc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")}))},t.Pb=function(t,e){return e(new I("operation-not-supported-in-this-environment")),be()},t.Nb=function(){return _e(new I("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return _e(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=be().then(function(){return Ro(e),vc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Po(t,r,null,o,new I("no-auth-event"),null,i),a=br("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=br("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return _e(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=dc(o),c.sessionId=o;var h=cu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set(Zu,s.w(),t)}).then(function(){var t=br("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=br("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=br("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new fe(function(e,t){a=function(){var t=br("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||yn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){Or()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return yc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ta(a),i.c=null})},t.Ea=function(e){this.b.push(e),vc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Po("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Ta=function(e){H(this.b,function(t){return t==e})};var bc={name:"pendingRedirect",F:"session"};function _c(t){return Yu(t.b,bc,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Mc,this.C=new Vc,this.g=new mc(xc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ic(this.D,this.v,this.m,E,this.J)}function Ic(t,e,n,r,i){var o=Jl.SDK_VERSION||null;return new(ur()?fc:ou)(t,e,n,o,r,i)}function Tc(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Ec(n){n.a.Yb()&&Tc(n).o(function(t){var e=new Po("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Rc(t)&&n.s(e)}),n.a.Ub()||Fc(n.b)}function Sc(n,t){K(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(bc,t.a).then(function(t){return"pending"==t}).then(function(t){t?_c(n.g).then(function(){Tc(n).o(function(t){var e=new Po("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));Rc(t)&&n.s(e)})}):Ec(n)}).o(function(){Ec(n)})}function kc(t,e){H(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Ic(this.D,this.v,this.m,null,this.J),this.i={}},wc.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Fc(this.b),e};var Cc=new Pr(2e3,1e4),Ac=new Pr(3e4,6e4);function Nc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Rc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Pc(e,t,n,r,i){var o,s;return(s=e.g).b.set(bc,"pending",s.a).then(function(){return e.a.Ob(t,n,r,i).o(function(t){if(Rc(t))throw new I("operation-not-supported-in-this-environment");return o=t,_c(e.g).then(function(){throw o})}).then(function(){return e.a.ac()?new fe(function(){}):_c(e.g).then(function(){return e.ra()}).then(function(){}).o(function(){})})})}function Oc(t,e,n,r,i){return t.a.Pb(r,function(t){e.na(n,null,t,i)},Cc.get())}wc.prototype.ra=function(){return this.b.ra()};var Dc={};function xc(t,e,n){return t=t+":"+e,t=n?t+":"+n.url:t}function Lc(t,e,n,r){var i=xc(e,n,r);return Dc[i]||(Dc[i]=new wc(t,e,n,r)),Dc[i]}function Mc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Fc(t){t.g||(t.g=!0,qc(t,!1,null,null))}function jc(t){t.g&&!t.i&&qc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return _e(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function Vc(){}function Bc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Kc(t,e){this.a=e,qr(this,"verificationId",t)}function Wc(t,e,n,r){return new Co(t).gb(e,n).then(function(t){return new Kc(t,r)})}function Hc(t){var e=Li(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:t,expirationTime:xr(1e3*e.exp),authTime:xr(1e3*e.auth_time),issuedAtTime:xr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function zc(t,e,n){var r=e&&e[Qc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ct(e),this.g=n,this.c=new Xi(null,r),this.b=[];var i=this;U(e[Gc]||[],function(t){(t=Hr(t))&&i.b.push(t)}),qr(this,"auth",this.a),qr(this,"session",this.c),qr(this,"hints",this.b)}Mc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Mc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(qc(this,!0,null,t.a),be()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){qc(e,a,t,null)}).o(function(t){qc(e,a,null,t)})}(this,t,e):_e(new I("invalid-auth-event")):(qc(this,!1,null,null),be())):_e(new I("invalid-auth-event"))},Mc.prototype.ra=function(){var i=this;return new fe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=yn(Ac.get()).then(function(){n.b||(n.g=!0,qc(n,!0,null,r))}))})},Vc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(s,t,null,o)}).o(function(t){i.na(s,null,t,o)})):_e(new I("invalid-auth-event"))):_e(new I("invalid-auth-event"))},Kc.prototype.confirm=function(t){return t=Ao(this.verificationId,t),this.a(t)};var Gc="mfaInfo",Qc="mfaPendingCredential";function Yc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new zc(t,e,n),qr(this,"resolver",this.b)}function Xc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yc(e,t.serverResponse,n,t.message)}catch(t){}return null}function $c(){}function Jc(t){qr(this,"factorId",t.fa),this.a=t}function Zc(t){if(Jc.call(this,t),this.a.fa!=Co.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function th(t,e){for(var n in Ve.call(this,t),e)this[n]=e[n]}function eh(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Qr]=t.uid),t.displayName&&(n[zr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Yr]=t.phoneNumber);try{e=new Xr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),nh(this,r)}function nh(t,e){t.b=e,qr(t,"enrolledFactors",e)}function rh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function ih(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function oh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function sh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function ah(t,e){t.b=xi(e[Ks]||""),t.a=e.refreshToken,sh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function uh(e,t){return r=e.f,i=t,new fe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Js(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Xa(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new I("internal-error"))}).then(function(t){return e.b=xi(t.access_token),e.a=t.refresh_token,sh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function ch(t,e){this.a=t||null,this.b=e||null,Vr(this,{lastSignInTime:xr(e||null),creationTime:xr(t||null)})}function hh(t,e,n,r,i,o){Vr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function lh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Jl.SDK_VERSION?yr(Jl.SDK_VERSION):null;this.a=new Vs(this.l,A(E),i),(this.u=t.emulatorConfig||null)&&Ys(this.a,this.u),this.h=new oh(this.a),_h(this,e[Ks]),ah(this.h,e),qr(this,"refreshToken",this.h.a),Th(this,n||{}),fn.call(this),this.P=!1,this.s&&wr()&&(this.b=Lc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=(r=this,new rh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.h.c-Date.now()-3e5;return 0<t?t:0})),this.ba=m(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){fh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){gh(o,t.f)},this.ja=null,this.S=new eh(this,n),qr(this,"multiFactor",this.S)}function fh(t,e){t.u=e,Ys(t.a,e),t.b&&(e=t.b,t.b=Lc(t.s,t.l,t.m,t.u),t.P&&(kc(e,t),Sc(t.b,t)))}function ph(t,e){t.qa&&nn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&Ze(e,"languageCodeChanged",t.Pa)}function dh(t,e){t.$&&nn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&Ze(e,"emulatorConfigChanged",t.Ba)}function gh(t,e){t.aa=e,$s(t.a,Jl.SDK_VERSION?yr(Jl.SDK_VERSION,t.aa):null)}function vh(t,e){t.ja&&nn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&Ze(e,"frameworkChanged",t.Oa)}function yh(e){try{return Jl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function mh(t){t.J||t.D.b||(t.D.start(),nn(t,"tokenChanged",t.ba),Ze(t,"tokenChanged",t.ba))}function bh(t){nn(t,"tokenChanged",t.ba),t.D.stop()}function _h(t,e){t.Aa=e,qr(t,"_lat",e)}function wh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ie(e).then(function(){return t})}function Ih(t){t.b&&!t.P&&(t.P=!0,Sc(t.b,t))}function Th(t,e){Vr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new ch(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Eh(){}function Sh(t){return be().then(function(){if(t.J)throw new I("app-deleted")})}function kh(t){return V(t.providerData,function(t){return t.providerId})}function Ch(t,e){e&&(Ah(t,e.providerId),t.providerData.push(e))}function Ah(t,e){H(t.providerData,function(t){return t.providerId==e})}function Nh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&qr(t,e,n)}function Rh(e,t){var n,r;e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?qr(e,"metadata",new ch((r=t.metadata).a,r.b)):qr(e,"metadata",new ch),U(t.providerData,function(t){Ch(e,t)}),n=e.h,r=t.h,n.b=r.b,n.a=r.a,n.c=r.c,qr(e,"refreshToken",e.h.a),nh(e.S,t.S.b))}function Ph(r){return r.I().then(function(t){var e,n=r.isAnonymous;return Qa((e=r).a,Sa,{idToken:t}).then(m(e.Kc,e)).then(function(){return n||Nh(r,"isAnonymous",!1),t})})}function Oh(t,e){e[Ks]&&t.Aa!=e[Ks]&&(ah(t.h,e),t.dispatchEvent(new th("tokenChanged")),_h(t,e[Ks]),Nh(t,"refreshToken",t.h.a))}function Dh(t,e){return Ph(t).then(function(){if(K(kh(t),e))return wh(t).then(function(){throw new I("provider-already-linked")})})}function xh(t,e,n){return Br({user:t,credential:No(e),additionalUserInfo:e=qi(e),operationType:n})}function Lh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function Mh(n,r,t,e,i){if(!wr())return _e(new I("operation-not-supported-in-this-environment"));if(n.i&&!i)return _e(n.i);var o=Ui(t.providerId),s=Ar(n.uid+":::"),a=null,u=ir(a=(!Er()||cr())&&n.s&&t.isOAuthProvider?cu(n.s,n.l,n.m,r,t,null,s,Jl.SDK_VERSION||null,null,null,n.tenantId,n.u):a,o&&o.va,o&&o.ua);return e=e().then(function(){if(jh(n),!i)return n.I().then(function(){})}).then(function(){return Nc(n.b,u,r,t,s,!!a,n.tenantId)}).then(function(){return new fe(function(t,e){n.na(r,null,new I("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=s,n.c=Oc(n.b,n,r,u,s)})}).then(function(t){return u&&rr(u),t?Br(t):null}).o(function(t){throw u&&rr(u),t}),Uh(n,e,i)}function Fh(e,t,n,r,i){if(!wr())return _e(new I("operation-not-supported-in-this-environment"));if(e.i&&!i)return _e(e.i);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(jh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,wh(e)}).then(function(t){return t=e.ha?(t=e.ha).b.set(Bh,e.w(),t.a):t}).then(function(){return Pc(e.b,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return Kh(e.ha);throw o}).then(function(){if(o)throw o}),Uh(e,r,i)}function jh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Uh(n,t,e){var r,i=(t=t,e=e,(r=n).i&&!e?(t.cancel(),_e(r.i)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.i||r.dispatchEvent(new th("userInvalidated")),r.i=t),t}));return n.N.push(i),i.oa(function(){W(n.N,i)}),i.o(function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Xc(t.w(),yh(n),m(n.jc,n)):e)||t})}function qh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ks]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new lh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Ch(i,Br(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Vh(t){this.a=t,this.b=zu()}zc.prototype.Rc=function(t){var n=this;return t.tb(this.a.a,this.c).then(function(t){var e=ct(n.f);return delete e[Gc],delete e[Qc],lt(e,t),n.g(e)})},_(Yc,I),$c.prototype.tb=function(t,e,n){return e.type==$i?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),lt(t,{phoneVerificationInfo:ko(o.a)}),Qa(s,Ta,t)})):(r=this,i=t,e.Ha().then(function(t){return lt(t={mfaPendingCredential:t},{phoneVerificationInfo:ko(r.a)}),Qa(i,Ea,t)}));var r,i,o,s,a},_(Jc,$c),_(Zc,Jc),_(th,Ve),(t=eh.prototype).yc=function(t){var e;nh(this,(t=t.hd,e=[],U(t.mfaInfo||[],function(t){(t=Hr(t))&&e.push(t)}),e))},t.Sb=function(){return this.a.I().then(function(t){return new Xi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Sb().then(function(t){return e.tb(i,t,n)}).then(function(t){return Oh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Qa(e,Ga,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return nh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.w()})}}},rh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=yn(ih(n,t)).then(Dr).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},rh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},oh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},oh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?_e(new I("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?uh(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},ch.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(lh,fn),lh.prototype.xa=function(t){this.za=t,Qs(this.a,t)},lh.prototype.la=function(){return this.za},lh.prototype.Ga=function(){return G(this.aa)},lh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},qr(lh.prototype,"providerId","firebase"),(t=lh.prototype).reload=function(){var t=this;return Uh(this,Sh(this).then(function(){return Ph(t).then(function(){return wh(t)}).then(Eh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Hc(t)})},t.I=function(t){var e=this;return Uh(this,Sh(this).then(function(){return e.h.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.Aa&&(_h(e,t.accessToken),e.dispatchEvent(new th("tokenChanged"))),Nh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");Th(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new hh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ch(this,n[r]);Nh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new th("userReloaded",{hd:t}))},t.Lc=function(t){return jr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Uh(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=xh(e,t,"reauthenticate"),e.i=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return jr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(e){var n=this,r=null;return Uh(this,Dh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=xh(n,t,"link"),Lh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Uh(this,Dh(this,"phone").then(function(){return Wc(yh(n),t,e,m(n.rb,n))}))},t.Mc=function(t,e){var n=this;return Uh(this,be().then(function(){return Wc(yh(n),t,e,m(n.ub,n))}),!0)},t.Cb=function(e){var n=this;return Uh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.ed=function(e){var n=this;return Uh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.Db=function(e){var n=this;return Uh(this,this.I().then(function(t){return n.a.Db(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.Eb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Sh(this);var n=this;return Uh(this,this.I().then(function(t){return n.a.Eb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Nh(n,"displayName",t.displayName||null),Nh(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(qr(t,"displayName",n.displayName),qr(t,"photoURL",n.photoURL))}),wh(n)}).then(Eh))},t.cd=function(e){var n=this;return Uh(this,Ph(this).then(function(t){return K(kh(n),e)?Qa(n.a,_a,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(kh(n),function(t){e[t]||Ah(n,t)}),e[Co.PROVIDER_ID]||qr(n,"phoneNumber",null),wh(n)}):wh(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Uh(this,this.I().then(function(t){return Qa(e.a,ba,{idToken:t})}).then(function(){e.dispatchEvent(new th("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");ph(e,null),dh(e,null),vh(e,null),e.N=[],e.J=!0,bh(e),qr(e,"refreshToken",null),e.b&&kc(e.b,e)})},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Mb,this):null},t.Ec=function(t){var e=this;return Mh(this,"linkViaPopup",t,function(){return Dh(e,t.providerId).then(function(){return wh(e)})},!1)},t.Nc=function(t){return Mh(this,"reauthViaPopup",t,function(){return be()},!0)},t.Fc=function(t){var e=this;return Fh(this,"linkViaRedirect",t,function(){return Dh(e,t.providerId)},!1)},t.Oc=function(t){return Fh(this,"reauthViaRedirect",t,function(){return be()},!0)},t.Lb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return fa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=xh(i,t,"link"),Lh(i,t)}).then(function(){return o}),Uh(this,t)},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Uh(this,be().then(function(){return to(pa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=xh(i,t,"reauthenticate"),Oh(i,t),i.i=null,i.reload()}).then(function(){return o}),!0)},t.vb=function(e){var n=this,r=null;return Uh(this,this.I().then(function(t){return r=t,void 0===e||ut(e)?{}:Ri(new _i(e))}).then(function(t){return n.a.vb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Fb=function(e,n){var r=this,i=null;return Uh(this,this.I().then(function(t){return i=t,void 0===n||ut(n)?{}:Ri(new _i(n))}).then(function(t){return r.a.Fb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Uh(this,t=to(be(t),n.uid).then(function(t){return e=xh(n,t,"reauthenticate"),Oh(n,t),n.i=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&lt(e,this.metadata.w()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),lt(e,this.S.w()),e};var Bh={name:"redirectUser",F:"session"};function Kh(t){return Yu(t.b,Bh,t.a)}function Wh(t){var e,n,r,i;this.a=t,this.b=zu(),this.c=null,this.f=(n=Gh("local"),r=Gh("session"),i=Gh("none"),function(n,r,i){var o=Qu(r,i),s=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Cr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(zh,e.a).then(function(t){return t?Gh(t):n})})})}).then(function(t){return e.c=t,Hh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Gh("local"),this.a,m(this.g,this))}function Hh(t,e){var n,a,r=[];for(n in Wu)Wu[n]!==e&&r.push(Yu(t.b,Gh(Wu[n]),t.a));return r.push(Yu(t.b,zh,t.a)),a=r,new fe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)we(a[s],b(t,s),o);else n(i)})}Wh.prototype.g=function(){var e=this,n=Gh("local");$h(this,function(){return be().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Hh(e,"local").then(function(){e.c=n})})})};var zh={name:"persistence",F:"session"};function Gh(t){return{name:"authUser",F:t}}function Qh(t,e){return $h(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Yh(t){return $h(t,function(){return Yu(t.b,t.c,t.a)})}function Xh(t,e,n){return $h(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),qh(t||{})})})}function $h(t,e){return t.f=t.f.then(e,e),t.f}function Jh(t){if(this.l=!1,qr(this,"settings",new Bc),qr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s;t=Jl.SDK_VERSION?yr(Jl.SDK_VERSION):null,this.a=new Vs(this.app.options&&this.app.options.apiKey,A(E),t),this.P=[],this.s=[],this.N=[],this.Pa=Jl.INTERNAL.createSubscribe(m(this.zc,this)),this.W=void 0,this.ib=Jl.INTERNAL.createSubscribe(m(this.Ac,this)),ol(this,null),this.i=new Wh(this.app.options.apiKey+":"+this.app.name),this.D=new Vh(this.app.options.apiKey+":"+this.app.name),this.$=hl(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(Bh,t.a).then(function(t){return t&&e&&(t.authDomain=e),qh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),Kh(e.D)});return hl(e,t)}(n).then(function(){return Xh(n.i,e,n.R)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Qh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Yh(n.i)})):null}).then(function(t){ol(n,t||null)}),hl(n,t))),this.h=hl(this,(r=this).$.then(function(){return rl(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(Gh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.qa=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=Lc(o,s,i.app.name,i.R),Sc(i.b,i),al(i)&&Ih(al(i)),i.m&&(Ih(i.m),(t=i.m).xa(i.la()),ph(t,i),gh(t=i.m,i.J),vh(t,i),fh(t=i.m,i.R),dh(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,fn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.R?Br({protocol:(t=Rn(this.R.url)).c,host:t.a,port:t.g,options:Br({disableWarnings:this.R.ec})}):null},enumerable:!1}),this.J=[],this.R=null}function Zh(t){Ve.call(this,"languageCodeChanged"),this.h=t}function tl(t){Ve.call(this,"emulatorConfigChanged"),this.c=t}function el(t){Ve.call(this,"frameworkChanged"),this.f=t}function nl(t){return t.Oa||_e(new I("auth-domain-config-required"))}function rl(t){if(!wr())return _e(new I("operation-not-supported-in-this-environment"));var e=nl(t).then(function(){return t.b.ra()}).then(function(t){return t?Br(t):null});return hl(t,e)}function il(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.R&&(a.emulatorConfig=o.R),o.$.then(function(){return t=a,e=s,n=o.D,r=o.Ga(),i=new lh(t,e),n&&(i.ha=n),r&&gh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return al(o)&&t.uid==al(o).uid?Rh(al(o),t):(ol(o,t),Ih(t)),o.da(t)}).then(function(){cl(o)})}function ol(t,e){var n,r;al(t)&&(n=al(t),r=t.Ba,H(n.W,function(t){return t==r}),nn(al(t),"tokenChanged",t.qa),nn(al(t),"userDeleted",t.za),nn(al(t),"userInvalidated",t.Aa),bh(al(t))),e&&(e.W.push(t.Ba),Ze(e,"tokenChanged",t.qa),Ze(e,"userDeleted",t.za),Ze(e,"userInvalidated",t.Aa),0<t.u&&mh(e)),qr(t,"currentUser",e),e&&(e.xa(t.la()),ph(e,t),gh(e,t.J),vh(e,t),fh(e,t.R),dh(e,t))}function sl(n,t){var e=null,r=null;return hl(n,t.then(function(t){return e=No(t),r=qi(t),il(n,t)},function(t){var e=null;throw(e=t&&"auth/multi-factor-auth-required"===t.code?Xc(t.w(),n,m(n.kc,n)):e)||t}).then(function(){return Br({user:al(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function al(t){return t.currentUser}function ul(t){return al(t)&&al(t)._lat||null}function cl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ul(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](ul(t))}}function hl(t,e){return t.P.push(e),e.oa(function(){W(t.P,e)}),e}function ll(){}function fl(){this.a={},this.b=1e12}Wh.prototype.yb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Wu)if(Wu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Tu()&&"none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(e),$h(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Hh(r,e)}).then(function(){if(r.c=Gh(e),n)return r.b.set(r.c,n,r.a)}):be()})},_(Jh,fn),_(Zh,Ve),_(tl,Ve),_(el,Ve),(t=Jh.prototype).yb=function(t){return t=this.i.yb(t),hl(this,t)},t.xa=function(t){this.aa===t||this.l||(this.aa=t,Qs(this.a,this.aa),this.dispatchEvent(new Zh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.R={url:t,ec:e},this.settings.jb=!0,Ys(this.a,this.R),this.dispatchEvent(new tl(this.R))}var n},t.Gc=function(t){this.J.push(t),$s(this.a,Jl.SDK_VERSION?yr(Jl.SDK_VERSION,this.J):null),this.dispatchEvent(new el(this.J))},t.Ga=function(){return G(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:al(this)&&al(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return sl(i,la(i.a,o))})},t.Xc=function(e){if(!wr())return _e(new I("operation-not-supported-in-this-environment"));var n=this,t=Ui(e.providerId),r=Ar(),i=null,o=ir(i=(!Er()||cr())&&this.app.options.authDomain&&e.isOAuthProvider?cu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Jl.SDK_VERSION||null,null,null,this.T(),this.R):i,t&&t.va,t&&t.ua);return hl(this,t=nl(this).then(function(t){return Nc(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new fe(function(t,e){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Oc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?Br(t):null}).o(function(t){throw o&&rr(o),t}))},t.Yc=function(t){if(!wr())return _e(new I("operation-not-supported-in-this-environment"));var e=this;return hl(this,nl(this).then(function(){return $h(t=e.i,function(){return t.b.set(zh,t.c.F,t.a)});var t}).then(function(){return Pc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.ra=function(){var e=this;return rl(this).then(function(t){return e.b&&jc(e.b.b),t}).o(function(t){throw e.b&&jc(e.b.b),t})},t.dd=function(t){if(!t)return _e(new I("null-user"));if(this.S!=t.tenantId)return _e(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.D,s=e.Ga(),a=r.h,(n={})[Ks]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new lh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),s&&gh(i,s),Rh(i,r),i);return hl(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return al(e)&&t.uid==al(e).uid?(Rh(al(e),t),e.da(t)):(ol(e,u),Ih(u),e.da(u))}).then(function(){cl(e)}))},t.Bb=function(){var t=this,e=this.h.then(function(){return t.b&&jc(t.b.b),al(t)?(ol(t,null),Yh(t.i).then(function(){cl(t)})):be()});return hl(this,e)},t.Zc=function(){var r=this;return Xh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((e=al(r)&&t)&&(e=al(r).uid,n=t.uid,e=null!=e&&""!==e&&null!=n&&""!==n&&e==n),e)return Rh(al(r),t),al(r).I();(al(r)||t)&&(ol(r,t),t&&(Ih(t),t.ha=r.D),r.b&&Sc(r.b,r),cl(r))}})},t.da=function(t){return Qh(this.i,t)},t.mc=function(){cl(this),this.da(al(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then(function(){return sl(e,be(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(al(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(al(r))},(e=this).N.push(n),hl(e,e.h.then(function(){!e.l&&K(e.N,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(ul(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(al(r)):"function"==typeof t.next&&t.next(al(r))}),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.W=r.getUid(),"function"==typeof t?t(al(r)):"function"==typeof t.next&&t.next(al(r))}),this.ib(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return al(e)?al(e).I(t).then(function(t){return{accessToken:t}}):null});return hl(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return sl(n,Qa(n.a,Ba,{token:t}))}).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return sl(n,Qa(n.a,Ka,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return sl(n,Qa(n.a,ya,{email:t,password:e}))})},t.ab=function(t){var e=this;return this.h.then(function(){return sl(e,t.ka(e.a))})},t.Sc=function(t){return jr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var n=this;return this.h.then(function(){var t=al(n);if(t&&t.isAnonymous){var e=Br({providerId:null,isNewUser:!1});return Br({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return sl(n,n.a.Ab()).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return al(this)&&al(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&al(this)&&mh(al(this))},t.Pc=function(e){var n=this;U(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&al(this)&&bh(al(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),hl(this,this.h.then(function(){e.l||K(e.s,t)&&t(ul(e))}))},t.removeAuthTokenListener=function(e){H(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Gh("local"),t.a,this.ja),this.b&&(kc(this.b,this),jc(this.b.b)),Promise.resolve()},t.hc=function(t){return hl(this,Qa(this.a,ma,{identifier:t,continueUri:Ir()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!To(t)},t.xb=function(e,n){var r=this;return hl(this,be().then(function(){var t=new _i(n);if(!t.c)throw new I("argument-error",Ti+" must be true when sending sign in link to email");return Ri(t)}).then(function(t){return r.a.xb(e,t)}).then(function(){}))},t.jd=function(t){return this.Sa(t).then(function(t){return t.data.email})},t.ob=function(t,e){return hl(this,this.a.ob(t,e).then(function(){}))},t.Sa=function(t){return hl(this,this.a.Sa(t).then(function(t){return new $r(t)}))},t.kb=function(t){return hl(this,this.a.kb(t).then(function(){}))},t.wb=function(e,t){var n=this;return hl(this,be().then(function(){return void 0===t||ut(t)?{}:Ri(new _i(t))}).then(function(t){return n.a.wb(e,t)}).then(function(){}))},t.Wc=function(t,e){return hl(this,Wc(this,t,e,m(this.ab,this)))},t.Vc=function(n,r){var i=this;return hl(this,be().then(function(){var t=r||tr(),e=Io(n,t);if(!(t=To(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new I("tenant-id-mismatch");return i.ab(e)}))},ll.prototype.render=function(){},ll.prototype.reset=function(){},ll.prototype.getResponse=function(){},ll.prototype.execute=function(){};var pl=null;function dl(t,e){return(e=gl(e))&&t.a[e]||null}function gl(t){return(t=void 0===t?1e12:t)?t.toString():null}function vl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=te(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function yl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function ml(){}function bl(){}fl.prototype.render=function(t,e){return this.a[this.b.toString()]=new vl(t,e),this.b++},fl.prototype.reset=function(t){var e=dl(this,t);t=gl(t),e&&t&&(e.delete(),delete this.a[t])},fl.prototype.getResponse=function(t){return(t=dl(this,t))?t.getResponse():null},fl.prototype.execute=function(t){(t=dl(this,t))&&t.execute()},vl.prototype.getResponse=function(){return yl(this),this.b},vl.prototype.execute=function(){yl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},vl.prototype.delete=function(){yl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},qr(ml,"FACTOR_ID","phone"),bl.prototype.g=function(){return be(pl=pl||new fl)},bl.prototype.c=function(){};var _l=null;function wl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Il=new pt(yt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Tl=new Pr(3e4,6e4);wl.prototype.g=function(i){var o=this;return new fe(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},Tl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},be(xs(wt(Il,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},wl.prototype.c=function(){this.b--};var El=null;function Sl(t,e,n,r,i,o,s){if(qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s=s?_l=_l||new bl:El=El||new wl,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Al])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Nl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!te(e)||!this.i&&te(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Vs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[kl];this.a[kl]=function(t){var e;Rl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=br(u,l))&&e(t)};var c=this.a[Cl];this.a[Cl]=function(){var t;Rl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=br(c,l))&&t()}}var kl="callback",Cl="expired-callback",Al="sitekey",Nl="size";function Rl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Pl(t,e){return t.h.push(e),e.oa(function(){W(t.h,e)}),e}function Ol(t){if(t.J)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Dl(t,e,n){var r=!1;try{this.b=n||Jl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Jl.SDK_VERSION?yr(Jl.SDK_VERSION,o):null,Sl.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,A(E),r)}function xl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Ll.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Ll[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=Sl.prototype).Ia=function(){var e=this;return this.f||(this.f=Pl(this,be().then(function(){if(Ir()&&!hr())return ar();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,Qa(e.s,Pa,{})}).then(function(t){e.a[Al]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t})))},t.render=function(){Ol(this);var n=this;return Pl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=te(e),e=oe("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Ol(this);var i=this;return Pl(this,this.render().then(function(e){return new fe(function(n){var r,t=i.g.getResponse(e);t?n(t):(i.l.push(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))}),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Ol(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ol(this),this.J=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=te(this.v);for(;t=e.firstChild;)e.removeChild(t)}},_(Dl,Sl);var Ll="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ml(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Fl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function jl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Ul(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function ql(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Vl(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function Bl(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}}function Kl(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Wl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Hl(t){return v(t)&&"string"==typeof t.uid}function zl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Gl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Ql(t,e){for(var n in e){var r=e[n].name;t[r]=$l(r,t[n],e[n].j)}}function Yl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:b(function(t){return this[t]},n),set:b(function(t,e,n,r){xl(t,[n],[r],!0),this[e]=r},r,n,e[n].lb),enumerable:!0})}}function Xl(t,e,n,r){t[e]=$l(e,n,r)}function $l(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return xl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ql(Jh.prototype,{kb:{name:"applyActionCode",j:[Ml("code")]},Sa:{name:"checkActionCode",j:[Ml("code")]},ob:{name:"confirmPasswordReset",j:[Ml("code"),Ml("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Ml("email"),Ml("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Ml("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Ml("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Gl(jl(),Ul(),"nextOrObserver"),Ul("opt_error",!0),Ul("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Gl(jl(),Ul(),"nextOrObserver"),Ul("opt_error",!0),Ul("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Ml("email"),Gl(jl("opt_actionCodeSettings",!0),ql(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Ml("email"),jl("actionCodeSettings")]},yb:{name:"setPersistence",j:[Ml("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Vl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Vl()]},Tc:{name:"signInWithCustomToken",j:[Ml("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Ml("email"),Ml("password")]},Vc:{name:"signInWithEmailLink",j:[Ml("email"),Ml("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Ml("phoneNumber"),zl()]},Xc:{name:"signInWithPopup",j:[Kl()]},Yc:{name:"signInWithRedirect",j:[Kl()]},dd:{name:"updateCurrentUser",j:[Gl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof lh)}},ql(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ml(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Ml("url"),jl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Ml("code")]}}),Yl(Jh.prototype,{lc:{name:"languageCode",lb:Gl(Ml(),ql(),"languageCode")},ti:{name:"tenantId",lb:Gl(Ml(),ql(),"tenantId")}}),(Jh.Persistence=Wu).LOCAL="local",Jh.Persistence.SESSION="session",Jh.Persistence.NONE="none",Ql(lh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Fl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Fl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Vl()]},rb:{name:"linkWithCredential",j:[Vl()]},Dc:{name:"linkWithPhoneNumber",j:[Ml("phoneNumber"),zl()]},Ec:{name:"linkWithPopup",j:[Kl()]},Fc:{name:"linkWithRedirect",j:[Kl()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Vl()]},ub:{name:"reauthenticateWithCredential",j:[Vl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Ml("phoneNumber"),zl()]},Nc:{name:"reauthenticateWithPopup",j:[Kl()]},Oc:{name:"reauthenticateWithRedirect",j:[Kl()]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Gl(jl("opt_actionCodeSettings",!0),ql(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ml(null,!0)]},cd:{name:"unlink",j:[Ml("provider")]},Cb:{name:"updateEmail",j:[Ml("email")]},Db:{name:"updatePassword",j:[Ml("password")]},ed:{name:"updatePhoneNumber",j:[Vl("phone")]},Eb:{name:"updateProfile",j:[jl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Ml("email"),Gl(jl("opt_actionCodeSettings",!0),ql(null,!0),"opt_actionCodeSettings",!0)]}}),Ql(fl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ql(ll.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ql(fe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yl(Bc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Fl("appVerificationDisabledForTesting")}}),Ql(Kc.prototype,{confirm:{name:"confirm",j:[Ml("verificationCode")]}}),Xl(Zi,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[so,_o,So,ro],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Gl(Ml(),jl(),"json")]),Xl(wo,"credential",function(t,e){return new bo(t,e)},[Ml("email"),Ml("password")]),Ql(bo.prototype,{w:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(ho.prototype,{Ca:{name:"addScope",j:[Ml("scope")]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Xl(ho,"credential",lo,[Gl(Ml(),jl(),"token")]),Xl(wo,"credentialWithLink",Io,[Ml("email"),Ml("emailLink")]),Ql(fo.prototype,{Ca:{name:"addScope",j:[Ml("scope")]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Xl(fo,"credential",po,[Gl(Ml(),jl(),"token")]),Ql(go.prototype,{Ca:{name:"addScope",j:[Ml("scope")]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Xl(go,"credential",vo,[Gl(Ml(),Gl(jl(),ql()),"idToken"),Gl(Ml(),ql(),"accessToken",!0)]),Ql(yo.prototype,{Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Xl(yo,"credential",mo,[Gl(Ml(),jl(),"token"),Ml("secret",!0)]),Ql(co.prototype,{Ca:{name:"addScope",j:[Ml("scope")]},credential:{name:"credential",j:[Gl(Ml(),Gl(jl(),ql()),"optionsOrIdToken"),Gl(Ml(),ql(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[jl("customOAuthParameters")]}}),Ql(io.prototype,{w:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(eo.prototype,{w:{name:"toJSON",j:[Ml(null,!0)]}}),Xl(Co,"credential",Ao,[Ml("verificationId"),Ml("verificationCode")]),Ql(Co.prototype,{gb:{name:"verifyPhoneNumber",j:[Gl(Ml(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Wl(t.session,$i)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wl(t.session,Ji)&&Hl(t.multiFactorHint):t.session&&t.multiFactorUid?Wl(t.session,Ji)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),zl()]}}),Ql(Eo.prototype,{w:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(I.prototype,{toJSON:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(Fo.prototype,{toJSON:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(Mo.prototype,{toJSON:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(Yc.prototype,{toJSON:{name:"toJSON",j:[Ml(null,!0)]}}),Ql(zc.prototype,{Rc:{name:"resolveSignIn",j:[Bl()]}}),Ql(eh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Bl(),Ml("displayName",!0)]},bd:{name:"unenroll",j:[Gl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Hl},Ml(),"multiFactorInfoIdentifier")]}}),Ql(Dl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Xl(li,"parseLink",bi,[Ml("link")]),Xl(ml,"assertion",function(t){return new Zc(t)},[Vl("phone")]),function(){if(void 0===Jl||!Jl.INTERNAL||!Jl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Zr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:ti,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Jh,AuthCredential:Zi,Error:I};Xl(t,"EmailAuthProvider",wo,[]),Xl(t,"FacebookAuthProvider",ho,[]),Xl(t,"GithubAuthProvider",fo,[]),Xl(t,"GoogleAuthProvider",go,[]),Xl(t,"TwitterAuthProvider",yo,[]),Xl(t,"OAuthProvider",co,[Ml("providerId")]),Xl(t,"SAMLAuthProvider",uo,[Ml("providerId")]),Xl(t,"PhoneAuthProvider",Co,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Jh)}}]),Xl(t,"RecaptchaVerifier",Dl,[Gl(Ml(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),jl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Jl.app.App)}}]),Xl(t,"ActionCodeURL",li,[]),Xl(t,"PhoneMultiFactorGenerator",ml,[]),Jl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Jh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Jl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Jl.registerVersion("@firebase/auth","0.16.8"),Jl.INTERNAL.extendNamespace({User:lh})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Rs="";function Ps(t){Rs=t}var Os=(Ds.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),No(e))},Ds.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:Ao(t)},Ds.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Ds.prototype.prefixedName_=function(t){return this.prefix_+t},Ds.prototype.toString=function(){return this.domStorage_.toString()},Ds);function Ds(t){this.domStorage_=t,this.prefix_="firebase:"}var xs=(Ls.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Ls.prototype.get=function(t){return Po(this.cache_,t)?this.cache_[t]:null},Ls.prototype.remove=function(t){delete this.cache_[t]},Ls);function Ls(){this.cache_={},this.isInMemoryStorage=!0}function Ms(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,ro(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Mo).update(e),t=t.digest(),oo.encodeByteArray(t)}function Fs(t,e){ro(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(zs.logLevel=ss.VERBOSE,Ys=zs.log.bind(zs),e&&Hs.set("logging_enabled",!0)):"function"==typeof t?Ys=t:(Ys=null,Hs.remove("logging_enabled"))}function js(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+Qs.apply(void 0,Zi([],Ji(t)));zs.error(n)}function Us(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function qs(t,e){return t===e?0:t<e?-1:1}function Vs(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+No(e))}function Bs(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Ks,fr=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Os(e)}}catch(t){}return new xs},Ws=fr("localStorage"),Hs=fr("sessionStorage"),zs=new fs("@firebase/database"),Gs=(Ks=1,function(){return Ks++}),Qs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=Qs.apply(null,i):n+="object"==typeof i?No(i):i,n+=" "}return n},Ys=null,Xs=!0,$s=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===Xs&&(Xs=!1,null===Ys&&!0===Hs.get("logging_enabled")&&Fs(!0)),Ys&&(t=Qs.apply(null,e),Ys(t))},Js=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];$s.apply(void 0,Zi([n],Ji(t)))}},Zs=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+Qs.apply(void 0,Zi([],Ji(t)));throw zs.error(n),new Error(n)},ta=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+Qs.apply(void 0,Zi([],Ji(t)));zs.warn(n)},ea="[MIN_NAME]",na="[MAX_NAME]",ra=function(t,e){if(t===e)return 0;if(t===ea||e===na)return-1;if(e===ea||t===na)return 1;var n=la(t),r=la(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},ia=function(t){if("object"!=typeof t||null===t)return No(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=No(n[i]),r+=":",r+=ia(t[n[i]]);return r+="}"};function oa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function sa(t){var e,n,r,i;ro(!Us(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function aa(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ua=new RegExp("^-?(0*)\\d{1,10}$"),ca=-2147483648,ha=2147483647,la=function(t){if(ua.test(t)){t=Number(t);if(ca<=t&&t<=ha)return t}return null},fa=function(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ta("Exception was thrown by user callback.",t),e},Math.floor(0))}},pa=(da.prototype.getToken=function(n){var r=this;return this.appCheck?this.appCheck.getToken(n):new Promise(function(t,e){setTimeout(function(){r.appCheck?r.getToken(n).then(t,e):t(null)},0)})},da.prototype.addTokenChangeListener=function(e){var t;null!==(t=this.appCheckProvider)&&void 0!==t&&t.get().then(function(t){return t.addTokenListener(e)})},da.prototype.notifyForInvalidToken=function(){ta('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},da);function da(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null!=e&&e.get().then(function(t){return n.appCheck=t})}var ga=(va.prototype.getToken=function(n){var r=this;return this.auth_?this.auth_.getToken(n).catch(function(t){return t&&"auth/token-not-initialized"===t.code?($s("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):new Promise(function(t,e){setTimeout(function(){r.auth_?r.getToken(n).then(t,e):t(null)},0)})},va.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})},va.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},va.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ta(t)},va);function va(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(function(t){return r.auth_=t})}var ya=(ma.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},ma.prototype.addTokenChangeListener=function(t){t(this.accessToken)},ma.prototype.removeTokenChangeListener=function(t){},ma.prototype.notifyForInvalidToken=function(){},ma.OWNER="owner",ma);function ma(t){this.accessToken=t}var ba=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_a="websocket",wa="long_polling",Ia=(Ta.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Ta.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(Ta.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Ws.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),Ta.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Ta.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},Ta);function Ta(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ws.get("host:"+t)||this._host}function Ea(t,e,n){var r;if(ro("string"==typeof e,"typeof type must == string"),ro("object"==typeof n,"typeof params must == object"),e===_a)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==wa)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return oa(n,function(t,e){i.push(t+"="+e)}),r+i.join("&")}var Sa=(ka.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Po(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},ka.prototype.get=function(){return so(this.counters_)},ka);function ka(){this.counters_={}}var Ca={},Aa={};function Na(t){t=t.toString();return Ca[t]||(Ca[t]=new Sa),Ca[t]}var Ra=(Pa.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Pa.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&fa(function(){n.onMessage_(e[t])})}(t);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];)if("break"===r())break},Pa);function Pa(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Oa="pLPCommand",Da="pRTLPCB",xa=(La.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Ra(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Ma(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ji(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Ji(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),s.appCheckToken&&(t.ac=s.appCheckToken),"undefined"!=typeof location&&location.hostname&&ba.test(location.hostname)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},La.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},La.forceAllow=function(){La.forceAllow_=!0},La.forceDisallow=function(){La.forceDisallow_=!0},La.isAvailable=function(){return!!La.forceAllow_||!(La.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},La.prototype.markConnectionHealthy=function(){},La.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},La.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},La.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},La.prototype.send=function(t){t=No(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=to(t);return oo.encodeByteArray(t,!0)}(t),e=Bs(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},La.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},La.prototype.incrementIncomingBytes_=function(t){t=No(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},La);function La(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Js(t),this.stats_=Na(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),Ea(e,wa,t)}}var Ma=(Fa.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||$s("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Fa.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Fa.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Fa.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return this.addLongPollTag_(t+=e,this.currentSerial),!0}return!1},Fa.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Fa.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Fa.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){$s("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Fa);function Fa(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Gs(),window[Oa+this.uniqueCallbackIdentifier]=t,window[Da+this.uniqueCallbackIdentifier]=e,this.myIFrame=Fa.createIFrame_();e="",e="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(e),this.myIFrame.doc.close()}catch(t){$s("frame writing exception"),t.stack&&$s(t.stack),$s(t)}}var ja=null;"undefined"!=typeof MozWebSocket?ja=MozWebSocket:"undefined"!=typeof WebSocket&&(ja=WebSocket);var Ua=(qa.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&ba.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),Ea(t,_a,i)},qa.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ws.set("previous_websocket_failure",!0);try{yo()||(r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new ja(this.connURL,[],r))}catch(t){this.log_("Error instantiating WebSocket.");var r=t.message||t.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&n.log_(t),n.onClosed_()}},qa.prototype.start=function(){},qa.forceDisallow=function(){qa.forceDisallow_=!0},qa.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==ja&&!qa.forceDisallow_},qa.previouslyFailed=function(){return Ws.isInMemoryStorage||!0===Ws.get("previous_websocket_failure")},qa.prototype.markConnectionHealthy=function(){Ws.remove("previous_websocket_failure")},qa.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Ao(t),this.onMessage(t))},qa.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},qa.prototype.extractFrameCount_=function(t){if(ro(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},qa.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},qa.prototype.send=function(t){this.resetKeepAlive();t=No(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=Bs(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},qa.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},qa.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},qa.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},qa.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},qa.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},qa.responsesRequiredToBeHealthy=2,qa.healthyTimeout=3e4,qa);function qa(t,e,n,r,i,o,s){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Js(this.connId),this.stats_=Na(e),this.connURL=qa.connectionURL_(e,o,s,r),this.nodeAdmin=e.nodeAdmin}var Va=(Object.defineProperty(Ba,"ALL_TRANSPORTS",{get:function(){return[xa,Ua]},enumerable:!1,configurable:!0}),Ba.prototype.initTransports_=function(t){var e,n,r=Ua&&Ua.isAvailable(),i=r&&!Ua.previouslyFailed();if(t.webSocketOnly&&(r||ta("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ua];else{var o=this.transports_=[];try{for(var s=$i(Ba.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},Ba.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Ba.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Ba);function Ba(t){this.initTransports_(t)}var Ka=(Wa.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=aa(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},Wa.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Wa.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},Wa.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},Wa.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},Wa.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Wa.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Wa.prototype.onSecondaryMessageReceived_=function(t){var e=Vs("t",t),t=Vs("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},Wa.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Wa.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Wa.prototype.onPrimaryMessageReceived_=function(t){var e=Vs("t",t),t=Vs("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},Wa.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Wa.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Wa.prototype.onControl_=function(t){var e=Vs("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?js("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):js("Unknown control packet command: "+e)}},Wa.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ta("Protocol version mismatch detected"),this.tryStartUpgrade_())},Wa.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Wa.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),aa(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},Wa.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},Wa.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):aa(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},Wa.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Wa.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Wa.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ws.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Wa.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Wa.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Wa.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Wa.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Wa);function Wa(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Js("c:"+this.id+":"),this.transportManager_=new Va(e),this.log_("Connection created"),this.start_()}Ha.prototype.put=function(t,e,n,r){},Ha.prototype.merge=function(t,e,n,r){},Ha.prototype.refreshAuthToken=function(t){},Ha.prototype.refreshAppCheckToken=function(t){},Ha.prototype.onDisconnectPut=function(t,e,n){},Ha.prototype.onDisconnectMerge=function(t,e,n){},Ha.prototype.onDisconnectCancel=function(t,e){},Ha.prototype.reportStats=function(t){},Q=Ha;function Ha(){}var za=(Ga.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Zi([],Ji(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Ga.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Ga.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Ga.prototype.validateEventType_=function(e){ro(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},Ga);function Ga(t){this.allowedEvents_=t,this.listeners_={},ro(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Qa,Ya=(Gi(Xa,Qa=za),Xa.getInstance=function(){return new Xa},Xa.prototype.getInitialEvent=function(t){return ro("online"===t,"Unknown event type: "+t),[this.online_]},Xa.prototype.currentlyOnline=function(){return this.online_},Xa);function Xa(){var t=Qa.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||fo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var $a=32,Ja=768,Za=(tu.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},tu);function tu(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function eu(){return new Za("")}function nu(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function ru(t){return t.pieces_.length-t.pieceNum_}function iu(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new Za(t.pieces_,e)}function ou(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function su(t,e){return t.pieces_.slice(t.pieceNum_+(e=void 0===e?0:e))}function au(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Za(e,0)}function uu(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Za)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else for(var i=e.split("/"),r=0;r<i.length;r++)0<i[r].length&&n.push(i[r]);return new Za(n,0)}function cu(t){return t.pieceNum_>=t.pieces_.length}function hu(t,e){var n=nu(t),r=nu(e);if(null===n)return e;if(n===r)return hu(iu(t),iu(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function lu(t,e){for(var n=su(t,0),r=su(e,0),i=0;i<n.length&&i<r.length;i++){var o=ra(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function fu(t,e){if(ru(t)!==ru(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function pu(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(ru(t)>ru(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var du=function(t,e){this.errorPrefix_=e,this.parts_=su(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=zo(this.parts_[n]);gu(this)};function gu(t){if(t.byteLength_>Ja)throw new Error(t.errorPrefix_+"has a key path longer than "+Ja+" bytes ("+t.byteLength_+").");if(t.parts_.length>$a)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$a+") or object contains a cycle "+vu(t))}function vu(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var yu,mu=(Gi(bu,yu=za),bu.getInstance=function(){return new bu},bu.prototype.getInitialEvent=function(t){return ro("visible"===t,"Unknown event type: "+t),[this.visible_]},bu);function bu(){var e,t,n=yu.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var _u,wu=1e3,Iu=3e5,Tu=(Gi(Eu,_u=Q),Eu.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(No(e)),ro(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},Eu.prototype.get=function(t){var n=this;this.initConnection_();var r=new uo,i={p:t._path.toString(),q:t._queryObject},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},Eu.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),ro(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ro(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},Eu.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},Eu.prototype.sendListen_=function(r){var i=this,o=r.query,s=o._path.toString(),a=o._queryIdentifier;this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o._queryObject,t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;Eu.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},Eu.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Po(t,"w")&&(t=Oo(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',e=e._path.toString(),ta("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},Eu.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},Eu.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=Ro(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},Eu.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},Eu.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=Ro(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},Eu.prototype.tryAppCheck=function(){var n=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var e=t.s,t=t.d||"error";"ok"===e?n.invalidAppCheckTokenCount_=0:n.onAppCheckRevoked_(e,t)})},Eu.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),ro(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},Eu.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},Eu.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},Eu.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},Eu.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},Eu.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},Eu.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},Eu.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},Eu.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},Eu.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},Eu.prototype.reportStats=function(t){var e=this;this.connected_&&(this.log_("reportStats",t={c:t}),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},Eu.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+No(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},Eu.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):js("Unrecognized action received from server: "+No(t)+"\nAre you using the latest client?")},Eu.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},Eu.prototype.scheduleConnect_=function(t){var e=this;ro(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},Eu.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},Eu.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},Eu.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=wu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},Eu.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=wu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},Eu.prototype.establishConnection_=function(){return Yi(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Xi(this,function(t){switch(t.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Eu.nextConnectionId_++,h=this.lastSessionId,o=!1,s=null,a=function(){s?s.close():(o=!0,r())},c=function(t){ro(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)},this.realtime_={close:a,sendRequest:c},u=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)])];case 2:return c=Ji.apply(void 0,[t.sent(),2]),u=c[0],c=c[1],o?$s("getToken() completed but was canceled"):($s("getToken() completed. Creating connection."),this.authToken_=u&&u.accessToken,this.appCheckToken_=c&&c.token,s=new Ka(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,function(t){ta(t+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")},h)),[3,4];case 3:return h=t.sent(),this.log_("Failed to get token: "+h),o||(this.repoInfo_.nodeAdmin&&ta(h),a()),[3,4];case 4:return[2]}})})},Eu.prototype.interrupt=function(t){$s("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},Eu.prototype.resume=function(t){$s("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Do(this.interruptReasons_)&&(this.reconnectDelay_=wu,this.realtime_||this.scheduleConnect_(0))},Eu.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},Eu.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},Eu.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return ia(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},Eu.prototype.removeListen_=function(t,e){var n,r=new Za(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},Eu.prototype.onAuthRevoked_=function(t,e){$s("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},Eu.prototype.onAppCheckRevoked_=function(t,e){$s("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())},Eu.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},Eu.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=$i(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,$i(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},Eu.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Rs.replace(/\./g,"-")]=1,fo()?t["framework.cordova"]=1:vo()&&(t["framework.reactnative"]=1),this.reportStats(t)},Eu.prototype.shouldReconnect_=function(){var t=Ya.getInstance().currentlyOnline();return Do(this.interruptReasons_)&&t},Eu.nextPersistentConnectionId_=0,Eu.nextConnectionId_=0,Eu);function Eu(t,e,n,r,i,o,s,a){var u=_u.call(this)||this;if(u.repoInfo_=t,u.applicationId_=e,u.onDataUpdate_=n,u.onConnectStatus_=r,u.onServerInfoUpdate_=i,u.authTokenProvider_=o,u.appCheckTokenProvider_=s,u.authOverride_=a,u.id=Eu.nextPersistentConnectionId_++,u.log_=Js("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingGets_=[],u.outstandingPutCount_=0,u.outstandingGetCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=wu,u.maxReconnectDelay_=Iu,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.appCheckToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.invalidAppCheckTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,a&&!yo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return mu.getInstance().on("visible",u.onVisible_,u),-1===t.host.indexOf("fblocal")&&Ya.getInstance().on("online",u.onOnline_,u),u}var Su=(ku.Wrap=function(t,e){return new ku(t,e)},ku);function ku(t,e){this.name=t,this.node=e}var Cu,G=(Au.prototype.getCompare=function(){return this.compare.bind(this)},Au.prototype.indexedValueChanged=function(t,e){t=new Su(ea,t),e=new Su(ea,e);return 0!==this.compare(t,e)},Au.prototype.minPost=function(){return Su.MIN},Au);function Au(){}var Nu,fr=(Gi(Ru,Nu=G),Object.defineProperty(Ru,"__EMPTY_NODE",{get:function(){return Cu},set:function(t){Cu=t},enumerable:!1,configurable:!0}),Ru.prototype.compare=function(t,e){return ra(t.name,e.name)},Ru.prototype.isDefinedOn=function(t){throw io("KeyIndex.isDefinedOn not expected to be called.")},Ru.prototype.indexedValueChanged=function(t,e){return!1},Ru.prototype.minPost=function(){return Su.MIN},Ru.prototype.maxPost=function(){return new Su(na,Cu)},Ru.prototype.makePost=function(t,e){return ro("string"==typeof t,"KeyIndex indexValue must always be a string."),new Su(t,Cu)},Ru.prototype.toString=function(){return".key"},Ru);function Ru(){return null!==Nu&&Nu.apply(this,arguments)||this}var Pu=new fr,Ou=(Du.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Du.prototype.hasNext=function(){return 0<this.nodeStack_.length},Du.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Du);function Du(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var xu=(Lu.prototype.copy=function(t,e,n,r,i){return new Lu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Lu.prototype.count=function(){return this.left.count()+1+this.right.count()},Lu.prototype.isEmpty=function(){return!1},Lu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Lu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Lu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Lu.prototype.minKey=function(){return this.min_().key},Lu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Lu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Lu.prototype.removeMin_=function(){if(this.left.isEmpty())return ju.EMPTY_NODE;var t=this;return(t=(t=!t.left.isRed_()&&!t.left.left.isRed_()?t.moveRedLeft_():t).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Lu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_())?r.moveRedLeft_():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_())?r.moveRedRight_():r).key)){if(r.right.isEmpty())return ju.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Lu.prototype.isRed_=function(){return this.color},Lu.prototype.fixUp_=function(){var t=this;return t=(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},Lu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t=t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},Lu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t=t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},Lu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Lu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Lu.prototype.rotateRight_=function(){var t=this.copy(null,null,Lu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Lu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Lu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Lu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Lu.RED=!0,Lu.BLACK=!1,Lu);function Lu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Lu.RED,this.left=null!=r?r:ju.EMPTY_NODE,this.right=null!=i?i:ju.EMPTY_NODE}Mu.prototype.copy=function(t,e,n,r,i){return this},Mu.prototype.insert=function(t,e,n){return new xu(t,e,null)},Mu.prototype.remove=function(t,e){return this},Mu.prototype.count=function(){return 0},Mu.prototype.isEmpty=function(){return!0},Mu.prototype.inorderTraversal=function(t){return!1},Mu.prototype.reverseTraversal=function(t){return!1},Mu.prototype.minKey=function(){return null},Mu.prototype.maxKey=function(){return null},Mu.prototype.check_=function(){return 0},Mu.prototype.isRed_=function(){return!1},za=Mu;function Mu(){}var Fu,ju=(Uu.prototype.insert=function(t,e){return new Uu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,xu.BLACK,null,null))},Uu.prototype.remove=function(t){return new Uu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,xu.BLACK,null,null))},Uu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Uu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Uu.prototype.isEmpty=function(){return this.root_.isEmpty()},Uu.prototype.count=function(){return this.root_.count()},Uu.prototype.minKey=function(){return this.root_.minKey()},Uu.prototype.maxKey=function(){return this.root_.maxKey()},Uu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Uu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Uu.prototype.getIterator=function(t){return new Ou(this.root_,null,this.comparator_,!1,t)},Uu.prototype.getIteratorFrom=function(t,e){return new Ou(this.root_,t,this.comparator_,!1,e)},Uu.prototype.getReverseIteratorFrom=function(t,e){return new Ou(this.root_,t,this.comparator_,!0,e)},Uu.prototype.getReverseIterator=function(t){return new Ou(this.root_,null,this.comparator_,!0,t)},Uu.EMPTY_NODE=new za,Uu);function Uu(t,e){void 0===e&&(e=Uu.EMPTY_NODE),this.comparator_=t,this.root_=e}function qu(t,e){return ra(t.name,e.name)}function Vu(t,e){return ra(t,e)}function Bu(t){return"number"==typeof t?"number:"+sa(t):"string:"+t}var Ku,Wu,Hu,zu,Gu=function(t){var e;t.isLeafNode()?(e=t.val(),ro("string"==typeof e||"number"==typeof e||"object"==typeof e&&Po(e,".sv"),"Priority must be a string or number.")):ro(t===Fu||t.isEmpty(),"priority of unexpected type."),ro(t===Fu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Qu=(Object.defineProperty(Yu,"__childrenNodeConstructor",{get:function(){return Ku},set:function(t){Ku=t},enumerable:!1,configurable:!0}),Yu.prototype.isLeafNode=function(){return!0},Yu.prototype.getPriority=function(){return this.priorityNode_},Yu.prototype.updatePriority=function(t){return new Yu(this.value_,t)},Yu.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Yu.__childrenNodeConstructor.EMPTY_NODE},Yu.prototype.getChild=function(t){return cu(t)?this:".priority"===nu(t)?this.priorityNode_:Yu.__childrenNodeConstructor.EMPTY_NODE},Yu.prototype.hasChild=function(){return!1},Yu.prototype.getPredecessorChildName=function(t,e){return null},Yu.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Yu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Yu.prototype.updateChild=function(t,e){var n=nu(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(ro(".priority"!==n||1===ru(t),".priority must be the last token in a path"),this.updateImmediateChild(n,Yu.__childrenNodeConstructor.EMPTY_NODE.updateChild(iu(t),e)))},Yu.prototype.isEmpty=function(){return!1},Yu.prototype.numChildren=function(){return 0},Yu.prototype.forEachChild=function(t,e){return!1},Yu.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Yu.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Bu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?sa(this.value_):this.value_,this.lazyHash_=Ms(t)),this.lazyHash_},Yu.prototype.getValue=function(){return this.value_},Yu.prototype.compareTo=function(t){return t===Yu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Yu.__childrenNodeConstructor?-1:(ro(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Yu.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Yu.VALUE_TYPE_ORDER.indexOf(e),i=Yu.VALUE_TYPE_ORDER.indexOf(n);return ro(0<=r,"Unknown leaf type: "+e),ro(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Yu.prototype.withIndex=function(){return this},Yu.prototype.isIndexed=function(){return!0},Yu.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Yu.VALUE_TYPE_ORDER=["object","boolean","number","string"],Yu);function Yu(t,e){void 0===e&&(e=Yu.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,ro(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Gu(this.priorityNode_)}function Xu(){return null!==zu&&zu.apply(this,arguments)||this}var $u=new(Gi(Xu,zu=G),Xu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?ra(t.name,e.name):r},Xu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Xu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Xu.prototype.minPost=function(){return Su.MIN},Xu.prototype.maxPost=function(){return new Su(na,new Qu("[PRIORITY-POST]",Hu))},Xu.prototype.makePost=function(t,e){t=Wu(t);return new Su(e,new Qu("[PRIORITY-POST]",t))},Xu.prototype.toString=function(){return".priority"},Xu),Ju=Math.log(2),Zu=(tc.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},tc);function tc(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Ju,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var ec,nc,rc=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new xu(i,r.node,xu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new xu(i,r.node,xu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new xu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,xu.BLACK):(r(u,xu.BLACK),r(u,xu.RED))}return n}(new Zu(c.length));return new ju(e||t,n)},ic={},oc=(Object.defineProperty(sc,"Default",{get:function(){return ro($u,"ChildrenNode.ts has not been loaded"),ec=ec||new sc({".priority":ic},{".priority":$u})},enumerable:!1,configurable:!0}),sc.prototype.get=function(t){var e=Oo(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ju?e:null},sc.prototype.hasIndex=function(t){return Po(this.indexSet_,t.toString())},sc.prototype.addIndex=function(t,e){ro(t!==Pu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(Su.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var s=r?rc(n,t.getCompare()):ic,a=t.toString(),u=Qi({},this.indexSet_);u[a]=t;e=Qi({},this.indexes_);return e[a]=s,new sc(e,u)},sc.prototype.addToIndexes=function(s,a){var u=this;return new sc(xo(this.indexes_,function(t,e){var n=Oo(u.indexSet_,e);if(ro(n,"Missing index implementation for "+e),t===ic){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(Su.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),rc(r,n.getCompare())}return ic}e=a.get(s.name),n=t;return(n=e?t.remove(new Su(s.name,e)):n).insert(s,s.node)}),this.indexSet_)},sc.prototype.removeFromIndexes=function(n,r){return new sc(xo(this.indexes_,function(t){if(t===ic)return t;var e=r.get(n.name);return e?t.remove(new Su(n.name,e)):t}),this.indexSet_)},sc);function sc(t,e){this.indexes_=t,this.indexSet_=e}var ac,uc=(Object.defineProperty(cc,"EMPTY_NODE",{get:function(){return nc=nc||new cc(new ju(Vu),null,oc.Default)},enumerable:!1,configurable:!0}),cc.prototype.isLeafNode=function(){return!1},cc.prototype.getPriority=function(){return this.priorityNode_||nc},cc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new cc(this.children_,t,this.indexMap_)},cc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?nc:t},cc.prototype.getChild=function(t){var e=nu(t);return null===e?this:this.getImmediateChild(e).getChild(iu(t))},cc.prototype.hasChild=function(t){return null!==this.children_.get(t)},cc.prototype.updateImmediateChild=function(t,e){if(ro(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new Su(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?nc:this.priorityNode_;return new cc(r,n,i)},cc.prototype.updateChild=function(t,e){var n=nu(t);if(null===n)return e;ro(".priority"!==nu(t)||1===ru(t),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(iu(t),e);return this.updateImmediateChild(n,e)},cc.prototype.isEmpty=function(){return this.children_.isEmpty()},cc.prototype.numChildren=function(){return this.children_.count()},cc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild($u,function(t,e){r[t]=e.val(n),i++,s&&cc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},cc.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+Bu(this.getPriority().val())+":"),this.forEachChild($u,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":Ms(n)),this.lazyHash_},cc.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new Su(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},cc.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},cc.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new Su(t,this.children_.get(t)):null},cc.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},cc.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new Su(t,this.children_.get(t)):null},cc.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},cc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},cc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Su.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},cc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},cc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Su.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},cc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===lc?-1:0},cc.prototype.withIndex=function(t){if(t===Pu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new cc(this.children_,this.priorityNode_,t)},cc.prototype.isIndexed=function(t){return t===Pu||this.indexMap_.hasIndex(t)},cc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator($u),n=t.getIterator($u),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},cc.prototype.resolveIndex_=function(t){return t===Pu?null:this.indexMap_.get(t.toString())},cc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,cc);function cc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Gu(this.priorityNode_),this.children_.isEmpty()&&ro(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function hc(){return ac.call(this,new ju(Vu),uc.EMPTY_NODE,oc.Default)||this}var lc=new(Gi(hc,ac=uc),hc.prototype.compareTo=function(t){return t===this?0:1},hc.prototype.equals=function(t){return t===this},hc.prototype.getPriority=function(){return this},hc.prototype.getImmediateChild=function(t){return uc.EMPTY_NODE},hc.prototype.isEmpty=function(){return!1},hc);Object.defineProperties(Su,{MIN:{value:new Su(ea,uc.EMPTY_NODE)},MAX:{value:new Su(na,lc)}}),fr.__EMPTY_NODE=uc.EMPTY_NODE,Qu.__childrenNodeConstructor=uc,Hu=Fu=lc;var fc=!0;function pc(n,t){if(void 0===t&&(t=null),null===n)return uc.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),ro(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"!=typeof(n="object"==typeof n&&".value"in n&&null!==n[".value"]?n[".value"]:n)||".sv"in n)return new Qu(n,pc(t));if(n instanceof Array||!fc){var r=uc.EMPTY_NODE;return oa(n,function(t,e){Po(n,t)&&"."!==t.substring(0,1)&&(!(e=pc(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(pc(t))}var i=[],o=!1;if(oa(n,function(t,e){"."!==t.substring(0,1)&&((e=pc(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new Su(t,e))))}),0===i.length)return uc.EMPTY_NODE;var e=rc(i,qu,function(t){return t.name},Vu);if(o){var s=rc(i,$u.getCompare());return new uc(e,pc(t),new oc({".priority":s},{".priority":$u}))}return new uc(e,pc(t),oc.Default)}Wu=pc;var dc,gc,vc=(Gi(yc,dc=G),yc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},yc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},yc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?ra(t.name,e.name):r},yc.prototype.makePost=function(t,e){t=pc(t),t=uc.EMPTY_NODE.updateChild(this.indexPath_,t);return new Su(e,t)},yc.prototype.maxPost=function(){var t=uc.EMPTY_NODE.updateChild(this.indexPath_,lc);return new Su(na,t)},yc.prototype.toString=function(){return su(this.indexPath_,0).join("/")},yc);function yc(t){var e=dc.call(this)||this;return e.indexPath_=t,ro(!cu(t)&&".priority"!==nu(t),"Can't create PathIndex with empty path or .priority key"),e}function mc(){return null!==gc&&gc.apply(this,arguments)||this}function bc(t){if(t===""+ha)return"-";var e=la(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?na:(e=n[i],e=Ec.charAt(Ec.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function _c(t){if(t===""+ca)return ea;var e=la(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+ha:(delete n[n.length-1],n.join("")):(n[n.length-1]=Ec.charAt(Ec.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var wc,Ic,Tc=new(Gi(mc,gc=G),mc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?ra(t.name,e.name):n},mc.prototype.isDefinedOn=function(t){return!0},mc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},mc.prototype.minPost=function(){return Su.MIN},mc.prototype.maxPost=function(){return Su.MAX},mc.prototype.makePost=function(t,e){t=pc(t);return new Su(e,t)},mc.prototype.toString=function(){return".value"},mc),Ec="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Sc=(wc=0,Ic=[],function(t){var e=t===wc;wc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=Ec.charAt(t%64),t=Math.floor(t/64);ro(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===Ic[r];r--)Ic[r]=0;Ic[r]++}else for(r=0;r<12;r++)Ic[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=Ec.charAt(Ic[r]);return ro(20===i.length,"nextPushId: Length should be 20."),i});function kc(t){return{type:"value",snapshotNode:t}}function Cc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Ac(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Nc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var Rc=(Pc.prototype.updateChild=function(t,e,n,r,i,o){ro(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Ac(e,s)):ro(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Cc(e,n)):o.trackChildChange(Nc(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Pc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild($u,function(t,e){n.hasChild(t)||i.trackChildChange(Ac(t,e))}),n.isLeafNode()||n.forEachChild($u,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Nc(t,e,n)):i.trackChildChange(Cc(t,e))})),n.withIndex(this.index_)},Pc.prototype.updatePriority=function(t,e){return t.isEmpty()?uc.EMPTY_NODE:t.updatePriority(e)},Pc.prototype.filtersNodes=function(){return!1},Pc.prototype.getIndexedFilter=function(){return this},Pc.prototype.getIndex=function(){return this.index_},Pc);function Pc(t){this.index_=t}var Oc=(Dc.prototype.getStartPost=function(){return this.startPost_},Dc.prototype.getEndPost=function(){return this.endPost_},Dc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Dc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Su(e,n))||(n=uc.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Dc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=uc.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(uc.EMPTY_NODE),i=this;return e.forEachChild($u,function(t,e){i.matches(new Su(t,e))||(r=r.updateImmediateChild(t,uc.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Dc.prototype.updatePriority=function(t,e){return t},Dc.prototype.filtersNodes=function(){return!0},Dc.prototype.getIndexedFilter=function(){return this.indexedFilter_},Dc.prototype.getIndex=function(){return this.index_},Dc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Dc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Dc);function Dc(t){this.indexedFilter_=new Rc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Dc.getStartPost_(t),this.endPost_=Dc.getEndPost_(t)}var xc=(Lc.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Su(e,n))||(n=uc.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Lc.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=uc.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=uc.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(uc.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();(l=!l&&h(u,s)<=0?!0:l)&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,uc.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Lc.prototype.updatePriority=function(t,e){return t},Lc.prototype.filtersNodes=function(){return!0},Lc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Lc.prototype.getIndex=function(){return this.index_},Lc.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;ro(a.numChildren()===this.limit_,"");var u=new Su(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Nc(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Ac(e,l));l=a.updateImmediateChild(e,uc.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Cc(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Ac(c.name,c.node)),i.trackChildChange(Cc(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,uc.EMPTY_NODE)):t},Lc);function Lc(t){this.rangedFilter_=new Oc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Mc=(Fc.prototype.hasStart=function(){return this.startSet_},Fc.prototype.hasStartAfter=function(){return this.startAfterSet_},Fc.prototype.hasEndBefore=function(){return this.endBeforeSet_},Fc.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Fc.prototype.getIndexStartValue=function(){return ro(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Fc.prototype.getIndexStartName=function(){return ro(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ea},Fc.prototype.hasEnd=function(){return this.endSet_},Fc.prototype.getIndexEndValue=function(){return ro(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Fc.prototype.getIndexEndName=function(){return ro(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:na},Fc.prototype.hasLimit=function(){return this.limitSet_},Fc.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Fc.prototype.getLimit=function(){return ro(this.limitSet_,"Only valid if limit has been set"),this.limit_},Fc.prototype.getIndex=function(){return this.index_},Fc.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Fc.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===$u},Fc.prototype.copy=function(){var t=new Fc;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Fc);function Fc(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$u}function jc(t,e,n){t=t.copy();return t.startSet_=!0,t.indexStartValue_=e=void 0===e?null:e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function Uc(t,e,n){t=t.copy();return t.endSet_=!0,t.indexEndValue_=e=void 0===e?null:e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function qc(t,e){t=t.copy();return t.index_=e,t}function Vc(t){var e,n={};return t.isDefault()||(e=t.index_===$u?"$priority":t.index_===Tc?"$value":t.index_===Pu?"$key":(ro(t.index_ instanceof vc,"Unrecognized index type!"),t.index_.toString()),n.orderBy=No(e),t.startSet_&&(n.startAt=No(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+No(t.indexStartName_))),t.endSet_&&(n.endAt=No(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+No(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Bc(t){var e,n={};return t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==$u&&(n.i=t.index_.toString()),n}var Kc,Wc=(Gi(Hc,Kc=Q),Hc.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Hc.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(ro(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},Hc.prototype.listen=function(t,e,n,r){var i=this,o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);var s=Hc.getListenId_(t,n),a={};this.listens_[s]=a;t=Vc(t._queryParams);this.restRequest_(o+".json",t,function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Oo(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},Hc.prototype.unlisten=function(t,e){e=Hc.getListenId_(t,e);delete this.listens_[e]},Hc.prototype.get=function(t){var n=this,e=Vc(t._queryParams),r=t._path.toString(),i=new uo;return this.restRequest_(r+".json",e,function(t,e){null===(t=404===t?e=null:t)?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},Hc.prototype.refreshAuthToken=function(t){},Hc.prototype.restRequest_=function(i,o,s){var a=this;return(o=void 0===o?{}:o).format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(t){var e=Ji(t,2),t=e[0],e=e[1];t&&t.accessToken&&(o.auth=t.accessToken),e&&e.token&&(o.ac=e.token);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+Lo(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=Ao(r.responseText)}catch(t){ta("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&ta("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},Hc);function Hc(t,e,n,r){var i=Kc.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=e,i.authTokenProvider_=n,i.appCheckTokenProvider_=r,i.log_=Js("p:rest:"),i.listens_={},i}var zc=(Gc.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Gc.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Gc);function Gc(){this.rootNode_=uc.EMPTY_NODE}function Qc(){return{value:null,children:new Map}}function Yc(t,e,n){var r;cu(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=nu(e),t.children.has(r)||t.children.set(r,Qc()),Yc(t.children.get(r),e=iu(e),n))}function Xc(t,n,r){var i;null!==t.value?r(n,t.value):(i=function(t,e){Xc(e,new Za(n.toString()+"/"+t),r)},t.children.forEach(function(t,e){i(e,t)}))}var $c=(Jc.prototype.get=function(){var t=this.collection_.get(),n=Qi({},t);return this.last_&&oa(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Jc);function Jc(t){this.collection_=t,this.last_=null}var Zc,th=(eh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;oa(t,function(t,e){0<e&&Po(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),aa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},eh);function eh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new $c(t);t=1e4+2e4*Math.random();aa(this.reportStats_.bind(this),Math.floor(t))}function nh(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function rh(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ih(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(za=Zc=Zc||{})[za.OVERWRITE=0]="OVERWRITE",za[za.MERGE=1]="MERGE",za[za.ACK_USER_WRITE=2]="ACK_USER_WRITE",za[za.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var oh=(sh.prototype.operationForChild=function(t){if(cu(this.path)){if(null!=this.affectedTree.value)return ro(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Za(t));return new sh(eu(),e,this.revert)}return ro(nu(this.path)===t,"operationForChild called for unrelated child."),new sh(iu(this.path),this.affectedTree,this.revert)},sh);function sh(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Zc.ACK_USER_WRITE,this.source=nh()}var ah=(uh.prototype.operationForChild=function(t){return cu(this.path)?new uh(this.source,eu()):new uh(this.source,iu(this.path))},uh);function uh(t,e){this.source=t,this.path=e,this.type=Zc.LISTEN_COMPLETE}var ch=(hh.prototype.operationForChild=function(t){return cu(this.path)?new hh(this.source,eu(),this.snap.getImmediateChild(t)):new hh(this.source,iu(this.path),this.snap)},hh);function hh(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Zc.OVERWRITE}var lh=(fh.prototype.operationForChild=function(t){if(cu(this.path)){var e=this.children.subtree(new Za(t));return e.isEmpty()?null:e.value?new ch(this.source,eu(),e.value):new fh(this.source,eu(),e)}return ro(nu(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new fh(this.source,iu(this.path),this.children)},fh.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},fh);function fh(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Zc.MERGE}var ph=(dh.prototype.isFullyInitialized=function(){return this.fullyInitialized_},dh.prototype.isFiltered=function(){return this.filtered_},dh.prototype.isCompleteForPath=function(t){if(cu(t))return this.isFullyInitialized()&&!this.filtered_;t=nu(t);return this.isCompleteForChild(t)},dh.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},dh.prototype.getNode=function(){return this.node_},dh);function dh(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var gh,vh=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function yh(n,t,e,r){var i=[],o=[];return t.forEach(function(t){var e;"child_changed"===t.type&&n.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((e=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:e}))}),mh(n,i,"child_removed",t,r,e),mh(n,i,"child_added",t,r,e),mh(n,i,"child_moved",o,r,e),mh(n,i,"child_changed",t,r,e),mh(n,i,"value",t,r,e),i}function mh(o,s,e,t,a,u){t=t.filter(function(t){return t.type===e});t.sort(function(t,e){return function(t,e,n){if(null==e.childName||null==n.childName)throw io("Should only compare child_ events.");e=new Su(e.childName,e.snapshotNode),n=new Su(n.childName,n.snapshotNode);return t.index_.compare(e,n)}(o,t,e)}),t.forEach(function(e){var t,n,r,i=(t=o,r=u,"value"===(n=e).type||"child_removed"===n.type||(n.prevName=r.getPredecessorChildName(n.childName,n.snapshotNode,t.index_)),n);a.forEach(function(t){t.respondsTo(e.type)&&s.push(t.createEvent(i,o.query_))})})}function bh(t,e){return{eventCache:t,serverCache:e}}function _h(t,e,n,r){return bh(new ph(e,n,r),t.serverCache)}function wh(t,e,n,r){return bh(t.eventCache,new ph(e,n,r))}function Ih(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Th(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Eh=(Sh.fromObject=function(t){var n=new Sh(null);return oa(t,function(t,e){n=n.set(new Za(t),e)}),n},Sh.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Sh.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:eu(),value:this.value};if(cu(t))return null;var n=nu(t),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(iu(t),e);return null==e?null:{path:uu(new Za(n),e.path),value:e.value}},Sh.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Sh.prototype.subtree=function(t){if(cu(t))return this;var e=nu(t),e=this.children.get(e);return null!==e?e.subtree(iu(t)):new Sh(null)},Sh.prototype.set=function(t,e){if(cu(t))return new Sh(e,this.children);var n=nu(t),e=(this.children.get(n)||new Sh(null)).set(iu(t),e),e=this.children.insert(n,e);return new Sh(this.value,e)},Sh.prototype.remove=function(t){if(cu(t))return this.children.isEmpty()?new Sh(null):new Sh(null,this.children);var e=nu(t),n=this.children.get(e);if(n){n=n.remove(iu(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?new Sh(null):new Sh(this.value,t)}return this},Sh.prototype.get=function(t){if(cu(t))return this.value;var e=nu(t),e=this.children.get(e);return e?e.get(iu(t)):null},Sh.prototype.setTree=function(t,e){if(cu(t))return e;var n=nu(t),t=(this.children.get(n)||new Sh(null)).setTree(iu(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Sh(this.value,e)},Sh.prototype.fold=function(t){return this.fold_(eu(),t)},Sh.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(uu(n,t),r)}),r(n,this.value,i)},Sh.prototype.findOnPath=function(t,e){return this.findOnPath_(t,eu(),e)},Sh.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(cu(t))return null;var i=nu(t),r=this.children.get(i);return r?r.findOnPath_(iu(t),uu(e,i),n):null},Sh.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,eu(),e)},Sh.prototype.foreachOnPath_=function(t,e,n){if(cu(t))return this;this.value&&n(e,this.value);var r=nu(t),i=this.children.get(r);return i?i.foreachOnPath_(iu(t),uu(e,r),n):new Sh(null)},Sh.prototype.foreach=function(t){this.foreach_(eu(),t)},Sh.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(uu(n,t),r)}),this.value&&r(n,this.value)},Sh.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Sh);function Sh(t,e){void 0===e&&(e=gh=gh||new ju(qs)),this.value=t,this.children=e}var kh=(Ch.empty=function(){return new Ch(new Eh(null))},Ch);function Ch(t){this.writeTree_=t}function Ah(t,e,n){if(cu(e))return new kh(new Eh(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,r=hu(i,e),o=o.updateChild(r,n);return new kh(t.writeTree_.set(i,o))}n=new Eh(n),n=t.writeTree_.setTree(e,n);return new kh(n)}function Nh(t,n,e){var r=t;return oa(e,function(t,e){r=Ah(r,uu(n,t),e)}),r}function Rh(t,e){if(cu(e))return kh.empty();e=t.writeTree_.setTree(e,new Eh(null));return new kh(e)}function Ph(t,e){return null!=Oh(t,e)}function Oh(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(hu(n.path,e)):null}function Dh(t){var n=[],e=t.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild($u,function(t,e){n.push(new Su(t,e))}):t.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new Su(t,e.value))}),n}function xh(t,e){if(cu(e))return t;var n=Oh(t,e);return new kh(null!=n?new Eh(n):t.writeTree_.subtree(e))}function Lh(t){return t.writeTree_.isEmpty()}function Mh(t,e){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(ro(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(uu(r,t),e,i)}),i=!i.getChild(r).isEmpty()&&null!==o?i.updateChild(uu(r,".priority"),o):i}}(eu(),t.writeTree_,e)}function Fh(t,e){return Yh(e,t)}function jh(e,n){var t=e.allWrites.findIndex(function(t){return t.writeId===n});ro(0<=t,"removeWrite called with nonexistent writeId.");var r=e.allWrites[t];e.allWrites.splice(t,1);for(var i,o=r.visible,s=!1,a=e.allWrites.length-1;o&&0<=a;){var u=e.allWrites[a];u.visible&&(t<=a&&function(t,e){{if(t.snap)return pu(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&pu(uu(t.path,n),e))return!0;return!1}}(u,r.path)?o=!1:pu(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?((i=e).visibleWrites=qh(i.allWrites,Uh,eu()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?e.visibleWrites=Rh(e.visibleWrites,r.path):oa(r.children,function(t){e.visibleWrites=Rh(e.visibleWrites,uu(r.path,t))}),!0)}function Uh(t){return t.visible}function qh(t,e,n){for(var r=kh.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)pu(n,s)?r=Ah(r,a=hu(n,s),o.snap):pu(s,n)&&(a=hu(s,n),r=Ah(r,eu(),o.snap.getChild(a)));else{if(!o.children)throw io("WriteRecord should have .snap or .children");pu(n,s)?r=Nh(r,a=hu(n,s),o.children):pu(s,n)&&(cu(a=hu(s,n))?r=Nh(r,eu(),o.children):(o=Oo(o.children,nu(a)))&&(a=o.getChild(iu(a)),r=Ah(r,eu(),a)))}}}return r}function Vh(t,e,n,r,i){if(r||i){var o=xh(t.visibleWrites,e);if(!i&&Lh(o))return n;if(i||null!=n||Ph(o,eu()))return Mh(qh(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(pu(t.path,e)||pu(e,t.path))},e),n||uc.EMPTY_NODE);return null}o=Oh(t.visibleWrites,e);if(null!=o)return o;t=xh(t.visibleWrites,e);return Lh(t)?n:null!=n||Ph(t,eu())?Mh(t,n||uc.EMPTY_NODE):null}function Bh(t,e,n,r){return Vh(t.writeTree,t.treePath,e,n,r)}function Kh(t,e){return function(t,e,n){var r=uc.EMPTY_NODE,i=Oh(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($u,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=xh(t.visibleWrites,e);return n.forEachChild($u,function(t,e){e=Mh(xh(o,new Za(t)),e);r=r.updateImmediateChild(t,e)}),Dh(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return Dh(xh(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function Wh(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,ro(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=uu(t,e),Ph(i.visibleWrites,t)?null:Lh(t=xh(i.visibleWrites,t))?r.getChild(e):Mh(t,r.getChild(e));var i}function Hh(t,e){return n=t.writeTree,e=uu(t.treePath,e),Oh(n.visibleWrites,e);var n}function zh(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,t=xh(t.visibleWrites,e);if(null!=(e=Oh(t,eu())))a=e;else{if(null==n)return[];a=Mh(t,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var u=[],c=s.getCompare(),h=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),l=h.getNext();l&&u.length<i;)0!==c(l,r)&&u.push(l),l=h.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}function Gh(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=uu(i,n=e),null!=(i=Oh(r.visibleWrites,e))?i:t.isCompleteForChild(n)?Mh(xh(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Qh(t,e){return Yh(uu(t.treePath,e),t.writeTree)}function Yh(t,e){return{treePath:t,writeTree:e}}var Xh=($h.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;ro("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),ro(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,Nc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,Ac(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,Cc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw io("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Nc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},$h.prototype.getChanges=function(){return Array.from(this.changeMap.values())},$h);function $h(){this.changeMap=new Map}function Jh(){}var Zh=new(Jh.prototype.getCompleteChild=function(t){return null},Jh.prototype.getChildAfterChild=function(t,e,n){return null},Jh),tl=(el.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new ph(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gh(this.writes_,t,e)},el.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Th(this.viewCache_),t=zh(this.writes_,r,e,1,n,t);return 0===t.length?null:t[0]},el);function el(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function nl(t,e,n,r,i){var o,s,a,u,c,h,l,f,p=new Xh;if(n.type===Zc.OVERWRITE)var d=n,g=d.source.fromUser?ol(t,e,d.path,d.snap,r,i,p):(ro(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!cu(d.path),il(t,e,d.path,d.snap,r,i,o,p));else if(n.type===Zc.MERGE){var v=n;g=v.source.fromUser?(s=t,a=e,u=v.path,d=v.children,c=r,h=i,l=p,f=a,d.foreach(function(t,e){t=uu(u,t);sl(a,nu(t))&&(f=ol(s,f,t,e,c,h,l))}),d.foreach(function(t,e){t=uu(u,t);sl(a,nu(t))||(f=ol(s,f,t,e,c,h,l))}),f):(ro(v.source.fromServer,"Unknown source."),o=v.source.tagged||e.serverCache.isFiltered(),ul(t,e,v.path,v.children,r,i,o,p))}else if(n.type===Zc.ACK_USER_WRITE){var y=n;g=y.revert?function(t,e,n,r,i,o){var s;{if(null!=Hh(r,n))return e;var a,u,c=new tl(r,e,i),h=e.eventCache.getNode(),i=void 0;return cu(n)||".priority"===nu(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Bh(r,Th(e)):(a=e.serverCache.getNode(),ro(a instanceof uc,"serverChildren would be complete if leaf node"),Kh(r,a)),i=t.filter.updateFullNode(h,u,o)):(a=nu(n),null==(u=Gh(r,a,e.serverCache))&&e.serverCache.isCompleteForChild(a)&&(u=h.getImmediateChild(a)),(i=null!=u?t.filter.updateChild(h,a,u,iu(n),c,o):e.eventCache.getNode().hasChild(a)?t.filter.updateChild(h,a,uc.EMPTY_NODE,iu(n),c,o):h).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=Bh(r,Th(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,s,o))),s=e.serverCache.isFullyInitialized()||null!=Hh(r,eu()),_h(e,i,s,t.filter.filtersNodes())}}(t,e,y.path,r,i,p):function(t,e,r,n,i,o,s){if(null!=Hh(i,r))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;{if(null!=n.value){if(cu(r)&&u.isFullyInitialized()||u.isCompleteForPath(r))return il(t,e,r,u.getNode().getChild(r),i,o,a,s);if(cu(r)){var c=new Eh(null);return u.getNode().forEachChild(Pu,function(t,e){c=c.set(new Za(t),e)}),ul(t,e,r,c,i,o,a,s)}return e}var h=new Eh(null);return n.foreach(function(t,e){var n=uu(r,t);u.isCompleteForPath(n)&&(h=h.set(t,u.getNode().getChild(n)))}),ul(t,e,r,h,i,o,a,s)}}(t,e,y.path,y.affectedTree,r,i,p)}else{if(n.type!==Zc.LISTEN_COMPLETE)throw io("Unknown operation type: "+n.type);y=t,i=n.path,t=r,n=p,r=wh(e,(r=e.serverCache).getNode(),r.isFullyInitialized()||cu(i),r.isFiltered()),g=rl(y,r,i,t,Zh,n)}p=p.getChanges();return function(t,e,n){var r=e.eventCache;{var i,o;r.isFullyInitialized()&&(i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Ih(t),(0<n.length||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(kc(Ih(e))))}}(e,g,p),{viewCache:g,changes:p}}function rl(t,e,n,r,i,o){var s=e.eventCache;if(null!=Hh(r,n))return e;var a,u,c,h,l=void 0,f=void 0;return l=cu(n)?(ro(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(a=Kh(r,(a=Th(e))instanceof uc?a:uc.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),a,o)):(u=Bh(r,Th(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=nu(n))?(ro(1===ru(n),"Can't have a priority with additional path components"),null!=(h=Wh(r,n,c=s.getNode(),f=e.serverCache.getNode()))?t.filter.updatePriority(c,h):s.getNode()):(c=iu(n),h=void 0,null!=(h=s.isCompleteForChild(u)?(f=e.serverCache.getNode(),null!=(f=Wh(r,n,s.getNode(),f))?s.getNode().getImmediateChild(u).updateChild(c,f):s.getNode().getImmediateChild(u)):Gh(r,u,e.serverCache))?t.filter.updateChild(s.getNode(),u,h,c,i,o):s.getNode()),_h(e,l,s.isFullyInitialized()||cu(n),t.filter.filtersNodes())}function il(t,e,n,r,i,o,s,a){var u=e.serverCache,c=s?t.filter:t.filter.getIndexedFilter();if(cu(n))l=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var h=u.getNode().updateChild(n,r),l=c.updateFullNode(u.getNode(),h,null);else{s=nu(n);if(!u.isCompleteForPath(n)&&1<ru(n))return e;h=iu(n),r=u.getNode().getImmediateChild(s).updateChild(h,r);l=".priority"===s?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),s,r,h,Zh,null)}c=wh(e,l,u.isFullyInitialized()||cu(n),c.filtersNodes());return rl(t,c,n,i,new tl(i,c,o),a)}function ol(t,e,n,r,i,o,s){var a,u,c=e.eventCache,h=new tl(i,e,o);return cu(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),_h(e,u,!0,t.filter.filtersNodes())):".priority"===(a=nu(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),_h(e,u,c.isFullyInitialized(),c.isFiltered())):(i=iu(n),o=c.getNode().getImmediateChild(a),u=void 0,u=cu(i)?r:null!=(n=h.getCompleteChild(a))?".priority"===ou(i)&&n.getChild(au(i)).isEmpty()?n:n.updateChild(i,r):uc.EMPTY_NODE,o.equals(u)?e:_h(e,t.filter.updateChild(c.getNode(),a,u,i,h,s),c.isFullyInitialized(),t.filter.filtersNodes()))}function sl(t,e){return t.eventCache.isCompleteForChild(e)}function al(t,n,e){return e.foreach(function(t,e){n=n.updateChild(t,e)}),n}function ul(r,i,t,e,o,s,a,u){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;var c=i,e=cu(t)?e:new Eh(null).setTree(t,e),h=i.serverCache.getNode();return e.children.inorderTraversal(function(t,e){h.hasChild(t)&&(e=al(0,i.serverCache.getNode().getImmediateChild(t),e),c=il(r,c,new Za(t),e,o,s,a,u))}),e.children.inorderTraversal(function(t,e){var n=!i.serverCache.isCompleteForChild(t)&&void 0===e.value;h.hasChild(t)||n||(e=al(0,i.serverCache.getNode().getImmediateChild(t),e),c=il(r,c,new Za(t),e,o,s,a,u))}),c}var cl,hl=(Object.defineProperty(ll.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),ll);function ll(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new Rc(n.getIndex()),i=(o=n).loadsAllData()?new Rc(o.getIndex()):new(o.hasLimit()?xc:Oc)(o);this.processor_={filter:i};var t=e.serverCache,n=e.eventCache,o=r.updateFullNode(uc.EMPTY_NODE,t.getNode(),null),e=i.updateFullNode(uc.EMPTY_NODE,n.getNode(),null),r=new ph(o,t.isFullyInitialized(),r.filtersNodes()),i=new ph(e,n.isFullyInitialized(),i.filtersNodes());this.viewCache_=bh(i,r),this.eventGenerator_=new vh(this.query_)}function fl(t){return 0===t.eventRegistrations_.length}function pl(t,e,n){var r,i=[];if(n&&(ro(null==e,"A cancel should cancel all event registrations."),r=t.query._path,t.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(n,r);t&&i.push(t)})),e){for(var o=[],s=0;s<t.eventRegistrations_.length;++s){var a=t.eventRegistrations_[s];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(s+1));break}}else o.push(a)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function dl(t,e,n,r){e.type===Zc.MERGE&&null!==e.source.queryId&&(ro(Th(t.viewCache_),"We should always have a full cache before handling merges"),ro(Ih(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_,e=nl(t.processor_,i,e,n,r);return n=t.processor_,r=e.viewCache,ro(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),ro(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),ro(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,gl(t,e.changes,e.viewCache.eventCache.getNode(),null)}function gl(t,e,n,r){r=r?[r]:t.eventRegistrations_;return yh(t.eventGenerator_,e,n,r)}var vl,yl=function(){this.views=new Map};function ml(t,e,n,r){var i,o,s=e.source.queryId;if(null!==s){var a=t.views.get(s);return ro(null!=a,"SyncTree gave us an op for an invalid query."),dl(a,e,n,r)}var u=[];try{for(var c=$i(t.views.values()),h=c.next();!h.done;h=c.next())a=h.value,u=u.concat(dl(a,e,n,r))}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function bl(t,e,n,r,i){var o=e._queryIdentifier,t=t.views.get(o);if(t)return t;o=Bh(n,i?r:null),t=!1,t=!!o||(o=r instanceof uc?Kh(n,r):uc.EMPTY_NODE,!1),i=bh(new ph(o,t,!1),new ph(r,i,!1));return new hl(e,i)}function _l(t,e,n,r,i,o){var s,o=bl(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),o.eventRegistrations_.push(n),e=n,o=(n=o).viewCache_.eventCache,s=[],o.getNode().isLeafNode()||o.getNode().forEachChild($u,function(t,e){s.push(Cc(t,e))}),o.isFullyInitialized()&&s.push(kc(o.getNode())),gl(n,s,o.getNode(),e)}function wl(t,e,n,r){var i,o,s=e._queryIdentifier,a=[],u=[],c=kl(t);if("default"===s)try{for(var h=$i(t.views.entries()),l=h.next();!l.done;l=h.next()){var f=Ji(l.value,2),p=f[0],d=f[1],u=u.concat(pl(d,n,r));fl(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||a.push(d.query))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=h.return)&&o.call(h)}finally{if(i)throw i.error}}else(d=t.views.get(s))&&(u=u.concat(pl(d,n,r)),fl(d)&&(t.views.delete(s),d.query._queryParams.loadsAllData()||a.push(d.query)));return c&&!kl(t)&&a.push((ro(cl,"Reference.ts has not been loaded"),new cl(e._repo,e._path))),{removed:a,events:u}}function Il(t){var e,n,r=[];try{for(var i=$i(t.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Tl(t,e){var n,r,i,o,s,a=null;try{for(var u=$i(t.views.values()),c=u.next();!c.done;c=u.next())var h=c.value,a=a||(o=e,s=void 0,(s=Th((i=h).viewCache_))&&(i.query._queryParams.loadsAllData()||!cu(o)&&!s.getImmediateChild(nu(o)).isEmpty())?s.getChild(o):null)}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return a}function El(t,e){if(e._queryParams.loadsAllData())return Cl(t);e=e._queryIdentifier;return t.views.get(e)}function Sl(t,e){return null!=El(t,e)}function kl(t){return null!=Cl(t)}function Cl(t){var e,n;try{for(var r=$i(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Al=1,Nl=function(t){this.listenProvider_=t,this.syncPointTree_=new Eh(null),this.pendingWriteTree_={visibleWrites:kh.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Rl(t,e,n,r,i){var o,s,a,u;return o=t.pendingWriteTree_,s=e,a=n,u=i,ro((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),o.allWrites.push({path:s,snap:a,writeId:r,visible:u=void 0===u?!0:u}),u&&(o.visibleWrites=Ah(o.visibleWrites,s,a)),o.lastWriteId=r,i?jl(t,new ch(nh(),e,n)):[]}function Pl(t,e,n,r){var i,o,s;i=t.pendingWriteTree_,o=e,s=n,ro((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:s,writeId:r,visible:!0}),i.visibleWrites=Nh(i.visibleWrites,o,s),i.lastWriteId=r;n=Eh.fromObject(n);return jl(t,new lh(nh(),e,n))}function Ol(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(jh(t.pendingWriteTree_,e)){var i=new Eh(null);return null!=r.snap?i=i.set(eu(),!0):oa(r.children,function(t){i=i.set(new Za(t),!0)}),jl(t,new oh(r.path,i,n))}return[]}function Dl(t,e,n){return jl(t,new ch(rh(),e,n))}function xl(n,t,e,r){var i=t._path,o=n.syncPointTree_.get(i),s=[];if(o&&("default"===t._queryIdentifier||Sl(o,t))){var a=wl(o,t,e,r);0===o.views.size&&(n.syncPointTree_=n.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t._queryParams.loadsAllData()}),a=n.syncPointTree_.findOnPath(i,function(t,e){return kl(e)});if(o&&!a){i=n.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=i.fold(function(t,e,n){if(e&&kl(e))return[Cl(e)];var r=[];return e&&(r=Il(e)),oa(n,function(t,e){r=r.concat(e)}),r}),c=0;c<u.length;++c){var h=u[c],l=h.query,h=ql(n,h);n.listenProvider_.startListening(zl(l),Vl(n,l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!r&&(o?n.listenProvider_.stopListening(zl(t),null):e.forEach(function(t){var e=n.queryToTagMap.get(Bl(t));n.listenProvider_.stopListening(zl(t),e)})),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i._queryParams.loadsAllData()||(r=Bl(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(n,e)}return s}function Ll(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){t=hu(t,r);i=i||Tl(e,t),o=o||kl(e)});var s=t.syncPointTree_.get(r);s?(o=o||kl(s),i=i||Tl(s,eu())):(s=new yl,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i?h=!0:(h=!1,i=uc.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){e=Tl(e,eu());e&&(i=i.updateImmediateChild(t,e))}));var a,u,c=Sl(s,e);c||e._queryParams.loadsAllData()||(a=Bl(e),ro(!t.queryToTagMap.has(a),"View does not exist, but we have a tag"),u=Al++,t.queryToTagMap.set(a,u),t.tagToQueryMap.set(u,a));var h=_l(s,e,n,Fh(t.pendingWriteTree_,r),i,h);return c||o||(s=El(s,e),h=h.concat(function(t,e,n){var r=e._path,i=Vl(t,e),n=ql(t,n),n=t.listenProvider_.startListening(zl(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r);if(i)ro(!kl(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold(function(t,e,n){if(!cu(t)&&e&&kl(e))return[Cl(e).query];var r=[];return e&&(r=r.concat(Il(e).map(function(t){return t.query}))),oa(n,function(t,e){r=r.concat(e)}),r}),s=0;s<o.length;++s){var a=o[s];t.listenProvider_.stopListening(zl(a),Vl(t,a))}return n}(t,e,s))),h}function Ml(t,n,e){var r=t.pendingWriteTree_,t=t.syncPointTree_.findOnPath(n,function(t,e){t=Tl(e,hu(t,n));if(t)return t});return Vh(r,n,t,e,!0)}function Fl(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){t=hu(t,n);r=r||Tl(e,t)});var i=t.syncPointTree_.get(n);i?r=r||Tl(i,eu()):(i=new yl,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new ph(r,!0,!1):null;return Ih(bl(i,e,Fh(t.pendingWriteTree_,e._path),o?s.getNode():uc.EMPTY_NODE,o).viewCache_)}function jl(t,e){return function t(e,n,r,i){{if(cu(e.path))return Ul(e,n,r,i);var o=n.get(eu());null==r&&null!=o&&(r=Tl(o,eu()));var s=[],a=nu(e.path),u=e.operationForChild(a),c=n.children.get(a);return c&&u&&(n=r?r.getImmediateChild(a):null,a=Qh(i,a),s=s.concat(t(u,c,n,a))),s=o?s.concat(ml(o,e,i,r)):s}}(e,t.syncPointTree_,null,Fh(t.pendingWriteTree_,eu()))}function Ul(i,t,o,s){var e=t.get(eu());null==o&&null!=e&&(o=Tl(e,eu()));var a=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=Qh(s,t),t=i.operationForChild(t);t&&(a=a.concat(Ul(t,e,n,r)))}),a=e?a.concat(ml(e,i,s,o)):a}function ql(n,t){var r=t.query,i=Vl(n,r);return{hashFn:function(){return(t.viewCache_.serverCache.getNode()||uc.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?function(t,e,n){var r=Kl(t,n);if(r){n=Wl(r),r=n.path,n=n.queryId,e=hu(r,e);return Hl(t,r,new ah(ih(n),e))}return[]}(n,r._path,i):(e=r._path,jl(n,new ah(rh(),e)));var e,e=(e="Unknown Error","too_big"===(t=t)?e="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?e="Client doesn't have permission to access the desired data.":"unavailable"===t&&(e="The service is unavailable"),(e=new Error(t+" at "+r._path.toString()+": "+e)).code=t.toUpperCase(),e);return xl(n,r,null,e)}}}function Vl(t,e){e=Bl(e);return t.queryToTagMap.get(e)}function Bl(t){return t._path.toString()+"$"+t._queryIdentifier}function Kl(t,e){return t.tagToQueryMap.get(e)}function Wl(t){var e=t.indexOf("$");return ro(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Za(t.substr(0,e))}}function Hl(t,e,n){var r=t.syncPointTree_.get(e);return ro(r,"Missing sync point for query tag that we're tracking"),ml(r,n,Fh(t.pendingWriteTree_,e),null)}function zl(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?(ro(vl,"Reference.ts has not been loaded"),new vl(t._repo,t._path)):t}var Gl=(Ql.prototype.getImmediateChild=function(t){return new Ql(this.node_.getImmediateChild(t))},Ql.prototype.node=function(){return this.node_},Ql);function Ql(t){this.node_=t}var Yl=(Xl.prototype.getImmediateChild=function(t){t=uu(this.path_,t);return new Xl(this.syncTree_,t)},Xl.prototype.node=function(){return Ml(this.syncTree_,this.path_)},Xl);function Xl(t,e){this.syncTree_=t,this.path_=e}var $l=function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t},Zl=function(t,e,n){return t&&"object"==typeof t?(ro(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?tf(t[".sv"],e,n):"object"==typeof t[".sv"]?ef(t[".sv"],e):void ro(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},tf=function(t,e,n){if("timestamp"===t)return n.timestamp;ro(!1,"Unexpected server value: "+t)},ef=function(t,e,n){t.hasOwnProperty("increment")||ro(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&ro(!1,"Unexpected increment value: "+t);e=e.node();if(ro(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t},nf=function(t,e,n,r){return of(e,new Yl(n,t),r)},rf=function(t,e,n){return of(t,new Gl(e),n)};function of(t,r,i){var e=t.getPriority().val(),n=Zl(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Zl(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Qu(e,pc(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new Qu(n))),t.forEachChild($u,function(t,e){var n=of(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var sf=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t=void 0===t?"":t,this.parent=e,this.node=n};function af(t,e){for(var n=e instanceof Za?e:new Za(e),r=t,i=nu(n);null!==i;)var o=Oo(r.node.children,i)||{children:{},childCount:0},r=new sf(i,r,o),i=nu(n=iu(n));return r}function uf(t){return t.node.value}function cf(t,e){t.node.value=e,pf(t)}function hf(t){return 0<t.node.childCount}function lf(n,r){oa(n.node.children,function(t,e){r(new sf(t,n,e))})}function ff(t){return new Za(null===t.parent?t.name:ff(t.parent)+"/"+t.name)}function pf(t){var e,n,r,i;null!==t.parent&&(e=t.parent,n=t.name,i=function(t){return void 0===uf(t)&&!hf(t)}(r=t),t=Po(e.node.children,n),i&&t?(delete e.node.children[n],e.node.childCount--,pf(e)):i||t||(e.node.children[n]=r.node,e.node.childCount++,pf(e)))}function df(t){return"string"==typeof t&&0!==t.length&&!bf.test(t)}function gf(t){return"string"==typeof t&&0!==t.length&&!_f.test(t)}function vf(t,e,n,r){if(!r||void 0!==e){var i=Ko(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];oa(e,function(t,e){t=new Za(t);if(Ef(i,e,uu(n,t)),".priority"===ou(t)&&!If(e))throw new Error(i+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(t)}),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=su(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!df(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(lu);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&pu(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(i,o)}}function yf(t,e,n){if(!n||void 0!==e){if(Us(e))throw new Error(Ko(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!If(e))throw new Error(Ko(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function mf(t,e,n,r){if(!(r&&void 0===n||df(n)))throw new Error(Ko(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}var bf=/[\[\].#$\/\u0000-\u001F\u007F]/,_f=/[\[\].#$\u0000-\u001F\u007F]/,wf=10485760,If=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Us(t)||t&&"object"==typeof t&&Po(t,".sv")},Tf=function(t,e,n,r){r&&void 0===e||Ef(Ko(t,"value"),e,n)},Ef=function(r,t,e){var i=e instanceof Za?new du(e,r):e;if(void 0===t)throw new Error(r+"contains undefined "+vu(i));if("function"==typeof t)throw new Error(r+"contains a function "+vu(i)+" with contents = "+t.toString());if(Us(t))throw new Error(r+"contains "+t.toString()+" "+vu(i));if("string"==typeof t&&t.length>wf/3&&zo(t)>wf)throw new Error(r+"contains a string greater than "+wf+" utf8 bytes "+vu(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,s=!1;if(oa(t,function(t,e){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!df(t)))throw new Error(r+" contains an invalid key ("+t+") "+vu(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var n;n=t,0<(t=i).parts_.length&&(t.byteLength_+=1),t.parts_.push(n),t.byteLength_+=zo(n),gu(t),Ef(r,e,i),e=(t=i).parts_.pop(),t.byteLength_-=zo(e),0<t.parts_.length&&--t.byteLength_}),o&&s)throw new Error(r+' contains ".value" child '+vu(i)+" in addition to actual children.")}},Sf=function(t,e,n,r){if(!(r&&void 0===n||gf(n)))throw new Error(Ko(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},kf=function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),Sf(t,e,n,r)},Cf=function(t,e){if(".info"===nu(e))throw new Error(t+" failed = Can't modify data under /.info/")},Af=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!df(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&(n=(n=n)&&n.replace(/^\/*\.info(\/|$)/,"/"),!gf(n)))throw new Error(Ko(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Nf=function(){this.eventLists_=[],this.recursionDepth_=0};function Rf(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||fu(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function Pf(t,e,n){Rf(t,n),Df(t,function(t){return fu(t,e)})}function Of(t,e,n){Rf(t,n),Df(t,function(t){return pu(t,e)||pu(e,t)})}function Df(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Ys&&$s("event: "+r.toString()),fa(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var xf="repo_interrupt",Lf=25,Mf=(Ff.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Ff);function Ff(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Qc(),this.transactionQueueTree_=new sf,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function jf(s,t,e){if(s.stats_=Na(s.repoInfo_),s.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))s.server_=new Wc(s.repoInfo_,function(t,e,n,r){Vf(s,t,e,n,r)},s.authTokenProvider_,s.appCheckProvider_),setTimeout(function(){return Bf(s,!0)},0);else{if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{No(e)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}s.persistentConnection_=new Tu(s.repoInfo_,t,function(t,e,n,r){Vf(s,t,e,n,r)},function(t){Bf(s,t)},function(t){var n;n=s,oa(t,function(t,e){Kf(n,t,e)})},s.authTokenProvider_,s.appCheckProvider_,e),s.server_=s.persistentConnection_}s.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),s.appCheckProvider_.addTokenChangeListener(function(t){s.server_.refreshAppCheckToken(t.token)}),s.statsReporter_=(t=s.repoInfo_,e=function(){return new th(s.stats_,s.server_)},t=t.toString(),Aa[t]||(Aa[t]=e()),Aa[t]),s.infoData_=new zc,s.infoSyncTree_=new Nl({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t._path);return o.isEmpty()||(i=Dl(s.infoSyncTree_,t._path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),Kf(s,"connected",!1),s.serverSyncTree_=new Nl({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);Of(s.eventQueue_,n._path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}function Uf(t){t=t.infoData_.getNode(new Za(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function qf(t){return $l({timestamp:Uf(t)})}function Vf(t,e,n,r,i){t.dataUpdateCount++;var o=new Za(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s,a,u,c,h=[],e=o;0<(h=i?r?(s=xo(n,function(t){return pc(t)}),function(t,e,n,r){var i=Kl(t,r);if(i){r=Wl(i),i=r.path,r=r.queryId,e=hu(i,e),n=Eh.fromObject(n);return Hl(t,i,new lh(ih(r),e,n))}return[]}(t.serverSyncTree_,o,s,i)):(c=pc(n),s=t.serverSyncTree_,a=o,u=c,null==(i=Kl(s,c=i))?[]:(c=Wl(i),i=c.path,c=c.queryId,a=hu(i,a),Hl(s,i,new ch(ih(c),a,u)))):r?(c=xo(n,function(t){return pc(t)}),a=t.serverSyncTree_,u=o,r=c,r=Eh.fromObject(c),jl(a,new lh(rh(),u,r))):(n=pc(n),Dl(t.serverSyncTree_,o,n))).length&&(e=tp(t,o)),Of(t.eventQueue_,e,h)}function Bf(t,e){Kf(t,"connected",e),!1===e&&function(n){Xf(n,"onDisconnectEvents");var r=qf(n),i=Qc();Xc(n.onDisconnect_,eu(),function(t,e){e=nf(t,e,n.serverSyncTree_,r);Yc(i,t,e)});var o=[];Xc(i,eu(),function(t,e){o=o.concat(Dl(n.serverSyncTree_,t,e));t=ip(n,t);tp(n,t)}),n.onDisconnect_=Qc(),Of(n.eventQueue_,eu(),o)}(t)}function Kf(t,e,n){e=new Za("/.info/"+e),n=pc(n);t.infoData_.updateSnapshot(e,n);n=Dl(t.infoSyncTree_,e,n);Of(t.eventQueue_,e,n)}function Wf(t){return t.nextWriteId_++}function Hf(r,i,t,e,o){Xf(r,"set",{path:i.toString(),value:t,priority:e});var n=qf(r),t=pc(t,e),e=Ml(r.serverSyncTree_,i),n=rf(t,e,n),s=Wf(r),n=Rl(r.serverSyncTree_,i,n,s,!0);Rf(r.eventQueue_,n),r.server_.put(i.toString(),t.val(!0),function(t,e){var n="ok"===t;n||ta("set at "+i+" failed: "+t);n=Ol(r.serverSyncTree_,s,!n);Of(r.eventQueue_,i,n),$f(0,o,t,e)});t=ip(r,i);tp(r,t),Of(r.eventQueue_,t,[])}function zf(n,r,i){n.server_.onDisconnectCancel(r.toString(),function(t,e){"ok"===t&&!function t(n,e){if(cu(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;var r=n.value;return n.value=null,r.forEachChild($u,function(t,e){Yc(n,new Za(t),e)}),t(n,e)}if(0<n.children.size)return r=nu(e),e=iu(e),n.children.has(r)&&t(n.children.get(r),e)&&n.children.delete(r),0===n.children.size;return!0}(n.onDisconnect_,r),$f(0,i,t,e)})}function Gf(n,r,t,i){var o=pc(t);n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&Yc(n.onDisconnect_,r,o),$f(0,i,t,e)})}function Qf(t,e,n){n=".info"===nu(e._path)?xl(t.infoSyncTree_,e,n):xl(t.serverSyncTree_,e,n);Pf(t.eventQueue_,e._path,n)}function Yf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(xf)}function Xf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),$s.apply(void 0,Zi([r],Ji(e)))}function $f(t,n,r,i){n&&fa(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})}function Jf(t,e,n){return Ml(t.serverSyncTree_,e,n)||uc.EMPTY_NODE}function Zf(e,t){var n;(t=void 0===t?e.transactionQueueTree_:t)||rp(e,t),uf(t)?(n=np(e,t),ro(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(i,o,s){for(var t=s.map(function(t){return t.currentWriteId}),e=Jf(i,o,t),n=e,t=e.hash(),r=0;r<s.length;r++){var a=s[r];ro(0===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=1,a.retryCount++;var u=hu(o,a.path);n=n.updateChild(u,a.currentOutputSnapshotRaw)}var e=n.val(!0),c=o;i.server_.put(c.toString(),e,function(t){Xf(i,"transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<s.length;r++)!function(t){s[t].status=2,e=e.concat(Ol(i.serverSyncTree_,s[t].currentWriteId)),s[t].onComplete&&n.push(function(){return s[t].onComplete(null,!0,s[t].currentOutputSnapshotResolved)}),s[t].unwatcher()}(r);rp(i,af(i.transactionQueueTree_,o)),Zf(i,i.transactionQueueTree_),Of(i.eventQueue_,o,e);for(r=0;r<n.length;r++)fa(n[r])}else{if("datastale"===t)for(r=0;r<s.length;r++)3===s[r].status?s[r].status=4:s[r].status=0;else{ta("transaction at "+c.toString()+" failed: "+t);for(r=0;r<s.length;r++)s[r].status=4,s[r].abortReason=t}tp(i,o)}},t)}(e,ff(t),n)):hf(t)&&lf(t,function(t){Zf(e,t)})}function tp(t,e){var n=ep(t,e),e=ff(n);return function(u,c,h){if(0!==c.length){for(var l=[],f=[],p=c.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),t=0;t<c.length;t++)!function(t){var e,n,r,i,o=c[t],s=hu(h,o.path),a=!1;ro(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),4===o.status?(e=o.abortReason,f=f.concat(Ol(u.serverSyncTree_,o.currentWriteId,a=!0))):0===o.status&&(f=o.retryCount>=Lf?(e="maxretry",f.concat(Ol(u.serverSyncTree_,o.currentWriteId,a=!0))):(n=Jf(u,o.path,p),o.currentInputSnapshot=n,void 0!==(i=c[t].update(n.val()))?(Ef("transaction failed: Data returned ",i,o.path),r=pc(i),"object"==typeof i&&null!=i&&Po(i,".priority")||(r=r.updatePriority(n.getPriority())),s=o.currentWriteId,i=qf(u),i=rf(r,n,i),o.currentOutputSnapshotRaw=r,o.currentOutputSnapshotResolved=i,o.currentWriteId=Wf(u),p.splice(p.indexOf(s),1),(f=f.concat(Rl(u.serverSyncTree_,o.path,i,o.currentWriteId,o.applyLocally))).concat(Ol(u.serverSyncTree_,s,!0))):(e="nodata",f.concat(Ol(u.serverSyncTree_,o.currentWriteId,a=!0))))),Of(u.eventQueue_,h,f),f=[],a&&(c[t].status=2,a=c[t].unwatcher,setTimeout(a,Math.floor(0)),c[t].onComplete&&("nodata"===e?l.push(function(){return c[t].onComplete(null,!1,c[t].currentInputSnapshot)}):l.push(function(){return c[t].onComplete(new Error(e),!1,null)})))}(t);rp(u,u.transactionQueueTree_);for(t=0;t<l.length;t++)fa(l[t]);Zf(u,u.transactionQueueTree_)}}(t,np(t,n),e),e}function ep(t,e){for(var n=t.transactionQueueTree_,r=nu(e);null!==r&&void 0===uf(n);)n=af(n,r),r=nu(e=iu(e));return n}function np(t,e){var n=[];return function e(n,t,r){var i=uf(t);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);lf(t,function(t){e(n,t,r)})}(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function rp(e,t){var n=uf(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,cf(t,0<n.length?n:void 0)}lf(t,function(t){rp(e,t)})}function ip(e,t){var n=ff(ep(e,t)),t=af(e.transactionQueueTree_,t);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return;r=r.parent}}(t,function(t){op(e,t)}),op(e,t),function e(t,n,r,i){r&&!i&&n(t),lf(t,function(t){e(t,n,!0,i)}),r&&i&&n(t)}(t,function(t){op(e,t)}),n}function op(t,e){var n=uf(e);if(n){for(var r=[],i=[],o=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(ro(o===s-1,"All SENT items should be at beginning of queue."),n[o=s].status=3,n[s].abortReason="set"):(ro(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Ol(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));-1===o?cf(e,void 0):n.length=o+1,Of(t.eventQueue_,ff(e),i);for(s=0;s<r.length;s++)fa(r[s])}}var sp=function(t,e){var n=ap(t),r=n.namespace;"firebase.com"===n.domain&&Zs(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Zs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ta("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");t="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Ia(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new Za(n.pathString)}},ap=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=$i(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ta("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},up=(cp.prototype.getPath=function(){var t=this.snapshot.ref;return("value"===this.eventType?t:t.parent)._path},cp.prototype.getEventType=function(){return this.eventType},cp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},cp.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+No(this.snapshot.exportVal())},cp);function cp(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var hp=(lp.prototype.getPath=function(){return this.path},lp.prototype.getEventType=function(){return"cancel"},lp.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},lp.prototype.toString=function(){return this.path.toString()+":cancel"},lp);function lp(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var fp=(pp.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},pp.prototype.onCancel=function(t){return ro(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(pp.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),pp.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},pp);function pp(t,e){this.snapshotCallback=t,this.cancelCallback=e}var dp=(gp.prototype.cancel=function(){var t=new uo;return zf(this._repo,this._path,t.wrapCallback(function(){})),t.promise},gp.prototype.remove=function(){Cf("OnDisconnect.remove",this._path);var t=new uo;return Gf(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},gp.prototype.set=function(t){Cf("OnDisconnect.set",this._path),Tf("OnDisconnect.set",t,this._path,!1);var e=new uo;return Gf(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},gp.prototype.setWithPriority=function(t,e){Cf("OnDisconnect.setWithPriority",this._path),Tf("OnDisconnect.setWithPriority",t,this._path,!1),yf("OnDisconnect.setWithPriority",e,!1);var n,r,i,o,s=new uo;return n=this._repo,r=this._path,t=t,e=e,i=s.wrapCallback(function(){}),o=pc(t,e),n.server_.onDisconnectPut(r.toString(),o.val(!0),function(t,e){"ok"===t&&Yc(n.onDisconnect_,r,o),$f(0,i,t,e)}),s.promise},gp.prototype.update=function(t){Cf("OnDisconnect.update",this._path),vf("OnDisconnect.update",t,this._path,!1);var e=new uo;return function(n,r,i,o){if(Do(i))return $s("onDisconnect().update() called with empty data.  Don't do anything."),$f(0,o,"ok",void 0);n.server_.onDisconnectMerge(r.toString(),i,function(t,e){"ok"===t&&oa(i,function(t,e){e=pc(e);Yc(n.onDisconnect_,uu(r,t),e)}),$f(0,o,t,e)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},gp);function gp(t,e){this._repo=t,this._path=e}var vp=(Object.defineProperty(yp.prototype,"key",{get:function(){return cu(this._path)?null:ou(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(yp.prototype,"ref",{get:function(){return new Ip(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(yp.prototype,"_queryIdentifier",{get:function(){var t=Bc(this._queryParams),t=ia(t);return"{}"===t?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(yp.prototype,"_queryObject",{get:function(){return Bc(this._queryParams)},enumerable:!1,configurable:!0}),yp.prototype.isEqual=function(t){if(!((t=Jo(t))instanceof yp))return!1;var e=this._repo===t._repo,n=fu(this._path,t._path),t=this._queryIdentifier===t._queryIdentifier;return e&&n&&t},yp.prototype.toJSON=function(){return this.toString()},yp.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},yp);function yp(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}function mp(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function bp(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Pu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ea)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==na)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===$u){if(null!=e&&!If(e)||null!=n&&!If(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(ro(t.getIndex()instanceof vc||t.getIndex()===Tc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _p(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var wp,Ip=(Gi(Tp,wp=vp),Object.defineProperty(Tp.prototype,"parent",{get:function(){var t=au(this._path);return null===t?null:new Tp(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Tp.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),Tp);function Tp(t,e){return wp.call(this,t,e,new Mc,!1)||this}var Ep=(Object.defineProperty(Sp.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(Sp.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(Sp.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),Sp.prototype.child=function(t){var e=new Za(t),t=Ap(this.ref,t);return new Sp(this._node.getChild(e),t,$u)},Sp.prototype.exists=function(){return!this._node.isEmpty()},Sp.prototype.exportVal=function(){return this._node.val(!0)},Sp.prototype.forEach=function(n){var r=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(t,e){return n(new Sp(e,Ap(r.ref,t),$u))})},Sp.prototype.hasChild=function(t){t=new Za(t);return!this._node.getChild(t).isEmpty()},Sp.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},Sp.prototype.toJSON=function(){return this.exportVal()},Sp.prototype.val=function(){return this._node.val()},Sp);function Sp(t,e,n){this._node=t,this.ref=e,this._index=n}function kp(t,e){return(t=Jo(t))._checkNotDeleted("ref"),void 0!==e?Ap(t._root,e):t._root}function Cp(t,e){(t=Jo(t))._checkNotDeleted("refFromURL");var n=sp(e,t._repo.repoInfo_.nodeAdmin);Af("refFromURL",n);e=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||e.host===t._repo.repoInfo_.host||Zs("refFromURL: Host name does not match the current database: (found "+e.host+" but expected "+t._repo.repoInfo_.host+")"),kp(t,n.path.toString())}function Ap(t,e){return(null===nu((t=Jo(t))._path)?kf:Sf)("child","path",e,!1),new Ip(t._repo,uu(t._path,e))}function Np(t,e){t=Jo(t),Cf("set",t._path),Tf("set",e,t._path,!1);var n=new uo;return Hf(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Rp(t,e){vf("update",e,t._path,!1);var n=new uo;return function(i,o,t,s){Xf(i,"update",{path:o.toString(),value:t});var a,e,n=!0,r=qf(i),u={};oa(t,function(t,e){n=!1,u[t]=nf(uu(o,t),pc(e),i.serverSyncTree_,r)}),n?($s("update() called with empty data.  Don't do anything."),$f(0,s,"ok",void 0)):(a=Wf(i),e=Pl(i.serverSyncTree_,o,u,a),Rf(i.eventQueue_,e),i.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||ta("update at "+o+" failed: "+t);var r=Ol(i.serverSyncTree_,a,!n),n=0<r.length?tp(i,o):o;Of(i.eventQueue_,n,r),$f(0,s,t,e)}),oa(t,function(t){t=ip(i,uu(o,t));tp(i,t)}),Of(i.eventQueue_,o,[]))}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}function Pp(e){return e=Jo(e),n=e._repo,r=e,(null!=(t=Fl(n.serverSyncTree_,r))?Promise.resolve(t):n.server_.get(r).then(function(t){var e=pc(t).withIndex(r._queryParams.getIndex()),t=Dl(n.serverSyncTree_,r._path,e);return Pf(n.eventQueue_,r._path,t),Promise.resolve(e)},function(t){return Xf(n,"get for query "+No(r)+" failed: "+t),Promise.reject(new Error(t))})).then(function(t){return new Ep(t,new Ip(e._repo,e._path),e._queryParams.getIndex())});var n,r,t}var Op=(Dp.prototype.respondsTo=function(t){return"value"===t},Dp.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new up("value",this,new Ep(t.snapshotNode,new Ip(e._repo,e._path),n))},Dp.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},Dp.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new hp(this,t,e):null},Dp.prototype.matches=function(t){return t instanceof Dp&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},Dp.prototype.hasAnyCallback=function(){return null!==this.callbackContext},Dp);function Dp(t){this.callbackContext=t}var xp=(Lp.prototype.respondsTo=function(t){t="children_added"===t?"child_added":t;return this.eventType===(t="children_removed"===t?"child_removed":t)},Lp.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new hp(this,t,e):null},Lp.prototype.createEvent=function(t,e){ro(null!=t.childName,"Child events should have a childName.");var n=Ap(new Ip(e._repo,e._path),t.childName),e=e._queryParams.getIndex();return new up(t.type,this,new Ep(t.snapshotNode,n,e),t.prevName)},Lp.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},Lp.prototype.matches=function(t){return t instanceof Lp&&(this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)))},Lp.prototype.hasAnyCallback=function(){return!!this.callbackContext},Lp);function Lp(t,e){this.eventType=t,this.callbackContext=e}function Mp(n,t,e,r,i){var o;"object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce&&((i=function(t,e){Qf(n._repo,n,a),o(t,e)}).userCallback=(o=e).userCallback,i.context=e.context,e=i);var s,e=new fp(e,s||void 0),a="value"===t?new Op(e):new xp(t,e);return s=n._repo,t=a,t=".info"===nu((e=n)._path)?Ll(s.infoSyncTree_,e,t):Ll(s.serverSyncTree_,e,t),Pf(s.eventQueue_,e._path,t),function(){return Qf(n._repo,n,a)}}function Fp(t,e,n,r){return Mp(t,"value",e,n,r)}function jp(t,e,n,r){return Mp(t,"child_added",e,n,r)}function Up(t,e,n,r){return Mp(t,"child_changed",e,n,r)}function qp(t,e,n,r){return Mp(t,"child_moved",e,n,r)}function Vp(t,e,n,r){return Mp(t,"child_removed",e,n,r)}function Bp(t,e,n){var r=null,n=n?new fp(n):null;"value"===e?r=new Op(n):e&&(r=new xp(e,n)),Qf(t._repo,t,r)}var Kp,fr=function(){},Wp=(Gi(Hp,Kp=fr),Hp.prototype._apply=function(t){Tf("endAt",this._value,t._path,!0);var e=Uc(t._queryParams,this._value,this._key);if(_p(e),bp(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vp(t._repo,t._path,e,t._orderByCalled)},Hp);function Hp(t,e){var n=Kp.call(this)||this;return n._value=t,n._key=e,n}var zp,Gp=(Gi(Qp,zp=fr),Qp.prototype._apply=function(t){Tf("endBefore",this._value,t._path,!1);var e,n,r,r=(e=t._queryParams,n=this._value,r=this._key,(r=e.index_===Pu?Uc(e,n="string"==typeof n?_c(n):n,r):Uc(e,n,null==r?ea:_c(r))).endBeforeSet_=!0,r);if(_p(r),bp(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new vp(t._repo,t._path,r,t._orderByCalled)},Qp);function Qp(t,e){var n=zp.call(this)||this;return n._value=t,n._key=e,n}var Yp,Xp=(Gi($p,Yp=fr),$p.prototype._apply=function(t){Tf("startAt",this._value,t._path,!0);var e=jc(t._queryParams,this._value,this._key);if(_p(e),bp(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new vp(t._repo,t._path,e,t._orderByCalled)},$p);function $p(t,e){var n=Yp.call(this)||this;return n._value=t,n._key=e,n}var Jp,Zp=(Gi(td,Jp=fr),td.prototype._apply=function(t){Tf("startAfter",this._value,t._path,!1);var e,n,r,r=(e=t._queryParams,n=this._value,r=this._key,(r=e.index_===Pu?jc(e,n="string"==typeof n?bc(n):n,r):jc(e,n,null==r?na:bc(r))).startAfterSet_=!0,r);if(_p(r),bp(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new vp(t._repo,t._path,r,t._orderByCalled)},td);function td(t,e){var n=Jp.call(this)||this;return n._value=t,n._key=e,n}var ed,nd=(Gi(rd,ed=fr),rd.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new vp(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="l",e),t._orderByCalled);var e,n},rd);function rd(t){var e=ed.call(this)||this;return e._limit=t,e}var id,od=(Gi(sd,id=fr),sd.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new vp(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="r",e),t._orderByCalled);var e,n},sd);function sd(t){var e=id.call(this)||this;return e._limit=t,e}var ad,ud=(Gi(cd,ad=fr),cd.prototype._apply=function(t){mp(t,"orderByChild");var e=new Za(this._path);if(cu(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");e=new vc(e),e=qc(t._queryParams,e);return bp(e),new vp(t._repo,t._path,e,!0)},cd);function cd(t){var e=ad.call(this)||this;return e._path=t,e}var hd,ld=(Gi(fd,hd=fr),fd.prototype._apply=function(t){mp(t,"orderByKey");var e=qc(t._queryParams,Pu);return bp(e),new vp(t._repo,t._path,e,!0)},fd);function fd(){return null!==hd&&hd.apply(this,arguments)||this}var pd,dd=(Gi(gd,pd=fr),gd.prototype._apply=function(t){mp(t,"orderByPriority");var e=qc(t._queryParams,$u);return bp(e),new vp(t._repo,t._path,e,!0)},gd);function gd(){return null!==pd&&pd.apply(this,arguments)||this}var vd,yd=(Gi(md,vd=fr),md.prototype._apply=function(t){mp(t,"orderByValue");var e=qc(t._queryParams,Tc);return bp(e),new vp(t._repo,t._path,e,!0)},md);function md(){return null!==vd&&vd.apply(this,arguments)||this}var bd,_d,wd,Id=(Gi(Td,bd=fr),Td.prototype._apply=function(t){if(Tf("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Wp(this._value,this._key)._apply(new Xp(this._value,this._key)._apply(t))},Td);function Td(t,e){var n=bd.call(this)||this;return n._value=t,n._key=e,n}function Ed(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=Jo(t);try{for(var s=$i(r),a=s.next();!a.done;a=s.next())o=a.value._apply(o)}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return o}_d=Ip,ro(!cl,"__referenceConstructor has already been defined"),cl=_d,wd=Ip,ro(!vl,"__referenceConstructor has already been defined"),vl=wd;var Sd="FIREBASE_DATABASE_EMULATOR_HOST",kd={},Cd=!1;function Ad(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||Zs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),$s("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=sp(o,i),u=a.repoInfo,r=void 0;(r="undefined"!=typeof process?process.env[Sd]:r)?(s=!0,o="http://"+r+"?ns="+u.namespace,u=(a=sp(o,i)).repoInfo):s=!a.repoInfo.secure;e=i&&s?new ya(ya.OWNER):new ga(t.name,t.options,e);Af("Invalid Firebase Database URL",a),cu(a.path)||Zs("Database URL must point to the root of a Firebase Database (not including a child path).");n=function(t,e,n,r){var i=kd[e.name];i||(i={},kd[e.name]=i);(e=i[t.toURLString()])&&Zs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return e=new Mf(t,Cd,n,r),i[t.toURLString()]=e}(u,t,e,new pa(t.name,n));return new Nd(n,t)}var Nd=(Object.defineProperty(Rd.prototype,"_repo",{get:function(){return this._instanceStarted||(jf(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(Rd.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Ip(this._repo,eu())),this._rootInternal},enumerable:!1,configurable:!0}),Rd.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,e=this.app.name,(n=kd[e])&&n[t.key]===t||Zs("Database "+e+"("+t.repoInfo_+") has already been deleted."),Yf(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},Rd.prototype._checkNotDeleted=function(t){null===this._rootInternal&&Zs("Cannot call "+t+" on a deleted database.")},Rd);function Rd(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}function Pd(t,e,n,r){void 0===r&&(r={}),(t=Jo(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Zs("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;i.repoInfo_.nodeAdmin?(r.mockUserToken&&Zs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ya(ya.OWNER)):r.mockUserToken&&(t=ho(r.mockUserToken,t.app.options.projectId),o=new ya(t)),o=o,(i=i).repoInfo_=new Ia(e+":"+n,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}function Od(t){(t=Jo(t))._checkNotDeleted("goOnline"),(t=t._repo).persistentConnection_&&t.persistentConnection_.resume(xf)}var Dd={".sv":"timestamp"};var xd=(Ld.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},Ld);function Ld(t,e){this.committed=t,this.snapshot=e}function Md(i,t,e){if(i=Jo(i),Cf("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";var e=null===(n=null==e?void 0:e.applyLocally)||void 0===n||n,o=new uo,n=Fp(i,function(){});return function(t,e,n,r,i,o){Xf(t,"transaction on "+e);var s={path:e,update:n,onComplete:r,status:null,order:Gs(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},n=Jf(t,e,void 0);s.currentInputSnapshot=n,void 0===(r=s.update(n.val()))?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&s.onComplete(null,!1,s.currentInputSnapshot)):(Ef("transaction failed: Data returned ",r,s.path),s.status=0,(i=uf(o=af(t.transactionQueueTree_,e))||[]).push(s),cf(o,i),o=void 0,"object"==typeof r&&null!==r&&Po(r,".priority")?(o=Oo(r,".priority"),ro(If(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(Ml(t.serverSyncTree_,e)||uc.EMPTY_NODE).getPriority().val(),i=qf(t),o=pc(r,o),i=rf(o,n,i),s.currentOutputSnapshotRaw=o,s.currentOutputSnapshotResolved=i,s.currentWriteId=Wf(t),s=Rl(t.serverSyncTree_,e,i,s.currentWriteId,s.applyLocally),Of(t.eventQueue_,e,s),Zf(t,t.transactionQueueTree_))}(i._repo,i._path,t,function(t,e,n){var r;t?o.reject(t):(r=new Ep(n,new Ip(i._repo,i._path),$u),o.resolve(new xd(e,r)))},n,e),o.promise}var Fd=(jd.prototype.cancel=function(e){Bo("OnDisconnect.cancel",0,1,arguments.length),Wo("OnDisconnect.cancel","onComplete",e,!0);var t=this._delegate.cancel();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},jd.prototype.remove=function(e){Bo("OnDisconnect.remove",0,1,arguments.length),Wo("OnDisconnect.remove","onComplete",e,!0);var t=this._delegate.remove();return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},jd.prototype.set=function(t,e){Bo("OnDisconnect.set",1,2,arguments.length),Wo("OnDisconnect.set","onComplete",e,!0);t=this._delegate.set(t);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},jd.prototype.setWithPriority=function(t,e,n){Bo("OnDisconnect.setWithPriority",2,3,arguments.length),Wo("OnDisconnect.setWithPriority","onComplete",n,!0);e=this._delegate.setWithPriority(t,e);return n&&e.then(function(){return n(null)},function(t){return n(t)}),e},jd.prototype.update=function(t,e){if(Bo("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ta("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wo("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},jd);function jd(t){this._delegate=t}var Ud=(qd.prototype.toJSON=function(){return Bo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},qd);function qd(t,e){this.committed=t,this.snapshot=e}var Vd=(Bd.prototype.val=function(){return Bo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},Bd.prototype.exportVal=function(){return Bo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},Bd.prototype.toJSON=function(){return Bo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},Bd.prototype.exists=function(){return Bo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},Bd.prototype.child=function(t){return Bo("DataSnapshot.child",0,1,arguments.length),t=String(t),Sf("DataSnapshot.child","path",t,!1),new Bd(this._database,this._delegate.child(t))},Bd.prototype.hasChild=function(t){return Bo("DataSnapshot.hasChild",1,1,arguments.length),Sf("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},Bd.prototype.getPriority=function(){return Bo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},Bd.prototype.forEach=function(e){var n=this;return Bo("DataSnapshot.forEach",1,1,arguments.length),Wo("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(t){return e(new Bd(n._database,t))})},Bd.prototype.hasChildren=function(){return Bo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(Bd.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),Bd.prototype.numChildren=function(){return Bo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},Bd.prototype.getRef=function(){return Bo("DataSnapshot.ref",0,0,arguments.length),new zd(this._database,this._delegate.ref)},Object.defineProperty(Bd.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Bd);function Bd(t,e){this._database=t,this._delegate=e}var Kd=(Wd.prototype.on=function(t,n,e,r){var i=this;Bo("Query.on",2,4,arguments.length),Wo("Query.on","callback",n,!1);function o(t,e){n.call(s.context,new Vd(i.database,t),e)}var s=Wd.getCancelAndContextArgs_("Query.on",e,r);o.userCallback=n,o.context=s.context;var a=null===(r=s.cancel)||void 0===r?void 0:r.bind(s.context);switch(t){case"value":return Fp(this._delegate,o,a),n;case"child_added":return jp(this._delegate,o,a),n;case"child_removed":return Vp(this._delegate,o,a),n;case"child_changed":return Up(this._delegate,o,a),n;case"child_moved":return qp(this._delegate,o,a),n;default:throw new Error(Ko("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Wd.prototype.off=function(t,e,n){var r;Bo("Query.off",0,3,arguments.length),function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Ko(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}("Query.off",t,!0),Wo("Query.off","callback",e,!0),Ho("Query.off","context",n,!0),e?((r=function(){}).userCallback=e,r.context=n,Bp(this._delegate,t,r)):Bp(this._delegate,t)},Wd.prototype.get=function(){var e=this;return Pp(this._delegate).then(function(t){return new Vd(e.database,t)})},Wd.prototype.once=function(t,n,e,r){var i=this;Bo("Query.once",1,4,arguments.length),Wo("Query.once","callback",n,!0);function o(t,e){t=new Vd(i.database,t),n&&n.call(s.context,t,e),a.resolve(t)}var s=Wd.getCancelAndContextArgs_("Query.once",e,r),a=new uo;o.userCallback=n,o.context=s.context;function u(t){s.cancel&&s.cancel.call(s.context,t),a.reject(t)}switch(t){case"value":Fp(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":jp(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":Vp(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":Up(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":qp(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(Ko("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return a.promise},Wd.prototype.limitToFirst=function(t){return Bo("Query.limitToFirst",1,1,arguments.length),new Wd(this.database,Ed(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new nd(t)}(t)))},Wd.prototype.limitToLast=function(t){return Bo("Query.limitToLast",1,1,arguments.length),new Wd(this.database,Ed(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new od(t)}(t)))},Wd.prototype.orderByChild=function(t){return Bo("Query.orderByChild",1,1,arguments.length),new Wd(this.database,Ed(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Sf("orderByChild","path",t,!1),new ud(t)}(t)))},Wd.prototype.orderByKey=function(){return Bo("Query.orderByKey",0,0,arguments.length),new Wd(this.database,Ed(this._delegate,new ld))},Wd.prototype.orderByPriority=function(){return Bo("Query.orderByPriority",0,0,arguments.length),new Wd(this.database,Ed(this._delegate,new dd))},Wd.prototype.orderByValue=function(){return Bo("Query.orderByValue",0,0,arguments.length),new Wd(this.database,Ed(this._delegate,new yd))},Wd.prototype.startAt=function(t,e){return void 0===t&&(t=null),Bo("Query.startAt",0,2,arguments.length),new Wd(this.database,Ed(this._delegate,(void 0===(t=t)&&(t=null),mf("startAt","key",e=e,!0),new Xp(t,e))))},Wd.prototype.startAfter=function(t,e){return void 0===t&&(t=null),Bo("Query.startAfter",0,2,arguments.length),new Wd(this.database,Ed(this._delegate,(t=t,mf("startAfter","key",e=e,!0),new Zp(t,e))))},Wd.prototype.endAt=function(t,e){return void 0===t&&(t=null),Bo("Query.endAt",0,2,arguments.length),new Wd(this.database,Ed(this._delegate,(t=t,mf("endAt","key",e=e,!0),new Wp(t,e))))},Wd.prototype.endBefore=function(t,e){return void 0===t&&(t=null),Bo("Query.endBefore",0,2,arguments.length),new Wd(this.database,Ed(this._delegate,(t=t,mf("endBefore","key",e=e,!0),new Gp(t,e))))},Wd.prototype.equalTo=function(t,e){return Bo("Query.equalTo",1,2,arguments.length),new Wd(this.database,Ed(this._delegate,(t=t,mf("equalTo","key",e=e,!0),new Id(t,e))))},Wd.prototype.toString=function(){return Bo("Query.toString",0,0,arguments.length),this._delegate.toString()},Wd.prototype.toJSON=function(){return Bo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},Wd.prototype.isEqual=function(t){if(Bo("Query.isEqual",1,1,arguments.length),t instanceof Wd)return this._delegate.isEqual(t._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},Wd.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Wo(t,"cancel",r.cancel,!0),r.context=n,Ho(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Ko(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Wd.prototype,"ref",{get:function(){return new zd(this.database,new Ip(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),Wd);function Wd(t,e){this.database=t,this._delegate=e}var Hd,zd=(Gi(Gd,Hd=Kd),Gd.prototype.getKey=function(){return Bo("Reference.key",0,0,arguments.length),this._delegate.key},Gd.prototype.child=function(t){return Bo("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new Gd(this.database,Ap(this._delegate,t))},Gd.prototype.getParent=function(){Bo("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new Gd(this.database,t):null},Gd.prototype.getRoot=function(){return Bo("Reference.root",0,0,arguments.length),new Gd(this.database,this._delegate.root)},Gd.prototype.set=function(t,e){Bo("Reference.set",1,2,arguments.length),Wo("Reference.set","onComplete",e,!0);t=Np(this._delegate,t);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Gd.prototype.update=function(t,e){if(Bo("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ta("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Cf("Reference.update",this._delegate._path),Wo("Reference.update","onComplete",e,!0);var i=Rp(this._delegate,t);return e&&i.then(function(){return e(null)},function(t){return e(t)}),i},Gd.prototype.setWithPriority=function(t,e,n){Bo("Reference.setWithPriority",2,3,arguments.length),Wo("Reference.setWithPriority","onComplete",n,!0);e=function(t,e,n){if(Cf("setWithPriority",t._path),Tf("setWithPriority",e,t._path,!1),yf("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new uo;return Hf(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}(this._delegate,t,e);return n&&e.then(function(){return n(null)},function(t){return n(t)}),e},Gd.prototype.remove=function(e){Bo("Reference.remove",0,1,arguments.length),Wo("Reference.remove","onComplete",e,!0);var t,t=(t=this._delegate,Cf("remove",t._path),Np(t,null));return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Gd.prototype.transaction=function(t,e,n){var r=this;Bo("Reference.transaction",1,3,arguments.length),Wo("Reference.transaction","transactionUpdate",t,!1),Wo("Reference.transaction","onComplete",e,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Ko(t,e)+"must be a boolean.")}("Reference.transaction","applyLocally",n,!0);n=Md(this._delegate,t,{applyLocally:n}).then(function(t){return new Ud(t.committed,new Vd(r.database,t.snapshot))});return e&&n.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),n},Gd.prototype.setPriority=function(t,e){Bo("Reference.setPriority",1,2,arguments.length),Wo("Reference.setPriority","onComplete",e,!0);t=function(t,e){t=Jo(t),Cf("setPriority",t._path),yf("setPriority",e,!1);var n=new uo;return Hf(t._repo,uu(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}(this._delegate,t);return e&&t.then(function(){return e(null)},function(t){return e(t)}),t},Gd.prototype.push=function(t,e){var n=this;Bo("Reference.push",0,2,arguments.length),Wo("Reference.push","onComplete",e,!0);var r=function(t,e){t=Jo(t),Cf("push",t._path),Tf("push",e,t._path,!0);var n=Uf(t._repo),r=Sc(n),n=Ap(t,r),i=Ap(t,r),e=null!=e?Np(i,e).then(function(){return i}):Promise.resolve(i);return n.then=e.then.bind(e),n.catch=e.then.bind(e,void 0),n}(this._delegate,t),t=r.then(function(t){return new Gd(n.database,t)});e&&t.then(function(){return e(null)},function(t){return e(t)});r=new Gd(this.database,r);return r.then=t.then.bind(t),r.catch=t.catch.bind(t,void 0),r},Gd.prototype.onDisconnect=function(){return Cf("Reference.onDisconnect",this._delegate._path),new Fd(new dp(this._delegate._repo,this._delegate._path))},Object.defineProperty(Gd.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Gd.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Gd.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Gd);function Gd(t,e){var n=Hd.call(this,t,new vp(e._repo,e._path,new Mc,!1))||this;return n.database=t,n._delegate=e,n}var Qd=(Yd.prototype.useEmulator=function(t,e,n){Pd(this._delegate,t,e,n=void 0===n?{}:n)},Yd.prototype.ref=function(t){if(Bo("database.ref",0,1,arguments.length),t instanceof zd){var e=Cp(this._delegate,t.toString());return new zd(this,e)}e=kp(this._delegate,t);return new zd(this,e)},Yd.prototype.refFromURL=function(t){Bo("database.refFromURL",1,1,arguments.length);t=Cp(this._delegate,t);return new zd(this,t)},Yd.prototype.goOffline=function(){var t;Bo("database.goOffline",0,0,arguments.length),(t=Jo(t=this._delegate))._checkNotDeleted("goOffline"),Yf(t._repo)},Yd.prototype.goOnline=function(){return Bo("database.goOnline",0,0,arguments.length),Od(this._delegate)},Yd.ServerValue={TIMESTAMP:Dd,increment:function(t){return{".sv":{increment:t}}}},Yd);function Yd(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var Xd=Object.freeze({__proto__:null,forceLongPolling:function(){Ua.forceDisallow(),xa.forceAllow()},forceWebSockets:function(){xa.forceDisallow()},isWebSocketsAvailable:function(){return Ua.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var i;t=t._delegate._repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new $c(t.stats_)),t.statsListener_.get()):t.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),oa(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},statsIncrementCounter:function(t,e){t=t._delegate._repo,e=e,t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){t._delegate._repo.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return Ps(r),(r=new ns("auth-internal",new is("database-standalone"))).setComponent(new Zo("auth-internal",function(){return i},"PRIVATE")),{instance:new Qd(Ad(e,r,void 0,n,t),e),namespace:o}}}),G=Tu;Tu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Tu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var $d,Jd=Object.freeze({__proto__:null,DataConnection:G,RealTimeConnection:Ka,hijackHash:function(i){var o=Tu.prototype.put;return Tu.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){Tu.prototype.put=o}},ConnectionTarget:Ia,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){Cd=t}}),Zd=Qd.ServerValue;Ps(($d=Jl).SDK_VERSION),$d.INTERNAL.registerComponent(new Zo("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal");return new Qd(Ad(r,e,t,n),r)},"PUBLIC").setServiceProps({Reference:zd,Query:Kd,Database:Qd,DataSnapshot:Vd,enableLogging:Fs,INTERNAL:Xd,ServerValue:Zd,TEST_ACCESS:Jd}).setMultipleInstances(!0)),$d.registerVersion("@firebase/database","0.10.9");var tg=function(t,e){return(tg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function eg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Q="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ng={},rg=Q||self;function ig(){}function og(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function sg(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ag="closure_uid_"+(1e9*Math.random()>>>0),ug=0;function cg(t,e,n){return t.call.apply(t.bind,arguments)}function hg(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function lg(t,e,n){return(lg=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cg:hg).apply(null,arguments)}function fg(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function pg(t,o){function e(){}e.prototype=o.prototype,t.Z=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Vb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function dg(){this.s=this.s,this.o=this.o}var gg={};dg.prototype.s=!1,dg.prototype.na=function(){var t;!this.s&&(this.s=!0,this.M(),0)&&(t=this,t=Object.prototype.hasOwnProperty.call(t,ag)&&t[ag]||(t[ag]=++ug),delete gg[t])},dg.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vg=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},yg=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function mg(){return Array.prototype.concat.apply([],arguments)}function bg(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function _g(t){return/^[\s\xa0]*$/.test(t)}var wg,Ig=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Tg(t,e){return-1!=t.indexOf(e)}function Eg(t,e){return t<e?-1:e<t?1:0}t:{var Sg=rg.navigator;if(Sg){Sg=Sg.userAgent;if(Sg){wg=Sg;break t}}wg=""}function kg(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Cg(t){var e,n={};for(e in t)n[e]=t[e];return n}var Ag="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ng(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Ag.length;i++)e=Ag[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Rg(t){return Rg[" "](t),t}Rg[" "]=ig;var Pg,Og=Tg(wg,"Opera"),Dg=Tg(wg,"Trident")||Tg(wg,"MSIE"),xg=Tg(wg,"Edge"),Lg=xg||Dg,Mg=Tg(wg,"Gecko")&&!(Tg(wg.toLowerCase(),"webkit")&&!Tg(wg,"Edge"))&&!(Tg(wg,"Trident")||Tg(wg,"MSIE"))&&!Tg(wg,"Edge"),Fg=Tg(wg.toLowerCase(),"webkit")&&!Tg(wg,"Edge");function jg(){var t=rg.document;return t?t.documentMode:void 0}t:{var Ug="",qg=(qg=wg,Mg?/rv:([^\);]+)(\)|;)/.exec(qg):xg?/Edge\/([\d\.]+)/.exec(qg):Dg?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(qg):Fg?/WebKit\/(\S+)/.exec(qg):Og?/(?:Version)[ \/]?(\S+)/.exec(qg):void 0);if(qg&&(Ug=qg?qg[1]:""),Dg){qg=jg();if(null!=qg&&qg>parseFloat(Ug)){Pg=String(qg);break t}}Pg=Ug}var Vg={};function Bg(){return t=function(){for(var t=0,e=Ig(String(Pg)).split("."),n=Ig("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++)for(var o=e[i]||"",s=n[i]||"";o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=o[0].length||0!=s[0].length)&&(t=Eg(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Eg(0==o[2].length,0==s[2].length)||Eg(o[2],s[2]),o=o[3],s=s[3],0==t););return 0<=t},e=Vg,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9);var t,e}var Kg=rg.document&&Dg&&(jg()||parseInt(Pg,10))||void 0,Wg=function(){if(!rg.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{rg.addEventListener("test",ig,e),rg.removeEventListener("test",ig,e)}catch(t){}return t}();function Hg(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function zg(t,e){if(Hg.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Mg){t:{try{Rg(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Gg[t.pointerType]||"",this.state=t.state,(this.i=t).defaultPrevented&&zg.Z.h.call(this)}}Hg.prototype.h=function(){this.defaultPrevented=!0},pg(zg,Hg);var Gg={2:"touch",3:"pen",4:"mouse"};zg.prototype.h=function(){zg.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Qg="closure_listenable_"+(1e6*Math.random()|0),Yg=0;function Xg(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Yg,this.ca=this.fa=!1}function $g(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Jg(t){this.src=t,this.g={},this.h=0}function Zg(t,e){var n,r,i,o=e.type;o in t.g&&(n=t.g[o],(i=0<=(r=vg(n,e)))&&Array.prototype.splice.call(n,r,1),i&&($g(e),0==t.g[o].length&&(delete t.g[o],t.h--)))}function tv(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Jg.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=tv(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new Xg(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var ev="closure_lm_"+(1e6*Math.random()|0),nv={};function rv(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=hv(r);return e&&e[Qg]?e.O(n,r,sg(i)?!!i.capture:!!i,o):iv(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)rv(t,e[o],n,r,i);return null}return n=hv(n),t&&t[Qg]?t.N(e,n,sg(r)?!!r.capture:!!r,i):iv(t,e,n,!1,r,i)}function iv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a=sg(i)?!!i.capture:!!i,u=uv(t);if(u||(t[ev]=u=new Jg(t)),(n=u.add(e,n,r,a,o)).proxy)return n;if(s=av,(n.proxy=r=function t(e){return s.call(t.src,t.listener,e)}).src=t,r.listener=n,t.addEventListener)void 0===(i=!Wg?a:i)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sv(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ov(t){var e,n,r;"number"!=typeof t&&t&&!t.ca&&((e=t.src)&&e[Qg]?Zg(e.i,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sv(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=uv(e))?(Zg(n,t),0==n.h&&(n.src=null,e[ev]=null)):$g(t)))}function sv(t){return t in nv?nv[t]:nv[t]="on"+t}function av(t,e){var n,r;return t=!!t.ca||(e=new zg(e,this),n=t.listener,r=t.ia||t.src,t.fa&&ov(t),n.call(r,e))}function uv(t){return(t=t[ev])instanceof Jg?t:null}var cv="__closure_events_fn_"+(1e9*Math.random()>>>0);function hv(e){return"function"==typeof e?e:(e[cv]||(e[cv]=function(t){return e.handleEvent(t)}),e[cv])}function lv(){dg.call(this),this.i=new Jg(this),(this.P=this).I=null}function fv(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e?e=new Hg(e,t):e instanceof Hg?e.target=e.target||t:(s=e,Ng(e=new Hg(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.g=n[i],s=pv(o,r,!0,e)&&s;if(s=pv(o=e.g=t,r,!0,e)&&s,s=pv(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=pv(o=e.g=n[i],r,!1,e)&&s}function pv(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.ca&&u.capture==n&&(s=u.listener,a=u.ia||u.src,u.fa&&Zg(t.i,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}pg(lv,dg),lv.prototype[Qg]=!0,lv.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=sg(i)?!!i.capture:!!i,r=hv(r),e&&e[Qg]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=tv(s=e.g[n],r,i,o))&&($g(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.g[n],e.h--))):(e=e&&uv(e))&&(n=e.g[n.toString()],(r=(e=-1)<(e=n?tv(n,r,i,o):e)?n[e]:null)&&ov(r))}(this,t,e,n,r)},lv.prototype.M=function(){if(lv.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)$g(n[r]);delete e.g[t],e.h--}}this.I=null},lv.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},lv.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var dv=rg.JSON.stringify;gv.prototype.add=function(t,e){var n=vv.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},za=gv;function gv(){this.h=this.g=null}var vv=(yv.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},new yv(function(){return new bv},function(t){return t.reset()}));function yv(t,e){this.i=t,this.j=e,this.h=0,this.g=null}var mv,bv=(_v.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},_v.prototype.reset=function(){this.next=this.g=this.h=null},_v);function _v(){this.next=this.g=this.h=null}function wv(t,e){var n;mv||(n=rg.Promise.resolve(void 0),mv=function(){n.then(Ev)}),Iv||(mv(),Iv=!0),Tv.add(t,e)}var Iv=!1,Tv=new za;function Ev(){for(var t;e=t=void 0,e=null,(t=Tv).g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(t){!function(t){rg.setTimeout(function(){throw t},0)}(t)}var e=vv;e.j(t),e.h<100&&(e.h++,t.next=e.g,e.g=t)}Iv=!1}function Sv(t,e){lv.call(this),this.h=t||1,this.g=e||rg,this.j=lg(this.kb,this),this.l=Date.now()}function kv(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Cv(t,e,n){if("function"==typeof t)n&&(t=lg(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=lg(t.handleEvent,t)}return 2147483647<Number(e)?-1:rg.setTimeout(t,e||0)}pg(Sv,lv),(fr=Sv.prototype).da=!1,fr.S=null,fr.kb=function(){var t;this.da&&(0<(t=Date.now()-this.l)&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fv(this,"tick"),this.da&&(kv(this),this.start())))},fr.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fr.M=function(){Sv.Z.M.call(this),kv(this),delete this.g};var Av,Nv=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}tg(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(Rv,Av=dg),Rv.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:function t(e){e.g=Cv(function(){e.g=null,e.i&&(e.i=!1,t(e))},e.j);var n=e.h;e.h=null,e.m.apply(null,n)}(this)},Rv.prototype.M=function(){Av.prototype.M.call(this),this.g&&(rg.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},Rv);function Rv(t,e){var n=Av.call(this)||this;return n.m=t,n.j=e,n.h=null,n.i=!1,n.g=null,n}function Pv(t){dg.call(this),this.h=t,this.g={}}pg(Pv,dg);var Ov=[];function Dv(t,e,n,r){Array.isArray(n)||(n&&(Ov[0]=n.toString()),n=Ov);for(var i=0;i<n.length;i++){var o=rv(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function xv(t){kg(t.g,function(t,e){this.g.hasOwnProperty(e)&&ov(t)},t),t.g={}}function Lv(){this.g=!0}function Mv(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return dv(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Pv.prototype.M=function(){Pv.Z.M.call(this),xv(this)},Pv.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Lv.prototype.Aa=function(){this.g=!1},Lv.prototype.info=function(){};var Fv={},jv=null;function Uv(){return jv=jv||new lv}function qv(t){Hg.call(this,Fv.Ma,t)}function Vv(){var t=Uv();fv(t,new qv(t))}function Bv(t,e){Hg.call(this,Fv.STAT_EVENT,t),this.stat=e}function Kv(t){var e=Uv();fv(e,new Bv(e,t))}function Wv(t,e){Hg.call(this,Fv.Na,t),this.size=e}function Hv(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return rg.setTimeout(function(){t()},e)}Fv.Ma="serverreachability",pg(qv,Hg),Fv.STAT_EVENT="statevent",pg(Bv,Hg),Fv.Na="timingevent",pg(Wv,Hg);G={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Q={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function zv(){}function Gv(t){return t.h||(t.h=t.i())}function Qv(){}zv.prototype.h=null;za={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Yv(){Hg.call(this,"d")}function Xv(){Hg.call(this,"c")}function $v(){}function Jv(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Pv(this),this.P=ey,this.W=new Sv(t=Lg?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Zv}function Zv(){this.i=null,this.g="",this.h=!1}pg(Yv,Hg),pg(Xv,Hg),pg($v,zv),$v.prototype.g=function(){return new XMLHttpRequest},$v.prototype.i=function(){return{}};var ty=new $v,ey=45e3,ny={},ry={};function iy(t,e,n){t.K=1,t.v=ky(_y(e)),t.s=n,t.U=!0,oy(t,null)}function oy(t,e){t.F=Date.now(),uy(t),t.A=_y(t.v);var s,a,u,c,h,l,n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Uy(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Zv,t.g=qm(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Nv(lg(t.Ia,t,t.g),t.O)),Dv(t.V,t.g,"readystatechange",t.gb),e=t.H?Cg(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Vv(),s=t.j,a=t.u,u=t.A,c=t.m,h=t.X,l=t.s,s.info(function(){if(s.g)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function sy(t){return t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function ay(t,e,n){for(var r,i,o,s,a,u=!0;!t.I&&t.C<n.length;){if(o=n,a=s=void 0,s=(i=t).C,(r=-1==(a=o.indexOf("\n",s))?ry:(s=Number(o.substring(s,a)),isNaN(s)?ny:(a+=1)+s>o.length?ry:(o=o.substr(a,s),i.C=a+s,o)))==ry){4==e&&(t.o=4,Kv(14),u=!1),Mv(t.j,t.m,null,"[Incomplete Response]");break}if(r==ny){t.o=4,Kv(15),Mv(t.j,t.m,n,"[Invalid Chunk]"),u=!1;break}Mv(t.j,t.m,r,null),py(t,r)}sy(t)&&r!=ry&&r!=ny&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Kv(16),u=!1),t.i=t.i&&u,u?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Om(e),e.L=!0,Kv(11))):(Mv(t.j,t.m,n,"[Invalid Chunked Response]"),fy(t),ly(t))}function uy(t){t.Y=Date.now()+t.P,cy(t,t.P)}function cy(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Hv(lg(t.eb,t),e)}function hy(t){t.B&&(rg.clearTimeout(t.B),t.B=null)}function ly(t){0==t.l.G||t.I||Lm(t.l,t)}function fy(t){hy(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,kv(t.W),xv(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function py(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Gy(n.i,t)))if(n.I=t.N,!t.J&&Gy(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;xm(n),Tm(n)}Pm(n),Kv(18)}}else n.ta=i[1],0<n.ta-n.U&&i[2]<37500&&n.N&&0==n.A&&!n.v&&(n.v=Hv(lg(n.ab,n),6e3));if(zy(n.i)<=1&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else Fm(n,11)}else if(!t.J&&n.g!=t||xm(n),!_g(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o,s,a,u,c,h,l,f,p,d,g=i[e];n.U=g[0],g=g[1],2==n.G?"c"==g[0]?(n.J=g[1],n.la=g[2],null!=(o=g[3])&&(n.ma=o,n.h.info("VER="+n.ma)),null!=(s=g[4])&&(n.za=s,n.h.info("SVER="+n.za)),null!=(a=g[5])&&"number"==typeof a&&0<a&&(r=1.5*a,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n,(u=t.g)&&(!(c=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null)||!(h=r.i).g&&(Tg(c,"spdy")||Tg(c,"quic")||Tg(c,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Qy(h,h.h),h.h=null)),!r.D||(l=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null)&&(r.sa=l,Sy(r.F,r.D,l))),n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms")),f=t,(r=n).oa=Um(r,r.H?r.la:null,r.W),f.J?(Yy(r.i,f),p=f,(d=r.K)&&p.setTimeout(d),p.B&&(hy(p),uy(p)),r.g=f):Rm(r),0<n.l.length&&km(n)):"stop"!=g[0]&&"close"!=g[0]||Fm(n,7):3==n.G&&("stop"==g[0]||"close"==g[0]?"stop"==g[0]?Fm(n,7):Im(n):"noop"!=g[0]&&n.j&&n.j.wa(g),n.A=0)}Vv()}catch(g){}}function dy(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(og(t)||"string"==typeof t)yg(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(og(t)||"string"==typeof t)for(var n=[],r=t.length,i=0;i<r;i++)n.push(i);else for(i in n=[],r=0,t)n[r++]=i;for(var i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(og(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function gy(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof gy)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function vy(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];yy(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){for(var i={},n=e=0;e<t.g.length;)yy(i,r=t.g[e])||(i[t.g[n++]=r]=1),e++;t.g.length=n}}function yy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(fr=Jv.prototype).setTimeout=function(t){this.P=t},fr.gb=function(t){t=t.target;var e=this.L;e&&3==ym(t)?e.l():this.Ia(t)},fr.Ia=function(t){try{if(t==this.g)t:{var e=ym(this.g),n=this.g.Da();this.g.ba();if(!(e<3)&&(3!=e||Lg||this.g&&(this.h.h||this.g.ga()||mm(this.g)))){this.I||4!=e||7==n||Vv(),hy(this);var r=this.g.ba();this.N=r;e:if(sy(this)){var i=mm(this.g);t="";var o=i.length,s=4==ym(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){fy(this),ly(this);var a="";break e}this.h.i=new rg.TextDecoder}for(n=0;n<o;n++)this.h.h=!0,t+=this.h.i.decode(i[n],{stream:s&&n==o-1});i.splice(0,o),this.h.g+=t,this.C=0,a=this.h.g}else a=this.g.ga();if(this.i=200==r,l=this.j,f=this.u,p=this.A,d=this.m,g=this.X,v=e,y=r,l.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+g+"]: "+f+"\n"+p+"\n"+v+" "+y}),this.i){if(this.$&&!this.J){e:{if(this.g){var u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_g(u)){var h=u;break e}}h=null}if(!(r=h)){this.i=!1,this.o=3,Kv(12),fy(this),ly(this);break t}Mv(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,py(this,r)}this.U?(ay(this,e,a),Lg&&this.i&&3==e&&(Dv(this.V,this.W,"tick",this.fb),this.W.start())):(Mv(this.j,this.m,a,null),py(this,a)),4==e&&fy(this),this.i&&!this.I&&(4==e?Lm(this.l,this):(this.i=!1,uy(this)))}else 400==r&&0<a.indexOf("Unknown SID")?(this.o=3,Kv(12)):(this.o=0,Kv(13)),fy(this),ly(this)}}}catch(e){}var l,f,p,d,g,v,y},fr.fb=function(){var t,e;this.g&&(t=ym(this.g),e=this.g.ga(),this.C<e.length&&(hy(this),ay(this,t,e),this.i&&4!=t&&uy(this)))},fr.cancel=function(){this.I=!0,fy(this)},fr.eb=function(){this.B=null;var t,e,n=Date.now();0<=n-this.Y?(t=this.j,e=this.A,t.info(function(){return"TIMEOUT: "+e}),2!=this.K&&(Vv(),Kv(17)),fy(this),this.o=2,ly(this)):cy(this,this.Y-n)},(fr=gy.prototype).R=function(){vy(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},fr.T=function(){return vy(this),this.g.concat()},fr.get=function(t,e){return yy(this.h,t)?this.h[t]:e},fr.set=function(t,e){yy(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},fr.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var my=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function by(t,e){var n;this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof by?(this.g=void 0!==e?e:t.g,wy(this,t.j),this.s=t.s,Iy(this,t.i),Ty(this,t.m),this.l=t.l,e=t.h,(n=new Ly).i=e.i,e.g&&(n.g=new gy(e.g),n.h=e.h),Ey(this,n),this.o=t.o):t&&(n=String(t).match(my))?(this.g=!!e,wy(this,n[1]||"",!0),this.s=Cy(n[2]||""),Iy(this,n[3]||"",!0),Ty(this,n[4]),this.l=Cy(n[5]||"",!0),Ey(this,n[6]||"",!0),this.o=Cy(n[7]||"")):(this.g=!!e,this.h=new Ly(null,this.g))}function _y(t){return new by(t)}function wy(t,e,n){t.j=n?Cy(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Iy(t,e,n){t.i=n?Cy(e,!0):e}function Ty(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ey(t,e,n){var r,i;e instanceof Ly?(t.h=e,r=t.h,(i=t.g)&&!r.j&&(My(r),r.i=null,r.g.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Fy(this,e),Uy(this,n,t))},r)),r.j=i):(n||(e=Ay(e,Dy)),t.h=new Ly(e,t.g))}function Sy(t,e,n){t.h.set(e,n)}function ky(t){return Sy(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Cy(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ay(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ny),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Ny(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}by.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Ay(e,Ry,!0),":");var n=this.i;return!n&&"file"!=e||(t.push("//"),(e=this.s)&&t.push(Ay(e,Ry,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ay(n,"/"==n.charAt(0)?Oy:Py,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Ay(n,xy)),t.join("")};var Ry=/[#\/\?@]/g,Py=/[#\?:]/g,Oy=/[#\?]/g,Dy=/[#\?@]/g,xy=/#/g;function Ly(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function My(n){n.g||(n.g=new gy,n.h=0,n.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Fy(t,e){My(t),e=qy(t,e),yy(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,yy((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&vy(t)))}function jy(t,e){return My(t),e=qy(t,e),yy(t.g.h,e)}function Uy(t,e,n){Fy(t,e),0<n.length&&(t.i=null,t.g.set(qy(t,e),bg(n)),t.h+=n.length)}function qy(t,e){return e=String(e),e=t.j?e.toLowerCase():e}(fr=Ly.prototype).add=function(t,e){My(this),this.i=null,t=qy(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},fr.forEach=function(n,r){My(this),this.g.forEach(function(t,e){yg(t,function(t){n.call(r,t,e,this)},this)},this)},fr.T=function(){My(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},fr.R=function(t){My(this);var e=[];if("string"==typeof t)jy(this,t)&&(e=mg(e,this.g.get(qy(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=mg(e,t[n])}return e},fr.set=function(t,e){return My(this),this.i=null,jy(this,t=qy(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},fr.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},fr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.R(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.i=t.join("&")};var Vy=function(t,e){this.h=t,this.g=e};function By(t){this.l=t||Wy,t=rg.PerformanceNavigationTiming?0<(t=rg.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(rg.g&&rg.g.Ea&&rg.g.Ea()&&rg.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ky,Wy=10;function Hy(t){return t.h||t.g&&t.g.size>=t.j}function zy(t){return t.h?1:t.g?t.g.size:0}function Gy(t,e){return t.h?t.h==e:t.g&&t.g.has(e)}function Qy(t,e){t.g?t.g.add(e):t.h=e}function Yy(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Xy(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null==t.g||0===t.g.size)return bg(t.i);var r=t.i;try{for(var i=eg(t.g.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.D)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function $y(){}function Jy(){this.g=new $y}function Zy(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function tm(t){this.l=t.$b||null,this.j=t.ib||!1}function em(t,e){lv.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=nm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}By.prototype.cancel=function(){var e,t;if(this.i=Xy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=eg(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.g.clear()}},$y.prototype.stringify=function(t){return rg.JSON.stringify(t,void 0)},$y.prototype.parse=function(t){return rg.JSON.parse(t,void 0)},pg(tm,zv),tm.prototype.g=function(){return new em(this.l,this.j)},tm.prototype.i=(Ky={},function(){return Ky}),pg(em,lv);var nm=0;function rm(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function im(t){t.readyState=4,t.l=null,t.j=null,t.A=null,om(t)}function om(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(fr=em.prototype).open=function(t,e){if(this.readyState!=nm)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,om(this)},fr.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||rg).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},fr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,im(this)),this.readyState=nm},fr.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,om(this)),this.g&&(this.readyState=3,om(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==rg.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;rm(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},fr.Sa=function(t){var e;this.g&&(this.u&&t.value?this.response.push(t.value):this.u||(e=t.value||new Uint8Array(0),(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)),(t.done?im:om)(this),3==this.readyState&&rm(this))},fr.Ua=function(t){this.g&&(this.response=this.responseText=t,im(this))},fr.Ta=function(t){this.g&&(this.response=t,im(this))},fr.ha=function(){this.g&&im(this)},fr.setRequestHeader=function(t,e){this.v.append(t,e)},fr.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},fr.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(em.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var sm=rg.JSON.parse;function am(t){lv.call(this),this.headers=new gy,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=um,this.K=this.L=!1}pg(am,lv);var um="",cm=/^https?$/i,hm=["POST","PUT"];function lm(t){return"content-type"==t.toLowerCase()}function fm(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,pm(t),gm(t)}function pm(t){t.D||(t.D=!0,fv(t,"complete"),fv(t,"error"))}function dm(t){if(t.h&&void 0!==ng&&(!t.C[1]||4!=ym(t)||2!=t.ba()))if(t.v&&4==ym(t))Cv(t.Fa,0,t);else if(fv(t,"readystatechange"),4==ym(t)){t.h=!1;try{var e,n,r,i,o=t.ba();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.H).match(my)[1]||null)&&rg.self&&rg.self.location&&(i=(r=rg.self.location.protocol).substr(0,r.length-1)),n=!cm.test(i?i.toLowerCase():"")),e=n),e)fv(t,"complete"),fv(t,"success");else{t.m=6;try{var a=2<ym(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",pm(t)}}finally{gm(t)}}}function gm(t,e){if(t.g){vm(t);var n=t.g,r=t.C[0]?ig:null;t.g=null,t.C=null,e||fv(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function vm(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(rg.clearTimeout(t.A),t.A=null)}function ym(t){return t.g?t.g.readyState:0}function mm(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case um:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function bm(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",kg(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Sy(t,e,n))}function _m(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function wm(t){this.za=0,this.l=[],this.h=new Lv,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=_m("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=_m("baseRetryDelayMs",5e3,t),this.$a=_m("retryDelaySeedMs",1e4,t),this.Ya=_m("forwardChannelMaxRetries",2,t),this.ra=_m("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new By(t&&t.concurrentRequestLimit),this.Ca=new Jy,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Im(t){var e,n;Em(t),3==t.G&&(e=t.V++,Sy(n=_y(t.F),"SID",t.J),Sy(n,"RID",e),Sy(n,"TYPE","terminate"),Am(t,n),(e=new Jv(t,t.h,e,void 0)).K=2,e.v=ky(_y(n)),n=!1,!(n=rg.navigator&&rg.navigator.sendBeacon?rg.navigator.sendBeacon(e.v.toString(),""):n)&&rg.Image&&((new Image).src=e.v,n=!0),n||(e.g=qm(e.l,null),e.g.ea(e.v)),e.F=Date.now(),uy(e)),jm(t)}function Tm(t){t.g&&(Om(t),t.g.cancel(),t.g=null)}function Em(t){Tm(t),t.u&&(rg.clearTimeout(t.u),t.u=null),xm(t),t.i.cancel(),t.m&&("number"==typeof t.m&&rg.clearTimeout(t.m),t.m=null)}function Sm(t,e){t.l.push(new Vy(t.Za++,e)),3==t.G&&km(t)}function km(t){Hy(t.i)||t.m||(t.m=!0,wv(t.Ha,t),t.C=0)}function Cm(t,e){var n=e?e.m:t.V++,r=_y(t.F);Sy(r,"SID",t.J),Sy(r,"RID",n),Sy(r,"AID",t.U),Am(t,r),t.o&&t.s&&bm(r,t.o,t.s),n=new Jv(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Nm(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Qy(t.i,n),iy(n,r,e)}function Am(t,n){t.j&&dy({},function(t,e){Sy(n,e,t)})}function Nm(t,e,n){n=Math.min(t.l.length,n);var r=t.j?lg(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if((c-=o)<0)o=Math.max(0,i[u].h-100),a=!1;else try{!function(t,r,e){var i=e||"";try{dy(t,function(t,e){var n=t;sg(t)&&(n=dv(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Rm(t){t.g||t.u||(t.Y=1,wv(t.Ga,t),t.A=0)}function Pm(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Hv(lg(t.Ga,t),Mm(t,t.A)),t.A++,1)}function Om(t){null!=t.B&&(rg.clearTimeout(t.B),t.B=null)}function Dm(t){t.g=new Jv(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=_y(t.oa);Sy(e,"RID","rpc"),Sy(e,"SID",t.J),Sy(e,"CI",t.N?"0":"1"),Sy(e,"AID",t.U),Am(t,e),Sy(e,"TYPE","xmlhttp"),t.o&&t.s&&bm(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=ky(_y(e)),n.s=null,n.U=!0,oy(n,t)}function xm(t){null!=t.v&&(rg.clearTimeout(t.v),t.v=null)}function Lm(t,e){var n,r,i,o=null;if(t.g==e){xm(t),Om(t),t.g=null;var s=2}else{if(!Gy(t.i,e))return;o=e.D,Yy(t.i,e),s=1}if(t.I=e.N,0!=t.G)if(e.i)1==s?(o=e.s?e.s.length:0,e=Date.now()-e.F,n=t.C,fv(s=Uv(),new Wv(s,o)),km(t)):Rm(t);else if(3==(n=e.o)||0==n&&0<t.I||(1!=s||(i=e,zy((r=t).i)>=r.i.j-(r.m?1:0)||(r.m?(r.l=i.D.concat(r.l),0):1==r.G||2==r.G||r.C>=(r.Xa?0:r.Ya)||(r.m=Hv(lg(r.Ha,r,i),Mm(r,r.C)),r.C++,0))))&&(2!=s||!Pm(t)))switch(o&&0<o.length&&(e=t.i,e.i=e.i.concat(o)),n){case 1:Fm(t,5);break;case 4:Fm(t,10);break;case 3:Fm(t,6);break;default:Fm(t,2)}}function Mm(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Fm(t,e){var n,r,i,o;t.h.info("Error code "+e),2==e?(r=null,t.j&&(r=null),o=lg(t.jb,t),r||(r=new by("//www.google.com/images/cleardot.gif"),rg.location&&"http"==rg.location.protocol||wy(r,"https"),ky(r)),n=r.toString(),r=o,o=new Lv,rg.Image?((i=new Image).onload=fg(Zy,o,i,"TestLoadImage: loaded",!0,r),i.onerror=fg(Zy,o,i,"TestLoadImage: error",!1,r),i.onabort=fg(Zy,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=fg(Zy,o,i,"TestLoadImage: timeout",!1,r),rg.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Kv(2),t.G=0,t.j&&t.j.va(e),jm(t),Em(t)}function jm(t){t.G=0,t.I=-1,t.j&&(0==Xy(t.i).length&&0==t.l.length||(t.i.i.length=0,bg(t.l),t.l.length=0),t.j.ua())}function Um(t,e,n){var r,i,o,s,a,u=(s=n)instanceof by?_y(s):new by(s,void 0);return""!=u.i?(e&&Iy(u,e+"."+u.i),Ty(u,u.m)):(a=rg.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new by(null,void 0),r&&wy(a,r),i&&Iy(a,i),o&&Ty(a,o),s&&(a.l=s),u=a),t.aa&&kg(t.aa,function(t,e){Sy(u,e,t)}),e=t.D,n=t.sa,e&&n&&Sy(u,e,n),Sy(u,"VER",t.ma),Am(t,u),u}function qm(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new am(new tm({ib:!0})):new am(t.qa)).L=t.H,e}function Vm(){}function Bm(){if(Dg&&!(10<=Number(Kg)))throw Error("Environmental error: no available transport.")}function Km(t,e){lv.call(this),this.g=new wm(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!_g(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!_g(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new zm(this)}function Wm(t){Yv.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function Hm(){Xv.call(this),this.status=1}function zm(t){this.g=t}(fr=am.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=(this.u||ty).g(),this.C=this.u?Gv(this.u):Gv(ty),this.g.onreadystatechange=lg(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void fm(this,t)}t=n||"";var i,o=new gy(this.headers);r&&dy(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=lm,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.T()),n=rg.FormData&&t instanceof rg.FormData,0<=vg(hm,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.g.setRequestHeader(e,t)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vm(this),0<this.B&&((this.K=(i=this.g,Dg&&Bg()&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=lg(this.pa,this)):this.A=Cv(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){fm(this,t)}},fr.pa=function(){void 0!==ng&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fv(this,"timeout"),this.abort(8))},fr.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,fv(this,"complete"),fv(this,"abort"),gm(this))},fr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),gm(this,!0)),am.Z.M.call(this)},fr.Fa=function(){this.s||(this.F||this.v||this.l?dm(this):this.cb())},fr.cb=function(){dm(this)},fr.ba=function(){try{return 2<ym(this)?this.g.status:-1}catch(t){return-1}},fr.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},fr.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),sm(e)}},fr.Da=function(){return this.m},fr.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(fr=wm.prototype).ma=8,fr.G=1,fr.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},fr.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Jv(this,this.h,t,void 0),n=this.s;if(this.P&&(n?Ng(n=Cg(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if("__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Nm(this,e,r),Sy(i=_y(this.F),"RID",t),Sy(i,"CVER",22),this.D&&Sy(i,"X-HTTP-Session-Id",this.D),Am(this,i),this.o&&n&&bm(i,this.o,n),Qy(this.i,e),this.Ra&&Sy(i,"TYPE","init"),this.ja?(Sy(i,"$req",r),Sy(i,"SID","null"),e.$=!0,iy(e,i,null)):iy(e,i,r),this.G=2}}else 3==this.G&&(t?Cm(this,t):0==this.l.length||Hy(this.i)||Cm(this))},fr.Ga=function(){var t;this.u=null,Dm(this),this.$&&!(this.L||null==this.g||this.O<=0)&&(t=2*this.O,this.h.info("BP detection timer enabled: "+t),this.B=Hv(lg(this.bb,this),t))},fr.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Kv(10),Tm(this),Dm(this))},fr.ab=function(){null!=this.v&&(this.v=null,Tm(this),Pm(this),Kv(19))},fr.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Kv(2)):(this.h.info("Failed to ping google.com"),Kv(1))},(fr=Vm.prototype).xa=function(){},fr.wa=function(){},fr.va=function(){},fr.ua=function(){},fr.Oa=function(){},Bm.prototype.g=function(t,e){return new Km(t,e)},pg(Km,lv),Km.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),wv(lg(t.hb,t,e))),Kv(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Um(t,null,t.W),km(t)},Km.prototype.close=function(){Im(this.g)},Km.prototype.u=function(t){var e;"string"==typeof t?((e={}).__data__=t,Sm(this.g,e)):this.v?((e={}).__data__=dv(t),Sm(this.g,e)):Sm(this.g,t)},Km.prototype.M=function(){this.g.j=null,delete this.j,Im(this.g),delete this.g,Km.Z.M.call(this)},pg(Wm,Yv),pg(Hm,Xv),pg(zm,Vm),zm.prototype.xa=function(){fv(this.g,"a")},zm.prototype.wa=function(t){fv(this.g,new Wm(t))},zm.prototype.va=function(t){fv(this.g,new Hm)},zm.prototype.ua=function(){fv(this.g,"b")},Bm.prototype.createWebChannel=Bm.prototype.g,Km.prototype.send=Km.prototype.u,Km.prototype.open=Km.prototype.m,G.NO_ERROR=0,G.TIMEOUT=8,G.HTTP_ERROR=6,Q.COMPLETE="complete",(Qv.EventType=za).OPEN="a",za.CLOSE="b",za.ERROR="c",za.MESSAGE="d",lv.prototype.listen=lv.prototype.N,am.prototype.listenOnce=am.prototype.O,am.prototype.getLastError=am.prototype.La,am.prototype.getLastErrorCode=am.prototype.Da,am.prototype.getStatus=am.prototype.ba,am.prototype.getResponseJson=am.prototype.Qa,am.prototype.getResponseText=am.prototype.ga,am.prototype.send=am.prototype.ea;var Gm=Uv,Qm=G,Ym=Q,Xm=Fv,$m=10,Jm=11,Zm=tm,tb=Qv,eb=am,nb=(rb.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},rb.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},rb);function rb(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}nb.o=-1;var ib,ob={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},sb=(Gi(ub,ib=Error),ub),ab=new fs("@firebase/firestore");function ub(t,e){var n=this;return(n=ib.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function cb(){return ab.logLevel}function hb(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ab.logLevel<=ss.DEBUG&&(e=n.map(pb),ab.debug.apply(ab,Zi(["Firestore (8.9.1): "+t],e)))}function lb(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ab.logLevel<=ss.ERROR&&(e=n.map(pb),ab.error.apply(ab,Zi(["Firestore (8.9.1): "+t],e)))}function fb(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];ab.logLevel<=ss.WARN&&(e=n.map(pb),ab.warn.apply(ab,Zi(["Firestore (8.9.1): "+t],e)))}function pb(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function db(t){t="FIRESTORE (8.9.1) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t);throw lb(t),new Error(t)}function gb(t){t||db()}var vb=(yb.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},yb);function yb(){}function mb(t,e){return t<e?-1:e<t?1:0}function bb(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function _b(t){return t+"\0"}var wb=(Eb.now=function(){return Eb.fromMillis(Date.now())},Eb.fromDate=function(t){return Eb.fromMillis(t.getTime())},Eb.fromMillis=function(t){var e=Math.floor(t/1e3);return new Eb(e,Math.floor(1e6*(t-1e3*e)))},Eb.prototype.toDate=function(){return new Date(this.toMillis())},Eb.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Eb.prototype._compareTo=function(t){return this.seconds===t.seconds?mb(this.nanoseconds,t.nanoseconds):mb(this.seconds,t.seconds)},Eb.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Eb.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Eb.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Eb.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Eb),Ib=(Tb.fromTimestamp=function(t){return new Tb(t)},Tb.min=function(){return new Tb(new wb(0,0))},Tb.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},Tb.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Tb.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Tb.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Tb.prototype.toTimestamp=function(){return this.timestamp},Tb);function Tb(t){this.timestamp=t}function Eb(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new sb(ob.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new sb(ob.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new sb(ob.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new sb(ob.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Sb(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function kb(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Cb(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ab,Nb,G=(Object.defineProperty(Ub.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),Ub.prototype.isEqual=function(t){return 0===Ub.comparator(this,t)},Ub.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Ub?t.forEach(function(t){e.push(t)}):e.push(t),this.construct(e)},Ub.prototype.limit=function(){return this.offset+this.length},Ub.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},Ub.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},Ub.prototype.firstSegment=function(){return this.segments[this.offset]},Ub.prototype.lastSegment=function(){return this.get(this.length-1)},Ub.prototype.get=function(t){return this.segments[this.offset+t]},Ub.prototype.isEmpty=function(){return 0===this.length},Ub.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ub.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ub.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Ub.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Ub.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Ub),Rb=(Gi(jb,Nb=G),jb.prototype.construct=function(t,e,n){return new jb(t,e,n)},jb.prototype.canonicalString=function(){return this.toArray().join("/")},jb.prototype.toString=function(){return this.canonicalString()},jb.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new sb(ob.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new jb(n)},jb.emptyPath=function(){return new jb([])},jb),Pb=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ob=(Gi(Fb,Ab=G),Fb.prototype.construct=function(t,e,n){return new Fb(t,e,n)},Fb.isValidIdentifier=function(t){return Pb.test(t)},Fb.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t=!Fb.isValidIdentifier(t)?"`"+t+"`":t}).join(".")},Fb.prototype.toString=function(){return this.canonicalString()},Fb.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},Fb.keyField=function(){return new Fb(["__name__"])},Fb.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new sb(ob.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new sb(ob.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new sb(ob.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new sb(ob.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Fb(e)},Fb.emptyPath=function(){return new Fb([])},Fb),Db=(Mb.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},Mb.prototype.isEqual=function(t){return bb(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Mb),xb=(Lb.fromBase64String=function(t){return new Lb(atob(t))},Lb.fromUint8Array=function(t){return new Lb(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Lb.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},Lb.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},Lb.prototype.approximateByteSize=function(){return 2*this.binaryString.length},Lb.prototype.compareTo=function(t){return mb(this.binaryString,t.binaryString)},Lb.prototype.isEqual=function(t){return this.binaryString===t.binaryString},Lb);function Lb(t){this.binaryString=t}function Mb(t){(this.fields=t).sort(Ob.comparator)}function Fb(){return null!==Ab&&Ab.apply(this,arguments)||this}function jb(){return null!==Nb&&Nb.apply(this,arguments)||this}function Ub(t,e,n){void 0===e?e=0:e>t.length&&db(),void 0===n?n=t.length-e:n>t.length-e&&db(),this.segments=t,this.offset=e,this.len=n}xb.EMPTY_BYTE_STRING=new xb("");var qb=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vb(t){if(gb(!!t),"string"!=typeof t)return{seconds:Bb(t.seconds),nanos:Bb(t.nanos)};var e=0,n=qb.exec(t);gb(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Bb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Kb(t){return"string"==typeof t?xb.fromBase64String(t):xb.fromUint8Array(t)}function Wb(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Hb(t){t=Vb(t.mapValue.fields.__local_write_time__.timestampValue);return new wb(t.seconds,t.nanos)}function zb(t){return null==t}function Gb(t){return 0===t&&1/t==-1/0}function Qb(t){return"number"==typeof t&&Number.isInteger(t)&&!Gb(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Yb=(Xb.fromPath=function(t){return new Xb(Rb.fromString(t))},Xb.fromName=function(t){return new Xb(Rb.fromString(t).popFirst(5))},Xb.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Xb.prototype.isEqual=function(t){return null!==t&&0===Rb.comparator(this.path,t.path)},Xb.prototype.toString=function(){return this.path.toString()},Xb.comparator=function(t,e){return Rb.comparator(t.path,e.path)},Xb.isDocumentKey=function(t){return t.length%2==0},Xb.fromSegments=function(t){return new Xb(new Rb(t.slice()))},Xb);function Xb(t){this.path=t}function $b(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wb(t)?4:10:db()}function Jb(r,i){var t,e,n=$b(r);if(n!==$b(i))return!1;switch(n){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Hb(r).isEqual(Hb(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Vb(r.timestampValue),t=Vb(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return e=i,Kb(r.bytesValue).isEqual(Kb(e.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return t=i,Bb((e=r).geoPointValue.latitude)===Bb(t.geoPointValue.latitude)&&Bb(e.geoPointValue.longitude)===Bb(t.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Bb(t.integerValue)===Bb(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Bb(t.doubleValue),e=Bb(e.doubleValue);return t===e?Gb(t)===Gb(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return bb(r.arrayValue.values||[],i.arrayValue.values||[],Jb);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(Sb(e)!==Sb(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Jb(e[t],n[t])))return!1;return!0}();default:return db()}}function Zb(t,e){return void 0!==(t.values||[]).find(function(t){return Jb(t,e)})}function t_(t,e){var n,r,i,o=$b(t),s=$b(e);if(o!==s)return mb(o,s);switch(o){case 0:return 0;case 1:return mb(t.booleanValue,e.booleanValue);case 2:return r=e,i=Bb(t.integerValue||t.doubleValue),r=Bb(r.integerValue||r.doubleValue),i<r?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return e_(t.timestampValue,e.timestampValue);case 4:return e_(Hb(t),Hb(e));case 5:return mb(t.stringValue,e.stringValue);case 6:return function(t,e){t=Kb(t),e=Kb(e);return t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=mb(n[i],r[i]);if(0!==o)return o}return mb(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=mb(Bb(n.latitude),Bb(i.latitude)))?r:mb(Bb(n.longitude),Bb(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=t_(n[i],r[i]);if(o)return o}return mb(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=mb(r[s],o[s]);if(0!==a)return a;a=t_(n[r[s]],i[o[s]]);if(0!==a)return a}return mb(r.length,o.length)}(t.mapValue,e.mapValue);default:throw db()}}function e_(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return mb(t,e);var n=Vb(t),t=Vb(e),e=mb(n.seconds,t.seconds);return 0!==e?e:mb(n.nanos,t.nanos)}function n_(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){t=Vb(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Kb(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,Yb.fromName(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):db();var e}(t)}function r_(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function i_(t){return t&&"integerValue"in t}function o_(t){return!!t&&"arrayValue"in t}function s_(t){return t&&"nullValue"in t}function a_(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function u_(t){return t&&"mapValue"in t}function c_(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var n={mapValue:{fields:{}}};return kb(t.mapValue.fields,function(t,e){return n.mapValue.fields[t]=c_(e)}),n}if(t.arrayValue){for(var e={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=c_(t.arrayValue.values[r]);return e}return Object.assign({},t)}var h_=(l_.empty=function(){return new l_({mapValue:{}})},l_.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!u_(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},l_.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=c_(e)},l_.prototype.setAll=function(t){var r=this,i=Ob.emptyPath(),o={},s=[];t.forEach(function(t,e){var n;i.isImmediateParentOf(e)||(n=r.getFieldsMap(i),r.applyChanges(n,o,s),o={},s=[],i=e.popLast()),t?o[e.lastSegment()]=c_(t):s.push(e.lastSegment())});t=this.getFieldsMap(i);this.applyChanges(t,o,s)},l_.prototype.delete=function(t){var e=this.field(t.popLast());u_(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},l_.prototype.isEqual=function(t){return Jb(this.value,t.value)},l_.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];u_(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},l_.prototype.applyChanges=function(n,t,e){kb(t,function(t,e){return n[t]=e});for(var r=0,i=e;r<i.length;r++){var o=i[r];delete n[o]}},l_.prototype.clone=function(){return new l_(c_(this.value))},l_);function l_(t){this.value=t}var f_=(d_.newInvalidDocument=function(t){return new d_(t,0,Ib.min(),h_.empty(),0)},d_.newFoundDocument=function(t,e,n){return new d_(t,1,e,n,0)},d_.newNoDocument=function(t,e){return new d_(t,2,e,h_.empty(),0)},d_.newUnknownDocument=function(t,e){return new d_(t,3,e,h_.empty(),2)},d_.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},d_.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=h_.empty(),this.documentState=0,this},d_.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=h_.empty(),this.documentState=2,this},d_.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},d_.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(d_.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(d_.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(d_.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),d_.prototype.isValidDocument=function(){return 0!==this.documentType},d_.prototype.isFoundDocument=function(){return 1===this.documentType},d_.prototype.isNoDocument=function(){return 2===this.documentType},d_.prototype.isUnknownDocument=function(){return 3===this.documentType},d_.prototype.isEqual=function(t){return t instanceof d_&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},d_.prototype.clone=function(){return new d_(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},d_.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},d_),p_=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function d_(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function g_(t,e,n,r,i,o,s){return new p_(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,s=void 0===s?null:s)}function v_(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.canonicalString()+t.op.toString()+n_(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.canonicalString()+t.dir}).join(","),zb(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=H_(e.startAt)),e.endAt&&(t+="|ub:",t+=H_(e.endAt)),e.h=t),e.h}function y_(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!Jb(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Q_(t.startAt,e.startAt)&&Q_(t.endAt,e.endAt)}function m_(t){return Yb.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var b_,__=(Gi(w_,b_=function(){}),w_.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new S_(t,e,n):"array-contains"===e?new M_(t,n):"in"===e?new F_(t,n):"not-in"===e?new j_(t,n):"array-contains-any"===e?new U_(t,n):new w_(t,e,n)},w_.l=function(t,e,n){return new("in"===e?k_:C_)(t,n)},w_.prototype.matches=function(t){t=t.data.field(this.field);return"!="===this.op?null!==t&&this.m(t_(t,this.value)):null!==t&&$b(this.value)===$b(t)&&this.m(t_(t,this.value))},w_.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return db()}},w_.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},w_);function w_(t,e,n){var r=this;return(r=b_.call(this)||this).field=t,r.op=e,r.value=n,r}var I_,T_,E_,S_=(Gi(R_,E_=__),R_.prototype.matches=function(t){t=Yb.comparator(t.key,this.key);return this.m(t)},R_),k_=(Gi(N_,T_=__),N_.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},N_),C_=(Gi(A_,I_=__),A_.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},A_);function A_(t,e){var n=this;return(n=I_.call(this,t,"not-in",e)||this).keys=P_(0,e),n}function N_(t,e){var n=this;return(n=T_.call(this,t,"in",e)||this).keys=P_(0,e),n}function R_(t,e,n){var r=this;return(r=E_.call(this,t,e,n)||this).key=Yb.fromName(n.referenceValue),r}function P_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Yb.fromName(t.referenceValue)})}var O_,D_,x_,L_,M_=(Gi(W_,L_=__),W_.prototype.matches=function(t){t=t.data.field(this.field);return o_(t)&&Zb(t.arrayValue,this.value)},W_),F_=(Gi(K_,x_=__),K_.prototype.matches=function(t){t=t.data.field(this.field);return null!==t&&Zb(this.value.arrayValue,t)},K_),j_=(Gi(B_,D_=__),B_.prototype.matches=function(t){if(Zb(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.data.field(this.field);return null!==t&&!Zb(this.value.arrayValue,t)},B_),U_=(Gi(V_,O_=__),V_.prototype.matches=function(t){var e=this,t=t.data.field(this.field);return!(!o_(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Zb(e.value.arrayValue,t)})},V_),q_=function(t,e){this.position=t,this.before=e};function V_(t,e){return O_.call(this,t,"array-contains-any",e)||this}function B_(t,e){return D_.call(this,t,"not-in",e)||this}function K_(t,e){return x_.call(this,t,"in",e)||this}function W_(t,e){return L_.call(this,t,"array-contains",e)||this}function H_(t){return(t.before?"b":"a")+":"+t.position.map(n_).join(",")}var z_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function G_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.isKeyField()?Yb.comparator(Yb.fromName(s.referenceValue),n.key):t_(s,n.data.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Q_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Jb(t.position[n],e.position[n]))return!1;return!0}var Y_=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function X_(t,e,n,r,i,o,s,a){return new Y_(t,e,n,r,i,o,s,a)}function $_(t){return new Y_(t)}function J_(t){return!zb(t.limit)&&"F"===t.limitType}function Z_(t){return!zb(t.limit)&&"L"===t.limitType}function tw(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function ew(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function nw(t){return null!==t.collectionGroup}function rw(t){var e=t;if(null===e.p){e.p=[];var n=ew(e),t=tw(e);if(null!==n&&null===t)n.isKeyField()||e.p.push(new z_(n)),e.p.push(new z_(Ob.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var s=o[i];e.p.push(s),s.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new z_(Ob.keyField(),n)))}}return e.p}function iw(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=g_(e.path,e.collectionGroup,rw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=rw(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new z_(o.field,s))}var a=e.endAt?new q_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new q_(e.startAt.position,!e.startAt.before):null;e.T=g_(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.T}function ow(t,e,n){return new Y_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function sw(t,e){return y_(iw(t),iw(e))&&t.limitType===e.limitType}function aw(t){return v_(iw(t))+"|lt:"+t.limitType}function uw(t){return"Query(target="+(e=iw(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.canonicalString()+" "+t.op+" "+n_(t.value)}).join(", ")+"]"),zb(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+H_(e.startAt)),e.endAt&&(n+=", endAt: "+H_(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function cw(i,t){return t.isFoundDocument()&&(e=i,n=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Yb.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n))&&function(t){for(var e=0,n=i.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.data.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||G_(t.startAt,rw(t),n))&&(!t.endAt||!G_(t.endAt,rw(t),n)));var e,n}function hw(a){return function(t,e){for(var n=!1,r=0,i=rw(a);r<i.length;r++){var o=i[r],s=function(t,r,e){var n=t.field.isKeyField()?Yb.comparator(r.key,e.key):function(t,e){var n=r.data.field(t),t=e.data.field(t);return null!==n&&null!==t?t_(n,t):db()}(t.field,e);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return db()}}(o,t,e);if(0!==s)return s;n=n||o.field.isKeyField()}return 0}}function lw(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Gb(e)?"-0":e}}function fw(t){return{integerValue:""+t}}function pw(t,e){return Qb(e)?fw(e):lw(t,e)}Q=function(){this._=void 0};function dw(t,e){return t instanceof Cw?i_(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var gw,vw,yw=(Gi(_w,vw=Q),_w),mw=(Gi(bw,gw=Q),bw);function bw(t){var e=this;return(e=gw.call(this)||this).elements=t,e}function _w(){return null!==vw&&vw.apply(this,arguments)||this}function ww(t,e){for(var n=Rw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Jb(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Iw,Tw=(Gi(Ew,Iw=Q),Ew);function Ew(t){var e=this;return(e=Iw.call(this)||this).elements=t,e}function Sw(t,e){for(var n=Rw(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Jb(t,e)})}(i[r]);return{arrayValue:{values:n}}}var kw,Cw=(Gi(Aw,kw=Q),Aw);function Aw(t,e){var n=this;return(n=kw.call(this)||this).R=t,n.A=e,n}function Nw(t){return Bb(t.integerValue||t.doubleValue)}function Rw(t){return o_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Pw(t,e){this.version=t,this.transformResults=e}var Ow=function(t,e){this.field=t,this.transform=e},Dw=(xw.none=function(){return new xw},xw.exists=function(t){return new xw(void 0,t)},xw.updateTime=function(t){return new xw(t)},Object.defineProperty(xw.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),xw.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},xw);function xw(t,e){this.updateTime=t,this.exists=e}function Lw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}G=function(){};function Mw(t,e,n){var r,i,o,s;t instanceof Vw?(i=e,o=n,Lw((r=t).precondition,i)&&(s=r.value.clone(),o=Gw(r.fieldTransforms,o,i),s.setAll(o),i.convertToFoundDocument(jw(i),s).setHasLocalMutations())):t instanceof Bw?(o=e,i=n,Lw((s=t).precondition,o)&&(n=Gw(s.fieldTransforms,i,o),(i=o.data).setAll(Hw(s)),i.setAll(n),o.convertToFoundDocument(jw(o),i).setHasLocalMutations())):(e=e,Lw(t.precondition,e)&&e.convertToNoDocument(Ib.min()))}function Fw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&bb(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof mw&&e instanceof mw||t instanceof Tw&&e instanceof Tw?bb(t.elements,e.elements,Jb):t instanceof Cw&&e instanceof Cw?Jb(t.A,e.A):t instanceof yw&&e instanceof yw)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function jw(t){return t.isFoundDocument()?t.version:Ib.min()}var Uw,qw,Vw=(Gi(Ww,qw=G),Ww),Bw=(Gi(Kw,Uw=G),Kw);function Kw(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Uw.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function Ww(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=qw.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function Hw(n){var r=new Map;return n.fieldMask.fields.forEach(function(t){var e;t.isEmpty()||(e=n.data.field(t),r.set(t,e))}),r}function zw(t,e,n){var r=new Map;gb(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,(o=s,s=a,a=n[i],o instanceof mw?ww(o,s):o instanceof Tw?Sw(o,s):a))}return r}function Gw(t,e,n){for(var r,i=new Map,o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=n.data.field(a.field);i.set(a.field,(r=c,a=e,c=void 0,(u=u)instanceof yw?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof mw?ww(u,r):u instanceof Tw?Sw(u,r):(u=dw(c=u,r),r=Nw(u)+Nw(c.A),i_(u)&&i_(c.A)?fw(r):lw(c.R,r))))}return i}function Qw(t){this.count=t}var Yw,Xw,$w,Jw=(Gi(e0,$w=G),e0),Zw=(Gi(t0,Xw=G),t0);function t0(t,e){var n=this;return(n=Xw.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function e0(t,e){var n=this;return(n=$w.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function n0(t){switch(t){case ob.OK:return db(),0;case ob.CANCELLED:case ob.UNKNOWN:case ob.DEADLINE_EXCEEDED:case ob.RESOURCE_EXHAUSTED:case ob.INTERNAL:case ob.UNAVAILABLE:case ob.UNAUTHENTICATED:return;case ob.INVALID_ARGUMENT:case ob.NOT_FOUND:case ob.ALREADY_EXISTS:case ob.PERMISSION_DENIED:case ob.FAILED_PRECONDITION:case ob.ABORTED:case ob.OUT_OF_RANGE:case ob.UNIMPLEMENTED:case ob.DATA_LOSS:return 1;default:return db(),0}}function r0(t){if(void 0===t)return lb("GRPC error has no .code"),ob.UNKNOWN;switch(t){case Yw.OK:return ob.OK;case Yw.CANCELLED:return ob.CANCELLED;case Yw.UNKNOWN:return ob.UNKNOWN;case Yw.DEADLINE_EXCEEDED:return ob.DEADLINE_EXCEEDED;case Yw.RESOURCE_EXHAUSTED:return ob.RESOURCE_EXHAUSTED;case Yw.INTERNAL:return ob.INTERNAL;case Yw.UNAVAILABLE:return ob.UNAVAILABLE;case Yw.UNAUTHENTICATED:return ob.UNAUTHENTICATED;case Yw.INVALID_ARGUMENT:return ob.INVALID_ARGUMENT;case Yw.NOT_FOUND:return ob.NOT_FOUND;case Yw.ALREADY_EXISTS:return ob.ALREADY_EXISTS;case Yw.PERMISSION_DENIED:return ob.PERMISSION_DENIED;case Yw.FAILED_PRECONDITION:return ob.FAILED_PRECONDITION;case Yw.ABORTED:return ob.ABORTED;case Yw.OUT_OF_RANGE:return ob.OUT_OF_RANGE;case Yw.UNIMPLEMENTED:return ob.UNIMPLEMENTED;case Yw.DATA_LOSS:return ob.DATA_LOSS;default:return db()}}(Q=Yw=Yw||{})[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";var i0=(c0.prototype.insert=function(t,e){return new c0(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,s0.BLACK,null,null))},c0.prototype.remove=function(t){return new c0(this.comparator,this.root.remove(t,this.comparator).copy(null,null,s0.BLACK,null,null))},c0.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},c0.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},c0.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(c0.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),c0.prototype.minKey=function(){return this.root.minKey()},c0.prototype.maxKey=function(){return this.root.maxKey()},c0.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},c0.prototype.forEach=function(n){this.inorderTraversal(function(t,e){return n(t,e),!1})},c0.prototype.toString=function(){var n=[];return this.inorderTraversal(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},c0.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},c0.prototype.getIterator=function(){return new o0(this.root,null,this.comparator,!1)},c0.prototype.getIteratorFrom=function(t){return new o0(this.root,t,this.comparator,!1)},c0.prototype.getReverseIterator=function(){return new o0(this.root,null,this.comparator,!0)},c0.prototype.getReverseIteratorFrom=function(t){return new o0(this.root,t,this.comparator,!0)},c0),o0=(u0.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},u0.prototype.hasNext=function(){return 0<this.nodeStack.length},u0.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},u0),s0=(a0.prototype.copy=function(t,e,n,r,i){return new a0(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},a0.prototype.isEmpty=function(){return!1},a0.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},a0.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},a0.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},a0.prototype.minKey=function(){return this.min().key},a0.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},a0.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},a0.prototype.removeMin=function(){if(this.left.isEmpty())return a0.EMPTY;var t=this;return(t=(t=!t.left.isRed()&&!t.left.left.isRed()?t.moveRedLeft():t).copy(null,null,null,t.left.removeMin(),null)).fixUp()},a0.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=!(r.left.isEmpty()||r.left.isRed()||r.left.left.isRed())?r.moveRedLeft():r).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=!((r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed())?r.moveRedRight():r).key)){if(r.right.isEmpty())return a0.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},a0.prototype.isRed=function(){return this.color},a0.prototype.fixUp=function(){var t=this;return t=(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},a0.prototype.moveRedLeft=function(){var t=this.colorFlip();return t=t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},a0.prototype.moveRedRight=function(){var t=this.colorFlip();return t=t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},a0.prototype.rotateLeft=function(){var t=this.copy(null,null,a0.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},a0.prototype.rotateRight=function(){var t=this.copy(null,null,a0.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},a0.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},a0.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},a0.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw db();if(this.right.isRed())throw db();var t=this.left.check();if(t!==this.right.check())throw db();return t+(this.isRed()?0:1)},a0);function a0(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:a0.RED,this.left=null!=r?r:a0.EMPTY,this.right=null!=i?i:a0.EMPTY,this.size=this.left.size+1+this.right.size}function u0(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function c0(t,e){this.comparator=t,this.root=e||s0.EMPTY}function h0(){this.size=0}s0.EMPTY=null,s0.RED=!0,s0.BLACK=!1,s0.EMPTY=(Object.defineProperty(h0.prototype,"key",{get:function(){throw db()},enumerable:!1,configurable:!0}),Object.defineProperty(h0.prototype,"value",{get:function(){throw db()},enumerable:!1,configurable:!0}),Object.defineProperty(h0.prototype,"color",{get:function(){throw db()},enumerable:!1,configurable:!0}),Object.defineProperty(h0.prototype,"left",{get:function(){throw db()},enumerable:!1,configurable:!0}),Object.defineProperty(h0.prototype,"right",{get:function(){throw db()},enumerable:!1,configurable:!0}),h0.prototype.copy=function(t,e,n,r,i){return this},h0.prototype.insert=function(t,e,n){return new s0(t,e)},h0.prototype.remove=function(t,e){return this},h0.prototype.isEmpty=function(){return!0},h0.prototype.inorderTraversal=function(t){return!1},h0.prototype.reverseTraversal=function(t){return!1},h0.prototype.minKey=function(){return null},h0.prototype.maxKey=function(){return null},h0.prototype.isRed=function(){return!1},h0.prototype.checkMaxDepth=function(){return!0},h0.prototype.check=function(){return 0},new h0);var l0=(g0.prototype.has=function(t){return null!==this.data.get(t)},g0.prototype.first=function(){return this.data.minKey()},g0.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(g0.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),g0.prototype.indexOf=function(t){return this.data.indexOf(t)},g0.prototype.forEach=function(n){this.data.inorderTraversal(function(t,e){return n(t),!1})},g0.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},g0.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},g0.prototype.firstAfterOrEqual=function(t){t=this.data.getIteratorFrom(t);return t.hasNext()?t.getNext().key:null},g0.prototype.getIterator=function(){return new f0(this.data.getIterator())},g0.prototype.getIteratorFrom=function(t){return new f0(this.data.getIteratorFrom(t))},g0.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},g0.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},g0.prototype.isEmpty=function(){return this.data.isEmpty()},g0.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},g0.prototype.isEqual=function(t){if(!(t instanceof g0))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},g0.prototype.toArray=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},g0.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},g0.prototype.copy=function(t){var e=new g0(this.comparator);return e.data=t,e},g0),f0=(d0.prototype.getNext=function(){return this.iter.getNext().key},d0.prototype.hasNext=function(){return this.iter.hasNext()},d0),p0=new i0(Yb.comparator);function d0(t){this.iter=t}function g0(t){this.comparator=t,this.data=new i0(this.comparator)}var v0=new i0(Yb.comparator);var y0=new i0(Yb.comparator);var m0=new l0(Yb.comparator);function b0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=m0,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var _0=new l0(mb);var w0=(P0.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,I0.createSynthesizedTargetChangeForCurrentChange(t,e)),new P0(Ib.min(),n,_0,p0,b0())},P0),I0=(R0.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new R0(xb.EMPTY_BYTE_STRING,e,b0(),b0(),b0())},R0),T0=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},E0=function(t,e){this.targetId=t,this.V=e},S0=function(t,e,n,r){void 0===n&&(n=xb.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},k0=(Object.defineProperty(N0.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(N0.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(N0.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(N0.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),N0.prototype.O=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},N0.prototype.M=function(){var n=b0(),r=b0(),i=b0();return this.D.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:db()}}),new I0(this.C,this.N,n,r,i)},N0.prototype.L=function(){this.F=!1,this.D=D0()},N0.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},N0.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},N0.prototype.U=function(){this.S+=1},N0.prototype.K=function(){--this.S},N0.prototype.j=function(){this.F=!0,this.N=!0},N0),C0=(A0.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},A0.prototype.et=function(n){var r=this;this.forEachTarget(n,function(t){var e=r.nt(t);switch(n.state){case 0:r.st(t)&&e.O(n.resumeToken);break;case 1:e.K(),e.k||e.L(),e.O(n.resumeToken);break;case 2:e.K(),e.k||r.removeTarget(t);break;case 3:r.st(t)&&(e.j(),e.O(n.resumeToken));break;case 4:r.st(t)&&(r.it(t),e.O(n.resumeToken));break;default:db()}})},A0.prototype.forEachTarget=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.G.forEach(function(t,e){r.st(e)&&n(e)})},A0.prototype.rt=function(t){var e=t.targetId,n=t.V.count,t=this.ot(e);t&&(m_(t=t.target)?0===n?(t=new Yb(t.path),this.tt(e,t,f_.newNoDocument(t,Ib.min()))):gb(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},A0.prototype.ut=function(r){var i=this,o=new Map;this.G.forEach(function(t,e){var n=i.ot(e);n&&(t.current&&m_(n.target)&&(n=new Yb(n.target.path),null!==i.H.get(n)||i.at(e,n)||i.tt(e,n,f_.newNoDocument(n,r))),t.$&&(o.set(e,t.M()),t.L()))});var s=b0();this.J.forEach(function(t,e){var n=!0;e.forEachWhile(function(t){t=i.ot(t);return!t||2===t.purpose||(n=!1)}),n&&(s=s.add(t))});var t=new w0(r,o,this.Y,this.H,s);return this.H=p0,this.J=O0(),this.Y=new l0(mb),t},A0.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},A0.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},A0.prototype.removeTarget=function(t){this.G.delete(t)},A0.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},A0.prototype.U=function(t){this.nt(t).U()},A0.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new k0,this.G.set(t,e)),e},A0.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new l0(mb),this.J=this.J.insert(t,e)),e},A0.prototype.st=function(t){var e=null!==this.ot(t);return e||hb("WatchChangeAggregator","Detected inactive target",t),e},A0.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},A0.prototype.it=function(e){var n=this;this.G.set(e,new k0),this.W.getRemoteKeysForTarget(e).forEach(function(t){n.tt(e,t,null)})},A0.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},A0);function A0(t){this.W=t,this.G=new Map,this.H=p0,this.J=O0(),this.Y=new l0(mb)}function N0(){this.S=0,this.D=D0(),this.C=xb.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function R0(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function P0(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function O0(){return new i0(Yb.comparator)}function D0(){return new i0(Yb.comparator)}var x0={asc:"ASCENDING",desc:"DESCENDING"},L0={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M0=function(t,e){this.databaseId=t,this.I=e};function F0(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function j0(t,e){return t.I?e.toBase64():e.toUint8Array()}function U0(t){return gb(!!t),Ib.fromTimestamp((t=Vb(t),new wb(t.seconds,t.nanos)))}function q0(t,e){return new Rb(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function V0(t){t=Rb.fromString(t);return gb(aI(t)),t}function B0(t,e){return q0(t.databaseId,e.path)}function K0(t,e){e=V0(e);if(e.get(1)!==t.databaseId.projectId)throw new sb(ob.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new sb(ob.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new Yb(G0(e))}function W0(t,e){return q0(t.databaseId,e)}function H0(t){t=V0(t);return 4===t.length?Rb.emptyPath():G0(t)}function z0(t){return new Rb(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G0(t){return gb(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function Q0(t,e,n){return{name:B0(t,e),fields:n.value.mapValue.fields}}function Y0(t,e,n){var r=K0(t,e.name),t=U0(e.updateTime),e=new h_({mapValue:{fields:e.fields}}),e=f_.newFoundDocument(r,t,e);return n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function X0(t,e){var n,r,i;if(e instanceof Vw)n={update:Q0(t,e.key,e.value)};else if(e instanceof Jw)n={delete:B0(t,e.key)};else if(e instanceof Bw)n={update:Q0(t,e.key,e.data),updateMask:(r=e.fieldMask,i=[],r.fields.forEach(function(t){return i.push(t.canonicalString())}),{fieldPaths:i})};else{if(!(e instanceof Zw))return db();n={verify:B0(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof yw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof mw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof Tw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof Cw)return{fieldPath:t.field.canonicalString(),increment:e.A};throw db()})),e.precondition.isNone||(n.currentDocument=void 0!==(e=e.precondition).updateTime?{updateTime:F0(t,e.updateTime.toTimestamp())}:void 0!==e.exists?{exists:e.exists}:db()),n}function $0(e,t){var n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?Dw.updateTime(U0(s.updateTime)):void 0!==s.exists?Dw.exists(s.exists):Dw.none():Dw.none(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(gb("REQUEST_TIME"===e.setToServerValue),r=new yw):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new mw(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new Tw(n)):"increment"in e?r=new Cw(t,e.increment):db();e=Ob.fromServerFormat(e.fieldPath);return new Ow(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=K0(e,t.update.name),o=new h_({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=(s=t.updateMask.fieldPaths||[],new Db(s.map(function(t){return Ob.fromServerFormat(t)})));return new Bw(i,o,s,n,r)}return new Vw(i,o,n,r)}if(t.delete){r=K0(e,t.delete);return new Jw(r,n)}if(t.verify){t=K0(e,t.verify);return new Zw(t,n)}return db()}function J0(t,e){return{documents:[W0(t,e.path)]}}function Z0(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=W0(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=W0(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(a_(t.value))return{unaryFilter:{field:rI(t.field),op:"IS_NAN"}};if(s_(t.value))return{unaryFilter:{field:rI(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(a_(t.value))return{unaryFilter:{field:rI(t.field),op:"IS_NOT_NAN"}};if(s_(t.value))return{unaryFilter:{field:rI(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rI(t.field),op:(e=t.op,L0[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:rI((t=t).field),direction:(t=t.dir,x0[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.I||zb(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=eI(e.startAt)),e.endAt&&(n.structuredQuery.endAt=eI(e.endAt)),n}function tI(t){var e=H0(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(gb(1===r),(a=n.from[0]).allDescendants?i=a.collectionId:e=e.child(a.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[sI(t)]:void 0!==t.fieldFilter?[oI(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):db():[]}(n.where));var s=[],t=null,r=null,a=null;return X_(e,i,s=n.orderBy?n.orderBy.map(function(t){return new z_(iI((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}):s,o,t=n.limit?zb(o="object"==typeof(o=n.limit)?o.value:o)?null:o:t,"F",r=n.startAt?nI(n.startAt):r,a=n.endAt?nI(n.endAt):a)}function eI(t){return{before:t.before,values:t.position}}function nI(t){var e=!!t.before,t=t.values||[];return new q_(t,e)}function rI(t){return{fieldPath:t.canonicalString()}}function iI(t){return Ob.fromServerFormat(t.fieldPath)}function oI(t){return __.create(iI(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return db()}}(),t.fieldFilter.value)}function sI(t){switch(t.unaryFilter.op){case"IS_NAN":var e=iI(t.unaryFilter.field);return __.create(e,"==",{doubleValue:NaN});case"IS_NULL":e=iI(t.unaryFilter.field);return __.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=iI(t.unaryFilter.field);return __.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":n=iI(t.unaryFilter.field);return __.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return db()}}function aI(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function uI(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=cI(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return cI(e)}function cI(t){return t+""}function hI(t){var e=t.length;if(gb(2<=e),2===e)return gb(""===t.charAt(0)&&""===t.charAt(1)),Rb.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&db(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:db()}o=s+2}return new Rb(r)}function lI(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var fI=function(t,e){this.seconds=t,this.nanoseconds=e};lI.store="owner",lI.key="owner";function pI(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}pI.store="mutationQueues",pI.keyPath="userId";function dI(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}dI.store="mutations",dI.keyPath="batchId",dI.userMutationsIndex="userMutationsIndex",dI.userMutationsKeyPath=["userId","batchId"];var gI=(vI.prefixForUser=function(t){return[t]},vI.prefixForPath=function(t,e){return[t,uI(e)]},vI.key=function(t,e,n){return[t,uI(e),n]},vI);function vI(){}gI.store="documentMutations",gI.PLACEHOLDER=new gI;function yI(t,e){this.path=t,this.readTime=e}function mI(t,e){this.path=t,this.version=e}var bI=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};bI.store="remoteDocuments",bI.readTimeIndex="readTimeIndex",bI.readTimeIndexPath="readTime",bI.collectionReadTimeIndex="collectionReadTimeIndex",bI.collectionReadTimeIndexPath=["parentPath","readTime"];function _I(t){this.byteSize=t}_I.store="remoteDocumentGlobal",_I.key="remoteDocumentGlobalKey";function wI(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}wI.store="targets",wI.keyPath="targetId",wI.queryTargetsIndexName="queryTargetsIndex",wI.queryTargetsKeyPath=["canonicalId","targetId"];var II=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};II.store="targetDocuments",II.keyPath=["targetId","path"],II.documentTargetsIndex="documentTargetsIndex",II.documentTargetsKeyPath=["path","targetId"];function TI(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}TI.key="targetGlobalKey",TI.store="targetGlobal";function EI(t,e){this.collectionId=t,this.parent=e}EI.store="collectionParents",EI.keyPath=["collectionId","parent"];function SI(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}SI.store="clientMetadata",SI.keyPath="clientId";function kI(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}kI.store="bundles",kI.keyPath="bundleId";function CI(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}CI.store="namedQueries",CI.keyPath="name";var AI,NI=Zi(Zi([],Zi(Zi([],Zi(Zi([],Zi(Zi([],[pI.store,dI.store,gI.store,bI.store,wI.store,lI.store,TI.store,II.store]),[SI.store])),[_I.store])),[EI.store])),[kI.store,CI.store]),RI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",G=(BI.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},BI.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},BI),PI=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},OI=(VI.prototype.catch=function(t){return this.next(void 0,t)},VI.prototype.next=function(r,i){var o=this;return this.callbackAttached&&db(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new VI(function(e,n){o.nextCallback=function(t){o.wrapSuccess(r,t).next(e,n)},o.catchCallback=function(t){o.wrapFailure(i,t).next(e,n)}})},VI.prototype.toPromise=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},VI.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof VI?e:VI.resolve(e)}catch(t){return VI.reject(t)}},VI.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):VI.resolve(e)},VI.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction(function(){return t(e)}):VI.reject(e)},VI.resolve=function(n){return new VI(function(t,e){t(n)})},VI.reject=function(n){return new VI(function(t,e){e(n)})},VI.waitFor=function(t){return new VI(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},VI.or=function(t){for(var n=VI.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?VI.resolve(t):e()})}(r[e]);return n},VI.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.waitFor(i)},VI),DI=(qI.open=function(t,e,n,r){try{return new qI(e,t.transaction(r,n))}catch(t){throw new MI(e,t)}},Object.defineProperty(qI.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),qI.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(hb("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},qI.prototype.store=function(t){t=this.transaction.objectStore(t);return new WI(t)},qI),xI=(UI.delete=function(t){return hb("SimpleDb","Removing database:",t),zI(window.indexedDB.deleteDatabase(t)).toPromise()},UI.yt=function(){if("undefined"==typeof indexedDB)return!1;if(UI.gt())return!0;var t=lo(),e=UI._t(t),n=0<e&&e<10,e=UI.Et(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},UI.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},UI.It=function(t,e){return t.store(e)},UI._t=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},UI.Et=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},UI.prototype.At=function(o){return Yi(this,void 0,void 0,function(){var e,i=this;return Xi(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(hb("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new MI(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new sb(ob.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new MI(o,t))},r.onupgradeneeded=function(t){hb("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.wt.Rt(e,r.transaction,t.oldVersion,i.version).next(function(){hb("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return i.bt(t)}),this.db)]}})})},UI.prototype.vt=function(e){this.bt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},UI.prototype.runTransaction=function(a,n,u,c){return Yi(this,void 0,void 0,function(){var i,o,s,e;return Xi(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.At(a)];case 2:return s.db=t.sent(),e=DI.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),OI.reject(t)}).toPromise(),r={},n.catch(function(){}),[4,e.dt];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,hb("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},UI.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},UI),LI=(Object.defineProperty(jI.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(jI.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(jI.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),jI.prototype.done=function(){this.Vt=!0},jI.prototype.Ct=function(t){this.St=t},jI.prototype.delete=function(){return zI(this.Pt.delete())},jI),MI=(Gi(FI,AI=sb),FI);function FI(t,e){var n=this;return(n=AI.call(this,ob.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function jI(t){this.Pt=t,this.Vt=!1,this.St=null}function UI(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===UI._t(lo())&&lb("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function qI(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ft=new PI,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){t.error?n.ft.reject(new MI(e,t.error)):n.ft.resolve()},this.transaction.onerror=function(t){t=QI(t.target.error);n.ft.reject(new MI(e,t))}}function VI(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}function BI(){this.onCommittedListeners=[]}function KI(t){return"IndexedDbTransactionError"===t.name}var WI=(HI.prototype.put=function(t,e){t=void 0!==e?(hb("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(hb("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return zI(t)},HI.prototype.add=function(t){return hb("SimpleDb","ADD",this.store.name,t,t),zI(this.store.add(t))},HI.prototype.get=function(e){var n=this;return zI(this.store.get(e)).next(function(t){return hb("SimpleDb","GET",n.store.name,e,t=void 0===t?null:t),t})},HI.prototype.delete=function(t){return hb("SimpleDb","DELETE",this.store.name,t),zI(this.store.delete(t))},HI.prototype.count=function(){return hb("SimpleDb","COUNT",this.store.name),zI(this.store.count())},HI.prototype.Nt=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.xt(e,function(t,e){n.push(e)}).next(function(){return n})},HI.prototype.Ft=function(t,e){hb("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.kt=!1;e=this.cursor(e);return this.xt(e,function(t,e,n){return n.delete()})},HI.prototype.$t=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},HI.prototype.Ot=function(r){var t=this.cursor({});return new OI(function(n,e){t.onerror=function(t){t=QI(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},HI.prototype.xt=function(t,i){var o=[];return new OI(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new LI(n),(t=i(n.primaryKey,n.value,e))instanceof OI&&(t=t.catch(function(t){return e.done(),OI.reject(t)}),o.push(t)),e.isDone?r():null===e.Dt?n.continue():n.continue(e.Dt)):r()}}).next(function(){return OI.waitFor(o)})},HI.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},HI.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},HI);function HI(t){this.store=t}function zI(t){return new OI(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=QI(t.target.error);n(t)}})}var GI=!1;function QI(t){var e=xI._t(lo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new sb("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return GI||(GI=!0,setTimeout(function(){throw n},0)),n}}return t}var YI,XI=(Gi($I,YI=G),$I);function $I(t,e){var n=this;return(n=YI.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function JI(t,e){return xI.It(t.Mt,e)}var ZI=(oT.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,s,a,u=e.mutationResults,c=0;c<this.mutations.length;c++){var h=this.mutations[c];h.key.isEqual(t.key)&&(n=h,r=t,i=u[c],h=a=s=o=void 0,n instanceof Vw?(s=r,a=i,h=(o=n).value.clone(),o=zw(o.fieldTransforms,s,a.transformResults),h.setAll(o),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()):n instanceof Bw?(o=r,s=i,Lw((a=n).precondition,o)?(h=zw(a.fieldTransforms,o,s.transformResults),(n=o.data).setAll(Hw(a)),n.setAll(h),o.convertToFoundDocument(s.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(s.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},oT.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&Mw(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&Mw(r,t,this.localWriteTime)},oT.prototype.applyToLocalDocumentSet=function(n){var r=this;this.mutations.forEach(function(t){var e=n.get(t.key),t=e;r.applyToLocalView(t),e.isValidDocument()||t.convertToNoDocument(Ib.min())})},oT.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},b0())},oT.prototype.isEqual=function(t){return this.batchId===t.batchId&&bb(this.mutations,t.mutations,Fw)&&bb(this.baseMutations,t.baseMutations,Fw)},oT),tT=(iT.from=function(t,e,n){gb(t.mutations.length===n.length);for(var r=y0,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new iT(t,e,n,r)},iT),eT=(rT.prototype.withSequenceNumber=function(t){return new rT(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},rT.prototype.withResumeToken=function(t,e){return new rT(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},rT.prototype.withLastLimboFreeSnapshotVersion=function(t){return new rT(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},rT),nT=function(t){this.Lt=t};function rT(t,e,n,r,i,o,s){void 0===i&&(i=Ib.min()),void 0===o&&(o=Ib.min()),void 0===s&&(s=xb.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function iT(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function oT(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function sT(t,e){if(e.document)return Y0(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Yb.fromSegments(e.noDocument.path),r=lT(e.noDocument.readTime),n=f_.newNoDocument(n,r);return e.hasCommittedMutations?n.setHasCommittedMutations():n}if(e.unknownDocument){n=Yb.fromSegments(e.unknownDocument.path),r=lT(e.unknownDocument.version);return f_.newUnknownDocument(n,r)}return db()}function aT(t,e,n){var r=uT(n),n=e.key.path.popLast().toArray();if(e.isFoundDocument()){var i={name:B0(o=t.Lt,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:F0(o,s.version.toTimestamp())},o=e.hasCommittedMutations;return new bI(null,null,i,o,r,n)}if(e.isNoDocument()){var s=e.key.path.toArray(),i=hT(e.version),o=e.hasCommittedMutations;return new bI(null,new yI(s,i),null,o,r,n)}if(e.isUnknownDocument()){o=e.key.path.toArray(),e=hT(e.version);return new bI(new mI(o,e),null,null,!0,r,n)}return db()}function uT(t){t=t.toTimestamp();return[t.seconds,t.nanoseconds]}function cT(t){t=new wb(t[0],t[1]);return Ib.fromTimestamp(t)}function hT(t){t=t.toTimestamp();return new fI(t.seconds,t.nanoseconds)}function lT(t){t=new wb(t.seconds,t.nanoseconds);return Ib.fromTimestamp(t)}function fT(e,t){for(var n=(t.baseMutations||[]).map(function(t){return $0(e.Lt,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var s=t.mutations.map(function(t){return $0(e.Lt,t)}),a=wb.fromMillis(t.localWriteTimeMs);return new ZI(t.batchId,a,n,s)}function pT(t){var e=lT(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?lT(t.lastLimboFreeSnapshotVersion):Ib.min(),r=void 0!==t.query.documents?(gb(1===(r=t.query).documents.length),iw($_(H0(r.documents[0])))):iw(tI(t.query));return new eT(r,t.targetId,0,t.lastListenSequenceNumber,e,n,xb.fromBase64String(t.resumeToken))}function dT(t,e){var n=hT(e.snapshotVersion),r=hT(e.lastLimboFreeSnapshotVersion),i=(m_(e.target)?J0:Z0)(t.Lt,e.target),t=e.resumeToken.toBase64();return new wI(e.targetId,v_(e.target),n,t,e.sequenceNumber,r,i)}function gT(t){var e=tI({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ow(e,e.limit,"L"):e}var vT=(yT.prototype.getBundleMetadata=function(t,e){return mT(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:lT(t.createTime),version:t.version}})},yT.prototype.saveBundleMetadata=function(t,e){return mT(t).put({bundleId:(e=e).id,createTime:hT(U0(e.createTime)),version:e.version})},yT.prototype.getNamedQuery=function(t,e){return bT(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:gT(t.bundledQuery),readTime:lT(t.readTime)}})},yT.prototype.saveNamedQuery=function(t,e){return bT(t).put({name:(e=e).name,readTime:hT(U0(e.readTime)),bundledQuery:e.bundledQuery})},yT);function yT(){}function mT(t){return JI(t,kI.store)}function bT(t){return JI(t,CI.store)}var _T=(ST.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),OI.resolve()},ST.prototype.getCollectionParents=function(t,e){return OI.resolve(this.Bt.getEntries(e))},ST),wT=(ET.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new l0(Rb.comparator),t=!r.has(n);return this.index[e]=r.add(n),t},ET.prototype.has=function(t){var e=t.lastSegment(),t=t.popLast(),e=this.index[e];return e&&e.has(t)},ET.prototype.getEntries=function(t){return(this.index[t]||new l0(Rb.comparator)).toArray()},ET),IT=(TT.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return OI.resolve();var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});i={collectionId:r,parent:uI(i)};return kT(t).put(i)},TT.prototype.getCollectionParents=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[_b(i),""],!1,!0);return kT(t).Nt(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(hI(r.parent))}return o})},TT);function TT(){this.qt=new wT}function ET(){this.index={}}function ST(){this.Bt=new wT}function kT(t){return JI(t,EI.store)}var CT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},AT=(NT.withCacheSize=function(t){return new NT(t,NT.DEFAULT_COLLECTION_PERCENTILE,NT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},NT);function NT(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function RT(t,e,n){var r=t.store(dI.store),i=t.store(gI.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.$t({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){gb(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=gI.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return OI.waitFor(o).next(function(){return a})}function PT(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw db();e=t.noDocument}return JSON.stringify(e).length}AT.DEFAULT_COLLECTION_PERCENTILE=10,AT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,AT.DEFAULT=new AT(41943040,AT.DEFAULT_COLLECTION_PERCENTILE,AT.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),AT.DISABLED=new AT(-1,0,0);var OT=(DT.Qt=function(t,e,n,r){return gb(""!==t.uid),new DT(t.isAuthenticated()?t.uid:"",e,n,r)},DT.prototype.checkEmpty=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return LT(t).$t({index:dI.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},DT.prototype.addMutationBatch=function(d,g,v,y){var m=this,b=MT(d),_=LT(d);return _.add({}).next(function(t){gb("number"==typeof t);for(var e,n,r,i,o,s=new ZI(t,g,v,y),a=(e=m.R,n=m.userId,i=(r=s).baseMutations.map(function(t){return X0(e.Lt,t)}),o=r.mutations.map(function(t){return X0(e.Lt,t)}),new dI(n,r.batchId,r.localWriteTime.toMillis(),i,o)),u=[],c=new l0(function(t,e){return mb(t.canonicalString(),e.canonicalString())}),h=0,l=y;h<l.length;h++){var f=l[h],p=gI.key(m.userId,f.key.path,t),c=c.add(f.key.path.popLast());u.push(_.put(a)),u.push(b.put(p,gI.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ut.addToCollectionParentIndex(d,t))}),d.addOnCommittedListener(function(){m.Kt[t]=s.keys()}),OI.waitFor(u).next(function(){return s})})},DT.prototype.lookupMutationBatch=function(t,e){var n=this;return LT(t).get(e).next(function(t){return t?(gb(t.userId===n.userId),fT(n.R,t)):null})},DT.prototype.jt=function(t,e){var n=this;return this.Kt[e]?OI.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){t=t.keys();return n.Kt[e]=t}return null})},DT.prototype.getNextMutationBatchAfterBatchId=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return LT(t).$t({index:dI.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(gb(e.batchId>=i),o=fT(r.R,e)),n.done()}).next(function(){return o})},DT.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return LT(t).$t({index:dI.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},DT.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return LT(t).Nt(dI.userMutationsIndex,n).next(function(t){return t.map(function(t){return fT(e.R,t)})})},DT.prototype.getAllMutationBatchesAffectingDocumentKey=function(o,s){var a=this,t=gI.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return MT(o).$t({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=hI(i);if(r===a.userId&&s.path.isEqual(i))return LT(o).get(t).next(function(t){if(!t)throw db();gb(t.userId===a.userId),u.push(fT(a.R,t))});n.done()}).next(function(){return u})},DT.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var s=this,a=new l0(mb),n=[];return t.forEach(function(o){var t=gI.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=MT(e).$t({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=hI(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),OI.waitFor(n).next(function(){return s.Wt(e,a)})},DT.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var o=this,s=e.path,a=s.length+1,e=gI.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new l0(mb);return MT(t).$t({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=hI(i);r===o.userId&&s.isPrefixOf(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Wt(t,u)})},DT.prototype.Wt=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(LT(e).get(t).next(function(t){if(null===t)throw db();gb(t.userId===n.userId),r.push(fT(n.R,t))}))}),OI.waitFor(i).next(function(){return r})},DT.prototype.removeMutationBatch=function(e,n){var r=this;return RT(e.Mt,this.userId,n).next(function(t){return e.addOnCommittedListener(function(){r.Gt(n.batchId)}),OI.forEach(t,function(t){return r.referenceDelegate.markPotentiallyOrphaned(e,t)})})},DT.prototype.Gt=function(t){delete this.Kt[t]},DT.prototype.performConsistencyCheck=function(e){var i=this;return this.checkEmpty(e).next(function(t){if(!t)return OI.resolve();var t=IDBKeyRange.lowerBound(gI.prefixForUser(i.userId)),r=[];return MT(e).$t({range:t},function(t,e,n){t[0]===i.userId?(t=hI(t[1]),r.push(t)):n.done()}).next(function(){gb(0===r.length)})})},DT.prototype.containsKey=function(t,e){return xT(t,this.userId,e)},DT.prototype.zt=function(t){var e=this;return FT(t).get(this.userId).next(function(t){return t||new pI(e.userId,-1,"")})},DT);function DT(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}function xT(t,o,e){var e=gI.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return MT(t).$t({range:e,kt:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function LT(t){return JI(t,dI.store)}function MT(t){return JI(t,gI.store)}function FT(t){return JI(t,pI.store)}var jT=(VT.prototype.next=function(){return this.Ht+=2,this.Ht},VT.Jt=function(){return new VT(0)},VT.Yt=function(){return new VT(-1)},VT),UT=(qT.prototype.allocateTargetId=function(n){var r=this;return this.Xt(n).next(function(t){var e=new jT(t.highestTargetId);return t.highestTargetId=e.next(),r.Zt(n,t).next(function(){return t.highestTargetId})})},qT.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return Ib.fromTimestamp(new wb(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},qT.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},qT.prototype.setTargetsMetadata=function(e,n,r){var i=this;return this.Xt(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.toTimestamp()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Zt(e,t)})},qT.prototype.addTargetData=function(e,n){var r=this;return this.te(e,n).next(function(){return r.Xt(e).next(function(t){return t.targetCount+=1,r.ee(n,t),r.Zt(e,t)})})},qT.prototype.updateTargetData=function(t,e){return this.te(t,e)},qT.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return BT(e).delete(t.targetId)}).next(function(){return n.Xt(e)}).next(function(t){return gb(0<t.targetCount),--t.targetCount,n.Zt(e,t)})},qT.prototype.removeTargets=function(n,r,i){var o=this,s=0,a=[];return BT(n).$t(function(t,e){e=pT(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.removeTargetData(n,e)))}).next(function(){return OI.waitFor(a)}).next(function(){return s})},qT.prototype.forEachTarget=function(t,n){return BT(t).$t(function(t,e){e=pT(e);n(e)})},qT.prototype.Xt=function(t){return KT(t).get(TI.key).next(function(t){return gb(null!==t),t})},qT.prototype.Zt=function(t,e){return KT(t).put(TI.key,e)},qT.prototype.te=function(t,e){return BT(t).put(dT(this.R,e))},qT.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},qT.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},qT.prototype.getTargetData=function(t,r){var e=v_(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return BT(t).$t({range:e,index:wI.queryTargetsIndexName},function(t,e,n){e=pT(e);y_(r,e.target)&&(i=e,n.done())}).next(function(){return i})},qT.prototype.addMatchingKeys=function(n,t,r){var i=this,o=[],s=WT(n);return t.forEach(function(t){var e=uI(t.path);o.push(s.put(new II(r,e))),o.push(i.referenceDelegate.addReference(n,r,t))}),OI.waitFor(o)},qT.prototype.removeMatchingKeys=function(n,t,r){var i=this,o=WT(n);return OI.forEach(t,function(t){var e=uI(t.path);return OI.waitFor([o.delete([r,e]),i.referenceDelegate.removeReference(n,r,t)])})},qT.prototype.removeMatchingKeysForTargetId=function(t,e){t=WT(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},qT.prototype.getMatchingKeysForTargetId=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=WT(t),r=b0();return t.$t({range:e,kt:!0},function(t,e,n){t=hI(t[1]),t=new Yb(t);r=r.add(t)}).next(function(){return r})},qT.prototype.containsKey=function(t,e){var e=uI(e.path),e=IDBKeyRange.bound([e],[_b(e)],!1,!0),i=0;return WT(t).$t({index:II.documentTargetsIndex,kt:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},qT.prototype.lt=function(t,e){return BT(t).get(e).next(function(t){return t?pT(t):null})},qT);function qT(t,e){this.referenceDelegate=t,this.R=e}function VT(t){this.Ht=t}function BT(t){return JI(t,wI.store)}function KT(t){return JI(t,TI.store)}function WT(t){return JI(t,II.store)}function HT(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){if(e.code!==ob.FAILED_PRECONDITION||e.message!==RI)throw e;return hb("LocalStore","Unexpectedly lost primary lease"),[2]})})}function zT(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=mb(n,t);return 0===t?mb(r,e):t}var GT=(tE.prototype.ie=function(){return++this.se},tE.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):zT(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(tE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),tE),QT=(ZT.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},ZT.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(ZT.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),ZT.prototype.ue=function(n){var t=this,e=this.oe?3e5:6e4;hb("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:this.ce=null,this.oe=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.collectGarbage(this.garbageCollector)];case 2:return t.sent(),[3,7];case 3:return KI(e=t.sent())?(hb("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,HT(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.ue(n)];case 8:return t.sent(),[2]}})})})},ZT),YT=(JT.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},JT.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return OI.resolve(nb.o);var r=new GT(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},JT.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},JT.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},JT.prototype.collect=function(e,n){var r=this;return-1===this.params.cacheSizeCollectionThreshold?(hb("LruGarbageCollector","Garbage collection skipped; disabled"),OI.resolve(CT)):this.getCacheSize(e).next(function(t){return t<r.params.cacheSizeCollectionThreshold?(hb("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),CT):r.fe(e,n)})},JT.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},JT.prototype.fe=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return i=t>h.params.maximumSequenceNumbersToCollect?(hb("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+t),h.params.maximumSequenceNumbersToCollect):t,s=Date.now(),h.nthSequenceNumber(e,i)}).next(function(t){return r=t,a=Date.now(),h.removeTargets(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.removeOrphanedDocuments(e,r)}).next(function(t){return c=Date.now(),cb()<=ss.DEBUG&&hb("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),OI.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:t})})},JT),XT=($T.prototype.he=function(t){var n=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(e){return n.next(function(t){return e+t})})},$T.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},$T.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},$T.prototype.le=function(t,n){return this.we(t,function(t,e){return n(e)})},$T.prototype.addReference=function(t,e,n){return eE(t,n)},$T.prototype.removeReference=function(t,e,n){return eE(t,n)},$T.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},$T.prototype.markPotentiallyOrphaned=eE,$T.prototype._e=function(t,e){return r=e,i=!1,FT(n=t).Ot(function(t){return xT(n,t,r).next(function(t){return t&&(i=!0),OI.resolve(!t)})}).next(function(){return i});var n,r,i},$T.prototype.removeOrphanedDocuments=function(n,r){var i=this,o=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],a=0;return this.we(n,function(e,t){t<=r&&(t=i._e(n,e).next(function(t){if(!t)return a++,o.getEntry(n,e).next(function(){return o.removeEntry(e),WT(n).delete([0,uI(e.path)])})}),s.push(t))}).next(function(){return OI.waitFor(s)}).next(function(){return o.apply(n)}).next(function(){return a})},$T.prototype.removeTarget=function(t,e){e=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,e)},$T.prototype.updateLimboDocument=eE,$T.prototype.we=function(t,r){var i,t=WT(t),o=nb.o;return t.$t({index:II.documentTargetsIndex},function(t,e){var n=t[0];t[1];t=e.path,e=e.sequenceNumber;0===n?(o!==nb.o&&r(new Yb(hI(i)),o),o=e,i=t):o=nb.o}).next(function(){o!==nb.o&&r(new Yb(hI(i)),o)})},$T.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},$T);function $T(t,e){this.db=t,this.garbageCollector=new YT(this,e)}function JT(t,e){this.ae=t,this.params=e}function ZT(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function tE(t){this.ne=t,this.buffer=new l0(zT),this.se=0}function eE(t,e){return WT(t).put((t=t.currentSequenceNumber,new II(0,uI(e.path),t)))}var nE,rE=(cE.prototype.get=function(t){var e=this.mapKeyFn(t),e=this.inner[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.equalsFn(o,t))return i}},cE.prototype.has=function(t){return void 0!==this.get(t)},cE.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},cE.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},cE.prototype.forEach=function(s){kb(this.inner,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},cE.prototype.isEmpty=function(){return Cb(this.inner)},cE),Q=(uE.prototype.getReadTime=function(t){t=this.changes.get(t);return t?t.readTime:Ib.min()},uE.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},uE.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:f_.newInvalidDocument(t),readTime:e})},uE.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?OI.resolve(n.document):this.getFromCache(t,e)},uE.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},uE.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},uE.prototype.assertNotApplied=function(){},uE),iE=(aE.prototype.addEntry=function(t,e,n){return lE(t).put(fE(e),n)},aE.prototype.removeEntry=function(t,e){t=lE(t),e=fE(e);return t.delete(e)},aE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.me(e,t)})},aE.prototype.getEntry=function(t,e){var n=this;return lE(t).get(fE(e)).next(function(t){return n.ye(e,t)})},aE.prototype.ge=function(t,e){var n=this;return lE(t).get(fE(e)).next(function(t){return{document:n.ye(e,t),size:PT(t)}})},aE.prototype.getEntries=function(t,e){var n=this,r=p0;return this.pe(t,e,function(t,e){e=n.ye(t,e);r=r.insert(t,e)}).next(function(){return r})},aE.prototype.Ee=function(t,e){var r=this,i=p0,o=new i0(Yb.comparator);return this.pe(t,e,function(t,e){var n=r.ye(t,e);i=i.insert(t,n),o=o.insert(t,PT(e))}).next(function(){return{documents:i,Te:o}})},aE.prototype.pe=function(t,e,i){if(e.isEmpty())return OI.resolve();var n=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),o=e.getIterator(),s=o.getNext();return lE(t).$t({range:n},function(t,e,n){for(var r=Yb.fromSegments(t);s&&Yb.comparator(s,r)<0;)i(s,null),s=o.getNext();s&&s.isEqual(r)&&(i(s,e),s=o.hasNext()?o.getNext():null),s?n.Ct(s.path.toArray()):n.done()}).next(function(){for(;s;)i(s,null),s=o.hasNext()?o.getNext():null})},aE.prototype.getDocumentsMatchingQuery=function(t,r,e){var n,i=this,o=p0,s=r.path.length+1,a={};return e.isEqual(Ib.min())?(n=r.path.toArray(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.toArray(),e=uT(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=bI.collectionReadTimeIndex),lE(t).$t(a,function(t,e,n){t.length===s&&(e=sT(i.R,e),r.path.isPrefixOf(e.key.path)?cw(r,e)&&(o=o.insert(e.key,e)):n.done())}).next(function(){return o})},aE.prototype.newChangeBuffer=function(t){return new oE(this,!!t&&t.trackRemovals)},aE.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},aE.prototype.getMetadata=function(t){return hE(t).get(_I.key).next(function(t){return gb(!!t),t})},aE.prototype.me=function(t,e){return hE(t).put(_I.key,e)},aE.prototype.ye=function(t,e){if(e){e=sT(this.R,e);if(!e.isNoDocument()||!e.version.isEqual(Ib.min()))return e}return f_.newInvalidDocument(t)},aE),oE=(Gi(sE,nE=Q),sE.prototype.applyChanges=function(i){var o=this,s=[],a=0,u=new l0(function(t,e){return mb(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(t,e){var n,r=o.Ae.get(t);e.document.isValidDocument()?(n=aT(o.Ie.R,e.document,o.getReadTime(t)),u=u.add(t.path.popLast()),e=PT(n),a+=e-r,s.push(o.Ie.addEntry(i,t,n))):(a-=r,o.trackRemovals?(r=aT(o.Ie.R,f_.newNoDocument(t,Ib.min()),o.getReadTime(t)),s.push(o.Ie.addEntry(i,t,r))):s.push(o.Ie.removeEntry(i,t)))}),u.forEach(function(t){s.push(o.Ie.Ut.addToCollectionParentIndex(i,t))}),s.push(this.Ie.updateMetadata(i,a)),OI.waitFor(s)},sE.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},sE.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},sE);function sE(t,e){var n=this;return(n=nE.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new rE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function aE(t,e){this.R=t,this.Ut=e}function uE(){this.changes=new rE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}function cE(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function hE(t){return JI(t,_I.store)}function lE(t){return JI(t,bI.store)}function fE(t){return t.path.toArray()}var pE=(dE.prototype.Rt=function(e,n,t,r){var i=this;gb(t<r&&0<=t&&r<=11);var o=new DI("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(lI.store),(s=e).createObjectStore(pI.store,{keyPath:pI.keyPath}),s.createObjectStore(dI.store,{keyPath:dI.keyPath,autoIncrement:!0}).createIndex(dI.userMutationsIndex,dI.userMutationsKeyPath,{unique:!0}),s.createObjectStore(gI.store),gE(e),e.createObjectStore(bI.store));var s,a=OI.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(II.store),s.deleteObjectStore(wI.store),s.deleteObjectStore(TI.store),gE(e)),a=a.next(function(){return t=o.store(TI.store),e=new TI(0,0,Ib.min().toTimestamp(),0),t.put(TI.key,e);var t,e})),t<4&&4<=r&&(a=(a=0!==t?a.next(function(){return n=e,(r=o).store(dI.store).Nt().next(function(t){n.deleteObjectStore(dI.store),n.createObjectStore(dI.store,{keyPath:dI.keyPath,autoIncrement:!0}).createIndex(dI.userMutationsIndex,dI.userMutationsKeyPath,{unique:!0});var e=r.store(dI.store),t=t.map(function(t){return e.put(t)});return OI.waitFor(t)});var n,r}):a).next(function(){e.createObjectStore(SI.store,{keyPath:SI.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.Re(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(_I.store),i.be(o)})),t<7&&7<=r&&(a=a.next(function(){return i.ve(o)})),t<8&&8<=r&&(a=a.next(function(){return i.Pe(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(bI.store)).createIndex(bI.readTimeIndex,bI.readTimeIndexPath,{unique:!1}),t.createIndex(bI.collectionReadTimeIndex,bI.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.Ve(o)})),a=t<11&&11<=r?a.next(function(){e.createObjectStore(kI.store,{keyPath:kI.keyPath}),e.createObjectStore(CI.store,{keyPath:CI.keyPath})}):a},dE.prototype.be=function(e){var n=0;return e.store(bI.store).$t(function(t,e){n+=PT(e)}).next(function(){var t=new _I(n);return e.store(_I.store).put(_I.key,t)})},dE.prototype.Re=function(n){var r=this,t=n.store(pI.store),i=n.store(dI.store);return t.Nt().next(function(t){return OI.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.Nt(dI.userMutationsIndex,t).next(function(t){return OI.forEach(t,function(t){gb(t.userId===e.userId);t=fT(r.R,t);return RT(n,e.userId,t).next(function(){})})})})})},dE.prototype.ve=function(t){var o=t.store(II.store),e=t.store(bI.store);return t.store(TI.store).get(TI.key).next(function(r){var i=[];return e.$t(function(t,e){var n=new Rb(t),t=[0,uI(n)];i.push(o.get(t).next(function(t){return t?OI.resolve():o.put(new II(0,uI(n),r.highestListenSequenceNumber))}))}).next(function(){return OI.waitFor(i)})})},dE.prototype.Pe=function(t,e){t.createObjectStore(EI.store,{keyPath:EI.keyPath});function r(t){if(i.add(t)){var e=t.lastSegment(),t=t.popLast();return n.put({collectionId:e,parent:uI(t)})}}var n=e.store(EI.store),i=new wT;return e.store(bI.store).$t({kt:!0},function(t,e){t=new Rb(t);return r(t.popLast())}).next(function(){return e.store(gI.store).$t({kt:!0},function(t,e){t[0];var n=t[1];t[2];n=hI(n);return r(n.popLast())})})},dE.prototype.Ve=function(t){var n=this,r=t.store(wI.store);return r.$t(function(t,e){e=pT(e),e=dT(n.R,e);return r.put(e)})},dE);function dE(t){this.R=t}function gE(t){t.createObjectStore(II.store,{keyPath:II.keyPath}).createIndex(II.documentTargetsIndex,II.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(wI.store,{keyPath:wI.keyPath}).createIndex(wI.queryTargetsIndexName,wI.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(TI.store)}var vE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yE=(mE.prototype.start=function(){var e=this;return this.je().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new sb(ob.FAILED_PRECONDITION,vE);return e.We(),e.Ge(),e.ze(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.qe.getHighestSequenceNumber(t)})}).then(function(t){e.Ne=new nb(t,e.De)}).then(function(){e.xe=!0}).catch(function(t){return e.Be&&e.Be.close(),Promise.reject(t)})},mE.prototype.He=function(n){var t=this;return this.Me=function(e){return Yi(t,void 0,void 0,function(){return Xi(this,function(t){return this.started?[2,n(e)]:[2]})})},n(this.isPrimary)},mE.prototype.setDatabaseDeletedListener=function(n){var t=this;this.Be.vt(function(e){return Yi(t,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},mE.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Yi(e,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},mE.prototype.je=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return _E(e).put(new SI(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Je(e).next(function(t){t||(n.isPrimary=!1,n.Se.enqueueRetryable(function(){return n.Me(!1)}))})}).next(function(){return n.Ye(e)}).next(function(t){return n.isPrimary&&!t?n.Xe(e).next(function(){return!1}):!!t&&n.Ze(e).next(function(){return!0})})}).catch(function(t){if(KI(t))return hb("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return hb("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Se.enqueueRetryable(function(){return n.Me(t)}),n.isPrimary=t})},mE.prototype.Je=function(t){var e=this;return bE(t).get(lI.key).next(function(t){return OI.resolve(e.tn(t))})},mE.prototype.en=function(t){return _E(t).delete(this.clientId)},mE.prototype.nn=function(){return Yi(this,void 0,void 0,function(){var e,n,r,i,o=this;return Xi(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=JI(t,SI.store);return r.Nt().next(function(t){var e=o.rn(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return OI.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Qe)for(n=0,r=e;n<r.length;n++)i=r[n],this.Qe.removeItem(this.on(i.clientId));t.label=2;case 2:return[2]}})})},mE.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},mE.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},mE.prototype.Ye=function(e){var r=this;return this.Ce?OI.resolve(!0):bE(e).get(lI.key).next(function(t){if(null!==t&&r.sn(t.leaseTimestampMs,5e3)&&!r.cn(t.ownerId)){if(r.tn(t)&&r.networkEnabled)return!0;if(!r.tn(t)){if(!t.allowTabSynchronization)throw new sb(ob.FAILED_PRECONDITION,vE);return!1}}return!(!r.networkEnabled||!r.inForeground)||_E(e).Nt().next(function(t){return void 0===r.rn(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&hb("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},mE.prototype.shutdown=function(){return Yi(this,void 0,void 0,function(){var n=this;return Xi(this,function(t){switch(t.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[lI.store,SI.store],function(t){var e=new XI(t,nb.o);return n.Xe(e).next(function(){return n.en(e)})})];case 1:return t.sent(),this.Be.close(),this.ln(),[2]}})})},mE.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},mE.prototype.fn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return _E(t).Nt().next(function(t){return e.rn(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(mE.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),mE.prototype.getMutationQueue=function(t){return OT.Qt(t,this.R,this.Ut,this.referenceDelegate)},mE.prototype.getTargetCache=function(){return this.qe},mE.prototype.getRemoteDocumentCache=function(){return this.Ue},mE.prototype.getIndexManager=function(){return this.Ut},mE.prototype.getBundleCache=function(){return this.Ke},mE.prototype.runTransaction=function(e,n,r){var i,o=this;return hb("IndexedDbPersistence","Starting transaction:",e),this.Be.runTransaction(e,"readonly"===n?"readonly":"readwrite",NI,function(t){return i=new XI(t,o.Ne?o.Ne.next():nb.o),"readwrite-primary"===n?o.Je(i).next(function(t){return!!t||o.Ye(i)}).next(function(t){if(!t)throw lb("Failed to obtain primary lease for action '"+e+"'."),o.isPrimary=!1,o.Se.enqueueRetryable(function(){return o.Me(!1)}),new sb(ob.FAILED_PRECONDITION,RI);return r(i)}).next(function(t){return o.Ze(i).next(function(){return t})}):o.dn(i).next(function(){return r(i)})}).then(function(t){return i.raiseOnCommittedEvent(),t})},mE.prototype.dn=function(t){var e=this;return bE(t).get(lI.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new sb(ob.FAILED_PRECONDITION,vE)})},mE.prototype.Ze=function(t){var e=new lI(this.clientId,this.allowTabSynchronization,Date.now());return bE(t).put(lI.key,e)},mE.yt=function(){return xI.yt()},mE.prototype.Xe=function(t){var e=this,n=bE(t);return n.get(lI.key).next(function(t){return e.tn(t)?(hb("IndexedDbPersistence","Releasing primary lease."),n.delete(lI.key)):OI.resolve()})},mE.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(lb("Detected an update time that is in the future: "+t+" > "+n),1))},mE.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},mE.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},mE.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),!po()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("pagehide",this.Fe))},mE.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},mE.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return hb("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return lb("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},mE.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){lb("Failed to set zombie client id.",t)}},mE.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},mE.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},mE);function mE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=s,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!mE.yt())throw new sb(ob.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XT(this,r),this.Le=e+"main",this.R=new nT(a),this.Be=new xI(this.Le,11,new pE(this.R)),this.qe=new UT(this.referenceDelegate,this.R),this.Ut=new IT,this.Ue=(e=this.R,a=this.Ut,new iE(e,a)),this.Ke=new vT,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===c&&lb("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function bE(t){return JI(t,lI.store)}function _E(t){return JI(t,SI.store)}function wE(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function IE(t,e){this.progress=t,this.wn=e}var TE=(RE.prototype.mn=function(e,n){var r=this;return this._n.getAllMutationBatchesAffectingDocumentKey(e,n).next(function(t){return r.yn(e,n,t)})},RE.prototype.yn=function(t,e,r){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,n=r;e<n.length;e++)n[e].applyToLocalView(t);return t})},RE.prototype.gn=function(t,i){t.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)r[n].applyToLocalView(e)})},RE.prototype.pn=function(e,t){var n=this;return this.Ue.getEntries(e,t).next(function(t){return n.En(e,t).next(function(){return t})})},RE.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},RE.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Yb.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):nw(e)?this.In(t,e,n):this.An(t,e,n);var r},RE.prototype.Tn=function(t,e){return this.mn(t,new Yb(e)).next(function(t){var e=v0;return e=t.isFoundDocument()?e.insert(t.key,t):e})},RE.prototype.In=function(n,r,i){var o=this,s=r.collectionGroup,a=v0;return this.Ut.getCollectionParents(n,s).next(function(t){return OI.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new Y_(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.An(n,e,i).next(function(t){t.forEach(function(t,e){a=a.insert(t,e)})})}).next(function(){return a})})},RE.prototype.An=function(e,n,t){var c,h,r=this;return this.Ue.getDocumentsMatchingQuery(e,n,t).next(function(t){return c=t,r._n.getAllMutationBatchesAffectingQuery(e,n)}).next(function(t){return h=t,r.Rn(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=c.get(a);null==u&&(u=f_.newInvalidDocument(a),c=c.insert(a,u)),Mw(s,u,r.localWriteTime),u.isFoundDocument()||(c=c.remove(a))}})}).next(function(){return c.forEach(function(t,e){cw(n,e)||(c=c.remove(t))}),c})},RE.prototype.Rn=function(t,e,n){for(var r=b0(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Bw&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},RE),EE=(NE.Pn=function(t,e){for(var n=b0(),r=b0(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new NE(t,e.fromCache,n,r)},NE),SE=(AE.prototype.Vn=function(t){this.Sn=t},AE.prototype.getDocumentsMatchingQuery=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())||i.isEqual(Ib.min())?this.Dn(e,r):this.Sn.pn(e,o).next(function(t){var n=s.Cn(r,t);return(J_(r)||Z_(r))&&s.Nn(r.limitType,n,o,i)?s.Dn(e,r):(cb()<=ss.DEBUG&&hb("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),uw(r)),s.Sn.getDocumentsMatchingQuery(e,r,i).next(function(e){return n.forEach(function(t){e=e.insert(t.key,t)}),e}))})},AE.prototype.Cn=function(n,t){var r=new l0(hw(n));return t.forEach(function(t,e){cw(n,e)&&(r=r.add(e))}),r},AE.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.compareTo(r))},AE.prototype.Dn=function(t,e){return cb()<=ss.DEBUG&&hb("QueryEngine","Using full collection scan to execute query:",uw(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ib.min())},AE),kE=(CE.prototype.collectGarbage=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.collect(t,n.Fn)})},CE);function CE(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new i0(mb),this.kn=new rE(v_,y_),this.$n=Ib.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new TE(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}function AE(){}function NE(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function RE(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function PE(t,e,n,r){return new kE(t,e,n,r)}function OE(i,o){return Yi(this,void 0,void 0,function(){var e,n,m,r;return Xi(this,function(t){switch(t.label){case 0:return n=(e=i)._n,m=e.Mn,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var y;return e._n.getAllMutationBatches(v).next(function(t){return y=t,n=e.persistence.getMutationQueue(o),m=new TE(e.On,n,e.persistence.getIndexManager()),n.getAllMutationBatches(v)}).next(function(t){for(var e=[],n=[],r=b0(),i=0,o=y;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var g=d[p];r=r.add(g.key)}}return m.pn(v,r).next(function(t){return{Ln:t,removedBatchIds:e,addedBatchIds:n}})})})];case 1:return r=t.sent(),[2,(e._n=n,e.Mn=m,e.xn.Vn(e.Mn),r)]}})})}function DE(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.On.newChangeBuffer({trackRemovals:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=OI.resolve(),n.forEach(function(n){a=a.next(function(){return o.getEntry(r,n)}).next(function(t){var e=i.docVersions.get(n);gb(null!==e),t.version.compareTo(e)<0&&(s.applyToRemoteDocument(t,i),t.isValidDocument()&&o.addEntry(t,i.commitVersion))})}),a.next(function(){return e._n.removeMutationBatch(r,s)}).next(function(){return c.apply(t)}).next(function(){return l._n.performConsistencyCheck(t)}).next(function(){return l.Mn.pn(t,u)})})}function xE(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function LE(t,r){var u=t,c=r.snapshotVersion,h=u.Fn;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=u.On.newChangeBuffer({trackRemovals:!0});h=u.Fn;var a=[];r.targetChanges.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(a.push(u.qe.removeMatchingKeys(s,t.removedDocuments,e).next(function(){return u.qe.addMatchingKeys(s,t.addedDocuments,e)})),0<(i=t.resumeToken).approximateByteSize()&&(n=o.withResumeToken(i,c).withSequenceNumber(s.currentSequenceNumber),h=h.insert(e,n),r=o,i=t,gb(0<(o=n).resumeToken.approximateByteSize()),(0===r.resumeToken.approximateByteSize()||3e8<=o.snapshotVersion.toMicroseconds()-r.snapshotVersion.toMicroseconds()||0<i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size)&&a.push(u.qe.updateTargetData(s,n))))});var e,n=p0;return r.documentUpdates.forEach(function(t,e){r.resolvedLimboDocuments.has(t)&&a.push(u.persistence.referenceDelegate.updateLimboDocument(s,t))}),a.push(ME(s,t,r.documentUpdates,c,void 0).next(function(t){n=t})),c.isEqual(Ib.min())||(e=u.qe.getLastRemoteSnapshotVersion(s).next(function(t){return u.qe.setTargetsMetadata(s,s.currentSequenceNumber,c)}),a.push(e)),OI.waitFor(a).next(function(){return t.apply(s)}).next(function(){return u.Mn.En(s,n)}).next(function(){return n})}).then(function(t){return u.Fn=h,t})}function ME(t,s,e,a,u){var n=b0();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=p0;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||a;e.isNoDocument()&&e.version.isEqual(Ib.min())?(s.removeEntry(t,r),o=o.insert(t,e)):!n.isValidDocument()||0<e.version.compareTo(n.version)||0===e.version.compareTo(n.version)&&n.hasPendingWrites?(s.addEntry(e,r),o=o.insert(t,e)):hb("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function FE(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.qe.getTargetData(e,r).next(function(t){return t?(n=t,OI.resolve(n)):i.qe.allocateTargetId(e).next(function(t){return n=new eT(r,t,0,e.currentSequenceNumber),i.qe.addTargetData(e,n).next(function(){return n})})})}).then(function(t){var e=i.Fn.get(t.targetId);return(null===e||0<t.snapshotVersion.compareTo(e.snapshotVersion))&&(i.Fn=i.Fn.insert(t.targetId,t),i.kn.set(r,t.targetId)),t})}function jE(i,o,s){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:n=(e=i).Fn.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.referenceDelegate.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!KI(r=t.sent()))throw r;return hb("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Fn=e.Fn.remove(o),e.kn.delete(n.target),[2]}})})}function UE(t,o,s){var a=t,u=Ib.min(),c=b0();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=iw(o),(void 0!==(t=(i=t).kn.get(r))?OI.resolve(i.Fn.get(t)):i.qe.getTargetData(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.qe.getMatchingKeysForTargetId(e,t.targetId).next(function(t){c=t})}).next(function(){return a.xn.getDocumentsMatchingQuery(e,o,s?u:Ib.min(),s?c:b0())}).next(function(t){return{documents:t,Bn:c}});var t,n,r,i})}function qE(t,e){var n=t,r=n.qe,t=n.Fn.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function VE(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.On,n=t,t=s.$n,r=e,i=p0,o=uT(t),t=lE(n),n=IDBKeyRange.lowerBound(o,!0),t.$t({index:bI.readTimeIndex,range:n},function(t,e){var n=sT(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:cT(o)}});var e,n,r,i,o}).then(function(t){var e=t.wn,t=t.readTime;return s.$n=t,e})}function BE(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=lE(t),r=Ib.min(),t.$t({index:bI.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=cT(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.$n=t})]})})}var KE,WE,HE=(fS.prototype.getBundleMetadata=function(t,e){return OI.resolve(this.Qn.get(e))},fS.prototype.saveBundleMetadata=function(t,e){return this.Qn.set(e.id,{id:e.id,version:e.version,createTime:U0(e.createTime)}),OI.resolve()},fS.prototype.getNamedQuery=function(t,e){return OI.resolve(this.jn.get(e))},fS.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(e=e).name,query:gT(e.bundledQuery),readTime:U0(e.readTime)}),OI.resolve()},fS),zE=(lS.prototype.isEmpty=function(){return this.Wn.isEmpty()},lS.prototype.addReference=function(t,e){e=new GE(t,e);this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},lS.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},lS.prototype.removeReference=function(t,e){this.Yn(new GE(t,e))},lS.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},lS.prototype.Zn=function(t){var e=this,n=new Yb(new Rb([])),r=new GE(n,t),t=new GE(n,t+1),i=[];return this.zn.forEachInRange([r,t],function(t){e.Yn(t),i.push(t.key)}),i},lS.prototype.ts=function(){var e=this;this.Wn.forEach(function(t){return e.Yn(t)})},lS.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},lS.prototype.es=function(t){var e=new Yb(new Rb([])),n=new GE(e,t),t=new GE(e,t+1),r=b0();return this.zn.forEachInRange([n,t],function(t){r=r.add(t.key)}),r},lS.prototype.containsKey=function(t){var e=new GE(t,0),e=this.Wn.firstAfterOrEqual(e);return null!==e&&t.isEqual(e.key)},lS),GE=(hS.Gn=function(t,e){return Yb.comparator(t.key,e.key)||mb(t.ns,e.ns)},hS.Hn=function(t,e){return mb(t.ns,e.ns)||Yb.comparator(t.key,e.key)},hS),QE=(cS.prototype.checkEmpty=function(t){return OI.resolve(0===this._n.length)},cS.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1];n=new ZI(i,e,n,r);this._n.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.rs=this.rs.add(new GE(a.key,i)),this.Ut.addToCollectionParentIndex(t,a.key.path.popLast())}return OI.resolve(n)},cS.prototype.lookupMutationBatch=function(t,e){return OI.resolve(this.os(e))},cS.prototype.getNextMutationBatchAfterBatchId=function(t,e){e=this.cs(e+1),e=e<0?0:e;return OI.resolve(this._n.length>e?this._n[e]:null)},cS.prototype.getHighestUnacknowledgedBatchId=function(){return OI.resolve(0===this._n.length?-1:this.ss-1)},cS.prototype.getAllMutationBatches=function(t){return OI.resolve(this._n.slice())},cS.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new GE(e,0),e=new GE(e,Number.POSITIVE_INFINITY),i=[];return this.rs.forEachInRange([r,e],function(t){t=n.os(t.ns);i.push(t)}),OI.resolve(i)},cS.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new l0(mb);return e.forEach(function(t){var e=new GE(t,0),t=new GE(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,t],function(t){r=r.add(t.ns)})}),OI.resolve(this.us(r))},cS.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,e=n;Yb.isDocumentKey(e)||(e=e.child(""));var e=new GE(new Yb(e),0),i=new l0(mb);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)},e),OI.resolve(this.us(i))},cS.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){t=e.os(t);null!==t&&n.push(t)}),n},cS.prototype.removeMutationBatch=function(n,r){var i=this;gb(0===this.hs(r.batchId,"removed")),this._n.shift();var o=this.rs;return OI.forEach(r.mutations,function(t){var e=new GE(t.key,r.batchId);return o=o.delete(e),i.referenceDelegate.markPotentiallyOrphaned(n,t.key)}).next(function(){i.rs=o})},cS.prototype.Gt=function(t){},cS.prototype.containsKey=function(t,e){var n=new GE(e,0),n=this.rs.firstAfterOrEqual(n);return OI.resolve(e.isEqual(n&&n.key))},cS.prototype.performConsistencyCheck=function(t){return this._n.length,OI.resolve()},cS.prototype.hs=function(t,e){return this.cs(t)},cS.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},cS.prototype.os=function(t){t=this.cs(t);return t<0||t>=this._n.length?null:this._n[t]},cS),YE=(uS.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:i,readTime:n}),this.size+=i-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},uS.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},uS.prototype.getEntry=function(t,e){var n=this.docs.get(e);return OI.resolve(n?n.document.clone():f_.newInvalidDocument(e))},uS.prototype.getEntries=function(t,e){var n=this,r=p0;return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():f_.newInvalidDocument(t))}),OI.resolve(r)},uS.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=p0,i=new Yb(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,s=u.document,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||cw(e,s)&&(r=r.insert(s.key,s.clone()))}return OI.resolve(r)},uS.prototype.fs=function(t,e){return OI.forEach(this.docs,function(t){return e(t)})},uS.prototype.newChangeBuffer=function(t){return new XE(this)},uS.prototype.getSize=function(t){return OI.resolve(this.size)},uS),XE=(Gi(aS,WE=Q),aS.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(t,e){e.document.isValidDocument()?i.push(r.Ie.addEntry(n,e.document,r.getReadTime(t))):r.Ie.removeEntry(t)}),OI.waitFor(i)},aS.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},aS.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},aS),$E=(sS.prototype.forEachTarget=function(t,n){return this.ds.forEach(function(t,e){return n(e)}),OI.resolve()},sS.prototype.getLastRemoteSnapshotVersion=function(t){return OI.resolve(this.lastRemoteSnapshotVersion)},sS.prototype.getHighestSequenceNumber=function(t){return OI.resolve(this.ws)},sS.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),OI.resolve(this.highestTargetId)},sS.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),OI.resolve()},sS.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new jT(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},sS.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,OI.resolve()},sS.prototype.updateTargetData=function(t,e){return this.te(e),OI.resolve()},sS.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,OI.resolve()},sS.prototype.removeTargets=function(n,r,i){var o=this,s=0,a=[];return this.ds.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.ds.delete(t),a.push(o.removeMatchingKeysForTargetId(n,e.targetId)),s++)}),OI.waitFor(a).next(function(){return s})},sS.prototype.getTargetCount=function(t){return OI.resolve(this.targetCount)},sS.prototype.getTargetData=function(t,e){e=this.ds.get(e)||null;return OI.resolve(e)},sS.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),OI.resolve()},sS.prototype.removeMatchingKeys=function(e,t,n){this._s.Xn(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),OI.waitFor(i)},sS.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),OI.resolve()},sS.prototype.getMatchingKeysForTargetId=function(t,e){e=this._s.es(e);return OI.resolve(e)},sS.prototype.containsKey=function(t,e){return OI.resolve(this._s.containsKey(e))},sS),JE=(oS.prototype.start=function(){return Promise.resolve()},oS.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(oS.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),oS.prototype.setDatabaseDeletedListener=function(){},oS.prototype.setNetworkEnabled=function(){},oS.prototype.getIndexManager=function(){return this.Ut},oS.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new QE(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},oS.prototype.getTargetCache=function(){return this.qe},oS.prototype.getRemoteDocumentCache=function(){return this.Ue},oS.prototype.getBundleCache=function(){return this.Ke},oS.prototype.runTransaction=function(t,e,n){var r=this;hb("MemoryPersistence","Starting transaction:",t);var i=new ZE(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},oS.prototype.Is=function(e,n){return OI.or(Object.values(this.gs).map(function(t){return function(){return t.containsKey(e,n)}}))},oS),ZE=(Gi(iS,KE=G),iS),tS=(rS.bs=function(t){return new rS(t)},Object.defineProperty(rS.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw db()},enumerable:!1,configurable:!0}),rS.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),OI.resolve()},rS.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),OI.resolve()},rS.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),OI.resolve()},rS.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},rS.prototype.Es=function(){this.Rs=new Set},rS.prototype.Ts=function(n){var r=this,i=this.persistence.getRemoteDocumentCache().newChangeBuffer();return OI.forEach(this.vs,function(t){var e=Yb.fromPath(t);return r.Ps(n,e).next(function(t){t||i.removeEntry(e)})}).next(function(){return r.Rs=null,i.apply(n)})},rS.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},rS.prototype.ps=function(t){return 0},rS.prototype.Ps=function(t,e){var n=this;return OI.or([function(){return OI.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},rS),eS=(nS.prototype.isAuthenticated=function(){return null!=this.uid},nS.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},nS.prototype.isEqual=function(t){return t.uid===this.uid},nS);function nS(t){this.uid=t}function rS(t){this.persistence=t,this.As=new zE,this.Rs=null}function iS(t){var e=this;return(e=KE.call(this)||this).currentSequenceNumber=t,e}function oS(t,e){var n=this;this.gs={},this.Ne=new nb(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new $E(this),this.Ut=new _T,this.Ue=(t=this.Ut,new YE(t,function(t){return n.referenceDelegate.ps(t)})),this.R=new nT(e),this.Ke=new HE(this.R)}function sS(t){this.persistence=t,this.ds=new rE(v_,y_),this.lastRemoteSnapshotVersion=Ib.min(),this.highestTargetId=0,this.ws=0,this._s=new zE,this.targetCount=0,this.ys=jT.Jt()}function aS(t){var e=this;return(e=WE.call(this)||this).Ie=t,e}function uS(t,e){this.Ut=t,this.ls=e,this.docs=new i0(Yb.comparator),this.size=0}function cS(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new l0(GE.Gn)}function hS(t,e){this.key=t,this.ns=e}function lS(){this.Wn=new l0(GE.Gn),this.zn=new l0(GE.Hn)}function fS(t){this.R=t,this.Qn=new Map,this.jn=new Map}function pS(t,e){return"firestore_clients_"+t+"_"+e}function dS(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(n+="_"+e.uid),n}function gS(t,e){return"firestore_targets_"+t+"_"+e}eS.UNAUTHENTICATED=new eS(null),eS.GOOGLE_CREDENTIALS=new eS("google-credentials-uid"),eS.FIRST_PARTY=new eS("first-party-uid");var vS,yS=(qS.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new sb(i.error.code,i.error.message)),o?new qS(t,e,i.state,r):(lb("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},qS.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},qS),mS=(US.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new sb(r.error.code,r.error.message)),i?new US(t,r.state,n):(lb("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},US.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},US),bS=(jS.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=_0,o=0;r&&o<n.activeTargetIds.length;++o)r=Qb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new jS(t,i):(lb("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},jS),_S=(FS.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new FS(e.clientId,e.onlineState):(lb("SharedClientState","Failed to parse online state: "+t),null)},FS),wS=(MS.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},MS.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},MS.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},MS),IS=(LS.yt=function(t){return!(!t||!t.localStorage)},LS.prototype.start=function(){return Yi(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Xi(this,function(t){switch(t.label){case 0:return[4,this.syncEngine.fn()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(pS(this.persistenceKey,r)))&&(o=bS.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)h=c[u],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",function(){return l.shutdown()}),this.started=!0,[2]}})})},LS.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},LS.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},LS.prototype.isActiveQueryTarget=function(n){var r=!1;return this.ks.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},LS.prototype.addPendingMutation=function(t){this.zs(t,"pending")},LS.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},LS.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(gS(this.persistenceKey,t)))||(e=mS.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Qs(),n},LS.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},LS.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},LS.prototype.clearQueryState=function(t){this.removeItem(gS(this.persistenceKey,t))},LS.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},LS.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},LS.prototype.setOnlineState=function(t){this.Xs(t)},LS.prototype.notifyBundleLoaded=function(){this.Zs()},LS.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},LS.prototype.getItem=function(t){var e=this.storage.getItem(t);return hb("SharedClientState","READ",t,e),e},LS.prototype.setItem=function(t,e){hb("SharedClientState","SET",t,e),this.storage.setItem(t,e)},LS.prototype.removeItem=function(t){hb("SharedClientState","REMOVE",t),this.storage.removeItem(t)},LS.prototype.Fs=function(t){var e=this,o=t;o.storageArea===this.storage&&(hb("SharedClientState","EVENT",o.key,o.newValue),o.key!==this.Os?this.Se.enqueueRetryable(function(){return Yi(e,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){if(this.started){if(null!==o.key)if(this.Ls.test(o.key)){if(null==o.newValue)return e=this.ti(o.key),[2,this.ei(e,null)];if(e=this.ni(o.key,o.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(o.key)){if(null!==o.newValue&&(n=this.si(o.key,o.newValue)))return[2,this.ii(n)]}else if(this.qs.test(o.key)){if(null!==o.newValue&&(r=this.ri(o.key,o.newValue)))return[2,this.oi(r)]}else if(o.key===this.Us){if(null!==o.newValue&&(i=this.js(o.newValue)))return[2,this.Ws(i)]}else if(o.key===this.Ms)(i=function(t){var e=nb.o;if(null!=t)try{var n=JSON.parse(t);gb("number"==typeof n),e=n}catch(t){lb("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==nb.o&&this.sequenceNumberHandler(i);else if(o.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(o);return[2]})})}):lb("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(LS.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),LS.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},LS.prototype.zs=function(t,e,n){n=new yS(this.currentUser,t,e,n),t=dS(this.persistenceKey,this.currentUser,t);this.setItem(t,n.Ss())},LS.prototype.Hs=function(t){t=dS(this.persistenceKey,this.currentUser,t);this.removeItem(t)},LS.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(t))},LS.prototype.Ys=function(t,e,n){var r=gS(this.persistenceKey,t),n=new mS(t,e,n);this.setItem(r,n.Ss())},LS.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},LS.prototype.ti=function(t){t=this.Ls.exec(t);return t?t[1]:null},LS.prototype.ni=function(t,e){t=this.ti(t);return bS.Vs(t,e)},LS.prototype.si=function(t,e){var n=this.Bs.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return yS.Vs(new eS(n),t,e)},LS.prototype.ri=function(t,e){t=this.qs.exec(t),t=Number(t[1]);return mS.Vs(t,e)},LS.prototype.js=function(t){return _S.Vs(t)},LS.prototype.ii=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(e.batchId,e.state,e.error)]:(hb("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},LS.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},LS.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},LS.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},LS.prototype.Gs=function(t){var n=_0;return t.forEach(function(t,e){n=n.unionWith(e.activeTargetIds)}),n},LS),TS=(xS.prototype.addPendingMutation=function(t){},xS.prototype.updateMutationState=function(t,e,n){},xS.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},xS.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},xS.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},xS.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},xS.prototype.clearQueryState=function(t){delete this.fi[t]},xS.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},xS.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},xS.prototype.start=function(){return this.li=new wS,Promise.resolve()},xS.prototype.handleUserChange=function(t,e,n){},xS.prototype.setOnlineState=function(t){},xS.prototype.shutdown=function(){},xS.prototype.writeSequenceNumber=function(t){},xS.prototype.notifyBundleLoaded=function(){},xS),ES=(DS.prototype.di=function(t){},DS.prototype.shutdown=function(){},DS),SS=(OS.prototype.di=function(t){this.gi.push(t)},OS.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},OS.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},OS.prototype._i=function(){hb("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},OS.prototype.yi=function(){hb("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},OS.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},OS),kS={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},CS=(PS.prototype.Ii=function(t){this.Ai=t},PS.prototype.Ri=function(t){this.bi=t},PS.prototype.onMessage=function(t){this.vi=t},PS.prototype.close=function(){this.Ti()},PS.prototype.send=function(t){this.Ei(t)},PS.prototype.Pi=function(){this.Ai()},PS.prototype.Vi=function(t){this.bi(t)},PS.prototype.Si=function(t){this.vi(t)},PS),AS=(RS.prototype.Ni=function(e,t,n,r){var i=this.xi(e,t);hb("RestConnection","Sending: ",i,n);t={};return this.Fi(t,r),this.ki(e,i,t,n).then(function(t){return hb("RestConnection","Received: ",t),t},function(t){throw fb("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},RS.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},RS.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.9.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},RS.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+kS[t]},Gi(NS,vS=RS),NS.prototype.ki=function(u,e,n,r){return new Promise(function(o,s){var a=new eb;a.listenOnce(Ym.COMPLETE,function(){try{switch(a.getLastErrorCode()){case Qm.NO_ERROR:var t=a.getResponseJson();hb("Connection","XHR received:",JSON.stringify(t)),o(t);break;case Qm.TIMEOUT:hb("Connection",'RPC "'+u+'" timed out'),s(new sb(ob.DEADLINE_EXCEEDED,"Request time out"));break;case Qm.HTTP_ERROR:var e,n,r=a.getStatus();hb("Connection",'RPC "'+u+'" failed with status:',r,"response text:",a.getResponseText()),0<r?(e=a.getResponseJson().error)&&e.status&&e.message?(i=e.status.toLowerCase().replace(/_/g,"-"),n=0<=Object.values(ob).indexOf(i)?i:ob.UNKNOWN,s(new sb(n,e.message))):s(new sb(ob.UNKNOWN,"Server responded with status "+a.getStatus())):s(new sb(ob.UNAVAILABLE,"Connection failed."));break;default:db()}}finally{hb("Connection",'RPC "'+u+'" completed.')}var i});var t=JSON.stringify(r);a.send(e,"POST",t,n,15)})},NS.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Bm,i=Gm(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(t.xmlHttpFactory=new Zm({})),this.Fi(t.initMessageHeaders,e),fo()||vo()||0<=lo().indexOf("Electron/")||(0<=(e=lo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=lo().indexOf("MSAppHost/")||go()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");hb("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),s=!1,a=!1,u=new CS({Ei:function(t){a?hb("Connection","Not sending because WebChannel is closed:",t):(s||(hb("Connection","Opening WebChannel transport."),o.open(),s=!0),hb("Connection","WebChannel sending:",t),o.send(t))},Ti:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,tb.EventType.OPEN,function(){a||hb("Connection","WebChannel transport opened.")}),t(o,tb.EventType.CLOSE,function(){a||(a=!0,hb("Connection","WebChannel transport closed"),u.Vi())}),t(o,tb.EventType.ERROR,function(t){a||(a=!0,fb("Connection","WebChannel transport errored:",t),u.Vi(new sb(ob.UNAVAILABLE,"The operation could not be completed")))}),t(o,tb.EventType.MESSAGE,function(t){var e,n,r,i;a||(gb(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(hb("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Yw[r];if(void 0!==t)return r0(t)}(),i=n.message,void 0===t&&(t=ob.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,u.Vi(new sb(t,i)),o.close()):(hb("Connection","WebChannel received:",e),u.Si(e)))}),t(i,Xm.STAT_EVENT,function(t){t.stat===$m?hb("Connection","Detected buffering proxy"):t.stat===Jm&&hb("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Pi()},0),u},NS);function NS(t){var e=this;return(e=vS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e.useFetchStreams=t.useFetchStreams,e}function RS(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function PS(t){this.Ei=t.Ei,this.Ti=t.Ti}function OS(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function DS(){}function xS(){this.li=new wS,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function LS(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new i0(mb),this.started=!1,this.$s=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=pS(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new wS),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Ks="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function MS(){this.activeTargetIds=_0}function FS(t,e){this.clientId=t,this.onlineState=e}function jS(t,e){this.clientId=t,this.activeTargetIds=e}function US(t,e,n){this.targetId=t,this.state=e,this.error=n}function qS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function VS(){return"undefined"!=typeof window?window:null}function BS(){return"undefined"!=typeof document?document:null}function KS(t){return new M0(t,!0)}function WS(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Yi(o,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return p1(this)?(hb("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return(e=n).Or.add(4),[4,s1(e)];case 1:return t.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,o1(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new JS(n,r)}var HS,zS,GS,QS=(i1.prototype.reset=function(){this.qi=0},i1.prototype.Qi=function(){this.qi=this.Bi},i1.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);0<i&&hb("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Ki=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},i1.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},i1.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},i1.prototype.Wi=function(){return(Math.random()-.5)*this.qi},i1),Q=(r1.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},r1.prototype.er=function(){return 2===this.state},r1.prototype.start=function(){3!==this.state?this.auth():this.nr()},r1.prototype.stop=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},r1.prototype.sr=function(){this.state=0,this.Zi.reset()},r1.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},r1.prototype.cr=function(t){this.ur(),this.stream.send(t)},r1.prototype.rr=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},r1.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},r1.prototype.close=function(e,n){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==e?this.Zi.reset():n&&n.code===ob.RESOURCE_EXHAUSTED?(lb(n.toString()),lb("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):n&&n.code===ob.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ri(n)];case 1:return t.sent(),[2]}})})},r1.prototype.ar=function(){},r1.prototype.auth=function(){var n=this;this.state=1;var t=this.hr(this.Yi),e=this.Yi;this.Ji.getToken().then(function(t){n.Yi===e&&n.lr(t)},function(e){t(function(){var t=new sb(ob.UNKNOWN,"Fetching auth token failed: "+e.message);return n.dr(t)})})},r1.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},r1.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Yi(t,void 0,void 0,function(){return Xi(this,function(t){return this.state=0,this.start(),[2]})})})},r1.prototype.dr=function(t){return hb("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},r1.prototype.hr=function(e){var n=this;return function(t){n.Se.enqueueAndForget(function(){return n.Yi===e?t():(hb("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},r1),YS=(Gi(n1,GS=Q),n1.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},n1.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:db(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.I?(gb(void 0===s||"string"==typeof s),xb.fromBase64String(s||"")):(gb(void 0===s||s instanceof Uint8Array),xb.fromUint8Array(s||new Uint8Array))),o=(a=e.targetChange.cause)&&(u=void 0===(c=a).code?ob.UNKNOWN:r0(c.code),new sb(u,c.message||"")),s=new S0(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime;var r=K0(t,n.document.name),i=U0(n.document.updateTime),a=new h_({mapValue:{fields:n.document.fields}}),u=(o=f_.newFoundDocument(r,i,a),n.targetIds||[]),c=n.removedTargetIds||[];s=new T0(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=K0(t,n.document),i=n.readTime?U0(n.readTime):Ib.min(),a=f_.newNoDocument(r,i),o=n.removedTargetIds||[],s=new T0([],o,a.key,a);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=K0(t,n.document),i=n.removedTargetIds||[],s=new T0([],i,r,null);else{if(!("filter"in e))return db();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new Qw(n),i=e.targetId,s=new E0(i,r)}return s}(this.R,t),t=function(t){if(!("targetChange"in t))return Ib.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?U0(t.readTime):Ib.min()}(t);return this.listener._r(e,t)},n1.prototype.mr=function(t){var e,n,r,i={};i.database=z0(this.R),i.addTarget=(e=this.R,(r=m_(r=(n=t).target)?{documents:J0(e,r)}:{query:Z0(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=j0(e,n.resumeToken):0<n.snapshotVersion.compareTo(Ib.min())&&(r.readTime=F0(e,n.snapshotVersion.toTimestamp())),r);var o,t=(this.R,o=t,null==(t=function(){switch(o.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return db()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.cr(i)},n1.prototype.yr=function(t){var e={};e.database=z0(this.R),e.removeTarget=t,this.cr(e)},n1),XS=(Gi(e1,zS=Q),Object.defineProperty(e1.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e1.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,zS.prototype.start.call(this)},e1.prototype.ar=function(){this.gr&&this.Er([])},e1.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e1.prototype.onMessage=function(t){if(gb(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(gb(void 0!==r),n.map(function(t){return n=r,(t=(e=t).updateTime?U0(e.updateTime):U0(n)).isEqual(Ib.min())&&(t=U0(n)),new Pw(t,e.transformResults||[]);var e,n})):[]),n=U0(t.commitTime);return this.listener.Tr(n,e)}var n,r;return gb(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e1.prototype.Ar=function(){var t={};t.database=z0(this.R),this.cr(t)},e1.prototype.Er=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return X0(e.R,t)})};this.cr(t)},e1),$S=(Gi(t1,HS=function(){}),t1.prototype.br=function(){if(this.Rr)throw new sb(ob.FAILED_PRECONDITION,"The client has already been terminated.")},t1.prototype.Ni=function(e,n,r){var i=this;return this.br(),this.credentials.getToken().then(function(t){return i.Hi.Ni(e,n,r,t)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ob.UNAUTHENTICATED&&i.credentials.invalidateToken(),t):new sb(ob.UNKNOWN,t.toString())})},t1.prototype.$i=function(e,n,r){var i=this;return this.br(),this.credentials.getToken().then(function(t){return i.Hi.$i(e,n,r,t)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===ob.UNAUTHENTICATED&&i.credentials.invalidateToken(),t):new sb(ob.UNKNOWN,t.toString())})},t1.prototype.terminate=function(){this.Rr=!0},t1),JS=(ZS.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},ZS.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},ZS.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},ZS.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},ZS.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(lb(t),this.Vr=!1):hb("OnlineStateTracker",t)},ZS.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},ZS);function ZS(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function t1(t,e,n){var r=this;return(r=HS.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function e1(t,e,n,r,i){var o=this;return(o=zS.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function n1(t,e,n,r,i){var o=this;return(o=GS.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function r1(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new QS(t,e)}function i1(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}function o1(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:if(!p1(r))return[3,4];e=0,n=r.Mr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function s1(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:e=0,n=r.Mr,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function a1(t,e){t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),f1(t)?l1(t):I1(t).er()&&c1(t,e))}function u1(t,e){var n=t,t=I1(n);n.$r.delete(e),t.er()&&h1(n,e),0===n.$r.size&&(t.er()?t.ir():p1(n)&&n.Br.set("Unknown"))}function c1(t,e){t.qr.U(e.targetId),I1(t).mr(e)}function h1(t,e){t.qr.U(e),I1(t).yr(e)}function l1(e){e.qr=new C0({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.$r.get(t)||null}}),I1(e).start(),e.Br.Sr()}function f1(t){return p1(t)&&!I1(t).tr()&&0<t.$r.size}function p1(t){return 0===t.Or.size}function d1(t){t.qr=void 0}function g1(s,a,u){return Yi(this,void 0,void 0,function(){var n,o;return Xi(this,function(t){switch(t.label){case 0:if(s.Br.set("Online"),!(a instanceof S0&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.$r.has(i)?[4,o.remoteSyncer.rejectListen(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.$r.delete(i),o.qr.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),hb("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,v1(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof T0?s.qr.X(a):a instanceof E0?s.qr.rt(a):s.qr.et(a),u.isEqual(Ib.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,xE(s.localStore)];case 8:return o=t.sent(),0<=u.compareTo(o)?[4,(i=u,(e=(r=s).qr.ut(i)).targetChanges.forEach(function(t,e){var n;0<t.resumeToken.approximateByteSize()&&((n=r.$r.get(e))&&r.$r.set(e,n.withResumeToken(t.resumeToken,i)))}),e.targetMismatches.forEach(function(t){var e=r.$r.get(t);e&&(r.$r.set(t,e.withResumeToken(xb.EMPTY_BYTE_STRING,e.snapshotVersion)),h1(r,t),e=new eT(e.target,t,1,e.sequenceNumber),c1(r,e))}),r.remoteSyncer.applyRemoteEvent(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return hb("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,v1(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function v1(n,r,i){return Yi(this,void 0,void 0,function(){var e=this;return Xi(this,function(t){switch(t.label){case 0:if(!KI(r))throw r;return n.Or.add(1),[4,s1(n)];case 1:return t.sent(),n.Br.set("Offline"),i=i||function(){return xE(n.localStore)},n.asyncQueue.enqueueRetryable(function(){return Yi(e,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return hb("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Or.delete(1),[4,o1(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function y1(e,n){return n().catch(function(t){return v1(e,t,n)})}function m1(u){return Yi(this,void 0,void 0,function(){var i,o,s,a;return Xi(this,function(t){switch(t.label){case 0:o=T1(i=u),s=0<i.kr.length?i.kr[i.kr.length-1].batchId:-1,t.label=1;case 1:if(!(p1(i)&&i.kr.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.localStore,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r._n.getNextMutationBatchAfterBatchId(t,n)}))];case 3:return null===(a=t.sent())?(0===i.kr.length&&o.ir(),[3,7]):(s=a.batchId,function(t,e){t.kr.push(e);t=T1(t);t.er()&&t.pr&&t.Er(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,v1(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return b1(i)&&_1(i),[2]}var e,n,r})})}function b1(t){return p1(t)&&!T1(t).tr()&&0<t.kr.length}function _1(t){T1(t).start()}function w1(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=n,r?(e.Or.delete(2),[4,o1(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Or.add(2),[4,s1(e)]);case 3:t.sent(),e.Br.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function I1(n){var t,e,r,i=this;return n.Ur||(n.Ur=(t=n.datastore,e=n.asyncQueue,r={Ii:function(n){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return n.$r.forEach(function(t,e){c1(n,t)}),[2]})})}.bind(null,n),Ri:function(e,n){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return d1(e),f1(e)?(e.Br.Nr(n),l1(e)):e.Br.set("Unknown"),[2]})})}.bind(null,n),_r:g1.bind(null,n)},t.br(),new YS(e,t.Hi,t.credentials,t.R,r)),n.Mr.push(function(e){return Yi(i,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return e?(n.Ur.sr(),f1(n)?l1(n):n.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Ur.stop()];case 2:t.sent(),d1(n),t.label=3;case 3:return[2]}})})})),n.Ur}function T1(n){var t,e,r,i=this;return n.Kr||(n.Kr=(t=n.datastore,e=n.asyncQueue,r={Ii:function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return T1(e).Ar(),[2]})})}.bind(null,n),Ri:function(e,n){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return n&&T1(e).pr?[4,function(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return n0(n=i.code)&&n!==ob.ABORTED?(e=r.kr.shift(),T1(r).sr(),[4,y1(r,function(){return r.remoteSyncer.rejectFailedWrite(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,m1(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return b1(e)&&_1(e),[2]}})})}.bind(null,n),Ir:function(o){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){for(e=T1(o),n=0,r=o.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]})})}.bind(null,n),Tr:function(r,i,o){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return e=r.kr.shift(),n=tT.from(e,i,o),[4,y1(r,function(){return r.remoteSyncer.applySuccessfulWrite(n)})];case 1:return t.sent(),[4,m1(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.br(),new XS(e,t.Hi,t.credentials,t.R,r)),n.Mr.push(function(e){return Yi(i,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return e?(n.Kr.sr(),[4,m1(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Kr.stop()];case 3:t.sent(),0<n.kr.length&&(hb("RemoteStore","Stopping write stream with "+n.kr.length+" pending writes"),n.kr=[]),t.label=4;case 4:return[2]}})})})),n.Kr}var E1=(S1.createAndSchedule=function(t,e,n,r,i){i=new S1(t,e,Date.now()+n,r,i);return i.start(n),i},S1.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},S1.prototype.skipDelay=function(){return this.handleDelayElapsed()},S1.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new sb(ob.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},S1.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})},S1.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},S1);function S1(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new PI,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}function k1(t,e){if(lb("AsyncQueue",e+": "+t),KI(t))return new sb(ob.UNAVAILABLE,e+": "+t);throw t}function C1(){this.queries=new rE(aw,sw),this.onlineState="Unknown",this.Gr=new Set}var A1=(x1.emptySet=function(t){return new x1(t.comparator)},x1.prototype.has=function(t){return null!=this.keyedMap.get(t)},x1.prototype.get=function(t){return this.keyedMap.get(t)},x1.prototype.first=function(){return this.sortedSet.minKey()},x1.prototype.last=function(){return this.sortedSet.maxKey()},x1.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},x1.prototype.indexOf=function(t){t=this.keyedMap.get(t);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(x1.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),x1.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(t,e){return n(t),!1})},x1.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},x1.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},x1.prototype.isEqual=function(t){if(!(t instanceof x1))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},x1.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},x1.prototype.copy=function(t,e){var n=new x1;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},x1),N1=(D1.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);!n||0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):db()},D1.prototype.jr=function(){var n=[];return this.Qr.inorderTraversal(function(t,e){n.push(e)}),n},D1),R1=(O1.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new O1(t,e,A1.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(O1.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),O1.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&sw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},O1),P1=function(){this.Wr=void 0,this.listeners=[]};function O1(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}function D1(){this.Qr=new i0(Yb.comparator)}function x1(n){this.comparator=n?function(t,e){return n(t,e)||Yb.comparator(t.key,e.key)}:function(t,e){return Yb.comparator(t.key,e.key)},this.keyedMap=v0,this.sortedSet=new i0(this.comparator)}function L1(s,a){return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new P1),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.onListen(n)];case 2:return o.Wr=t.sent(),[3,4];case 3:return o=t.sent(),o=k1(o,"Initialization of query '"+uw(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.zr(e.onlineState),i.Wr&&a.Hr(i.Wr)&&F1(e),[2]}})})}function M1(s,a){return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.onUnlisten(n))]:[2]})})}function F1(t){t.Gr.forEach(function(t){t.next()})}var j1=(H1.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new R1(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},H1.prototype.onError=function(t){this.Jr.error(t)},H1.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},H1.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},H1.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},H1.prototype.no=function(t){t=R1.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},H1),U1=(W1.prototype.io=function(){return"metadata"in this.payload},W1),q1=(K1.prototype.qn=function(t){return K0(this.R,t)},K1.prototype.Un=function(t){return t.metadata.exists?Y0(this.R,t.document,!1):f_.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},K1.prototype.Kn=U0,K1),V1=(B1.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},B1.prototype.co=function(t){for(var e=new Map,n=new q1(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||b0()).add(s);e.set(c,h)}}return e},B1.prototype.complete=function(){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return Yi(this,void 0,void 0,function(){var n,r,i,o,e,s,a,u,c,h;return Xi(this,function(t){switch(t.label){case 0:for(n=l,r=b0(),i=p0,o=y0,e=0,s=p;e<s.length;e++)a=s[e],u=f.qn(a.metadata.name),a.document&&(r=r.add(u)),i=i.insert(u,f.Un(a)),o=o.insert(u,f.Kn(a.metadata.readTime));return c=n.On.newChangeBuffer({trackRemovals:!0}),[4,FE(n,iw($_(Rb.fromString("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return ME(e,c,i,Ib.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n.qe.removeMatchingKeysForTargetId(e,h.targetId).next(function(){return n.qe.addMatchingKeys(e,r,h.targetId)}).next(function(){return n.Mn.En(e,t)}).next(function(){return t})})})]}})})}(this.localStore,new q1(this.R),this.documents,this.ro.id)];case 1:e=t.sent(),n=this.co(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=b0()),Yi(this,void 0,void 0,function(){var n,r;return Xi(this,function(t){switch(t.label){case 0:return[4,FE(e,iw(gT(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=U0(i.readTime);if(0<=n.snapshotVersion.compareTo(e))return r.Ke.saveNamedQuery(t,i);e=n.withResumeToken(xb.EMPTY_BYTE_STRING,e);return r.Fn=r.Fn.insert(e.targetId,e),r.qe.updateTargetData(t,e).next(function(){return r.qe.removeMatchingKeysForTargetId(t,n.targetId)}).next(function(){return r.qe.addMatchingKeys(t,o,n.targetId)}).next(function(){return r.Ke.saveNamedQuery(t,i)})})]}})})}(this.localStore,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new IE(Object.assign({},this.progress),e))]}})})},B1);function B1(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=z1(t)}function K1(t){this.R=t}function W1(t,e){this.payload=t,this.byteLength=e}function H1(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function z1(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var G1=function(t){this.key=t},Q1=function(t){this.key=t},Y1=(Object.defineProperty(tk.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),tk.prototype._o=function(t,e){var s=this,a=e?e.mo:new N1,u=(e||this).fo,c=(e||this).mutatedKeys,h=u,l=!1,f=J_(this.query)&&u.size===this.query.limit?u.last():null,p=Z_(this.query)&&u.size===this.query.limit?u.first():null;if(t.inorderTraversal(function(t,e){var n=u.get(t),r=cw(s.query,e)?e:null,i=!!n&&s.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||s.mutatedKeys.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data.isEqual(r.data)?i!==o&&(a.track({type:3,doc:r}),e=!0):s.yo(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.lo(r,f)||p&&s.lo(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),J_(this.query)||Z_(this.query))for(;h.size>this.query.limit;){var n=J_(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{fo:h,mo:a,Nn:l,mutatedKeys:c}},tk.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},tk.prototype.applyChanges=function(t,e,n){var o=this,r=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var i=t.mo.jr();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return db()}}var r,i}),this.po(n);var s=e?this.Eo():[],n=0===this.ho.size&&this.current?1:0,e=n!==this.ao;return this.ao=n,0!==i.length||e?{snapshot:new R1(this.query,t.fo,r,i,t.mutatedKeys,0==n,e,!1),To:s}:{To:s}},tk.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new N1,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},tk.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},tk.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},tk.prototype.Eo=function(){var e=this;if(!this.current)return[];var n=this.ho;this.ho=b0(),this.fo.forEach(function(t){e.Io(t.key)&&(e.ho=e.ho.add(t.key))});var r=[];return n.forEach(function(t){e.ho.has(t)||r.push(new Q1(t))}),this.ho.forEach(function(t){n.has(t)||r.push(new G1(t))}),r},tk.prototype.Ao=function(t){this.uo=t.Bn,this.ho=b0();t=this._o(t.documents);return this.applyChanges(t,!0)},tk.prototype.Ro=function(){return R1.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},tk),X1=function(t,e,n){this.query=t,this.targetId=e,this.view=n},$1=function(t){this.key=t,this.bo=!1},J1=(Object.defineProperty(Z1.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),Z1);function Z1(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new rE(aw,sw),this.Vo=new Map,this.So=new Set,this.Do=new i0(Yb.comparator),this.Co=new Map,this.No=new zE,this.xo={},this.Fo=new Map,this.ko=jT.Yt(),this.onlineState="Unknown",this.$o=void 0}function tk(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=b0(),this.mutatedKeys=b0(),this.lo=hw(t),this.fo=new A1(this.lo)}function ek(i,o,s,a){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return i.Oo=function(t,e,n){return function(r,i,o,s){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return(e=i.view._o(o)).Nn?[4,UE(r.localStore,i.query,!1).then(function(t){t=t.documents;return i.view._o(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.targetChanges.get(i.targetId),n=i.view.applyChanges(e,r.isPrimaryClient,n),[2,(lk(r,i.targetId,n.To),n.snapshot)]}})})}(i,t,e,n)},[4,UE(i.localStore,o,!0)];case 1:return n=t.sent(),r=new Y1(o,n.Bn),e=r._o(n.documents),n=I0.createSynthesizedTargetChangeForCurrentChange(s,a&&"Offline"!==i.onlineState),n=r.applyChanges(e,i.isPrimaryClient,n),lk(i,s,n.To),r=new X1(o,s,r),[2,(i.Po.set(o,r),i.Vo.has(s)?i.Vo.get(s).push(o):i.Vo.set(s,[o]),n.snapshot)]}})})}function nk(f,p,d){return Yi(this,void 0,void 0,function(){var s,l;return Xi(this,function(t){switch(t.label){case 0:l=_k(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=l.localStore,a=p,c=i,h=wb.now(),o=a.reduce(function(t,e){return t.add(e.key)},b0()),c.persistence.runTransaction("Locally write mutations","readwrite",function(s){return c.Mn.pn(s,o).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),s=dw(o.transform,s||null);null!=s&&(n=null==n?h_.empty():n).set(o.field,s)}return n||null}(i,u.get(i.key));null!=o&&e.push(new Bw(i.key,o,function s(t){var a=[];return kb(t.fields,function(t,e){var n=new Ob([t]);if(u_(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Db(a)}(o.value.mapValue),Dw.exists(!0)))}return c._n.addMutationBatch(s,h,e,a)})}).then(function(t){return t.applyToLocalDocumentSet(u),{batchId:t.batchId,changes:u}}))];case 2:return s=t.sent(),l.sharedClientState.addPendingMutation(s.batchId),e=l,n=s.batchId,r=d,i=(i=(i=e.xo[e.currentUser.toKey()])||new i0(mb)).insert(n,r),e.xo[e.currentUser.toKey()]=i,[4,pk(l,s.changes)];case 3:return t.sent(),[4,m1(l.remoteStore)];case 4:return t.sent(),[3,6];case 5:return l=t.sent(),l=k1(l,"Failed to persist write"),d.reject(l),[3,6];case 6:return[2]}var e,n,r,i,a,u,c,h,o})})}function rk(r,i){return Yi(this,void 0,void 0,function(){var n,e;return Xi(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,LE(n.localStore,i)];case 2:return e=t.sent(),i.targetChanges.forEach(function(t,e){e=n.Co.get(e);e&&(gb(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?gb(e.bo):0<t.removedDocuments.size&&(gb(e.bo),e.bo=!1))}),[4,pk(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,HT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function ik(t,n,e){var r,t=t;(t.isPrimaryClient&&0===e||!t.isPrimaryClient&&1===e)&&(r=[],t.Po.forEach(function(t,e){e=e.view.zr(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].zr(i)&&(o=!0)}),o&&F1(t)}(t.eventManager,n),r.length&&t.vo._r(r),t.onlineState=n,t.isPrimaryClient&&t.sharedClientState.setOnlineState(n))}function ok(s,a,u){return Yi(this,void 0,void 0,function(){var n,o;return Xi(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.localStore,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i._n.lookupMutationBatch(e,r).next(function(t){return gb(null!==t),n=t.keys(),i._n.removeMutationBatch(e,t)}).next(function(){return i._n.performConsistencyCheck(e)}).next(function(){return i.Mn.pn(e,n)})}))];case 2:return o=t.sent(),uk(n,a,u),ak(n,a),n.sharedClientState.updateMutationState(a,"rejected",u),[4,pk(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,HT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function sk(o,s){return Yi(this,void 0,void 0,function(){var n,r,i;return Xi(this,function(t){switch(t.label){case 0:p1((n=o).remoteStore)||hb("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Fo.get(r)||[]).push(s),n.Fo.set(r,i),[3,4]);case 3:return i=t.sent(),i=k1(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function ak(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function uk(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function ck(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.Vo.get(t);r<i.length;r++){var o=i[r];e.Po.delete(o),n&&e.vo.Mo(o,n)}e.Vo.delete(t),e.isPrimaryClient&&e.No.Zn(t).forEach(function(t){e.No.containsKey(t)||hk(e,t)})}function hk(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(u1(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),fk(t))}function lk(t,e,n){for(var r,i,o,s=0,a=n;s<a.length;s++){var u=a[s];u instanceof G1?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(hb("SyncEngine","New document in limbo: "+o),r.So.add(i),fk(r))):u instanceof Q1?(hb("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||hk(t,u.key)):db()}}function fk(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Yb(Rb.fromString(e)),e=t.ko.next();t.Co.set(e,new $1(n)),t.Do=t.Do.insert(n,e),a1(t.remoteStore,new eT(iw($_(n.path)),e,2,nb.o))}}function pk(e,s,a){return Yi(this,void 0,void 0,function(){var n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Po.isEmpty()?[3,3]:(n.Po.forEach(function(t,e){o.push(n.Oo(e,s,a).then(function(t){t&&(n.isPrimaryClient&&n.sharedClientState.updateQueryState(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=EE.Pn(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.vo._r(r),[4,function(u,c){return Yi(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return Xi(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return OI.forEach(c,function(e){return OI.forEach(e.bn,function(t){return r.persistence.referenceDelegate.addReference(n,e.targetId,t)}).next(function(){return OI.forEach(e.vn,function(t){return r.persistence.referenceDelegate.removeReference(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!KI(e=t.sent()))throw e;return hb("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.Fn.get(o),a=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(a),r.Fn=r.Fn.insert(o,a));return[2]}})})}(n.localStore,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function dk(i,o){return Yi(this,void 0,void 0,function(){var n,r;return Xi(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(hb("SyncEngine","User change. New user:",o.toKey()),[4,OE(n.localStore,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Fo.forEach(function(t){t.forEach(function(t){t.reject(new sb(ob.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Fo.clear(),n.sharedClientState.handleUserChange(o,r.removedBatchIds,r.addedBatchIds),[4,pk(n,r.Ln)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function gk(a,u,c,h){return Yi(this,void 0,void 0,function(){var o,s;return Xi(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).localStore,n=u,i=(r=e)._n,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.jt(e,n).next(function(t){return t?r.Mn.pn(e,t):OI.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,m1(o.remoteStore)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(uk(o,u,h||null),ak(o,u),o.localStore._n.Gt(u)):db(),t.label=4;case 4:return[4,pk(o,s)];case 5:return t.sent(),[3,7];case 6:hb("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function vk(h,l){return Yi(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Xi(this,function(t){switch(t.label){case 0:return bk(r=h),_k(r),!0!==l||!0===r.$o?[3,3]:(e=r.sharedClientState.getAllActiveQueryTargets(),[4,yk(r,e.toArray())]);case 1:return i=t.sent(),r.$o=!0,[4,w1(r.remoteStore,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],a1(r.remoteStore,a);return[3,7];case 3:return!1!==l||!1===r.$o?[3,7]:(u=[],c=Promise.resolve(),r.Vo.forEach(function(t,e){r.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then(function(){return ck(r,e),jE(r.localStore,e,!0)}),u1(r.remoteStore,e)}),[4,c]);case 4:return t.sent(),[4,yk(r,u)];case 5:return t.sent(),(n=r).Co.forEach(function(t,e){u1(n.remoteStore,e)}),n.No.ts(),n.Co=new Map,n.Do=new i0(Yb.comparator),r.$o=!1,[4,w1(r.remoteStore,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function yk(p,d){return Yi(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return Xi(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Vo.get(s))&&0!==u.length?[4,FE(e.localStore,iw(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Po.get(l),[4,function(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,UE((e=r).localStore,i.query,!0)];case 1:return n=t.sent(),n=i.view.Ao(n),[2,(e.isPrimaryClient&&lk(e,i.targetId,n.To),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,qE(e.localStore,s)];case 8:return f=t.sent(),[4,FE(e.localStore,f)];case 9:return a=t.sent(),[4,ek(e,mk(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.vo._r(r),n)]}})})}function mk(t){return X_(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bk(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=rk.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return b0().add(t.key);var r=b0();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Po.get(s),r=r.unionWith(s.view.wo);return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(o,s,a){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:return(e=o).sharedClientState.updateQueryState(s,"rejected",a),i=e.Co.get(s),(n=i&&i.key)?(r=(r=new i0(Yb.comparator)).insert(n,f_.newNoDocument(n,Ib.min())),i=b0().add(n),i=new w0(Ib.min(),new Map,new l0(mb),r,i),[4,rk(e,i)]):[3,2];case 1:return t.sent(),e.Do=e.Do.remove(n),e.Co.delete(s),fk(e),[3,4];case 2:return[4,jE(e.localStore,s,!1).then(function(){return ck(e,s,a)}).catch(HT)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&F1(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function _k(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(i,o){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,DE(e.localStore,o)];case 2:return r=t.sent(),uk(e,n,null),ak(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),[4,pk(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,HT(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ok.bind(null,t),t}function wk(t,e,n){var r=t;!function(f,p,d){return Yi(this,void 0,void 0,function(){var a,u,c,h,l;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return a=t.sent(),[4,(r=f.localStore,o=r,s=U0((i=a).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.Ke.getBundleMetadata(t,i.id)}).then(function(t){return!!t&&0<=t.createTime.compareTo(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d._completeWith({taskState:"Success",documentsLoaded:a.totalDocuments,bytesLoaded:a.totalBytes,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}))];case 4:return d._updateProgress(z1(a)),u=new V1(a,f.localStore,p.R),[4,p.Lo()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.oo(c)]:[3,10];case 7:return(h=t.sent())&&d._updateProgress(h),[4,p.Lo()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,pk(f,l.wn,void 0)];case 12:return t.sent(),[4,(r=f.localStore,e=a,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.Ke.saveBundleMetadata(t,e)}))];case 13:return t.sent(),d._completeWith(l.progress),[3,15];case 14:return fb("SyncEngine","Loading bundle failed with "+(l=t.sent())),d._failWith(l),[3,15];case 15:return[2]}var e,n,r,i,o,s})})}(r,e,n).then(function(){r.sharedClientState.notifyBundleLoaded()})}var Ik,Tk,Ek=(Pk.prototype.initialize=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.R=KS(e.databaseInfo.databaseId),this.sharedClientState=this.Bo(e),this.persistence=this.qo(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.Uo(e),this.localStore=this.Ko(e),[2]}})})},Pk.prototype.Uo=function(t){return null},Pk.prototype.Ko=function(t){return PE(this.persistence,new SE,t.initialUser,this.R)},Pk.prototype.qo=function(t){return new JE(tS.bs,this.R)},Pk.prototype.Bo=function(t){return new TS},Pk.prototype.terminate=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},Pk),Sk=(Gi(Rk,Tk=Ek),Rk.prototype.initialize=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,Tk.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,BE(this.localStore)];case 2:return t.sent(),[4,this.Qo.initialize(this,e)];case 3:return t.sent(),[4,_k(this.Qo.syncEngine)];case 4:return t.sent(),[4,m1(this.Qo.remoteStore)];case 5:return t.sent(),[2]}})})},Rk.prototype.Ko=function(t){return PE(this.persistence,new SE,t.initialUser,this.R)},Rk.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new QT(e,t.asyncQueue)},Rk.prototype.qo=function(t){var e=wE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?AT.withCacheSize(this.cacheSizeBytes):AT.DEFAULT;return new yE(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,VS(),BS(),this.R,this.sharedClientState,!!this.forceOwnership)},Rk.prototype.Bo=function(t){return new TS},Rk),kk=(Gi(Nk,Ik=Sk),Nk.prototype.initialize=function(r){return Yi(this,void 0,void 0,function(){var e,n=this;return Xi(this,function(t){switch(t.label){case 0:return[4,Ik.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Qo.syncEngine,this.sharedClientState instanceof IS?(this.sharedClientState.syncEngine={ui:gk.bind(null,e),ai:function(i,o,s,a){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return(e=i).$o?(hb("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Vo.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,VE(e.localStore)];case 3:return n=t.sent(),r=w0.createSynthesizedRemoteEventForCurrentChange(o,"current"===s),[4,pk(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,jE(e.localStore,o,!0)];case 6:return t.sent(),ck(e,o,a),[3,8];case 7:db(),t.label=8;case 8:return[2]}})})}.bind(null,e),hi:function(c,h,l){return Yi(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return Xi(this,function(t){switch(t.label){case 0:if(!(n=bk(c)).$o)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Vo.has(r)?(hb("SyncEngine","Adding an already active target "+r),[3,5]):[4,qE(n.localStore,r)]):[3,6];case 2:return i=t.sent(),[4,FE(n.localStore,i)];case 3:return o=t.sent(),[4,ek(n,mk(i),o.targetId,!1)];case 4:t.sent(),a1(n.remoteStore,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Xi(this,function(t){switch(t.label){case 0:return n.Vo.has(e)?[4,jE(n.localStore,e,!1).then(function(){u1(n.remoteStore,e),ck(n,e)}).catch(HT)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){return[2,VE((e=n).localStore).then(function(t){return pk(e,t)})]})})}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.He(function(e){return Yi(n,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,vk(this.Qo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},Nk.prototype.Bo=function(t){var e=VS();if(!IS.yt(e))throw new sb(ob.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wE(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new IS(e,t.asyncQueue,n,t.clientId,t.initialUser)},Nk),Ck=(Ak.prototype.initialize=function(n,r){return Yi(this,void 0,void 0,function(){var e=this;return Xi(this,function(t){switch(t.label){case 0:return this.localStore?[3,2]:(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return ik(e.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dk.bind(null,this.syncEngine),[4,w1(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ak.prototype.createEventManager=function(t){return new C1},Ak.prototype.createDatastore=function(t){var e=KS(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new AS(n));return t=t.credentials,new $S(t,n,e)},Ak.prototype.createRemoteStore=function(t){var e=this,n=this.localStore,r=this.datastore,i=t.asyncQueue,o=function(t){return ik(e.syncEngine,t,0)},t=new(SS.yt()?SS:ES);return new WS(n,r,i,o,t)},Ak.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){o=new J1(t,e,n,r,i,o);return s&&(o.$o=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},Ak.prototype.terminate=function(){return function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=n,hb("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,s1(e)];case 1:return t.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},Ak);function Ak(){}function Nk(t,e){var n=this;return(n=Ik.call(this,t,e,!1)||this).Qo=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function Rk(t,e,n){var r=this;return(r=Tk.call(this)||this).Qo=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function Pk(){this.synchronizeTabs=!1}function Ok(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return[2]})})},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Dk=(Bk.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},Bk.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},Bk.prototype.Wo=function(){this.muted=!0},Bk.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Bk),xk=(Vk.prototype.close=function(){return this.Go.cancel()},Vk.prototype.getMetadata=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return[2,this.metadata.promise]})})},Vk.prototype.Lo=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},Vk.prototype.Ho=function(){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return[4,this.Jo()];case 1:return null===(e=t.sent())?[2,null]:(r=this.zo.decode(e),n=Number(r),isNaN(n)&&this.Yo("length string ("+r+") is not valid number"),[4,this.Xo(n)]);case 2:return r=t.sent(),[2,new U1(JSON.parse(r),e.length+n)]}})})},Vk.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},Vk.prototype.Jo=function(){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},Vk.prototype.Xo=function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.tc()]:[3,3];case 1:t.sent()&&this.Yo("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},Vk.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},Vk.prototype.tc=function(){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,this.Go.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},Vk),Lk=(qk.prototype.lookup=function(r){return Yi(this,void 0,void 0,function(){var e,n=this;return Xi(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new sb(ob.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return Yi(this,void 0,void 0,function(){var n,e,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return e=z0((n=s).R)+"/documents",r={documents:a.map(function(t){return B0(n.R,t)})},[4,n.$i("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.R,"found"in(t=t)?function(t,e){gb(!!e.found),e.found.name,e.found.updateTime;var n=K0(t,e.found.name),t=U0(e.found.updateTime),e=new h_({mapValue:{fields:e.found.fields}});return f_.newFoundDocument(n,t,e)}(e,t):"missing"in t?function(t,e){gb(!!e.missing),gb(!!e.readTime);t=K0(t,e.missing),e=U0(e.readTime);return f_.newNoDocument(t,e)}(e,t):db());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());gb(!!t),o.push(t)}),o)]}})})}(this.datastore,r)];case 1:return[2,((e=t.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},qk.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},qk.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},qk.prototype.delete=function(t){this.write(new Jw(t,this.precondition(t))),this.writtenDocs.add(t.toString())},qk.prototype.commit=function(){return Yi(this,void 0,void 0,function(){var e,n=this;return Xi(this,function(t){switch(t.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Yb.fromPath(e);n.mutations.push(new Zw(e,n.precondition(e)))}),[4,function(i,o){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return n=z0((e=i).R)+"/documents",r={writes:o.map(function(t){return X0(e.R,t)})},[4,e.Ni("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return t.sent(),this.committed=!0,[2]}})})},qk.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw db();e=Ib.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new sb(ob.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},qk.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Dw.updateTime(e):Dw.none()},qk.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return Dw.exists(!0);if(e.isEqual(Ib.min()))throw new sb(ob.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dw.updateTime(e)},qk.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},qk.prototype.ensureCommitNotCalled=function(){},qk),Mk=(Uk.prototype.run=function(){--this.ec,this.nc()},Uk.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Yi(t,void 0,void 0,function(){var e,n,r=this;return Xi(this,function(t){return e=new Lk(this.datastore),(n=this.sc(e))&&n.then(function(t){r.asyncQueue.enqueueAndForget(function(){return e.commit().then(function(){r.deferred.resolve(t)}).catch(function(t){r.ic(t)})})}).catch(function(t){r.ic(t)}),[2]})})})},Uk.prototype.sc=function(t){try{var e=this.updateFunction(t);return!zb(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},Uk.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},Uk.prototype.rc=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!n0(t)},Uk),Fk=(jk.prototype.getConfiguration=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]})})},jk.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},jk.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new sb(ob.FAILED_PRECONDITION,"The client has already been terminated.")},jk.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var n=new PI;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.removeChangeListener(),n.resolve(),[3,6];case 5:return e=t.sent(),e=k1(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},jk);function jk(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=eS.UNAUTHENTICATED,this.clientId=vb.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,function(e){return Yi(r,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return hb("FirestoreClient","Received user=",e.uid),[4,this.credentialListener(e)];case 1:return t.sent(),this.user=e,[2]}})})})}function Uk(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new QS(this.asyncQueue,"transaction_retry")}function qk(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function Vk(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new PI,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function Bk(t){this.observer=t,this.muted=!1}function Kk(i,o){return Yi(this,void 0,void 0,function(){var e,n,r=this;return Xi(this,function(t){switch(t.label){case 0:return i.asyncQueue.verifyOperationInProgress(),hb("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.initialUser,i.setCredentialChangeListener(function(e){return Yi(r,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return n.isEqual(e)?[3,2]:[4,OE(o.localStore,e)];case 1:t.sent(),n=e,t.label=2;case 2:return[2]}})})}),o.persistence.setDatabaseDeletedListener(function(){return i.terminate()}),i.offlineComponents=o,[2]}})})}function Wk(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return r.asyncQueue.verifyOperationInProgress(),[4,Hk(r)];case 1:return e=t.sent(),hb("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.setCredentialChangeListener(function(t){return function(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return(e=r).asyncQueue.verifyOperationInProgress(),hb("RemoteStore","RemoteStore received new credentials"),n=p1(e),e.Or.add(3),[4,s1(e)];case 1:return t.sent(),n&&e.Br.set("Unknown"),[4,e.remoteSyncer.handleCredentialChange(i)];case 2:return t.sent(),e.Or.delete(3),[4,o1(e)];case 3:return t.sent(),[2]}})})}(i.remoteStore,t)}),r.onlineComponents=i,[2]}})})}function Hk(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(hb("FirestoreClient","Using default OfflineComponentProvider"),[4,Kk(e,new Ek)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}})})}function zk(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(hb("FirestoreClient","Using default OnlineComponentProvider"),[4,Wk(e,new Ck)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}})})}function Gk(t){return Hk(t).then(function(t){return t.persistence})}function Qk(t){return Hk(t).then(function(t){return t.localStore})}function Yk(t){return zk(t).then(function(t){return t.remoteStore})}function Xk(t){return zk(t).then(function(t){return t.syncEngine})}function $k(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,zk(r)];case 1:return e=t.sent(),[2,((n=e.eventManager).onListen=function(s,a){return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return e=bk(s),(o=e.Po.get(a))?(n=o.targetId,e.sharedClientState.addLocalQueryTarget(n),r=o.view.Ro(),[3,4]):[3,1];case 1:return[4,FE(e.localStore,iw(a))];case 2:return i=t.sent(),o=e.sharedClientState.addLocalQueryTarget(i.targetId),n=i.targetId,[4,ek(e,a,n,"current"===o)];case 3:r=t.sent(),e.isPrimaryClient&&a1(e.remoteStore,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.syncEngine),n.onUnlisten=function(i,o){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return n=(e=i).Po.get(o),1<(r=e.Vo.get(n.targetId)).length?[2,(e.Vo.set(n.targetId,r.filter(function(t){return!sw(t,o)})),void e.Po.delete(o))]:e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)?[3,2]:[4,jE(e.localStore,n.targetId,!1).then(function(){e.sharedClientState.clearQueryState(n.targetId),u1(e.remoteStore,n.targetId),ck(e,n.targetId)}).catch(HT)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return ck(e,n.targetId),[4,jE(e.localStore,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.syncEngine),n)]}})})}function Jk(n,r,i){var t=this;void 0===i&&(i={});var o=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new Dk({next:function(t){r.enqueueAndForget(function(){return M1(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new sb(ob.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new sb(ob.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new j1($_(i.path),t,{includeMetadataChanges:!0,so:!0});return L1(n,a)},[4,$k(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function Zk(n,r,i){var t=this;void 0===i&&(i={});var o=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new Dk({next:function(t){n.enqueueAndForget(function(){return M1(e,s)}),t.fromCache&&"server"===r.source?i.reject(new sb(ob.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new j1(t,o,{includeMetadataChanges:!0,so:!0});return L1(e,s)},[4,$k(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.asyncQueue,r,i,o])]}})})}),o.promise}function tC(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var eC=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},nC=(Object.defineProperty(dC.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),dC.prototype.isEqual=function(t){return t instanceof dC&&t.projectId===this.projectId&&t.database===this.database},dC),rC=new Map,iC=(pC.prototype.getToken=function(){return Promise.resolve(null)},pC.prototype.invalidateToken=function(){},pC.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable(function(){return e(eS.UNAUTHENTICATED)})},pC.prototype.removeChangeListener=function(){this.changeListener=null},pC),oC=(fC.prototype.getToken=function(){return Promise.resolve(this.token)},fC.prototype.invalidateToken=function(){},fC.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable(function(){return e(n.token.user)})},fC.prototype.removeChangeListener=function(){this.changeListener=null},fC),sC=(lC.prototype.getToken=function(){var e=this,n=this.cc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.cc!==n?(hb("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(gb("string"==typeof t.accessToken),new tC(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},lC.prototype.invalidateToken=function(){this.forceRefresh=!0},lC.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable(function(){return Yi(n,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}})})})},lC.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},lC.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return gb(null===t||"string"==typeof t),new eS(t)},lC),aC=(Object.defineProperty(hC.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),hC),uC=(cC.prototype.getToken=function(){return Promise.resolve(new aC(this.hc,this.lc,this.fc))},cC.prototype.setChangeListener=function(t,e){t.enqueueRetryable(function(){return e(eS.FIRST_PARTY)})},cC.prototype.removeChangeListener=function(){},cC.prototype.invalidateToken=function(){},cC);function cC(t,e,n){this.hc=t,this.lc=e,this.fc=n}function hC(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=eS.FIRST_PARTY}function lC(e){var n=this;this.currentUser=eS.UNAUTHENTICATED,this.oc=new PI,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){n.cc++,n.currentUser=n.ac(),n.oc.resolve(),n.changeListener&&n.asyncQueue.enqueueRetryable(function(){return n.changeListener(n.currentUser)})};function r(t){hb("FirebaseCredentialsProvider","Auth detected"),n.auth=t,n.auth.addAuthTokenListener(n.uc)}e.onInit(r),setTimeout(function(){var t;n.auth||((t=e.getImmediate({optional:!0}))?r(t):(hb("FirebaseCredentialsProvider","Auth not yet detected"),n.oc.resolve()))},0)}function fC(t){this.token=t,this.changeListener=null}function pC(){this.changeListener=null}function dC(t,e){this.projectId=t,this.database=e||"(default)"}function gC(t,e,n){if(!n)throw new sb(ob.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function vC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new sb(ob.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function yC(t,e,n,r){if(!0===e&&!0===r)throw new sb(ob.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function mC(t){if(!Yb.isDocumentKey(t))throw new sb(ob.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function bC(t){if(Yb.isDocumentKey(t))throw new sb(ob.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function _C(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":db();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function wC(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new sb(ob.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=_C(t);throw new sb(ob.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function IC(t,e){if(e<=0)throw new sb(ob.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var TC,EC=(DC.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},DC),SC=(Object.defineProperty(OC.prototype,"app",{get:function(){if(!this._app)throw new sb(ob.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(OC.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(OC.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),OC.prototype._setSettings=function(t){if(this._settingsFrozen)throw new sb(ob.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new EC(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new iC;switch(t.type){case"gapi":var e=t.client;return gb(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new uC(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new sb(ob.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},OC.prototype._getSettings=function(){return this._settings},OC.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},OC.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},OC.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},OC.prototype._terminate=function(){return(t=rC.get(this))&&(hb("ComponentProvider","Removing Datastore"),rC.delete(this),t.terminate()),Promise.resolve();var t},OC),kC=(Object.defineProperty(PC.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(PC.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(PC.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(PC.prototype,"parent",{get:function(){return new AC(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),PC.prototype.withConverter=function(t){return new PC(this.firestore,t,this._key)},PC),CC=(RC.prototype.withConverter=function(t){return new RC(this.firestore,t,this._query)},RC),AC=(Gi(NC,TC=CC),Object.defineProperty(NC.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(NC.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(NC.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new kC(this.firestore,null,new Yb(t))},enumerable:!1,configurable:!0}),NC.prototype.withConverter=function(t){return new NC(this.firestore,t,this._path)},NC);function NC(t,e,n){var r=this;return(r=TC.call(this,t,e,$_(n))||this)._path=n,r.type="collection",r}function RC(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}function PC(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}function OC(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new EC({}),this._settingsFrozen=!1,t instanceof nC?(this._databaseId=t,this._credentials=new iC):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new sb(ob.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nC(t.options.projectId)}(t),this._credentials=new sC(e))}function DC(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new sb(ob.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new sb(ob.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,yC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function xC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Jo(t),gC("collection","path",e),t instanceof SC)return bC(n=Rb.fromString.apply(Rb,Zi([e],r))),new AC(t,null,n);if(!(t instanceof kC||t instanceof AC))throw new sb(ob.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bC(n=Rb.fromString.apply(Rb,Zi([t.path],r)).child(Rb.fromString(e))),new AC(t.firestore,null,n)}function LC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Jo(t),gC("doc","path",e=1===arguments.length?vb.u():e),t instanceof SC)return mC(n=Rb.fromString.apply(Rb,Zi([e],r))),new kC(t,null,new Yb(n));if(!(t instanceof kC||t instanceof AC))throw new sb(ob.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return mC(n=t._path.child(Rb.fromString.apply(Rb,Zi([e],r)))),new kC(t.firestore,t instanceof AC?t.converter:null,new Yb(n))}function MC(t,e){return t=Jo(t),e=Jo(e),(t instanceof kC||t instanceof AC)&&(e instanceof kC||e instanceof AC)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function FC(t,e){return t=Jo(t),e=Jo(e),t instanceof CC&&e instanceof CC&&t.firestore===e.firestore&&sw(t._query,e._query)&&t.converter===e.converter}var jC=(Object.defineProperty(UC.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),UC.prototype.enqueueAndForget=function(t){this.enqueue(t)},UC.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},UC.prototype.enterRestrictedMode=function(t){this._c||(this._c=!0,this.Ec=t||!1,(t=BS())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ic))},UC.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise(function(){});var n=new PI;return this.Rc(function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})},UC.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.wc.push(t),e.bc()})},UC.prototype.bc=function(){return Yi(this,void 0,void 0,function(){var e,n=this;return Xi(this,function(t){switch(t.label){case 0:if(0===this.wc.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return t.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!KI(e=t.sent()))throw e;return hb("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.wc.length&&this.Zi.ji(function(){return n.bc()}),t.label=5;case 5:return[2]}})})},UC.prototype.Rc=function(t){var r=this,e=this.dc.then(function(){return r.gc=!0,t().catch(function(t){throw r.yc=t,r.gc=!1,lb("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",n=e.stack?e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack:n)),t;var e,n}).then(function(t){return r.gc=!1,t})});return this.dc=e},UC.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),-1<this.Tc.indexOf(t)&&(e=0);n=E1.createAndSchedule(this,t,e,n,function(t){return r.vc(t)});return this.mc.push(n),n},UC.prototype.Ac=function(){this.yc&&db()},UC.prototype.verifyOperationInProgress=function(){},UC.prototype.Pc=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,e=this.dc];case 1:t.sent(),t.label=2;case 2:if(e!==this.dc)return[3,0];t.label=3;case 3:return[2]}})})},UC.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},UC.prototype.Sc=function(r){var i=this;return this.Pc().then(function(){i.mc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var t=0,e=i.mc;t<e.length;t++){var n=e[t];if(n.skipDelay(),"all"!==r&&n.timerId===r)break}return i.Pc()})},UC.prototype.Dc=function(t){this.Tc.push(t)},UC.prototype.vc=function(t){t=this.mc.indexOf(t);this.mc.splice(t,1)},UC);function UC(){var e=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new QS(this,"async_queue_retry"),this.Ic=function(){var t=BS();t&&hb("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Zi.Gi()};var t=BS();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Ic)}function qC(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var VC,BC=(HC.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},HC.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},HC.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},HC.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},HC.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},HC.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},HC),KC=(Gi(WC,VC=SC),WC.prototype._terminate=function(){return this._firestoreClient||GC(this),this._firestoreClient.terminate()},WC);function WC(t,e){var n=this;return(n=VC.call(this,t,e)||this).type="firestore",n._queue=new jC,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function HC(){this._progressObserver={},this._taskCompletionResolver=new PI,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function zC(t){return t._firestoreClient||GC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function GC(t){var e,n,r,i=t._freezeSettings(),i=(e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,new eC(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,i.useFetchStreams));t._firestoreClient=new Fk(t._credentials,t._queue,i)}function QC(n,r,i){var t=this,o=new PI;return n.asyncQueue.enqueue(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,Kk(n,i)];case 1:return t.sent(),[4,Wk(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(e=t.sent()).name?e.code===ob.FAILED_PRECONDITION||e.code===ob.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function YC(t){if(t._initialized||t._terminated)throw new sb(ob.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var XC=(aA.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},aA),$C=(sA.fromBase64String=function(t){try{return new sA(xb.fromBase64String(t))}catch(t){throw new sb(ob.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},sA.fromUint8Array=function(t){return new sA(xb.fromUint8Array(t))},sA.prototype.toBase64=function(){return this._byteString.toBase64()},sA.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},sA.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},sA.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},sA),JC=function(t){this._methodName=t},ZC=(Object.defineProperty(oA.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(oA.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),oA.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},oA.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},oA.prototype._compareTo=function(t){return mb(this._lat,t._lat)||mb(this._long,t._long)},oA),tA=/^__.*__$/,eA=(iA.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Bw(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vw(t,this.data,e,this.fieldTransforms)},iA),nA=(rA.prototype.toMutation=function(t,e){return new Bw(t,this.data,this.fieldMask,e,this.fieldTransforms)},rA);function rA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function iA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function oA(t,e){if(!isFinite(t)||t<-90||90<t)throw new sb(ob.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new sb(ob.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function sA(t){this._byteString=t}function aA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new sb(ob.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ob(t)}function uA(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw db()}}var cA=(Object.defineProperty(fA.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(fA.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),fA.prototype.xc=function(t){return new fA(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},fA.prototype.Fc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.xc({path:e,kc:!1});return e.$c(t),e},fA.prototype.Oc=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.xc({path:t,kc:!1});return t.Cc(),t},fA.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},fA.prototype.Lc=function(t){return VA(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},fA.prototype.contains=function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})},fA.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},fA.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(uA(this.Nc)&&tA.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},fA),hA=(lA.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new cA({Nc:t,methodName:e,qc:n,path:Ob.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},lA);function lA(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||KS(t)}function fA(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function pA(t){var e=t._freezeSettings(),n=KS(t._databaseId);return new hA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dA(t,e,n,r,i,o){var s=t.Uc((o=void 0===o?{}:o).merge||o.mergeFields?2:0,e,n,i);FA("Data must be an object, but it was:",s,r);var a,u,r=LA(r,s);if(o.merge)a=new Db(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=jA(e,l[h],n);if(!s.contains(f))throw new sb(ob.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");BA(c,f)||c.push(f)}a=new Db(c),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new eA(new h_(r),a,u)}var gA,vA=(Gi(yA,gA=JC),yA.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},yA.prototype.isEqual=function(t){return t instanceof yA},yA);function yA(){return null!==gA&&gA.apply(this,arguments)||this}function mA(t,e,n){return new cA({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var bA,_A,wA,IA,TA=(Gi(RA,IA=JC),RA.prototype._toFieldTransform=function(t){return new Ow(t.path,new yw)},RA.prototype.isEqual=function(t){return t instanceof RA},RA),EA=(Gi(NA,wA=JC),NA.prototype._toFieldTransform=function(t){var e=mA(this,t,!0),n=this.Kc.map(function(t){return xA(t,e)}),n=new mw(n);return new Ow(t.path,n)},NA.prototype.isEqual=function(t){return this===t},NA),SA=(Gi(AA,_A=JC),AA.prototype._toFieldTransform=function(t){var e=mA(this,t,!0),n=this.Kc.map(function(t){return xA(t,e)}),n=new Tw(n);return new Ow(t.path,n)},AA.prototype.isEqual=function(t){return this===t},AA),kA=(Gi(CA,bA=JC),CA.prototype._toFieldTransform=function(t){var e=new Cw(t.R,pw(t.R,this.Qc));return new Ow(t.path,e)},CA.prototype.isEqual=function(t){return this===t},CA);function CA(t,e){var n=this;return(n=bA.call(this,t)||this).Qc=e,n}function AA(t,e){var n=this;return(n=_A.call(this,t)||this).Kc=e,n}function NA(t,e){var n=this;return(n=wA.call(this,t)||this).Kc=e,n}function RA(){return null!==IA&&IA.apply(this,arguments)||this}function PA(t,r,i,e){var o=t.Uc(1,r,i);FA("Data must be an object, but it was:",o,e);var s=[],a=h_.empty();kb(e,function(t,e){var n=qA(r,t,i);e=Jo(e);t=o.Oc(n);e instanceof vA?s.push(n):null!=(t=xA(e,t))&&(s.push(n),a.set(n,t))});e=new Db(s);return new nA(a,e,o.fieldTransforms)}function OA(t,e,n,r,i,o){var s=t.Uc(1,e,n),a=[jA(e,r,n)],u=[i];if(o.length%2!=0)throw new sb(ob.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(jA(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=h_.empty(),g=a.length-1;0<=g;--g)BA(p,a[g])||(h=a[g],l=Jo(l=u[g]),f=s.Oc(h),l instanceof vA?p.push(h):null!=(f=xA(l,f))&&(p.push(h),d.set(h,f)));i=new Db(p);return new nA(d,i,s.fieldTransforms)}function DA(t,e,n,r){return xA(n,t.Uc((r=void 0===r?!1:r)?4:3,e))}function xA(s,t){if(MA(s=Jo(s)))return FA("Unsupported field value:",t,s),LA(s,t);if(s instanceof JC)return function(t,e){if(!uA(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");t=t._toFieldTransform(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(void 0===s&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.kc&&4!==t.Nc)throw t.Lc("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=xA(i[r],t.Mc(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===(t=Jo(s)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return pw(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=wb.fromDate(t);return{timestampValue:F0(e.R,n)}}if(t instanceof wb)return n=new wb(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:F0(e.R,n)};if(t instanceof ZC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $C)return{bytesValue:j0(e.R,t._byteString)};if(t instanceof kC){var n=e.databaseId,r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:q0(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+_C(t))}(0,t)}function LA(t,n){var r={};return Cb(t)?n.path&&0<n.path.length&&n.fieldMask.push(n.path):kb(t,function(t,e){e=xA(e,n.Fc(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function MA(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof wb||t instanceof ZC||t instanceof $C||t instanceof kC||t instanceof JC)}function FA(t,e,n){if(!MA(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=_C(n);throw"an object"===n?e.Lc(t+" a custom object"):e.Lc(t+" "+n)}var r}function jA(t,e,n){if((e=Jo(e))instanceof XC)return e._internalPath;if("string"==typeof e)return qA(t,e);throw VA("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var UA=new RegExp("[~\\*/\\[\\]]");function qA(e,n,r){if(0<=n.search(UA))throw VA("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(XC.bind.apply(XC,Zi([void 0],n.split(".")))))._internalPath}catch(t){throw VA("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function VA(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new sb(ob.INVALID_ARGUMENT,(e+=". ")+t+n)}function BA(t,e){return t.some(function(t){return t.isEqual(e)})}var KA,WA=(Object.defineProperty(GA.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(GA.prototype,"ref",{get:function(){return new kC(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),GA.prototype.exists=function(){return null!==this._document},GA.prototype.data=function(){if(this._document){if(this._converter){var t=new HA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},GA.prototype.get=function(t){if(this._document){t=this._document.data.field(QA("DocumentSnapshot.get",t));if(null!==t)return this._userDataWriter.convertValue(t)}},GA),HA=(Gi(zA,KA=WA),zA.prototype.data=function(){return KA.prototype.data.call(this)},zA);function zA(){return null!==KA&&KA.apply(this,arguments)||this}function GA(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function QA(t,e){return"string"==typeof e?qA(t,e):(e instanceof XC?e:e._delegate)._internalPath}var YA,XA,$A=(iN.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},iN),JA=(Gi(rN,XA=WA),rN.prototype.exists=function(){return XA.prototype.exists.call(this)},rN.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new ZA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},rN.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){t=this._document.data.field(QA("DocumentSnapshot.get",t));if(null!==t)return this._userDataWriter.convertValue(t,e.serverTimestamps)}},rN),ZA=(Gi(nN,YA=JA),nN.prototype.data=function(t){return YA.prototype.data.call(this,t=void 0===t?{}:t)},nN),tN=(Object.defineProperty(eN.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(eN.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(eN.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),eN.prototype.forEach=function(e,n){var r=this;this._snapshot.docs.forEach(function(t){e.call(n,new ZA(r._firestore,r._userDataWriter,t.key,t,new $A(r._snapshot.mutatedKeys.has(t.key),r._snapshot.fromCache),r.query.converter))})},eN.prototype.docChanges=function(t){t=!!(t=void 0===t?{}:t).includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new sb(ob.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,e){if(i._snapshot.oldDocs.isEmpty()){var n=0;return i._snapshot.docChanges.map(function(t){return{type:"added",doc:new ZA(i._firestore,i._userDataWriter,t.doc.key,t.doc,new $A(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:n++}})}var o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new ZA(i._firestore,i._userDataWriter,t.doc.key,t.doc,new $A(i._snapshot.mutatedKeys.has(t.doc.key),i._snapshot.fromCache),i.query.converter),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return db()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},eN);function eN(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new $A(r.hasPendingWrites,r.fromCache),this.query=n}function nN(){return null!==YA&&YA.apply(this,arguments)||this}function rN(t,e,n,r,i,o){var s=this;return(s=XA.call(this,t,e,n,r,o)||this)._firestore=t,s._firestoreImpl=t,s.metadata=i,s}function iN(t,e){this.hasPendingWrites=t,this.fromCache=e}function oN(t,e){return t instanceof JA&&e instanceof JA?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof tN&&e instanceof tN&&t._firestore===e._firestore&&FC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function sN(t){if(Z_(t)&&0===t.explicitOrderBy.length)throw new sb(ob.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}G=function(){};function aN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var uN,cN,hN,lN,fN,pN=(Gi(IN,fN=G),IN.prototype._apply=function(t){var e=pA(t.firestore),e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new sb(ob.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){SN(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(EN(n,t,c))}h={arrayValue:{values:s}}}else h=EN(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||SN(o,i),h=DA(e,"where",o,"in"===i||"not-in"===i);var h=__.create(r,i,h);return function(t,e){if(e.g()){var n=ew(t);if(null!==n&&!n.isEqual(e.field))throw new sb(ob.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=tw(t);null!==n&&kN(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new sb(ob.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new sb(ob.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t._query,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new CC(t.firestore,t.converter,(t=t._query,e=t.filters.concat([e]),new Y_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},IN),dN=(Gi(wN,lN=G),wN.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new sb(ob.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new sb(ob.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new z_(e,n);return e=r,null!==tw(n=t)||null!==(t=ew(n))&&kN(0,t,e.field),r}(t._query,this.jc,this.zc);return new CC(t.firestore,t.converter,(t=t._query,e=t.explicitOrderBy.concat([e]),new Y_(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},wN),gN=(Gi(_N,hN=G),_N.prototype._apply=function(t){return new CC(t.firestore,t.converter,ow(t._query,this.Hc,this.Jc))},_N),vN=(Gi(bN,cN=G),bN.prototype._apply=function(t){var e=TN(t,this.type,this.Yc,this.Xc);return new CC(t.firestore,t.converter,(t=t._query,e=e,new Y_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},bN),yN=(Gi(mN,uN=G),mN.prototype._apply=function(t){var e=TN(t,this.type,this.Yc,this.Xc);return new CC(t.firestore,t.converter,(t=t._query,e=e,new Y_(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},mN);function mN(t,e,n){var r=this;return(r=uN.call(this)||this).type=t,r.Yc=e,r.Xc=n,r}function bN(t,e,n){var r=this;return(r=cN.call(this)||this).type=t,r.Yc=e,r.Xc=n,r}function _N(t,e,n){var r=this;return(r=hN.call(this)||this).type=t,r.Hc=e,r.Jc=n,r}function wN(t,e){var n=this;return(n=lN.call(this)||this).jc=t,n.zc=e,n.type="orderBy",n}function IN(t,e,n){var r=this;return(r=fN.call(this)||this).jc=t,r.Wc=e,r.Gc=n,r.type="where",r}function TN(t,c,e,n){if(e[0]=Jo(e[0]),e[0]instanceof WA)return function(t,e,n,r){if(!n)throw new sb(ob.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=rw(t);o<s.length;o++){var a=s[o];if(a.field.isKeyField())i.push(r_(e,n.key));else{var u=n.data.field(a.field);if(Wb(u))throw new sb(ob.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.canonicalString();throw new sb(ob.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new q_(i,r)}(t._query,t.firestore._databaseId,e[0]._document,n);var r=pA(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new sb(ob.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new sb(ob.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!nw(t)&&-1!==c.indexOf("/"))throw new sb(ob.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Rb.fromString(c));if(!Yb.isDocumentKey(h))throw new sb(ob.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Yb(h);a.push(r_(e,h))}else{c=DA(n,r,c);a.push(c)}}return new q_(a,o)}(t._query,t.firestore._databaseId,r,c,e,n)}function EN(t,e,n){if("string"==typeof(n=Jo(n))){if(""===n)throw new sb(ob.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!nw(e)&&-1!==n.indexOf("/"))throw new sb(ob.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(Rb.fromString(n));if(!Yb.isDocumentKey(e))throw new sb(ob.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return r_(t,new Yb(e))}if(n instanceof kC)return r_(t,n._key);throw new sb(ob.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+_C(n)+".")}function SN(t,e){if(!Array.isArray(t)||0===t.length)throw new sb(ob.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new sb(ob.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function kN(t,e,n){if(!n.isEqual(e))throw new sb(ob.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}CN.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),$b(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Bb(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Kb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw db()}},CN.prototype.convertObject=function(t,n){var r=this,i={};return kb(t.fields,function(t,e){i[t]=r.convertValue(e,n)}),i},CN.prototype.convertGeoPoint=function(t){return new ZC(Bb(t.latitude),Bb(t.longitude))},CN.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},CN.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return Wb(e)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Hb(t));default:return null}},CN.prototype.convertTimestamp=function(t){t=Vb(t);return new wb(t.seconds,t.nanos)},CN.prototype.convertDocumentKey=function(t,e){var n=Rb.fromString(t);gb(aI(n));t=new nC(n.get(1),n.get(3)),n=new Yb(n.popFirst(5));return t.isEqual(e)||lb("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},Q=CN;function CN(){}function AN(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var NN,RN=(Gi(DN,NN=Q),DN.prototype.convertBytes=function(t){return new $C(t)},DN.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return new kC(this.firestore,null,t)},DN),PN=(ON.prototype.set=function(t,e,n){this._verifyNotCommitted();t=xN(t,this._firestore),e=AN(t.converter,e,n),n=dA(this._dataReader,"WriteBatch.set",t._key,e,null!==t.converter,n);return this._mutations.push(n.toMutation(t._key,Dw.none())),this},ON.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();t=xN(t,this._firestore),e="string"==typeof(e=Jo(e))||e instanceof XC?OA(this._dataReader,"WriteBatch.update",t._key,e,n,r):PA(this._dataReader,"WriteBatch.update",t._key,e);return this._mutations.push(e.toMutation(t._key,Dw.exists(!0))),this},ON.prototype.delete=function(t){this._verifyNotCommitted();t=xN(t,this._firestore);return this._mutations=this._mutations.concat(new Jw(t._key,Dw.none())),this},ON.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},ON.prototype._verifyNotCommitted=function(){if(this._committed)throw new sb(ob.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},ON);function ON(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=pA(t)}function DN(t){var e=this;return(e=NN.call(this)||this).firestore=t,e}function xN(t,e){if((t=Jo(t)).firestore!==e)throw new sb(ob.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var LN,MN=(Gi(FN,LN=Q),FN.prototype.convertBytes=function(t){return new $C(t)},FN.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return new kC(this.firestore,null,t)},FN);function FN(t){var e=this;return(e=LN.call(this)||this).firestore=t,e}function jN(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=wC(t,kC);var o=wC(t.firestore,KC),s=pA(o);return qN(o,[("string"==typeof(e=Jo(e))||e instanceof XC?OA(s,"updateDoc",t._key,e,n,r):PA(s,"updateDoc",t._key,e)).toMutation(t._key,Dw.exists(!0))])}function UN(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e=Jo(e);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||qC(n[i])||(r=n[i],i++);var o,s,a,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return qC(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof kC?(a=wC(e.firestore,KC),u=$_(e._key.path),h={next:function(t){n[i]&&n[i](VN(a,e,t))},error:n[i+1],complete:n[i+2]}):(s=wC(e,CC),a=wC(s.firestore,KC),u=s._query,c=new MN(a),h={next:function(t){n[i]&&n[i](new tN(a,c,s,t))},error:n[i+1],complete:n[i+2]},sN(e._query)),function(n,t,e){var r=this,i=new Dk(h),o=new j1(t,i,e);return n.asyncQueue.enqueueAndForget(function(){return Yi(r,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=L1,[4,$k(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.Wo(),n.asyncQueue.enqueueAndForget(function(){return Yi(r,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=M1,[4,$k(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(zC(a),u,l)}function qN(t,e){return function(n,r){var t=this,i=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=nk,[4,Xk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(zC(t),e)}function VN(t,e,n){var r=n.docs.get(e._key),i=new MN(t);return new JA(t,i,e._key,r,new $A(n.hasPendingWrites,n.fromCache),e.converter)}var BN,KN=(HN.prototype.get=function(t){var e=this,n=xN(t,this._firestore),r=new RN(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return db();t=t[0];if(t.isFoundDocument())return new WA(e._firestore,r,t.key,t,n.converter);if(t.isNoDocument())return new WA(e._firestore,r,n._key,null,n.converter);throw db()})},HN.prototype.set=function(t,e,n){t=xN(t,this._firestore),e=AN(t.converter,e,n),n=dA(this._dataReader,"Transaction.set",t._key,e,null!==t.converter,n);return this._transaction.set(t._key,n),this},HN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=xN(t,this._firestore),e="string"==typeof(e=Jo(e))||e instanceof XC?OA(this._dataReader,"Transaction.update",t._key,e,n,r):PA(this._dataReader,"Transaction.update",t._key,e);return this._transaction.update(t._key,e),this},HN.prototype.delete=function(t){t=xN(t,this._firestore);return this._transaction.delete(t._key),this},Gi(WN,BN=HN),WN.prototype.get=function(t){var e=this,n=xN(t,this._firestore),r=new MN(this._firestore);return BN.prototype.get.call(this,t).then(function(t){return new JA(e._firestore,r,n._key,t._document,new $A(!1,!1),n.converter)})},WN);function WN(t,e){var n=this;return(n=BN.call(this,t,e)||this)._firestore=t,n}function HN(t,e){this._firestore=t,this._transaction=e,this._dataReader=pA(t)}function zN(){if("undefined"==typeof Uint8Array)throw new sb(ob.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function GN(){if("undefined"==typeof atob)throw new sb(ob.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var QN,YN=(nR.fromBase64String=function(t){return GN(),new nR($C.fromBase64String(t))},nR.fromUint8Array=function(t){return zN(),new nR($C.fromUint8Array(t))},nR.prototype.toBase64=function(){return GN(),this._delegate.toBase64()},nR.prototype.toUint8Array=function(){return zN(),this._delegate.toUint8Array()},nR.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},nR.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},nR),XN=(eR.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){YC(t=wC(t,KC));var n=zC(t),r=t._freezeSettings(),t=new Ck;return QC(n,t,new Sk(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},eR.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){YC(t=wC(t,KC));var e=zC(t),n=t._freezeSettings(),t=new Ck;return QC(e,t,new kk(t,n.cacheSizeBytes))}(t._delegate)},eR.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n._initialized&&!n._terminated)throw new sb(ob.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new PI;return n._queue.enqueueAndForgetEvenWhileRestricted(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return xI.yt()?(e=n+"main",[4,xI.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(wE(n._databaseId,n._persistenceKey))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t._delegate)},eR),$N=(Object.defineProperty(tR.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),tR.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||fb("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},tR.prototype.useEmulator=function(t,e,n){(function(t,e,n,r){void 0===r&&(r={});var i=(t=wC(t,SC))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&fb("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){n=ho(r.mockUserToken),r=r.mockUserToken.sub||r.mockUserToken.user_id;if(!r)throw new sb(ob.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new oC(new tC(n,new eS(r)))}})(this._delegate,t,e,n=void 0===n?{}:n)},tR.prototype.enableNetwork=function(){return function(i){var t=this;return i.asyncQueue.enqueue(function(){return Yi(t,void 0,void 0,function(){var n,r;return Xi(this,function(t){switch(t.label){case 0:return[4,Gk(i)];case 1:return n=t.sent(),[4,Yk(i)];case 2:return r=t.sent(),[2,(n.setNetworkEnabled(!0),(e=r).Or.delete(0),o1(e))]}var e})})})}(zC(wC(this._delegate,KC)))},tR.prototype.disableNetwork=function(){return function(r){var t=this;return r.asyncQueue.enqueue(function(){return Yi(t,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,Gk(r)];case 1:return e=t.sent(),[4,Yk(r)];case 2:return n=t.sent(),[2,(e.setNetworkEnabled(!1),function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return(e=n).Or.add(0),[4,s1(e)];case 1:return t.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(zC(wC(this._delegate,KC)))},tR.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&yC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},tR.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},tR.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},tR.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=sk,[4,Xk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(zC(wC(this._delegate,KC)))},tR.prototype.onSnapshotsInSync=function(t){return e=this._delegate,t=t,function(n,t){var e=this,r=new Dk(t);return n.asyncQueue.enqueueAndForget(function(){return Yi(e,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,$k(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.Wo(),n.asyncQueue.enqueueAndForget(function(){return Yi(e,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,$k(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(zC(wC(e,KC)),qC(t)?t:{next:t});var e},Object.defineProperty(tR.prototype,"app",{get:function(){if(!this.tu)throw new sb(ob.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),tR.prototype.collection=function(t){try{return new wR(this,xC(this._delegate,t))}catch(t){throw lR(t,"collection()","Firestore.collection()")}},tR.prototype.doc=function(t){try{return new cR(this,LC(this._delegate,t))}catch(t){throw lR(t,"doc()","Firestore.doc()")}},tR.prototype.collectionGroup=function(t){try{return new mR(this,function(t,e){if(t=wC(t,SC),gC("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new sb(ob.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new CC(t,null,(e=e,new Y_(Rb.emptyPath(),e)))}(this._delegate,t))}catch(t){throw lR(t,"collectionGroup()","Firestore.collectionGroup()")}},tR.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,zk(n).then(function(t){return t.datastore})];case 1:return e=t.sent(),new Mk(n.asyncQueue,e,r,i).run(),[2]}})})}),i.promise}(zC(n=this._delegate),function(t){return t=new KN(n,t),e(new rR(r,t))})},tR.prototype.batch=function(){var e=this;return zC(this._delegate),new iR(new PN(this._delegate,function(t){return qN(e._delegate,t)}))},tR.prototype.loadBundle=function(t){throw new sb(ob.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},tR.prototype.namedQuery=function(t){throw new sb(ob.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},tR),JN=(Gi(ZN,QN=Q),ZN.prototype.convertBytes=function(t){return new YN(new $C(t))},ZN.prototype.convertReference=function(t){t=this.convertDocumentKey(t,this.firestore._databaseId);return cR.eu(t,this.firestore,null)},ZN);function ZN(t){var e=this;return(e=QN.call(this)||this).firestore=t,e}function tR(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof nC||(this.tu=t)}function eR(){}function nR(t){this._delegate=t}var rR=(uR.prototype.get=function(t){var e=this,n=AR(t);return this._delegate.get(n).then(function(t){return new vR(e._firestore,new JA(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},uR.prototype.set=function(t,e,n){t=AR(t);return n?(vC("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},uR.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=AR(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,Zi([o,e,n],r)),this},uR.prototype.delete=function(t){t=AR(t);return this._delegate.delete(t),this},uR),iR=(aR.prototype.set=function(t,e,n){t=AR(t);return n?(vC("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},aR.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=AR(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,Zi([o,e,n],r)),this},aR.prototype.delete=function(t){t=AR(t);return this._delegate.delete(t),this},aR.prototype.commit=function(){return this._delegate.commit()},aR),oR=(sR.prototype.fromFirestore=function(t,e){t=new ZA(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new yR(this._firestore,t),null!=e?e:{})},sR.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},sR.nu=function(t,e){var n=sR.su,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new sR(t,new JN(t),e),r.set(e,n)),n},sR);function sR(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function aR(t){this._delegate=t}function uR(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new JN(t)}oR.su=new WeakMap;var cR=(hR.iu=function(t,e,n){if(t.length%2!=0)throw new sb(ob.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new hR(e,new kC(e._delegate,n,new Yb(t)))},hR.eu=function(t,e,n){return new hR(e,new kC(e._delegate,n,t))},Object.defineProperty(hR.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(hR.prototype,"parent",{get:function(){return new wR(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(hR.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),hR.prototype.collection=function(t){try{return new wR(this.firestore,xC(this._delegate,t))}catch(t){throw lR(t,"collection()","DocumentReference.collection()")}},hR.prototype.isEqual=function(t){return(t=Jo(t))instanceof kC&&MC(this._delegate,t)},hR.prototype.set=function(t,e){e=vC("DocumentReference.set",e);try{return function(t,e,n){t=wC(t,kC);var r=wC(t.firestore,KC),e=AN(t.converter,e,n);return qN(r,[dA(pA(r),"setDoc",t._key,e,null!==t.converter,n).toMutation(t._key,Dw.none())])}(this._delegate,t,e)}catch(t){throw lR(t,"setDoc()","DocumentReference.set()")}},hR.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?jN(this._delegate,t):jN.apply(void 0,Zi([this._delegate,t,e],n))}catch(t){throw lR(t,"updateDoc()","DocumentReference.update()")}},hR.prototype.delete=function(){return qN(wC((t=this._delegate).firestore,KC),[new Jw(t._key,Dw.none())]);var t},hR.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fR(t),i=pR(t,function(t){return new vR(e.firestore,new JA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return UN(this._delegate,r,i)},hR.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=wC(e,kC);var n=wC(e.firestore,KC),t=zC(n),r=new MN(n);return function(n,r){var t=this,i=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(o,s,a){return Yi(this,void 0,void 0,function(){var r,i;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)}))];case 1:return(i=t.sent()).isFoundDocument()?a.resolve(i):i.isNoDocument()?a.resolve(null):a.reject(new sb(ob.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=k1(r,"Failed to get document '"+s+" from cache"),a.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,Qk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._key).then(function(t){return new JA(n,r,e._key,t,new $A(null!==t&&t.hasLocalMutations,!0),e.converter)})}:"server"===(null==t?void 0:t.source)?function(e){e=wC(e,kC);var n=wC(e.firestore,KC);return Jk(zC(n),e._key,{source:"server"}).then(function(t){return VN(n,e,t)})}:function(e){e=wC(e,kC);var n=wC(e.firestore,KC);return Jk(zC(n),e._key).then(function(t){return VN(n,e,t)})})(this._delegate).then(function(t){return new vR(e.firestore,new JA(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},hR.prototype.withConverter=function(t){return new hR(this.firestore,t?this._delegate.withConverter(oR.nu(this.firestore,t)):this._delegate.withConverter(null))},hR);function hR(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new JN(t)}function lR(t,e,n){return t.message=t.message.replace(e,n),t}function fR(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!qC(r))return r}return{}}function pR(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=qC(t[0])?t[0]:qC(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var dR,gR,vR=(Object.defineProperty(CR.prototype,"ref",{get:function(){return new cR(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(CR.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),CR.prototype.data=function(t){return this._delegate.data(t)},CR.prototype.get=function(t,e){return this._delegate.get(t,e)},CR.prototype.isEqual=function(t){return oN(this._delegate,t._delegate)},CR),yR=(Gi(kR,gR=vR),kR.prototype.data=function(t){return this._delegate.data(t)},kR),mR=(SR.prototype.where=function(t,e,n){try{return new SR(this.firestore,aN(this._delegate,(r=n,i=e,o=QA("where",t),new pN(o,i,r))))}catch(t){throw lR(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},SR.prototype.orderBy=function(t,e){try{return new SR(this.firestore,aN(this._delegate,(n=void 0===e?"asc":e,r=QA("orderBy",t),new dN(r,n))))}catch(t){throw lR(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},SR.prototype.limit=function(t){try{return new SR(this.firestore,aN(this._delegate,(IC("limit",e=t),new gN("limit",e,"F"))))}catch(t){throw lR(t,"limit()","Query.limit()")}var e},SR.prototype.limitToLast=function(t){try{return new SR(this.firestore,aN(this._delegate,(IC("limitToLast",e=t),new gN("limitToLast",e,"L"))))}catch(t){throw lR(t,"limitToLast()","Query.limitToLast()")}var e},SR.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SR(this.firestore,aN(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vN("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw lR(t,"startAt()","Query.startAt()")}},SR.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SR(this.firestore,aN(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vN("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw lR(t,"startAfter()","Query.startAfter()")}},SR.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SR(this.firestore,aN(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yN("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw lR(t,"endBefore()","Query.endBefore()")}},SR.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new SR(this.firestore,aN(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yN("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw lR(t,"endAt()","Query.endAt()")}},SR.prototype.isEqual=function(t){return FC(this._delegate,t._delegate)},SR.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=wC(e,CC);var n=wC(e.firestore,KC),t=zC(n),r=new MN(n);return function(n,r){var t=this,i=new PI;return n.asyncQueue.enqueueAndForget(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,UE(i,o,!0)];case 1:return r=t.sent(),e=new Y1(o,r.Bn),n=e._o(r.documents),n=e.applyChanges(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=k1(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,Qk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e._query).then(function(t){return new tN(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=wC(e,CC);var n=wC(e.firestore,KC),t=zC(n),r=new MN(n);return Zk(t,e._query,{source:"server"}).then(function(t){return new tN(n,r,e,t)})}:function(e){e=wC(e,CC);var n=wC(e.firestore,KC),t=zC(n),r=new MN(n);return sN(e._query),Zk(t,e._query).then(function(t){return new tN(n,r,e,t)})})(this._delegate).then(function(t){return new _R(e.firestore,new tN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},SR.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=fR(t),i=pR(t,function(t){return new _R(e.firestore,new tN(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return UN(this._delegate,r,i)},SR.prototype.withConverter=function(t){return new SR(this.firestore,t?this._delegate.withConverter(oR.nu(this.firestore,t)):this._delegate.withConverter(null))},SR),bR=(Object.defineProperty(ER.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(ER.prototype,"doc",{get:function(){return new yR(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(ER.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(ER.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),ER),_R=(Object.defineProperty(TR.prototype,"query",{get:function(){return new mR(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(TR.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(TR.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(TR.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(TR.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map(function(t){return new yR(e._firestore,t)})},enumerable:!1,configurable:!0}),TR.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new bR(e._firestore,t)})},TR.prototype.forEach=function(e,n){var r=this;this._delegate.forEach(function(t){e.call(n,new yR(r._firestore,t))})},TR.prototype.isEqual=function(t){return oN(this._delegate,t._delegate)},TR),wR=(Gi(IR,dR=mR),Object.defineProperty(IR.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(IR.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new cR(this.firestore,t):null},enumerable:!1,configurable:!0}),IR.prototype.doc=function(t){try{return new cR(this.firestore,void 0===t?LC(this._delegate):LC(this._delegate,t))}catch(t){throw lR(t,"doc()","CollectionReference.doc()")}},IR.prototype.add=function(t){var e,n,r,i=this;return e=this._delegate,n=t,t=wC(e.firestore,KC),r=LC(e),n=AN(e.converter,n),qN(t,[dA(pA(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,Dw.exists(!1))]).then(function(){return r}).then(function(t){return new cR(i.firestore,t)})},IR.prototype.isEqual=function(t){return MC(this._delegate,t._delegate)},IR.prototype.withConverter=function(t){return new IR(this.firestore,t?this._delegate.withConverter(oR.nu(this.firestore,t)):this._delegate.withConverter(null))},IR);function IR(t,e){var n=this;return(n=dR.call(this,t,e)||this).firestore=t,n._delegate=e,n}function TR(t,e){this._firestore=t,this._delegate=e}function ER(t,e){this._firestore=t,this._delegate=e}function SR(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new JN(t)}function kR(){return null!==gR&&gR.apply(this,arguments)||this}function CR(t,e){this._firestore=t,this._delegate=e}function AR(t){return wC(t,kC)}RR.documentId=function(){return new RR(Ob.keyField().canonicalString())},RR.prototype.isEqual=function(t){return(t=Jo(t))instanceof XC&&this._delegate._internalPath.isEqual(t._internalPath)},G=RR,NR.serverTimestamp=function(){var t=new TA("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new NR(t)},NR.delete=function(){var t=new vA("deleteField");return t._methodName="FieldValue.delete",new NR(t)},NR.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new EA("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new NR(n)},NR.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new SA("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new NR(n)},NR.increment=function(t){t=new kA("increment",t);return t._methodName="FieldValue.increment",new NR(t)},NR.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},Q=NR;function NR(t){this._delegate=t}function RR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(XC.bind.apply(XC,Zi([void 0],t)))}function PR(t){return e=this._delegate,s=t,n=zC(e=wC(e,KC)),t=new BC,function(n,t,r){var e,i=this,o=(e=s,t=KS(t),e=function(t){if(t instanceof Uint8Array)return Ok(t,void 0);if(t instanceof ArrayBuffer)return Ok(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new xk(e,t));n.asyncQueue.enqueueAndForget(function(){return Yi(i,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=wk,[4,Xk(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e._databaseId,t),t;var e,s,n}function OR(t){var e=this,n=this._delegate,t=t;return function(n,r){var t=this;return n.asyncQueue.enqueue(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.Ke.getNamedQuery(t,e)})},[4,Qk(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(zC(n=wC(n,KC)),t).then(function(t){return t?new CC(n,null,t.query):null}).then(function(t){return t?new mR(e,t):null})}var DR,xR,LR={Firestore:$N,GeoPoint:ZC,Timestamp:wb,Blob:YN,Transaction:rR,WriteBatch:iR,DocumentReference:cR,DocumentSnapshot:vR,Query:mR,QueryDocumentSnapshot:yR,QuerySnapshot:_R,CollectionReference:wR,FieldPath:G,FieldValue:Q,setLogLevel:function(t){ab.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(DR=Jl).INTERNAL.registerComponent(new Zo("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new $N(e,new KC(e,t),new XN)},"PUBLIC").setServiceProps(Object.assign({},LR))),DR.registerVersion("@firebase/firestore","2.3.10"),(xR=$N).prototype.loadBundle=PR,xR.prototype.namedQuery=OR;var MR,FR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jR=(Gi(UR,MR=Error),UR);function UR(t,e,n){e=MR.call(this,e)||this;return Object.setPrototypeOf(e,UR.prototype),e.code=t,e.details=n,e}function qR(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,t=void 0;try{var o=e&&e.error;if(o){var s=o.status;if("string"==typeof s){if(!FR[s])return new jR("internal","internal");r=FR[s],i=s}var a=o.message;"string"==typeof a&&(i=a),void 0!==(t=o.details)&&(t=n.decode(t))}}catch(t){}return"ok"===r?null:new jR(r,i,t)}var VR=(BR.prototype.getAuthToken=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},BR.prototype.getInstanceIdToken=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},BR.prototype.getContext=function(){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},BR);function BR(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function KR(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var WR=(HR.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return KR(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},HR.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?KR(t,function(t){return e.decode(t)}):t},HR);function HR(){}var zR=(Object.defineProperty(GR.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),GR.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},GR.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},GR.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},GR.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},GR.prototype.postJSON=function(i,o,s){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return s["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(e=t.sent())&&(s["X-Firebase-AppCheck"]=e),t.label=2;case 2:return t.trys.push([2,4,,5]),[4,this.fetchImpl(i,{method:"POST",body:JSON.stringify(o),headers:s})];case 3:return n=t.sent(),[3,5];case 4:return t.sent(),[2,{status:0,json:null}];case 5:r=null,t.label=6;case 6:return t.trys.push([6,8,,9]),[4,n.json()];case 7:return r=t.sent(),[3,9];case 8:return t.sent(),[3,9];case 9:return[2,{status:n.status,json:r}]}})})},GR.prototype.getAppCheckToken=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return(e=this.appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},GR.prototype.call=function(c,h,l){return Yi(this,void 0,void 0,function(){var i,o,s,a,u;return Xi(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new jR("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([QR(u,this.postJSON(i,o,s)),a,QR(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new jR("cancelled","Firebase Functions instance was deleted.");if(u=qR(a.status,a.json,this.serializer))throw u;if(!a.json)throw new jR("internal","Response is not valid JSON object.");if(void 0===(u=void 0===(u=a.json.data)?a.json.result:u))throw new jR("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},GR);function GR(t,e,n,r,i,o){var s=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new WR,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(s.deleteService())}},this.contextProvider=new VR(e,n),this.cancelAllRequests=new Promise(function(t){s.deleteService=function(){return t()}});try{var a=new URL(i);this.customDomain=a.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}function QR(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var YR,XR,$R;function JR(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function ZR(n,r,i){var o,t=new Promise(function(t,e){JR(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function tP(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function eP(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return ZR(this[n],t,arguments)})})}function nP(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function rP(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=ZR(t,n,arguments)).then(function(t){if(t)return new oP(t,e.request)});var t,e})})}function iP(t){this._index=t}function oP(t,e){this._cursor=t,this._request=e}function sP(t){this._store=t}function aP(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function uP(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new aP(n)}function cP(t){this._db=t}function hP(t,e,n){var e=ZR(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new uP(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new cP(t)})}function lP(t){return ZR(indexedDB,"deleteDatabase",[t])}YR=Jl,XR=fetch.bind(self),$R={Functions:zR},YR.INTERNAL.registerComponent(new Zo("functions",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),e=t.getProvider("app-check-internal"),t=t.getProvider("messaging");return new zR(r,i,t,e,n,XR)},"PUBLIC").setServiceProps($R).setMultipleInstances(!0)),Jl.registerVersion("@firebase/functions","0.6.14"),tP(iP,"_index",["name","keyPath","multiEntry","unique"]),eP(iP,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),rP(iP,"_index",IDBIndex,["openCursor","openKeyCursor"]),tP(oP,"_cursor",["direction","key","primaryKey","value"]),eP(oP,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(oP.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),JR(e._request).then(function(t){if(t)return new oP(t,e._request)})})})}),sP.prototype.createIndex=function(){return new iP(this._store.createIndex.apply(this._store,arguments))},sP.prototype.index=function(){return new iP(this._store.index.apply(this._store,arguments))},tP(sP,"_store",["name","keyPath","indexNames","autoIncrement"]),eP(sP,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),rP(sP,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),nP(sP,"_store",IDBObjectStore,["deleteIndex"]),aP.prototype.objectStore=function(){return new sP(this._tx.objectStore.apply(this._tx,arguments))},tP(aP,"_tx",["objectStoreNames","mode"]),nP(aP,"_tx",IDBTransaction,["abort"]),uP.prototype.createObjectStore=function(){return new sP(this._db.createObjectStore.apply(this._db,arguments))},tP(uP,"_db",["name","version","objectStoreNames"]),nP(uP,"_db",IDBDatabase,["deleteObjectStore","close"]),cP.prototype.transaction=function(){return new aP(this._db.transaction.apply(this._db,arguments))},tP(cP,"_db",["name","version","objectStoreNames"]),nP(cP,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[sP,iP].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[iP,sP].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var fP=1e4,pP="w:0.4.31",dP="FIS_v2",gP="https://firebaseinstallations.googleapis.com/v1",vP=36e5,Q=((G={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',G["not-registered"]="Firebase Installation is not registered.",G["installation-not-found"]="Firebase Installation not found.",G["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',G["app-offline"]="Could not process request. Application offline.",G["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",G),yP=new So("installations","Installations",Q);function mP(t){return t instanceof To&&t.code.includes("request-failed")}function bP(t){t=t.projectId;return gP+"/projects/"+t+"/installations"}function _P(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function wP(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,yP.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function IP(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function TP(t,e){e=e.refreshToken,t=IP(t);return t.append("Authorization",dP+" "+e),t}function EP(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function SP(e){return new Promise(function(t){setTimeout(t,e)})}var kP=/^[cdef][\w-]{21}$/,CP="";function AP(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,Zi([],Ji(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return kP.test(e)?e:CP}catch(t){return CP}}function NP(t){return t.appName+"!"+t.appId}var RP=new Map;function PP(t,e){t=NP(t);OP(t,e),function(t,e){var n=xP();n&&n.postMessage({key:t,fid:e});LP()}(t,e)}function OP(t,e){var n,r,t=RP.get(t);if(t)try{for(var i=$i(t),o=i.next();!o.done;o=i.next())(0,o.value)(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var DP=null;function xP(){return!DP&&"BroadcastChannel"in self&&((DP=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){OP(t.data.key,t.data.fid)}),DP}function LP(){0===RP.size&&DP&&(DP.close(),DP=null)}var MP,FP="firebase-installations-database",jP=1,UP="firebase-installations-store",qP=null;function VP(){return qP=qP||hP(FP,jP,function(t){0===t.oldVersion&&t.createObjectStore(UP)})}function BP(o,s){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:return e=NP(o),[4,VP()];case 1:return r=t.sent(),n=r.transaction(UP,"readwrite"),[4,(r=n.objectStore(UP)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||PP(o,s.fid),[2,s]}})})}function KP(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return e=NP(r),[4,VP()];case 1:return n=t.sent(),[4,(n=n.transaction(UP,"readwrite")).objectStore(UP).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function WP(s,a){return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return e=NP(s),[4,VP()];case 1:return r=t.sent(),n=r.transaction(UP,"readwrite"),[4,(r=n.objectStore(UP)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||PP(s,o.fid),[2,o]}})})}function HP(i){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return[4,WP(i,function(t){t=GP(t||{fid:AP(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return[4,zP(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,SP(100)];case 3:return t.sent(),[4,zP(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,HP(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(yP.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return e=bP(s),n=IP(s),o={fid:a,authVersion:dP,appId:s.appId,sdkVersion:pP},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,EP(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:_P(o.authToken)}];case 3:return[4,wP("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,BP(r,e)];case 2:return mP(n=t.sent())&&409===n.customData.serverCode?[4,KP(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,BP(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==CP?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function zP(t){return WP(t,function(t){if(!t)throw yP.create("installation-not-found");return GP(t)})}function GP(t){return 1===(e=t).registrationStatus&&e.registrationTime+fP<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function QP(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return bP(t)+"/"+e+"/authTokens:generate"}(a,s),n=TP(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:pP}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,EP(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,_P(o)];case 3:return[4,wP("Generate Auth Token",i)];case 4:throw t.sent()}})})}function YP(i,o){return void 0===o&&(o=!1),Yi(this,void 0,void 0,function(){var r,e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,WP(i.appConfig,function(t){if(!$P(t))throw yP.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+vP}(e)){if(1===n.requestStatus)return r=function(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,XP(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,SP(100)];case 3:return t.sent(),[4,XP(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,YP(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw yP.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},Qi(Qi({},e),{authToken:n}));return r=function(i,o){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,QP(i,o)];case 1:return e=t.sent(),r=Qi(Qi({},o),{authToken:e}),[4,BP(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!mP(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,KP(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=Qi(Qi({},o),{authToken:{requestStatus:0}}),[4,BP(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function XP(t){return WP(t,function(t){if(!$P(t))throw yP.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+fP<Date.now()?Qi(Qi({},t),{authToken:{requestStatus:0}}):t})}function $P(t){return void 0!==t&&2===t.registrationStatus}function JP(e,n){return void 0===n&&(n=!1),Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,HP(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,YP(e,n)];case 2:return[2,t.sent().token]}})})}function ZP(i,o){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return bP(t)+"/"+e}(i,o),r=TP(i,o),n={method:"DELETE",headers:r},[4,EP(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,wP("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function tO(t,r){var i=t.appConfig;return function(t,e){xP();var n=NP(t);(t=RP.get(n))||(t=new Set,RP.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=NP(t=i),(t=RP.get(n))&&(t.delete(e),0===t.size&&RP.delete(n),LP())}}function eO(t){return yP.create("missing-app-config-values",{valueName:t})}(MP=Jl).INTERNAL.registerComponent(new Zo("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw eO("App Configuration");if(!t.name)throw eO("App Name");try{for(var r=$i(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw eO(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,HP(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||YP(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return JP(n,t)},delete:function(){return function(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,WP(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw yP.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw yP.create("app-offline");case 3:return[4,ZP(e,n)];case 4:return t.sent(),[4,KP(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return tO(n,t)}}},"PUBLIC")),MP.registerVersion("@firebase/installations","0.4.31");var nO,Q=((G={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',G["only-available-in-window"]="This method is available in a Window context.",G["only-available-in-sw"]="This method is available in a service worker context.",G["permission-default"]="The notification permission was not granted and dismissed instead.",G["permission-blocked"]="The notification permission was not granted and blocked instead.",G["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",G["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",G["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",G["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",G["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",G["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",G["token-update-no-token"]="FCM returned no token when updating the user to push.",G["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",G["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",G["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",G["invalid-vapid-key"]="The public VAPID key must be a string.",G["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",G),rO=new So("messaging","Messaging",Q),iO="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",oO="https://fcmregistrations.googleapis.com/v1",sO="FCM_MSG",aO="google.c.a.c_id";function uO(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Zi([],Ji(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(G=nO=nO||{}).PUSH_RECEIVED="push-received",G.NOTIFICATION_CLICKED="notification-clicked";var cO="fcm_token_details_db",hO=5,lO="fcm_token_object_Store";function fO(s){return Yi(this,void 0,void 0,function(){var e,o,n=this;return Xi(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(cO))return[2,null];t.label=2;case 2:return o=null,[4,hP(cO,hO,function(i){return Yi(n,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(lO)?[4,(r=i.transaction.objectStore(lO)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:uO(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:uO(n.auth),p256dh:uO(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:uO(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,lP(cO)];case 4:return t.sent(),[4,lP("fcm_vapid_details_db")];case 5:return t.sent(),[4,lP("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var pO="firebase-messaging-database",dO=1,gO="firebase-messaging-store",vO=null;function yO(){return vO=vO||hP(pO,dO,function(t){0===t.oldVersion&&t.createObjectStore(gO)})}function mO(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return e=_O(r),[4,yO()];case 1:return[4,t.sent().transaction(gO).objectStore(gO).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,fO(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,bO(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function bO(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return e=_O(r),[4,yO()];case 1:return n=t.sent(),[4,(n=n.transaction(gO,"readwrite")).objectStore(gO).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function _O(t){return t.appConfig.appId}function wO(r,i){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,TO(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(IO(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,rO.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),rO.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function IO(t){t=t.projectId;return oO+"/projects/"+t+"/registrations"}function TO(t){var n=t.appConfig,r=t.installations;return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function EO(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==iO&&(e.web.applicationPubKey=t),e}function SO(u,c,h){return Yi(this,void 0,void 0,function(){var o,s,a;return Xi(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw rO.create("permission-blocked");return[4,function(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(c,h)];case 1:return a=t.sent(),[4,mO(u)];case 2:return o=t.sent(),s={vapidKey:h,swScope:c.scope,endpoint:a.endpoint,auth:uO(a.getKey("auth")),p256dh:uO(a.getKey("p256dh"))},o?[3,3]:[2,CO(u,s)];case 3:if(e=o.subscriptionOptions,n=s.vapidKey===e.vapidKey,r=s.endpoint===e.endpoint,i=s.auth===e.auth,e=s.p256dh===e.p256dh,n&&r&&i&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,wO(u,o.token)];case 5:return t.sent(),[3,7];case 6:return a=t.sent(),console.warn(a),[3,7];case 7:return[2,CO(u,s)];case 8:return Date.now()>=o.createTime+6048e5?[2,function(i,o,s){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:return[4,TO(o)];case 1:e=t.sent(),n=EO(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(IO(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),rO.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,rO.create("token-update-failed",{errorInfo:i});if(!r.token)throw rO.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=Qi(Qi({},i),{token:e,createTime:Date.now()}),[4,bO(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,kO(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:o.token,createTime:Date.now(),subscriptionOptions:s},u,c)]:[2,o.token];case 9:return[2]}var e,n,r,i})})}function kO(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,mO(n)];case 1:return(e=t.sent())?[4,wO(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return e=_O(r),[4,yO()];case 1:return n=t.sent(),[4,(n=n.transaction(gO,"readwrite")).objectStore(gO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function CO(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,function(o,s){return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:return[4,TO(o)];case 1:e=t.sent(),n=EO(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(IO(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),rO.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,rO.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw rO.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,bO(n,e)];case 2:return t.sent(),[2,e.token]}})})}function AO(t){return"object"==typeof t&&t&&aO in t}function NO(e){return new Promise(function(t){setTimeout(t,e)})}var RO=(Object.defineProperty(PO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),PO.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw rO.create("invalid-bg-handler");this.bgMessageHandler=t},PO.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},PO.prototype.getToken=function(){var n;return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,mO(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:iO,t.label=2;case 2:return[2,SO(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},PO.prototype.deleteToken=function(){return kO(this.firebaseDependencies,self.registration)},PO.prototype.requestPermission=function(){throw rO.create("only-available-in-window")},PO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw rO.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw rO.create("invalid-vapid-key");this.vapidKey=t},PO.prototype.useServiceWorker=function(){throw rO.create("only-available-in-window")},PO.prototype.onMessage=function(){throw rO.create("only-available-in-window")},PO.prototype.onTokenRefresh=function(){throw rO.create("only-available-in-window")},PO.prototype.onPush=function(c){return Yi(this,void 0,void 0,function(){var s,a,u;return Xi(this,function(t){switch(t.label){case 0:return(u=function(t){t=t.data;if(!t)return null;try{return t.json()}catch(t){return null}}(c))?[4,OO()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(s=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=nO.PUSH_RECEIVED;try{for(var i=$i(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(s,u)]:(a=!1,u.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((o=Qi({},(r=u).notification)).data=((i={})[sO]=r,i),o))]:[3,3]);case 2:t.sent(),a=!0,t.label=3;case 3:return!0===a&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(n={from:(e=u).from,collapseKey:e.collapse_key},r=n,(i=e).notification&&(r.notification={},(o=i.notification.title)&&(r.notification.title=o),(o=i.notification.body)&&(r.notification.body=o),(i=i.notification.image)&&(r.notification.image=i)),r=n,(i=e).data&&(r.data=i.data),r=n,(i=e).fcmOptions&&(r.fcmOptions={},(e=i.fcmOptions.link)&&(r.fcmOptions.link=e),(i=i.fcmOptions.analytics_label)&&(r.fcmOptions.analyticsLabel=i)),u=n,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(u):this.bgMessageHandler.next(u)),[4,NO(1e3)]);case 4:return t.sent(),[2]}var e,n,r,i,o})})},PO.prototype.onSubChange=function(n){var r;return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,kO(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,mO(this.firebaseDependencies)];case 3:return e=t.sent(),[4,kO(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,SO(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:iO)];case 5:return t.sent(),[2]}})})},PO.prototype.onNotificationClick=function(s){var a;return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[sO])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return AO(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return Yi(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Xi(this,function(t){switch(t.label){case 0:return[4,OO()];case 1:e=t.sent();try{for(n=$i(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,NO(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=nO.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},PO);function PO(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function OO(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var DO=(Object.defineProperty(xO.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),xO.prototype.messageEventListener=function(i){return Yi(this,void 0,void 0,function(){var n,r;return Xi(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===nO.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),AO(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},xO.prototype.getVapidKey=function(){return this.vapidKey},xO.prototype.getSwReg=function(){return this.swRegistration},xO.prototype.getToken=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw rO.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,SO(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},xO.prototype.updateVapidKey=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=iO),[2]})})},xO.prototype.updateSwReg=function(e){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw rO.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},xO.prototype.registerDefaultSw=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),rO.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},xO.prototype.deleteToken=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,kO(this.firebaseDependencies,this.swRegistration)]}})})},xO.prototype.requestPermission=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?rO.create("permission-blocked"):rO.create("permission-default")}})})},xO.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw rO.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw rO.create("invalid-vapid-key");this.vapidKey=t},xO.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw rO.create("invalid-sw-registration");if(this.swRegistration)throw rO.create("use-sw-after-get-token");this.swRegistration=t},xO.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},xO.prototype.setBackgroundMessageHandler=function(){throw rO.create("only-available-in-sw")},xO.prototype.onBackgroundMessage=function(){throw rO.create("only-available-in-sw")},xO.prototype.onTokenRefresh=function(){return function(){}},xO.prototype.logEvent=function(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case nO.NOTIFICATION_CLICKED:return"notification_open";case nO.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[aO],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},xO);function xO(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function LO(t){return rO.create("missing-app-config-values",{valueName:t})}Q={isSupported:MO};function MO(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Jl.INTERNAL.registerComponent(new Zo("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw LO("App Configuration Object");if(!t.name)throw LO("App Name");var r=t.options;try{for(var i=$i(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw LO(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!MO())throw rO.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?RO:DO)(t)},"PUBLIC").setServiceProps(Q));var FO,jO="firebasestorage.googleapis.com",UO="storageBucket",qO=(Gi(VO,FO=To),VO.prototype._codeEquals=function(t){return BO(t)===this.code},Object.defineProperty(VO.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),VO);function VO(t,e){t=FO.call(this,BO(t),"Firebase Storage: "+e+" ("+BO(t)+")")||this;return t.customData={serverResponse:null},t._baseMessage=t.message,Object.setPrototypeOf(t,VO.prototype),t}function BO(t){return"storage/"+t}function KO(){return new qO("unknown","An unknown error occurred, please check the error payload for server response.")}function WO(){return new qO("canceled","User canceled the upload/download.")}function HO(){return new qO("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function zO(t){return new qO("invalid-argument",t)}function GO(){return new qO("app-deleted","The Firebase app was deleted.")}function QO(t){return new qO("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function YO(t,e){return new qO("invalid-format","String does not match format '"+t+"': "+e)}function XO(t){throw new qO("internal-error","Internal error: "+t)}var $O={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},JO=function(t,e){this.data=t,this.contentType=e||null};function ZO(t,e){switch(t){case $O.RAW:return new JO(tD(e));case $O.BASE64:case $O.BASE64URL:return new JO(eD(t,e));case $O.DATA_URL:return new JO(function(t){t=new nD(t);return t.base64?eD($O.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw YO($O.DATA_URL,"Malformed data URL.")}return tD(e)}(t.rest)}(e),new nD(e).contentType)}throw KO()}function tD(t){for(var e=[],n=0;n<t.length;n++){var r,i,o=t.charCodeAt(n);o<=127?e.push(o):o<=2047?e.push(192|o>>6,128|63&o):55296==(64512&o)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=o,i=t.charCodeAt(++n),e.push(240|(o=65536|(1023&r)<<10|1023&i)>>18,128|o>>12&63,128|o>>6&63,128|63&o)):e.push(239,191,189):56320==(64512&o)?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(e)}function eD(e,t){switch(e){case $O.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw YO(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case $O.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw YO(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw YO(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var nD=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw YO($O.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var rD,iD={STATE_CHANGED:"state_changed"},oD={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function sD(t){switch(t){case"running":case"pausing":case"canceling":return oD.RUNNING;case"paused":return oD.PAUSED;case"success":return oD.SUCCESS;case"canceled":return oD.CANCELED;case"error":default:return oD.ERROR}}(G=rD=rD||{})[G.NO_ERROR=0]="NO_ERROR",G[G.NETWORK_ERROR=1]="NETWORK_ERROR",G[G.ABORT=2]="ABORT";var aD=(uD.prototype.send=function(t,e,n,r){if(this.sent_)throw XO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},uD.prototype.getErrorCode=function(){if(!this.sent_)throw XO("cannot .getErrorCode() before sending");return this.errorCode_},uD.prototype.getStatus=function(){if(!this.sent_)throw XO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},uD.prototype.getResponseText=function(){if(!this.sent_)throw XO("cannot .getResponseText() before sending");return this.xhr_.responseText},uD.prototype.abort=function(){this.xhr_.abort()},uD.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},uD.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},uD.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},uD);function uD(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=rD.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=rD.ABORT,t()}),e.xhr_.addEventListener("error",function(){e.errorCode_=rD.NETWORK_ERROR,t()}),e.xhr_.addEventListener("load",function(){t()})})}var cD=(hD.prototype.createConnection=function(){return new aD},hD);function hD(){}var lD=(Object.defineProperty(fD.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),fD.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},fD.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},fD.makeFromBucketSpec=function(e,t){var n;try{n=fD.makeFromUrl(e,t)}catch(t){return new fD(e,"")}if(""===n.path)return n;throw new qO("invalid-default-bucket","Invalid default bucket '"+e+"'.")},fD.makeFromUrl=function(t,e){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=e.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(e===jO?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],h=c.regex.exec(t);if(h){n=new fD(h[c.indices.bucket],h[c.indices.path]||"");c.postModify(n);break}}if(null==n)throw new qO("invalid-url","Invalid URL '"+t+"'.");return n},fD);function fD(t,e){this.bucket=t,this.path_=e}var pD=(dD.prototype.getPromise=function(){return this.promise_},dD.prototype.cancel=function(t){},dD);function dD(t){this.promise_=Promise.reject(t)}function gD(t){return"string"==typeof t||t instanceof String}function vD(t){return yD()&&t instanceof Blob}function yD(){return"undefined"!=typeof Blob}function mD(t,e,n,r){if(r<e)throw zO("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw zO("Invalid value for '"+t+"'. Expected "+n+" or less.")}function bD(t,e){var n=e.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+e:e)+"/v0"+t}function _D(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&");return r=r.slice(0,-1)}var wD=(ID.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.connection;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=KO()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?GO:WO)()):i(n=new qO("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,Zi([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function g(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new TD(!1,null,!0)):this.backoffId_=(e=function(r,t){var i;function o(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new TD(!1,null,!0)):(i=c.pool_.createConnection(),c.pendingConnection_=i,null!==c.progressCallback_&&i.addUploadProgressListener(o),i.send(c.url_,c.method_,c.body_,c.headers_).then(function(){null!==c.progressCallback_&&i.removeUploadProgressListener(o),c.pendingConnection_=null;var t,e=i.getErrorCode()===rD.NO_ERROR,n=i.getStatus();e&&!c.isRetryStatusCode_(n)?(t=-1!==c.successCodes_.indexOf(n),r(!0,new TD(t,i))):(t=i.getErrorCode()===rD.ABORT,r(!1,new TD(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){o=!0,g(!0)},t),g)},ID.prototype.getPromise=function(){return this.promise_},ID.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},ID.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},ID);function ID(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var TD=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function ED(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(yD())return new Blob(t);throw new qO("unsupported-environment","This browser doesn't seem to support creating Blobs")}var SD=(kD.prototype.size=function(){return this.size_},kD.prototype.type=function(){return this.type_},kD.prototype.slice=function(t,e){if(vD(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new kD(r)}var i,r;return new kD(new Uint8Array(this.data_.buffer,t,e-t),!0)},kD.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(yD()){var n=t.map(function(t){return t instanceof kD?t.data_:t});return new kD(ED.apply(null,n))}var n=t.map(function(t){return gD(t)?ZO($O.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new kD(i,!0)},kD.prototype.uploadData=function(){return this.data_},kD);function kD(t,e){var n=0,r="";vD(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function CD(t){var e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(t=e)||Array.isArray(t)?null:e}function AD(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function ND(t,e){return e}var RD=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ND},PD=null;function OD(){if(PD)return PD;var t=[];t.push(new RD("bucket")),t.push(new RD("generation")),t.push(new RD("metageneration")),t.push(new RD("name","fullPath",!0));var e=new RD("name");e.xform=function(t,e){return!gD(e=e)||e.length<2?e:AD(e)},t.push(e);e=new RD("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new RD("timeCreated")),t.push(new RD("updated")),t.push(new RD("md5Hash",null,!0)),t.push(new RD("cacheControl",null,!0)),t.push(new RD("contentDisposition",null,!0)),t.push(new RD("contentEncoding",null,!0)),t.push(new RD("contentLanguage",null,!0)),t.push(new RD("contentType",null,!0)),t.push(new RD("metadata","customMetadata",!0)),PD=t}function DD(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new lD(t,e);return r._makeStorageReference(e)}})}function xD(t,e,n){e=CD(e);return null===e?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return DD(r,t),r}(t,e,n)}function LD(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var MD="prefixes",FD="items";function jD(t,e,n){n=CD(n);return null===n?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[MD])for(var i=0,o=n[MD];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new lD(e,s));r.prefixes.push(a)}if(n[FD])for(var u=0,c=n[FD];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new lD(e,h.name));r.items.push(a)}return r}(t,e,n)}var UD=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function qD(t){if(!t)throw KO()}function VD(n,r){return function(t,e){return qD(null!==(e=xD(n,e,r))),e}}function BD(n,r){return function(t,e){return qD(null!==(e=jD(n,r,e))),e}}function KD(r,i){return function(t,e){var n=xD(r,e,i);return qD(null!==n),function(r,t,i){if(null===(t=CD(t)))return null;if(!gD(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var o=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return bD("/b/"+o(e)+"/o/"+o(n),i)+_D({alt:"media",token:t})})[0]}(n,e,r.host)}}function WD(i){return function(t,e){var n,r=401===t.getStatus()?t.getResponseText().includes("Firebase App Check token is invalid")?new qO("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new qO("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new qO("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new qO("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function HD(r){var i=WD(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new qO("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function zD(t,e,n){var r=bD(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,i=new UD(r,"GET",VD(t,n),i);return i.errorHandler=HD(e),i}function GD(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function QD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=GD(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+LD(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r=SD.getBlob(i,r,"\r\n--"+a+"--");if(null===r)throw HO();a={name:u.fullPath},u=bD(o,t.host),o=t.maxUploadRetryTime,o=new UD(u,"POST",VD(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=WD(e),o}var YD=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function XD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){qD(!1)}return qD(!!n&&-1!==(e||["active"]).indexOf(n)),n}function $D(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=GD(e,r,i),i={name:s.fullPath},o=bD(o,t.host),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=LD(s,n),t=t.maxUploadRetryTime;t=new UD(o,"POST",function(t){var e;XD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){qD(!1)}return qD(gD(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=WD(e),t}function JD(t,e,n,r){t=t.maxUploadRetryTime,t=new UD(n,"POST",function(t){var e=XD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){qD(!1)}return n||qD(!1),n=Number(n),qD(!isNaN(n)),new YD(n,r.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=WD(e),t}function ZD(t,o,e,s,n,a,r,i){var u=new YD(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new qO("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},c=s.slice(r,r+h);if(null===c)throw HO();r=o.maxUploadRetryTime,r=new UD(e,"POST",function(t,e){var n=XD(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?VD(o,a)(t,e):null;return new YD(r,i,"final"===n,e)},r);return r.headers=n,r.body=c.uploadData(),r.progressCallback=i||null,r.errorHandler=WD(t),r}var tx=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=(t=t).next,this.error=t.error,this.complete=t.complete)};function ex(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var nx=(rx.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},rx.prototype._shouldDoResumable=function(t){return 262144<t.size()},rx.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},rx.prototype._resolveToken=function(r){var i=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(t){var e=t[0],n=t[1];switch(i._state){case"running":r(e,n);break;case"canceling":i._transition("canceled");break;case"pausing":i._transition("paused")}})},rx.prototype._createResumable=function(){var r=this;this._resolveToken(function(t,e){var n=$D(r._ref.storage,r._ref._location,r._mappings,r._blob,r._metadata),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._uploadUrl=t,r._needToFetchStatus=!1,r.completeTransitions_()},r._errorHandler)})},rx.prototype._fetchStatus=function(){var r=this,i=this._uploadUrl;this._resolveToken(function(t,e){var n=JD(r._ref.storage,r._ref._location,i,r._blob),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._updateProgress(t.current),r._needToFetchStatus=!1,t.finalized&&(r._needToFetchMetadata=!0),r.completeTransitions_()},r._errorHandler)})},rx.prototype._continueUpload=function(){var r=this,i=262144*this._chunkMultiplier,o=new YD(this._transferred,this._blob.size()),s=this._uploadUrl;this._resolveToken(function(t,e){var n;try{n=ZD(r._ref._location,r._ref.storage,s,r._blob,i,r._mappings,o,r._makeProgressCallback())}catch(t){return r._error=t,void r._transition("error")}e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._increaseMultiplier(),r._request=void 0,r._updateProgress(t.current),t.finalized?(r._metadata=t.metadata,r._transition("success")):r.completeTransitions_()},r._errorHandler)})},rx.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},rx.prototype._fetchMetadata=function(){var r=this;this._resolveToken(function(t,e){var n=zD(r._ref.storage,r._ref._location,r._mappings),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._metadata=t,r._transition("success")},r._metadataErrorHandler)})},rx.prototype._oneShotUpload=function(){var r=this;this._resolveToken(function(t,e){var n=QD(r._ref.storage,r._ref._location,r._mappings,r._blob,r._metadata),e=r._ref.storage._makeRequest(n,t,e);(r._request=e).getPromise().then(function(t){r._request=void 0,r._metadata=t,r._updateProgress(r._blob.size()),r._transition("success")},r._errorHandler)})},rx.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},rx.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=WO(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},rx.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(rx.prototype,"snapshot",{get:function(){var t=sD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),rx.prototype.on=function(t,e,n,r){var i=this,o=new tx(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},rx.prototype.then=function(t,e){return this._promise.then(t,e)},rx.prototype.catch=function(t){return this.then(null,t)},rx.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},rx.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},rx.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},rx.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(sD(this._state)){case oD.SUCCESS:ex(this._resolve.bind(null,this.snapshot))();break;case oD.CANCELED:case oD.ERROR:ex(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},rx.prototype._notifyObserver=function(t){switch(sD(this._state)){case oD.RUNNING:case oD.PAUSED:t.next&&ex(t.next.bind(t,this.snapshot))();break;case oD.SUCCESS:t.complete&&ex(t.complete.bind(t))();break;case oD.CANCELED:case oD.ERROR:t.error&&ex(t.error.bind(t,this._error))();break;default:t.error&&ex(t.error.bind(t,this._error))()}},rx.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},rx.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},rx.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},rx);function rx(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=OD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var ix=(ox.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},ox.prototype._newRef=function(t,e){return new ox(t,e)},Object.defineProperty(ox.prototype,"root",{get:function(){var t=new lD(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(ox.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(ox.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(ox.prototype,"name",{get:function(){return AD(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(ox.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(ox.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new lD(this._location.bucket,t);return new ox(this._service,t)},enumerable:!1,configurable:!0}),ox.prototype._throwIfRoot=function(t){if(""===this._location.path)throw QO(t)},ox);function ox(t,e){this._service=t,this._location=e instanceof lD?e:lD.makeFromUrl(e,t.host)}function sx(t){var e={prefixes:[],items:[]};return function r(i,o,s){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,ax(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function ax(u,c){return Yi(this,void 0,void 0,function(){var a;return Xi(this,function(t){switch(t.label){case 0:return null!=c&&"number"==typeof c.maxResults&&mD("options.maxResults",1,1e3,c.maxResults),a=c||{},e=u.storage,n=u._location,r="/",i=a.pageToken,o=a.maxResults,s={},n.isRoot?s.prefix="":s.prefix=n.path+"/",r&&0<r.length&&(s.delimiter=r),i&&(s.pageToken=i),o&&(s.maxResults=o),i=bD(n.bucketOnlyServerUrl(),e.host),o=e.maxOperationRetryTime,(o=new UD(i,"GET",BD(e,n.bucket),o)).urlParams=s,o.errorHandler=WD(n),[4,u.storage.makeRequestWithTokens(o)];case 1:return[2,t.sent().getPromise()]}var e,n,r,i,o,s})})}function ux(a,u){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return a._throwIfRoot("updateMetadata"),e=a.storage,n=a._location,r=u,i=OD(),o=bD(n.fullServerUrl(),e.host),s=LD(r,i),r=e.maxOperationRetryTime,(r=new UD(o,"PATCH",VD(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=s,r.errorHandler=HD(n),[4,a.storage.makeRequestWithTokens(r)];case 1:return[2,t.sent().getPromise()]}var e,n,r,i,o,s})})}function cx(s){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return s._throwIfRoot("getDownloadURL"),e=s.storage,n=s._location,r=OD(),i=bD(n.fullServerUrl(),e.host),o=e.maxOperationRetryTime,(o=new UD(i,"GET",KD(e,r),o)).errorHandler=HD(n),[4,s.storage.makeRequestWithTokens(o)];case 1:return[2,t.sent().getPromise().then(function(t){if(null===t)throw new qO("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i,o})})}function hx(i){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),e=i.storage,n=i._location,r=bD(n.fullServerUrl(),e.host),e=e.maxOperationRetryTime,(e=new UD(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=HD(n),[4,i.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise()]}var e,n,r})})}function lx(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new lD(t._location.bucket,e);return new ix(t.storage,e)}function fx(t){return/^[A-Za-z]+:\/\//.test(t)}function px(t,e){if(t instanceof vx){var n=t;if(null==n._bucket)throw new qO("no-default-bucket","No default bucket found. Did you set the '"+UO+"' property when initializing the app?");n=new ix(n,n._bucket);return null!=e?px(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw zO('`path` param cannot contain ".."');return lx(t,e)}function dx(t,e){if(e&&fx(e)){if(t instanceof vx)return new ix(t,e);throw zO("To use ref(service, url), the first argument must be a Storage instance.")}return px(t,e)}function gx(t,e){e=null==e?void 0:e[UO];return null==e?null:lD.makeFromBucketSpec(e,t)}var vx=(Object.defineProperty(yx.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=lD.makeFromBucketSpec(this._url,t):this._bucket=gx(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(yx.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){mD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(yx.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){mD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),yx.prototype._getAuthToken=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},yx.prototype._getAppCheckToken=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return(e=this._appCheckProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:return[2,t.sent().token];case 2:return[2,null]}})})},yx.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear()),Promise.resolve()},yx.prototype._makeStorageReference=function(t){return new ix(this,t)},yx.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new pD(GO());var i,o,s,a,u,c,h=(i=t,o=this._appId,s=e,a=n,u=this._pool,c=this._firebaseVersion,t=_D(i.urlParams),e=i.url+t,n=Object.assign({},i.headers),t=n,(o=o)&&(t["X-Firebase-GMPID"]=o),o=n,null!==(s=s)&&0<s.length&&(o.Authorization="Firebase "+s),c=c,n["X-Firebase-Storage-Version"]="webjs/"+(null!=c?c:"AppManager"),c=n,null!==(a=a)&&(c["X-Firebase-AppCheck"]=a),new wD(e,i.method,n,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u));return this._requests.add(h),h.getPromise().then(function(){return r._requests.delete(h)},function(){return r._requests.delete(h)}),h},yx.prototype.makeRequestWithTokens=function(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=t.sent(),e=n[0],n=n[1],[2,this._makeRequest(r,e,n)]}})})},yx);function yx(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=jO,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?lD.makeFromBucketSpec(i,this._host):gx(this._host,this.app.options)}function mx(t,e,n){return t=Jo(t),e=e,n=n,(t=t)._throwIfRoot("uploadBytesResumable"),new nx(t,new SD(e),n)}function bx(t){return function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return n._throwIfRoot("getMetadata"),e=zD(n.storage,n._location,OD()),[4,n.storage.makeRequestWithTokens(e)];case 1:return[2,t.sent().getPromise()]}})})}(t=Jo(t))}function _x(t,e){return dx(t=Jo(t),e)}var wx=(Object.defineProperty(Ix.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(Ix.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Ix.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(Ix.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),Ix);function Ix(t,e,n){this._delegate=t,this.task=e,this.ref=n}var Tx=(Object.defineProperty(Ex.prototype,"snapshot",{get:function(){return new wx(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),Ex.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new wx(t,n,n._ref))},t)},Ex.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new wx(t,i,i._ref))}:{next:e.next?function(t){return e.next(new wx(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},Ex);function Ex(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var Sx=(Object.defineProperty(kx.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new Cx(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new Cx(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(kx.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),kx);function kx(t,e){this._delegate=t,this._service=e}var Cx=(Object.defineProperty(Ax.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(Ax.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Ax.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),Ax.prototype.toString=function(){return this._delegate.toString()},Ax.prototype.child=function(t){return new Ax(lx(this._delegate,t),this.storage)},Object.defineProperty(Ax.prototype,"root",{get:function(){return new Ax(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(Ax.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new Ax(t,this.storage)},enumerable:!1,configurable:!0}),Ax.prototype.put=function(t,e){return this._throwIfRoot("put"),new Tx(mx(this._delegate,t,e),this)},Ax.prototype.putString=function(t,e,n){void 0===e&&(e=$O.RAW),this._throwIfRoot("putString");t=ZO(e,t),n=Qi({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new Tx(new nx(this._delegate,new SD(t.data,!0),n),this)},Ax.prototype.listAll=function(){var e=this;return sx(Jo(this._delegate)).then(function(t){return new Sx(t,e.storage)})},Ax.prototype.list=function(t){var e,n=this;return e=this._delegate,t=t||void 0,ax(e=Jo(e),t).then(function(t){return new Sx(t,n.storage)})},Ax.prototype.getMetadata=function(){return bx(this._delegate)},Ax.prototype.updateMetadata=function(t){return ux(Jo(this._delegate),t)},Ax.prototype.getDownloadURL=function(){return cx(Jo(this._delegate))},Ax.prototype.delete=function(){return this._throwIfRoot("delete"),hx(Jo(this._delegate))},Ax.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw QO(t)},Ax);function Ax(t,e){this._delegate=t,this.storage=e}var Nx=(Object.defineProperty(Rx.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(Rx.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),Rx.prototype.ref=function(t){if(fx(t))throw zO("ref() expected a child path but got a URL, use refFromURL instead.");return new Cx(_x(this._delegate,t),this)},Rx.prototype.refFromURL=function(t){if(!fx(t))throw zO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{lD.makeFromUrl(t,this._delegate.host)}catch(t){throw zO("refFromUrl() expected a valid full URL but got an invalid one.")}return new Cx(_x(this._delegate,t),this)},Rx.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},Rx.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},Rx.prototype.useEmulator=function(t,e){this._delegate.host="http://"+t+":"+e},Rx);function Rx(t,e){this.app=t,this._delegate=e}var Px,Ox;function Dx(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal");return new Nx(r,new vx(r,e,t,new cD,n,Jl.SDK_VERSION))}Ox={TaskState:oD,TaskEvent:iD,StringFormat:$O,Storage:vx,Reference:Cx},(Px=Jl).INTERNAL.registerComponent(new Zo("storage",Dx,"PUBLIC").setServiceProps(Ox).setMultipleInstances(!0)),Px.registerVersion("@firebase/storage","0.6.2");var xx,Lx,Mx="0.4.17",Fx="FB-PERF-TRACE-MEASURE",jx="@firebase/performance/config",Ux="@firebase/performance/configexpire",Q="Performance",G=((G={})["trace started"]="Trace {$traceName} was started before.",G["trace stopped"]="Trace {$traceName} is not running.",G["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",G["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",G["no window"]="Window is not available.",G["no app id"]="App id is not available.",G["no project id"]="Project id is not available.",G["no api key"]="Api key is not available.",G["invalid cc log"]="Attempted to queue invalid cc event",G["FB not default"]="Performance can only start when Firebase app instance is the default one.",G["RC response not ok"]="RC response is not ok",G["invalid attribute name"]="Attribute name {$attributeName} is invalid.",G["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",G["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",G["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",G),qx=new So("performance",Q,G),Vx=new fs(Q);Vx.logLevel=ss.INFO;var Bx,Kx=(Wx.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},Wx.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},Wx.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},Wx.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},Wx.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},Wx.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},Wx.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!mo()||(Vx.info("IndexedDB is not supported by current browswer"),!1):(Vx.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},Wx.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},Wx.getInstance=function(){return xx=void 0===xx?new Wx(Lx):xx},Wx);function Wx(t){if(!(this.window=t))throw qx.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function Hx(t,e){var n=t.length-e.length;if(n<0||1<n)throw qx.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var zx,Gx,Qx=(Yx.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw qx.create("no app id");return t},Yx.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw qx.create("no project id");return t},Yx.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw qx.create("no api key");return t},Yx.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},Yx.getInstance=function(){return Bx=void 0===Bx?new Yx:Bx},Yx);function Yx(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Hx("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Hx("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Q=Gx=Gx||{})[Q.UNKNOWN=0]="UNKNOWN",Q[Q.VISIBLE=1]="VISIBLE",Q[Q.HIDDEN=2]="HIDDEN";var Xx=["firebase_","google_","ga_"],$x=new RegExp("^[a-zA-Z]\\w*$");function Jx(){switch(Kx.getInstance().document.visibilityState){case"visible":return Gx.VISIBLE;case"hidden":return Gx.HIDDEN;default:return Gx.UNKNOWN}}var Zx="0.0.1",tL={loggingEnabled:!0},eL="FIREBASE_INSTALLATIONS_AUTH";function nL(t){var n,e=function(){var t=Kx.getInstance().localStorage;if(t){var e=t.getItem(Ux);if(e&&function(t){return Number(t)>Date.now()}(e)){t=t.getItem(jx);if(t)try{return JSON.parse(t)}catch(t){return}}}}();return e?(iL(e),Promise.resolve()):(n=t,function(){var t=Qx.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Qx.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Qx.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:eL+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:Qx.getInstance().getAppId(),app_version:Mx,sdk_version:Zx})});return fetch(t).then(function(t){if(t.ok)return t.json();throw qx.create("RC response not ok")})}).catch(function(){Vx.info(rL)}).then(iL).then(function(t){var e;e=t,t=Kx.getInstance().localStorage,e&&t&&(t.setItem(jx,JSON.stringify(e)),t.setItem(Ux,String(Date.now()+60*Qx.getInstance().configTimeToLive*60*1e3)))},function(){}))}var rL="Could not fetch config, will use default configs";function iL(t){if(!t)return t;var e=Qx.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=tL.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=oL(e.tracesSamplingRate),e.logNetworkAfterSampling=oL(e.networkRequestsSamplingRate),t}function oL(t){return Math.random()<=t}var sL,aL=1;function uL(){return aL=2,sL=sL||function(){var n=Kx.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=Qx.getInstance().installationsService.getId()).then(function(t){zx=t}),t;var t}).then(nL).then(cL,cL)}function cL(){aL=3}var hL,lL=1e4,fL=5500,pL=3,dL=1e3,gL=pL,vL=[],yL=!1;function mL(t){setTimeout(function(){var t,e;if(0!==gL)return vL.length?(t=vL.splice(0,dL),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=Qx.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||Vx.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=lL;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(vL=Zi(Zi([],r),vL),Vx.info("Retry transport request later.")),gL=pL,mL(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Qx.getInstance().logSource,log_event:e},t).catch(function(){vL=Zi(Zi([],t),vL),gL--,Vx.info("Tries left: "+gL+"."),mL(lL)})):mL(lL)},t)}function bL(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw qx.create("invalid cc log");vL=Zi(Zi([],vL),[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function _L(t,e){(hL=hL||bL(TL))(t,e)}function wL(t){var e=Qx.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&Kx.getInstance().requiredApisAvailable()&&(t.isAuto&&Jx()!==Gx.VISIBLE||(3===aL?IL(t):uL().then(function(){return IL(t)},function(){return IL(t)})))}function IL(t){var e;!zx||(e=Qx.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return _L(t,1)},0)}function TL(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:EL(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:EL(),trace_metric:e};return JSON.stringify(e)})(t)}function EL(){return{google_app_id:Qx.getInstance().getAppId(),app_instance_id:zx,web_app_info:{sdk_version:Mx,page_url:Kx.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=Kx.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:Jx(),effective_connection_type:function(){var t=Kx.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var SL=["_fp","_fcp","_fid"];var kL=(CL.prototype.start=function(){if(1!==this.state)throw qx.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},CL.prototype.stop=function(){if(2!==this.state)throw qx.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),wL(this)},CL.prototype.record=function(t,e,n){if(t<=0)throw qx.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw qx.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Qi({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}wL(this)},CL.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},CL.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<SL.indexOf(n))&&n.startsWith("_"))throw qx.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&Vx.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},CL.prototype.getMetric=function(t){return this.counters[t]||0},CL.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!Xx.some(function(t){return n.startsWith(t)})&&!!n.match($x)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw qx.create("invalid attribute name",{attributeName:t});if(!r)throw qx.create("invalid attribute value",{attributeValue:e})}},CL.prototype.getAttribute=function(t){return this.customAttributes[t]},CL.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},CL.prototype.getAttributes=function(){return Qi({},this.customAttributes)},CL.prototype.setStartTime=function(t){this.startTimeUs=t},CL.prototype.setDuration=function(t){this.durationUs=t},CL.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},CL.createOobTrace=function(t,e,n){var r,i=Kx.getInstance().getUrl();i&&(r=new CL("_wt_"+i,!0),i=Math.floor(1e3*Kx.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),wL(r))},CL.createUserTimingTrace=function(t){wL(new CL(t,!1,t))},CL);function CL(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=Kx.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||Fx+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function AL(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=Kx.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=Qx.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return _L(e,0)},0)))}var NL=5e3;function RL(){zx&&(setTimeout(function(){var t=Kx.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){kL.createOobTrace(e,n),r=void 0},NL),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),kL.createOobTrace(e,n,t))})):kL.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=Kx.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++)AL(r[n]);t.setupObserver("resource",AL)},0),setTimeout(function(){for(var t=Kx.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++)PL(r[n]);t.setupObserver("measure",PL)},0))}function PL(t){t=t.name;t.substring(0,Fx.length)!==Fx&&kL.createUserTimingTrace(t)}var OL=(DL.prototype.trace=function(t){return new kL(t)},Object.defineProperty(DL.prototype,"instrumentationEnabled",{get:function(){return Qx.getInstance().instrumentationEnabled},set:function(t){Qx.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(DL.prototype,"dataCollectionEnabled",{get:function(){return Qx.getInstance().dataCollectionEnabled},set:function(t){Qx.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),DL);function DL(t){this.app=t,Kx.getInstance().requiredApisAvailable()&&bo().then(function(t){t&&(yL||(mL(fL),yL=!0),uL().then(RL,RL))}).catch(function(t){Vx.info("Environment doesn't support IndexedDB: "+t)})}var xL;function LL(t,e){if("[DEFAULT]"!==t.name)throw qx.create("FB not default");if("undefined"==typeof window)throw qx.create("no window");return Lx=window,Qx.getInstance().firebaseAppInstance=t,Qx.getInstance().installationsService=e,new OL(t)}(xL=Jl).INTERNAL.registerComponent(new Zo("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return LL(e,t)},"PUBLIC")),xL.registerVersion("@firebase/performance","0.4.17");var ML,FL,jL="firebase_id",UL="origin",qL=6e4,VL="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",BL="https://www.googletagmanager.com/gtag/js";(Q=ML=ML||{}).EVENT="event",Q.SET="set",Q.CONFIG="config",(Q=FL=FL||{}).ADD_SHIPPING_INFO="add_shipping_info",Q.ADD_PAYMENT_INFO="add_payment_info",Q.ADD_TO_CART="add_to_cart",Q.ADD_TO_WISHLIST="add_to_wishlist",Q.BEGIN_CHECKOUT="begin_checkout",Q.CHECKOUT_PROGRESS="checkout_progress",Q.EXCEPTION="exception",Q.GENERATE_LEAD="generate_lead",Q.LOGIN="login",Q.PAGE_VIEW="page_view",Q.PURCHASE="purchase",Q.REFUND="refund",Q.REMOVE_FROM_CART="remove_from_cart",Q.SCREEN_VIEW="screen_view",Q.SEARCH="search",Q.SELECT_CONTENT="select_content",Q.SELECT_ITEM="select_item",Q.SELECT_PROMOTION="select_promotion",Q.SET_CHECKOUT_OPTION="set_checkout_option",Q.SHARE="share",Q.SIGN_UP="sign_up",Q.TIMING_COMPLETE="timing_complete",Q.VIEW_CART="view_cart",Q.VIEW_ITEM="view_item",Q.VIEW_ITEM_LIST="view_item_list",Q.VIEW_PROMOTION="view_promotion",Q.VIEW_SEARCH_RESULTS="view_search_results";var KL=new fs("@firebase/analytics");function WL(o,s,a,u){return function(n,r,i){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==ML.EVENT?[3,2]:[4,function(u,c,h,l,f){return Yi(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return Xi(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(ML.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),KL.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==ML.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),KL.error(n),[3,8];case 8:return r(ML.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(ML.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),KL.error(e),[3,7];case 7:return[2]}})})}}var Q=((Q={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Q["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Q["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Q["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Q["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Q["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Q["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Q["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Q["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Q),HL=new So("analytics","Analytics",Q),zL=30;function GL(t,e){void 0===e&&(e=1e3),this.throttleMetadata=t=void 0===t?{}:t,this.intervalMillis=e}var QL=new(GL.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},GL.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},GL.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},GL);function YL(o){var s;return Yi(this,void 0,void 0,function(){var e,n,r,i;return Xi(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=VL.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw HL.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function XL(a,u,c){return void 0===u&&(u=QL),Yi(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Xi(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw HL.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ZL,setTimeout(function(){return Yi(s,void 0,void 0,function(){return Xi(this,function(t){return o.abort(),[2]})})},void 0!==c?c:qL),[2,function s(a,t,u,c){var h=t.throttleEndTimeMillis,l=t.backoffCount;void 0===c&&(c=QL);return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:e=a.appId,n=a.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,$L(u,h)];case 2:return t.sent(),[3,4];case 3:if(i=t.sent(),n)return KL.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+i.message+"]"),[2,{appId:e,measurementId:n}];throw i;case 4:return t.trys.push([4,6,,7]),[4,YL(a)];case 5:return o=t.sent(),c.deleteThrottleMetadata(e),[2,o];case 6:if(JL(r=t.sent()))return i=503===Number(r.customData.httpStatus)?$o(l,c.intervalMillis,zL):$o(l,c.intervalMillis),o={throttleEndTimeMillis:Date.now()+i,backoffCount:l+1},c.setThrottleMetadata(e,o),KL.debug("Calling attemptFetch again in "+i+" millis"),[2,s(a,o,u,c)];if(c.deleteThrottleMetadata(e),n)return KL.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw HL.create("no-api-key")})})}function $L(i,o){return new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(HL.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}function JL(t){if(t instanceof To&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var ZL=(tM.prototype.addEventListener=function(t){this.listeners.push(t)},tM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},tM);function tM(){this.listeners=[]}function eM(a,u,c,h,l,f){return Yi(this,void 0,void 0,function(){var i,o,s;return Xi(this,function(t){switch(t.label){case 0:return(i=XL(a)).then(function(t){c[t.measurementId]=t.appId,a.options.measurementId&&t.measurementId!==a.options.measurementId&&KL.warn("The measurement ID in the local Firebase config ("+a.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return KL.error(t)}),u.push(i),o=function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return mo()?[3,1]:(KL.warn(HL.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,bo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),KL.warn(HL.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){if(t)return h.getId()}),[4,Promise.all([i,o])];case 1:return s=t.sent(),i=s[0],o=s[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(BL))return r}}()||(e=f,n=i.measurementId,(r=document.createElement("script")).src=BL+"?l="+e+"&id="+n,r.async=!0,document.head.appendChild(r)),l("js",new Date),(s={})[UL]="firebase",s.update=!0,s=s,null!=o&&(s[jL]=o),l(ML.CONFIG,i.measurementId,s),[2,i.measurementId]}var e,n,r})})}var nM,rM,iM={},oM=[],sM={},aM="dataLayer",uM="gtag",cM=!1;function hM(t){if(cM)throw HL.create("already-initialized");t.dataLayerName&&(aM=t.dataLayerName),t.gtagName&&(uM=t.gtagName)}function lM(t,e){i=[],go()&&i.push("This is a browser extension environment."),_o()||i.push("Cookies are not available."),0<i.length&&(i=i.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),i=HL.create("invalid-analytics-context",{errorInfo:i}),KL.warn(i.message));var n,r,i,o=t.options.appId;if(!o)throw HL.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw HL.create("no-api-key");KL.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=iM[o])throw HL.create("already-exists",{id:o});return cM||(r=aM,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i,n=aM,r=uM,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)},window[r]&&"function"==typeof window[r]&&(i=window[r]),window[r]=WL(i,iM,oM,sM),r={gtagCore:i,wrappedGtag:window[r]},rM=r.wrappedGtag,nM=r.gtagCore,cM=!0),iM[o]=eM(t,oM,sM,e,nM,aM),{app:t,logEvent:function(t,e,n){!function(n,r,i,o,s){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return s&&s.global?(n(ML.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=Qi(Qi({},o),{send_to:e}),n(ML.EVENT,i,e),t.label=3;case 3:return[2]}})})}(rM,iM[o],t,e,n).catch(function(t){return KL.error(t)})},setCurrentScreen:function(t,e){!function(n,r,i,o){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(ML.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(ML.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})}(rM,iM[o],t,e).catch(function(t){return KL.error(t)})},setUserId:function(t,e){!function(n,r,i,o){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return o&&o.global?(n(ML.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(ML.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})}(rM,iM[o],t,e).catch(function(t){return KL.error(t)})},setUserProperties:function(t,e){!function(s,a,u,c){return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(ML.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(ML.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})}(rM,iM[o],t,e).catch(function(t){return KL.error(t)})},setAnalyticsCollectionEnabled:function(t){!function(n,r){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})}(iM[o],t).catch(function(t){return KL.error(t)})},INTERNAL:{delete:function(){return delete iM[o],Promise.resolve()}}}}var fM,pM="analytics";function dM(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:if(go())return[2,!1];if(!_o())return[2,!1];if(!mo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,bo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(fM=Jl).INTERNAL.registerComponent(new Zo(pM,function(t){return lM(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:hM,EventName:FL,isSupported:dM})),fM.INTERNAL.registerComponent(new Zo("analytics-internal",function(t){try{return{logEvent:t.getProvider(pM).getImmediate().logEvent}}catch(t){throw HL.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),fM.registerVersion("@firebase/analytics","0.6.17");var gM=(vM.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},vM.prototype.fetch=function(i){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},vM);function vM(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Q=((Q={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Q["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Q["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Q["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Q["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Q["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Q["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Q["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Q["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Q["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Q["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Q["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Q["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Q),yM=new So("remoteconfig","Remote Config",Q);var mM=(bM.prototype.fetch=function(f){return Yi(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return Xi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(e=void 0===e?navigator:e).languages&&e.languages[0]||e.language},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),yM.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),yM.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw yM.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},bM);function bM(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var _M=(wM.prototype.addEventListener=function(t){this.listeners.push(t)},wM.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},wM);function wM(){this.listeners=[]}var IM=["1","true","t","yes","y","on"],TM=(EM.prototype.asString=function(){return this._value},EM.prototype.asBoolean=function(){return"static"!==this._source&&0<=IM.indexOf(this._value.toLowerCase())},EM.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return t=isNaN(t)?0:t},EM.prototype.getSource=function(){return this._source},EM);function EM(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var SM=(kM.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ss.DEBUG;break;case"silent":this._logger.logLevel=ss.SILENT;break;default:this._logger.logLevel=ss.ERROR}},Object.defineProperty(kM.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(kM.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),kM.prototype.activate=function(){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},kM.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},kM.prototype.fetch=function(){return Yi(this,void 0,void 0,function(){var r,i,o,s=this;return Xi(this,function(t){switch(t.label){case 0:r=new _M,setTimeout(function(){return Yi(s,void 0,void 0,function(){return Xi(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof To&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},kM.prototype.fetchAndActivate=function(){return Yi(this,void 0,void 0,function(){return Xi(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},kM.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(Qi(Qi({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},kM.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},kM.prototype.getNumber=function(t){return this.getValue(t).asNumber()},kM.prototype.getString=function(t){return this.getValue(t).asString()},kM.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new TM("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new TM("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new TM("static"))},kM);function kM(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function CM(t,e){t=t.target.error||void 0;return yM.create(e,{originalErrorMessage:t&&t.message})}var AM="app_namespace_store",NM="firebase_remote_config",RM=1;var PM=(OM.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},OM.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},OM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},OM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},OM.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},OM.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},OM.prototype.getActiveConfig=function(){return this.get("active_config")},OM.prototype.setActiveConfig=function(t){return this.set("active_config",t)},OM.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},OM.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},OM.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},OM.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},OM.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},OM.prototype.get=function(a){return Yi(this,void 0,void 0,function(){var o,s=this;return Xi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([AM],"readonly").objectStore(AM),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(CM(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(yM.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},OM.prototype.set=function(a,u){return Yi(this,void 0,void 0,function(){var o,s=this;return Xi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([AM],"readwrite").objectStore(AM),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(CM(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(yM.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},OM.prototype.delete=function(a){return Yi(this,void 0,void 0,function(){var o,s=this;return Xi(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([AM],"readwrite").objectStore(AM),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(CM(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(yM.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},OM.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},OM);function OM(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(NM,RM);t.onerror=function(t){n(CM(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(AM,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var DM=(xM.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},xM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},xM.prototype.getActiveConfig=function(){return this.activeConfig},xM.prototype.loadFromStorage=function(){return Yi(this,void 0,void 0,function(){var e,n,r;return Xi(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},xM.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},xM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},xM.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},xM);function xM(t){this.storage=t}var LM=(MM.prototype.fetch=function(n){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},MM.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(yM.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof To&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+$o(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},MM);function MM(t,e){this.client=t,this.storage=e}var FM,jM="@firebase/remote-config";(FM=Jl).INTERNAL.registerComponent(new Zo("remoteConfig",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw yM.create("registration-window");var o=r.options,s=o.projectId,a=o.apiKey,u=o.appId;if(!s)throw yM.create("registration-project-id");if(!a)throw yM.create("registration-api-key");if(!u)throw yM.create("registration-app-id");n=n||"firebase";e=new PM(u,r.name,n),t=new DM(e),o=new fs(jM);o.logLevel=ss.ERROR;u=new mM(i,FM.SDK_VERSION,n,s,a,u),u=new LM(u,e),u=new gM(u,e,t,o),o=new SM(r,u,t,e,o);return o.ensureInitialized(),o},"PUBLIC").setMultipleInstances(!0)),FM.registerVersion(jM,"0.1.42");var Q=((Q={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",Q["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",Q["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Q["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Q["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Q["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Q["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Q["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Q["recaptcha-error"]="ReCAPTCHA error.",Q),UM=new So("appCheck","AppCheck",Q),qM=new Map,VM={activated:!1,tokenObservers:[]},BM={enabled:!1};function KM(t){return qM.get(t)||VM}function WM(t,e){qM.set(t,e)}var HM="https://content-firebaseappcheck.googleapis.com/v1beta",zM="exchangeDebugToken",GM={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4},QM=(YM.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})},YM.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},YM.prototype.isRunning=function(){return!!this.pending},YM.prototype.process=function(r){return Yi(this,void 0,void 0,function(){var n;return Xi(this,function(t){switch(t.label){case 0:this.stop(),t.label=1;case 1:return t.trys.push([1,6,,7]),this.pending=new uo,[4,(e=this.getNextRun(r),new Promise(function(t){setTimeout(t,e)}))];case 2:return t.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return t.sent(),this.pending=new uo,[4,this.operation()];case 4:return t.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return t.sent(),this.process(!0).catch(function(){}),[3,7];case 6:return n=t.sent(),this.retryPolicy(n)?this.process(!1).catch(function(){}):this.stop(),[3,7];case 7:return[2]}var e})})},YM.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t},YM);function YM(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,i<(this.nextErrorWaitInterval=r))throw new Error("Proactive refresh lower bound greater than upper bound!")}function XM(){return self.grecaptcha}function $M(t){if(!KM(t).activated)throw UM.create("use-before-activation",{appName:t.name})}function JM(t,s){var a=t.url,u=t.body;return Yi(this,void 0,void 0,function(){var e,n,r,i,o;return Xi(this,function(t){switch(t.label){case 0:n={"Content-Type":"application/json"},(e=s.getImmediate({optional:!0}))&&(n["X-Firebase-Client"]=e.getPlatformInfoString()),n={method:"POST",body:JSON.stringify(u),headers:n},t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(a,n)];case 2:return o=t.sent(),[3,4];case 3:throw n=t.sent(),UM.create("fetch-network-error",{originalErrorMessage:n.message});case 4:if(200!==o.status)throw UM.create("fetch-status-error",{httpStatus:o.status});t.label=5;case 5:return t.trys.push([5,7,,8]),[4,o.json()];case 6:return r=t.sent(),[3,8];case 7:throw i=t.sent(),UM.create("fetch-parse-error",{originalErrorMessage:i.message});case 8:if(!(o=r.ttl.match(/^([\d.]+)(s)$/))||!o[2]||isNaN(Number(o[1])))throw UM.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+r.ttl});return i=1e3*Number(o[1]),o=Date.now(),[2,{token:r.attestationToken,expireTimeMillis:o+i,issuedAtTimeMillis:o}]}})})}function ZM(t,e){var n=t.options,r=n.projectId,t=n.appId,n=n.apiKey;return{url:HM+"/projects/"+r+"/apps/"+t+":"+zM+"?key="+n,body:{debug_token:e}}}var t2="firebase-app-check-database",e2=1,n2="firebase-app-check-store",r2="debug-token",i2=null;function o2(){return i2=i2||new Promise(function(e,n){try{var t=indexedDB.open(t2,e2);t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){n(UM.create("storage-open",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(n2,{keyPath:"compositeKey"})}}catch(t){n(UM.create("storage-open",{originalErrorMessage:t.message}))}})}function s2(n,o){return Yi(this,void 0,void 0,function(){var r,e,i;return Xi(this,function(t){switch(t.label){case 0:return[4,o2()];case 1:return e=t.sent(),r=e.transaction(n2,"readwrite"),e=r.objectStore(n2),i=e.put({compositeKey:n,value:o}),[2,new Promise(function(e,n){i.onsuccess=function(t){e()},r.onerror=function(t){n(UM.create("storage-set",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))}})]}})})}function a2(n){return Yi(this,void 0,void 0,function(){var r,e,i;return Xi(this,function(t){switch(t.label){case 0:return[4,o2()];case 1:return e=t.sent(),r=e.transaction(n2,"readonly"),e=r.objectStore(n2),i=e.get(n),[2,new Promise(function(e,n){i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)},r.onerror=function(t){n(UM.create("storage-get",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))}})]}})})}function u2(t){return t.options.appId+"-"+t.name}var c2=new fs("@firebase/app-check");function h2(r){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:if(!mo())return[3,5];e=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a2(u2(r))];case 2:return e=t.sent(),[3,4];case 3:return n=t.sent(),c2.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}})})}function l2(t,e){return mo()?s2(u2(t),e).catch(function(t){c2.warn("Failed to write token to indexeddb. Error: "+t)}):Promise.resolve()}function f2(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:e=void 0,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,a2(r2)];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return e?[2,e]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}),s2(r2,e).catch(function(t){return c2.warn("Failed to persist debug token to indexeddb. Error: "+t)}),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}})})}var p2={error:"UNKNOWN_ERROR"};function d2(l,f,p){return void 0===p&&(p=!1),Yi(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h;return Xi(this,function(t){switch(t.label){case 0:return $M(l),n=KM(l),r=n.token,i=void 0,r?[3,2]:[4,n.cachedTokenPromise];case 1:(o=t.sent())&&m2(o)&&(r=o,WM(l,Qi(Qi({},n),{token:r})),y2(l,{token:r.token})),t.label=2;case 2:return!p&&r&&m2(r)?[2,{token:r.token}]:BM.enabled?(s=JM,a=ZM,u=[l],[4,function(){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){if((e=BM).enabled&&e.token)return[2,e.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")})})}()]):[3,6];case 3:return[4,s.apply(void 0,[a.apply(void 0,u.concat([t.sent()])),f])];case 4:return c=t.sent(),[4,l2(l,c)];case 5:return t.sent(),WM(l,Qi(Qi({},n),{token:c})),[2,{token:c.token}];case 6:return t.trys.push([6,8,,9]),[4,n.provider.getToken()];case 7:return r=t.sent(),[3,9];case 8:return c=t.sent(),c2.error(c),i=c,[3,9];case 9:return r?[3,10]:(e=i,h={token:function(t){return oo.encodeString(JSON.stringify(t),!1)}(p2),error:e},[3,12]);case 10:return h={token:r.token},WM(l,Qi(Qi({},n),{token:r})),[4,l2(l,r)];case 11:t.sent(),t.label=12;case 12:return y2(l,h),[2,h]}var e})})}function g2(t,e,n,r,i){var o,s=KM(t),n={next:r,error:i,type:n},n=Qi(Qi({},s),{tokenObservers:Zi(Zi([],s.tokenObservers),[n])});n.tokenRefresher||(e=function(n,r){var t=this;return new QM(function(){return Yi(t,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return KM(n).token?[3,2]:[4,d2(n,r)];case 1:return e=t.sent(),[3,4];case 2:return[4,d2(n,r,!0)];case 3:e=t.sent(),t.label=4;case 4:if(e.error)throw e.error;return[2]}})})},function(){return!0},function(){var t=KM(n);if(t.token){var e=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5,t=t.token.expireTimeMillis-3e5,e=Math.min(e,t);return Math.max(0,e-Date.now())}return 0},GM.RETRIAL_MIN_WAIT,GM.RETRIAL_MAX_WAIT)}(t,e),n.tokenRefresher=e),!n.tokenRefresher.isRunning()&&s.isTokenAutoRefreshEnabled&&n.tokenRefresher.start(),s.token&&m2(s.token)?(o=s.token,Promise.resolve().then(function(){return r({token:o.token})}).catch(function(){})):null==s.token&&s.cachedTokenPromise.then(function(t){t&&m2(t)&&r({token:t.token})}).catch(function(){}),WM(t,n)}function v2(t,e){var n=KM(t),r=n.tokenObservers.filter(function(t){return t.next!==e});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),WM(t,Qi(Qi({},n),{tokenObservers:r}))}function y2(t,e){for(var n=0,r=KM(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(t){}}}function m2(t){return 0<t.expireTimeMillis-Date.now()}var b2="https://www.google.com/recaptcha/api.js";function _2(e,n){var t=KM(e),r=new uo;WM(e,Qi(Qi({},t),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+e.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var s=XM();return s?s.ready(function(){w2(e,n,s,i),r.resolve(s)}):(t=function(){var t=XM();if(!t)throw new Error("no recaptcha");t.ready(function(){w2(e,n,t,i),r.resolve(t)})},(o=document.createElement("script")).src=""+b2,o.onload=t,document.head.appendChild(o)),r.promise}function w2(t,e,n,r){r=n.render(r,{sitekey:e,size:"invisible"}),e=KM(t);WM(t,Qi(Qi({},e),{reCAPTCHAState:Qi(Qi({},e.reCAPTCHAState),{widgetId:r})}))}var I2=(T2.prototype.getToken=function(){return Yi(this,void 0,void 0,function(){var i;return Xi(this,function(t){switch(t.label){case 0:if(!this._app||!this._platformLoggerProvider)throw UM.create("use-before-activation",{appName:""});t.label=1;case 1:return t.trys.push([1,3,,4]),[4,function(i){return Yi(this,void 0,void 0,function(){var r;return Xi(this,function(t){switch(t.label){case 0:return $M(i),[4,KM(i).reCAPTCHAState.initialized.promise];case 1:return r=t.sent(),[2,new Promise(function(t,e){var n=KM(i).reCAPTCHAState;r.ready(function(){t(r.execute(n.widgetId,{action:"fire_app_check"}))})})]}})})}(this._app)];case 2:return i=t.sent(),[3,4];case 3:throw t.sent(),UM.create("recaptcha-error");case 4:return[2,JM((e=this._app,n=(r=e.options).projectId,e=r.appId,r=r.apiKey,{url:HM+"/projects/"+n+"/apps/"+e+":exchangeRecaptchaToken?key="+r,body:{recaptcha_token:i}}),this._platformLoggerProvider)]}var e,n,r})})},T2.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,_2(t,this._siteKey).catch(function(){})},T2);function T2(t){this._siteKey=t}var E2=(S2.prototype.getToken=function(){return Yi(this,void 0,void 0,function(){var e,n;return Xi(this,function(t){switch(t.label){case 0:if(!this._app)throw UM.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return e=t.sent(),n=function(t){t=Ro(t).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null}(e.token),n=null!==n&&n<Date.now()&&0<n?1e3*n:Date.now(),[2,Qi(Qi({},e),{issuedAtTimeMillis:n})]}})})},S2.prototype.initialize=function(t){this._app=t},S2);function S2(t){this._customProviderOptions=t}function k2(a,u){return{app:a,activate:function(t,e){return function(e,t,n,r){var i=KM(e);if(i.activated)throw UM.create("already-activated",{appName:e.name});(i=Qi(Qi({},i),{activated:!0})).cachedTokenPromise=h2(e).then(function(t){return t&&m2(t)&&WM(e,Qi(Qi({},KM(e)),{token:t})),t}),i.provider="string"==typeof t?new I2(t):t instanceof I2||t instanceof E2?t:new E2({getToken:t.getToken}),i.isTokenAutoRefreshEnabled=void 0===r?e.automaticDataCollectionEnabled:r,WM(e,i),i.provider.initialize(e,n)}(a,t,u,e)},setTokenAutoRefreshEnabled:function(t){return n=t,(t=KM(e=a)).tokenRefresher&&(!0===n?t.tokenRefresher.start():t.tokenRefresher.stop()),void WM(e,Qi(Qi({},t),{isTokenAutoRefreshEnabled:n}));var e,n},getToken:function(t){return function(n,r,i){return Yi(this,void 0,void 0,function(){var e;return Xi(this,function(t){switch(t.label){case 0:return[4,d2(n,r,i)];case 1:if((e=t.sent()).error)throw e.error;return[2,{token:e.token}]}})})}(a,u,t)},onTokenChanged:function(t,e,n){return r=a,i=u,o=e,s=function(){},e=function(){},s=null!=(t=t).next?t.next.bind(t):t,null!=t.error?e=t.error.bind(t):o&&(e=o),g2(r,i,"EXTERNAL",s,e),function(){return v2(r,s)};var r,i,o,s},INTERNAL:{delete:function(){for(var t=0,e=KM(a).tokenObservers;t<e.length;t++){var n=e[t];v2(a,n.next)}return Promise.resolve()}}}}var C2,A2,N2,R2,P2="app-check-internal";return(C2=Jl).INTERNAL.registerComponent(new Zo("appCheck",function(t){return k2(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))},"PUBLIC").setServiceProps({ReCaptchaV3Provider:I2,CustomProvider:E2}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(t,e,n){t.getProvider(P2).initialize()})),C2.INTERNAL.registerComponent(new Zo(P2,function(t){var e,n,r=t.getProvider("app").getImmediate(),t=t.getProvider("platform-logger");return e=r,n=t,{getToken:function(t){return d2(e,n,t)},addTokenListener:function(t){return g2(e,n,"INTERNAL",t)},removeTokenListener:function(t){return v2(e,t)}}},"PUBLIC").setInstantiationMode("EXPLICIT")),C2.registerVersion("@firebase/app-check","0.3.1"),"string"!=typeof(R2=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}()).FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==R2.FIREBASE_APPCHECK_DEBUG_TOKEN||((A2=BM).enabled=!0,N2=new uo,A2.token=N2,"string"==typeof R2.FIREBASE_APPCHECK_DEBUG_TOKEN?N2.resolve(R2.FIREBASE_APPCHECK_DEBUG_TOKEN):N2.resolve(f2())),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Jl.registerVersion("firebase","8.9.1","cdn"),Jl});
//# sourceMappingURL=firebase.js.map
