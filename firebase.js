!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!_(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<b.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,_,b,w;(qt="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in qt,p="Symbol"in qt&&"iterator"in Symbol,d="FileReader"in qt&&"Blob"in qt&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in qt,(y="ArrayBuffer"in qt)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},_=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},qt.Headers=s,qt.Request=c,qt.Response=l,qt.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},qt.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function C(t){return q.call(t).slice(8,-1)}function N(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function A(t){return H(N(t))}function k(t){return"object"==typeof t?null!==t:"function"==typeof t}function O(t,e){if(!k(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!k(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!k(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function P(t,e){return W.call(t,e)}function R(t){return G?z.createElement(t):{}}function D(t){if(!k(t))throw TypeError(String(t)+" is not an object");return t}function x(e,n){try{$(M,e,n)}catch(t){M[e]=n}return n}var L=function(t){return t&&t.Math==Math&&t},M=L("object"==typeof globalThis&&globalThis)||L("object"==typeof window&&window)||L("object"==typeof self&&self)||L("object"==typeof E&&E)||function(){return this}()||Function("return this")(),F=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),j={}.propertyIsEnumerable,U=Object.getOwnPropertyDescriptor,V={f:U&&!j.call({1:2},1)?function(t){t=U(this,t);return!!t&&t.enumerable}:j},q={}.toString,B="".split,H=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==C(t)?B.call(t,""):Object(t)}:Object,W={}.hasOwnProperty,z=M.document,G=k(z)&&k(z.createElement),K=!F&&!T(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a}),Q=Object.getOwnPropertyDescriptor,Y={f:F?Q:function(t,e){if(t=A(t),e=O(e,!0),K)try{return Q(t,e)}catch(t){}if(P(t,e))return S(!V.f.call(t,e),t[e])}},X=Object.defineProperty,J={f:F?X:function(t,e,n){if(D(t),e=O(e,!0),D(n),K)try{return X(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},$=F?function(t,e,n){return J.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},Z="__core-js_shared__",tt=M[Z]||x(Z,{}),et=Function.toString;"function"!=typeof tt.inspectSource&&(tt.inspectSource=function(t){return et.call(t)});function nt(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++yt+gt).toString(36)}var rt,it,ot,st,at,ut,ct,ht,lt=tt.inspectSource,ft=M.WeakMap,pt="function"==typeof ft&&/native code/.test(lt(ft)),dt=!1,vt=I(function(t){(t.exports=function(t,e){return tt[t]||(tt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),yt=0,gt=Math.random(),mt=vt("keys"),_t=function(t){return mt[t]||(mt[t]=nt(t))},bt={},wt=M.WeakMap;ct=pt?(rt=tt.state||(tt.state=new wt),it=rt.get,ot=rt.has,st=rt.set,at=function(t,e){return e.facade=t,st.call(rt,t,e),e},ut=function(t){return it.call(rt,t)||{}},function(t){return ot.call(rt,t)}):(ht=_t("state"),bt[ht]=!0,at=function(t,e){return e.facade=t,$(t,ht,e),e},ut=function(t){return P(t,ht)?t[ht]:{}},function(t){return P(t,ht)});function Et(t){return"function"==typeof t?t:void 0}function It(t,e){return arguments.length<2?Et(Lt[t])||Et(M[t]):Lt[t]&&Lt[t][e]||M[t]&&M[t][e]}function Tt(t){return isNaN(t=+t)?0:(0<t?Ft:Mt)(t)}function St(t){return 0<t?jt(Tt(t),9007199254740991):0}function Ct(t,e){var n,r=A(t),i=0,o=[];for(n in r)!P(bt,n)&&P(r,n)&&o.push(n);for(;e.length>i;)P(r,n=e[i++])&&(~Bt(o,n)||o.push(n));return o}function Nt(t,e){for(var n=Kt(e),r=J.f,i=Y.f,o=0;o<n.length;o++){var s=n[o];P(t,s)||r(t,s,i(e,s))}}function At(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?M:a?M[o]||x(o,{}):(M[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=te(u,n))&&i.value:u[n],!Zt(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Nt(r,i)}(t.sham||i&&i.sham)&&$(r,"sham",!0),xt(u,n,r,t)}}function kt(t){return Object(N(t))}function Ot(){}function Pt(t){return"<script>"+t+"</"+ce+">"}var Rt,Dt={set:at,get:ut,has:ct,enforce:function(t){return ct(t)?ut(t):at(t,{})},getterFor:function(n){return function(t){var e;if(!k(t)||(e=ut(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},xt=I(function(t){var e=Dt.get,a=Dt.enforce,u=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,s=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||P(n,"name")||$(n,"name",e),(r=a(n)).source||(r.source=u.join("string"==typeof e?e:""))),t!==M?(i?!s&&t[e]&&(o=!0):delete t[e],o?t[e]=n:$(t,e,n)):o?t[e]=n:x(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||lt(this)})}),Lt=M,Mt=Math.ceil,Ft=Math.floor,jt=Math.min,Ut=Math.max,Vt=Math.min,qt=function(a){return function(t,e,n){var r,i=A(t),o=St(i.length),s=function(t,e){t=Tt(t);return t<0?Ut(t+e,0):Vt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},Bt={includes:qt(!0),indexOf:qt(!1)}.indexOf,Ht=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Wt=Ht.concat("length","prototype"),zt={f:Object.getOwnPropertyNames||function(t){return Ct(t,Wt)}},Gt={f:Object.getOwnPropertySymbols},Kt=It("Reflect","ownKeys")||function(t){var e=zt.f(D(t)),n=Gt.f;return n?e.concat(n(t)):e},Qt=/#|\.prototype\./,L=function(t,e){t=Xt[Yt(t)];return t==$t||t!=Jt&&("function"==typeof e?T(e):!!e)},Yt=L.normalize=function(t){return String(t).replace(Qt,".").toLowerCase()},Xt=L.data={},Jt=L.NATIVE="N",$t=L.POLYFILL="P",Zt=L,te=Y.f,E=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),ee=_t("IE_PROTO"),ne=Object.prototype,re=E?Object.getPrototypeOf:function(t){return t=kt(t),P(t,ee)?t[ee]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?ne:null},ie=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return D(t),function(t){if(!k(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),oe=Object.keys||function(t){return Ct(t,Ht)},se=F?Object.defineProperties:function(t,e){D(t);for(var n,r=oe(e),i=r.length,o=0;o<i;)J.f(t,n=r[o++],e[n]);return t},ae=It("document","documentElement"),ue="prototype",ce="script",he=_t("IE_PROTO"),le=function(){try{Rt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;le=Rt?function(t){t.write(Pt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Rt):((t=R("iframe")).style.display="none",ae.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(Pt("document.F=Object")),t.close(),t.F);for(var e=Ht.length;e--;)delete le[ue][Ht[e]];return le()};bt[he]=!0;function fe(t){return P(me,t)||(ge&&P(_e,t)?me[t]=_e[t]:me[t]=be("Symbol."+t)),me[t]}function pe(t){return void 0!==t&&(we.Array===t||Ie[Ee]===t)}function de(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function ve(r,i,t){if(de(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}var ye=Object.create||function(t,e){var n;return null!==t?(Ot[ue]=D(t),n=new Ot,Ot[ue]=null,n[he]=t):n=le(),void 0===e?n:se(n,e)},ge=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),j=ge&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,me=vt("wks"),_e=M.Symbol,be=j?_e:_e&&_e.withoutSetter||nt,we={},Ee=fe("iterator"),Ie=Array.prototype,Z={};Z[fe("toStringTag")]="z";function Te(t){if(null!=t)return t[Pe]||t["@@iterator"]||we[Oe(t)]}function Se(t){var e=t.return;return void 0!==e&&D(e.call(t)).value}function Ce(t,e){this.stopped=t,this.result=e}function Ne(t,e,n){function r(t){return o&&Se(o),new Ce(!0,t)}function i(t){return f?(D(t),d?v(t[0],t[1],r):v(t[0],t[1])):d?v(t,r):v(t)}var o,s,a,u,c,h,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),p=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),v=ve(e,l,1+f+d);if(p)o=t;else{if("function"!=typeof(p=Te(t)))throw TypeError("Target is not iterable");if(pe(p)){for(s=0,a=St(t.length);s<a;s++)if((u=i(t[s]))&&u instanceof Ce)return u;return new Ce(!1)}o=p.call(t)}for(c=o.next;!(h=c.call(o)).done;){try{u=i(h.value)}catch(t){throw Se(o),t}if("object"==typeof u&&u&&u instanceof Ce)return u}return new Ce(!1)}var ft="[object z]"===String(Z),Ae=fe("toStringTag"),ke="Arguments"==C(function(){return arguments}()),Oe=ft?C:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Ae))?t:ke?C(e):"Object"==(t=C(e))&&"function"==typeof e.callee?"Arguments":t},Pe=fe("iterator"),Re=function(t,e){var n=this;if(!(n instanceof Re))return new Re(t,e);ie&&(n=ie(new Error(void 0),re(n))),void 0!==e&&$(n,"message",String(e));e=[];return Ne(t,e.push,{that:e}),$(n,"errors",e),n};Re.prototype=ye(Error.prototype,{constructor:S(5,Re),message:S(5,""),name:S(5,"AggregateError")}),At({global:!0},{AggregateError:Re});pt=ft?{}.toString:function(){return"[object "+Oe(this)+"]"};ft||xt(Object.prototype,"toString",pt,{unsafe:!0});function De(t,e,n){for(var r in e)xt(t,r,e[r],n);return t}function xe(t,e,n){t&&!P(t=n?t:t.prototype,Ue)&&je(t,Ue,{configurable:!0,value:e})}function Le(t){var e=It(t),t=J.f;F&&e&&!e[Ve]&&t(e,Ve,{configurable:!0,get:function(){return this}})}function Me(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}var Fe=M.Promise,je=J.f,Ue=fe("toStringTag"),Ve=fe("species"),qe=fe("iterator"),Be=!1;try{var He=0,We={next:function(){return{done:!!He++}},return:function(){Be=!0}};We[qe]=function(){return this},Array.from(We,function(){throw 2})}catch(ia){}function ze(t,e){if(!e&&!Be)return!1;var n=!1;try{var r={};r[qe]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Ge(t,e){var n;return void 0===(t=D(t).constructor)||null==(n=D(t)[Xe])?e:de(n)}function Ke(t){var e;nn.hasOwnProperty(t)&&(e=nn[t],delete nn[t],e())}function Qe(t){return function(){Ke(t)}}var Ye,Xe=fe("species"),wt=It("navigator","userAgent")||"",qt=/(iphone|ipod|ipad).*applewebkit/i.test(wt),Je="process"==C(M.process),$e=M.location,L=M.setImmediate,E=M.clearImmediate,Ze=M.process,Z=M.MessageChannel,tn=M.Dispatch,en=0,nn={},rn="onreadystatechange",ft=function(t){Ke(t.data)},pt=function(t){M.postMessage(t+"",$e.protocol+"//"+$e.host)};L&&E||(L=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return nn[++en]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ye(en),en},E=function(t){delete nn[t]},Je?Ye=function(t){Ze.nextTick(Qe(t))}:tn&&tn.now?Ye=function(t){tn.now(Qe(t))}:Z&&!qt?(pn=(Z=new Z).port2,Z.port1.onmessage=ft,Ye=ve(pn.postMessage,pn,1)):M.addEventListener&&"function"==typeof postMessage&&!M.importScripts&&$e&&"file:"!==$e.protocol&&!T(pt)?(Ye=pt,M.addEventListener("message",ft,!1)):Ye=rn in R("script")?function(t){ae.appendChild(R("script"))[rn]=function(){ae.removeChild(this),Ke(t)}}:function(t){setTimeout(Qe(t),0)});var on,sn,an,un,cn,hn,ln,fn,pn={set:L,clear:E},pt=Y.f,dn=pn.set,ft=M.MutationObserver||M.WebKitMutationObserver,L=M.document,vn=M.process,E=M.Promise,pt=pt(M,"queueMicrotask"),pt=pt&&pt.value;pt||(on=function(){var t,e;for(Je&&(t=vn.domain)&&t.exit();sn;){e=sn.fn,sn=sn.next;try{e()}catch(t){throw sn?un():an=void 0,t}}an=void 0,t&&t.enter()},un=!qt&&!Je&&ft&&L?(cn=!0,hn=L.createTextNode(""),new ft(on).observe(hn,{characterData:!0}),function(){hn.data=cn=!cn}):E&&E.resolve?(ln=E.resolve(void 0),fn=ln.then,function(){fn.call(ln,on)}):Je?function(){vn.nextTick(on)}:function(){dn.call(M,on)});function yn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=de(n),this.reject=de(r)}function gn(t,e){return D(t),k(e)&&e.constructor===t?e:((0,(t=bn.f(t)).resolve)(e),t.promise)}function mn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var _n=pt||function(t){t={fn:t,next:void 0};an&&(an.next=t),sn||(sn=t,un()),an=t},bn={f:function(t){return new yn(t)}},pt=M.process,pt=pt&&pt.versions,pt=pt&&pt.v8;pt?Zn=(Kn=pt.split("."))[0]+Kn[1]:wt&&(!(Kn=wt.match(/Edge\/(\d+)/))||74<=Kn[1])&&(Kn=wt.match(/Chrome\/(\d+)/))&&(Zn=Kn[1]);function wn(t){var e;return!(!k(t)||"function"!=typeof(e=t.then))&&e}function En(l,f){var p;l.notified||(l.notified=!0,p=l.reactions,_n(function(){for(var t=l.value,e=1==l.state,n=0;p.length>n;){var r,i,o,s=p[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===l.rejection&&Xn(l),l.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(jn("Promise-chain cycle")):(i=wn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}l.reactions=[],l.notified=!1,f&&!l.rejection&&Qn(l)}))}function In(t,e,n){var r,i;Wn?((r=Un.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),M.dispatchEvent(r)):r={promise:e,reason:n},!zn&&(i=M["on"+t])?i(r):t===Gn&&function(t,e){var n=M.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Tn(e,n,r){return function(t){e(n,t,r)}}function Sn(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,En(t,!0))}var Cn,Nn,An,kn,On=Zn&&+Zn,Pn=pn.set,Rn=fe("species"),Dn="Promise",xn=Dt.get,Ln=Dt.set,Mn=Dt.getterFor(Dn),Fn=Fe,jn=M.TypeError,Un=M.document,Vn=M.process,qn=It("fetch"),Bn=bn.f,Hn=Bn,Wn=!!(Un&&Un.createEvent&&M.dispatchEvent),zn="function"==typeof PromiseRejectionEvent,Gn="unhandledrejection",wt=Zt(Dn,function(){if(!(lt(Fn)!==String(Fn))){if(66===On)return!0;if(!Je&&!zn)return!0}if(51<=On&&/native code/.test(Fn))return!1;function t(t){t(function(){},function(){})}var e=Fn.resolve(1);return(e.constructor={})[Rn]=t,!(e.then(function(){})instanceof t)}),Kn=wt||!ze(function(t){Fn.all(t).catch(function(){})}),Qn=function(r){Pn.call(M,function(){var t,e=r.facade,n=r.value;if(Yn(r)&&(t=mn(function(){Je?Vn.emit("unhandledRejection",n,e):In(Gn,e,n)}),r.rejection=Je||Yn(r)?2:1,t.error))throw t.value})},Yn=function(t){return 1!==t.rejection&&!t.parent},Xn=function(e){Pn.call(M,function(){var t=e.facade;Je?Vn.emit("rejectionHandled",t):In("rejectionhandled",t,e.value)})},Jn=function(n,t,e){if(!n.done){n.done=!0,e&&(n=e);try{if(n.facade===t)throw jn("Promise can't be resolved itself");var r=wn(t);r?_n(function(){var e={done:!1};try{r.call(t,Tn(Jn,e,n),Tn(Sn,e,n))}catch(t){Sn(e,t,n)}}):(n.value=t,n.state=1,En(n,!1))}catch(t){Sn({done:!1},t,n)}}};wt&&(Fn=function(t){Me(this,Fn,Dn),de(t),Cn.call(this);var e=xn(this);try{t(Tn(Jn,e),Tn(Sn,e))}catch(t){Sn(e,t)}},(Cn=function(){Ln(this,{type:Dn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=De(Fn.prototype,{then:function(t,e){var n=Mn(this),r=Bn(Ge(this,Fn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Je?Vn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&En(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Nn=function(){var t=new Cn,e=xn(t);this.promise=t,this.resolve=Tn(Jn,e),this.reject=Tn(Sn,e)},bn.f=Bn=function(t){return t===Fn||t===An?new Nn:Hn(t)},"function"==typeof Fe&&(kn=Fe.prototype.then,xt(Fe.prototype,"then",function(t,e){var n=this;return new Fn(function(t,e){kn.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof qn&&At({global:!0,enumerable:!0,forced:!0},{fetch:function(){return gn(Fn,qn.apply(M,arguments))}}))),At({global:!0,wrap:!0,forced:wt},{Promise:Fn}),xe(Fn,Dn,!1),Le(Dn),An=It(Dn),At({target:Dn,stat:!0,forced:wt},{reject:function(t){var e=Bn(this);return e.reject.call(void 0,t),e.promise}}),At({target:Dn,stat:!0,forced:wt},{resolve:function(t){return gn(this,t)}}),At({target:Dn,stat:!0,forced:Kn},{all:function(t){var a=this,e=Bn(a),u=e.resolve,c=e.reject,n=mn(function(){var r=de(a.resolve),i=[],o=0,s=1;Ne(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=Bn(n),i=r.reject,e=mn(function(){var e=de(n.resolve);Ne(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),At({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=bn.f(a),u=e.resolve,n=e.reject,r=mn(function(){var r=de(a.resolve),i=[],o=0,s=1;Ne(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});var $n="No one promise resolved";At({target:"Promise",stat:!0},{any:function(t){var u=this,e=bn.f(u),c=e.resolve,h=e.reject,n=mn(function(){var r=de(u.resolve),i=[],o=0,s=1,a=!1;Ne(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(It("AggregateError"))(i,$n)))})}),--s||h(new(It("AggregateError"))(i,$n))});return n.error&&h(n.value),e.promise}});var Zn=!!Fe&&T(function(){Fe.prototype.finally.call({then:function(){}},function(){})});At({target:"Promise",proto:!0,real:!0,forced:Zn},{finally:function(e){var n=Ge(this,It("Promise")),t="function"==typeof e;return this.then(t?function(t){return gn(n,e()).then(function(){return t})}:e,t?function(t){return gn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof Fe||Fe.prototype.finally||xt(Fe.prototype,"finally",It("Promise").prototype.finally);pn=function(o){return function(t,e){var n,r=String(N(t)),i=Tt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},wt={codeAt:pn(!1),charAt:pn(!0)},Kn=fe("iterator"),Zn=!1;[].keys&&("next"in(yr=[].keys())?(Dr=re(re(yr)))!==Object.prototype&&(Mr=Dr):Zn=!0),null==Mr&&(Mr={}),P(Mr,Kn)||$(Mr,Kn,function(){return this});function tr(){return this}function er(){return this}function nr(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!or&&t in f)return f[t];switch(t){case"keys":case ar:case ur:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=ye(rr,{next:S(1,n)}),xe(t,e,!1),we[e]=tr}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[sr]||f["@@iterator"]||i&&f[i],d=!or&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=re(r.call(new t)),ir!==Object.prototype&&t.next&&(re(t)!==ir&&(ie?ie(t,ir):"function"!=typeof t[sr]&&$(t,sr,er)),xe(t,h,!0))),i==ar&&p&&p.name!==ar&&(l=!0,d=function(){return p.call(this)}),f[sr]!==d&&$(f,sr,d),we[e]=d,i)if(u={values:a(ar),keys:o?d:a("keys"),entries:a(ur)},s)for(c in u)!or&&!l&&c in f||xt(f,c,u[c]);else At({target:e,proto:!0,forced:or||l},u);return u}var pn={IteratorPrototype:Mr,BUGGY_SAFARI_ITERATORS:Zn},rr=pn.IteratorPrototype,ir=pn.IteratorPrototype,or=pn.BUGGY_SAFARI_ITERATORS,sr=fe("iterator"),ar="values",ur="entries",cr=wt.charAt,hr="String Iterator",lr=Dt.set,fr=Dt.getterFor(hr);nr(String,"String",function(t){lr(this,{type:hr,string:String(t),index:0})},function(){var t=fr(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=cr(e,n),t.index+=n.length,{value:n,done:!1})});var pr={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},dr=fe("unscopables"),vr=Array.prototype;null==vr[dr]&&J.f(vr,dr,{configurable:!0,value:ye(null)});var yr=function(t){vr[dr][t]=!0},gr="Array Iterator",mr=Dt.set,_r=Dt.getterFor(gr),br=nr(Array,"Array",function(t,e){mr(this,{type:gr,target:A(t),index:0,kind:e})},function(){var t=_r(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");we.Arguments=we.Array,yr("keys"),yr("values"),yr("entries");var wr,Er=fe("iterator"),Ir=fe("toStringTag"),Tr=br.values;for(wr in pr){var Sr=M[wr],Cr=Sr&&Sr.prototype;if(Cr){if(Cr[Er]!==Tr)try{$(Cr,Er,Tr)}catch(ia){Cr[Er]=Tr}if(Cr[Ir]||$(Cr,Ir,wr),pr[wr])for(var Nr in br)if(Cr[Nr]!==br[Nr])try{$(Cr,Nr,br[Nr])}catch(ia){Cr[Nr]=br[Nr]}}}Lt.Promise;At({target:"Promise",stat:!0},{try:function(t){var e=bn.f(this),t=mn(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});function Ar(t,e){var n;return Or(t)&&("function"==typeof(n=t.constructor)&&(n===Array||Or(n.prototype))||k(n)&&null===(n=n[Pr]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function kr(t){throw t}var Or=Array.isArray||function(t){return"Array"==C(t)},Pr=fe("species"),Rr=[].push,Dr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=7==f,_=5==f||g;return function(t,e,n,r){for(var i,o,s=kt(t),a=H(s),u=ve(e,n,3),c=St(a.length),h=0,r=r||Ar,l=p?r(t,c):d||m?r(t,0):void 0;h<c;h++)if((_||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Rr.call(l,i)}else switch(f){case 4:return!1;case 7:Rr.call(l,i)}return g?-1:v||y?y:l}},Kn={forEach:Dr(0),map:Dr(1),filter:Dr(2),some:Dr(3),every:Dr(4),find:Dr(5),findIndex:Dr(6),filterOut:Dr(7)},xr=Object.defineProperty,Lr={},Mr=function(t,e){if(P(Lr,t))return Lr[t];var n=[][t],r=!!P(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=P(e,0)?e[0]:kr,o=P(e,1)?e[1]:void 0;return Lr[t]=!!n&&!T(function(){if(r&&!F)return 1;var t={length:-1};r?xr(t,1,{enumerable:!0,get:kr}):t[1]=1,n.call(t,i,o)})},Fr=Kn.find,Zn="find",jr=!0,pn=Mr(Zn);Zn in[]&&Array(1)[Zn](function(){jr=!1}),At({target:"Array",proto:!0,forced:jr||!pn},{find:function(t,e){return Fr(this,t,1<arguments.length?e:void 0)}}),yr(Zn);var Ur=Function.call,wt=function(t,e,n){return ve(Ur,M[t].prototype[e],n)},Vr=(wt("Array","find"),Kn.findIndex),Dr="findIndex",qr=!0,pn=Mr(Dr);Dr in[]&&Array(1)[Dr](function(){qr=!1}),At({target:"Array",proto:!0,forced:qr||!pn},{findIndex:function(t,e){return Vr(this,t,1<arguments.length?e:void 0)}}),yr(Dr);function Br(t,e,n){(e=O(e))in t?J.f(t,e,S(0,n)):t[e]=n}wt("Array","findIndex");Zn=!ze(function(t){Array.from(t)});At({target:"Array",stat:!0,forced:Zn},{from:function(t,e,n){var r,i,o,s,a,u,c=kt(t),h="function"==typeof this?this:Array,t=arguments.length,l=1<t?e:void 0,f=void 0!==l,e=Te(c),p=0;if(f&&(l=ve(l,2<t?n:void 0,2)),null==e||h==Array&&pe(e))for(i=new h(r=St(c.length));p<r;p++)u=f?l(c[p],p):c[p],Br(i,p,u);else for(a=(s=e.call(c)).next,i=new h;!(o=a.call(s)).done;p++)u=f?function(e,t,n,r){try{return r?t(D(n)[0],n[1]):t(n)}catch(t){throw Se(e),t}}(s,l,[o.value,p],!0):o.value,Br(i,p,u);return i.length=p,i}});Lt.Array.from;var Hr,Wr,zr=Kn.some,pn=!!(Wr=[]["some"])&&T(function(){Wr.call(null,Hr||function(){throw 1},1)}),yr=Mr("some");At({target:"Array",proto:!0,forced:!pn||!yr},{some:function(t,e){return zr(this,t,1<arguments.length?e:void 0)}});wt("Array","some");function Gr(t){return!!k(t)&&(t=Oe(t),P(ti,t)||P(ei,t))}var Kr,Dr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Zn=J.f,Qr=M.Int8Array,Yr=Qr&&Qr.prototype,Mr=M.Uint8ClampedArray,pn=Mr&&Mr.prototype,Xr=Qr&&re(Qr),Jr=Yr&&re(Yr),yr=Object.prototype,Mr=(yr.isPrototypeOf,fe("toStringTag")),$r=nt("TYPED_ARRAY_TAG"),Zr=Dr&&!!ie&&"Opera"!==Oe(M.opera),Dr=!1,ti={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},ei={BigInt64Array:8,BigUint64Array:8};for(Kr in ti)M[Kr]||(Zr=!1);if((!Zr||"function"!=typeof Xr||Xr===Function.prototype)&&(Xr=function(){throw TypeError("Incorrect invocation")},Zr))for(Kr in ti)M[Kr]&&ie(M[Kr],Xr);if((!Zr||!Jr||Jr===yr)&&(Jr=Xr.prototype,Zr))for(Kr in ti)M[Kr]&&ie(M[Kr].prototype,Jr);if(Zr&&re(pn)!==Jr&&ie(pn,Jr),F&&!P(Jr,Mr))for(Kr in Dr=!0,Zn(Jr,Mr,{get:function(){return k(this)?this[$r]:void 0}}),ti)M[Kr]&&$(M[Kr],$r,Kr);var pn=function(t){if(Gr(t))return t;throw TypeError("Target is not a typed array")},Zn=function(t,e,n){if(F){if(n)for(var r in ti){var i=M[r];i&&P(i.prototype,t)&&delete i.prototype[t]}Jr[t]&&!n||xt(Jr,t,!n&&Zr&&Yr[t]||e)}},Mr=fe("iterator"),Dr=M.Uint8Array,ni=br.values,ri=br.keys,ii=br.entries,oi=pn,pn=Zn,Zn=Dr&&Dr.prototype[Mr],Dr=!!Zn&&("values"==Zn.name||null==Zn.name),Zn=function(){return ni.call(oi(this))};pn("entries",function(){return ii.call(oi(this))}),pn("keys",function(){return ri.call(oi(this))}),pn("values",Zn,!Dr),pn(Mr,Zn,!Dr);var si=Object.assign,ai=Object.defineProperty,Zn=!si||T(function(){if(F&&1!==si({b:1},si(ai({},"a",{enumerable:!0,get:function(){ai(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=si({},t)[n]||oe(si({},e)).join("")!=r})?function(t){for(var e=kt(t),n=arguments.length,r=1,i=Gt.f,o=V.f;r<n;)for(var s,a=H(arguments[r++]),u=i?oe(a).concat(i(a)):oe(a),c=u.length,h=0;h<c;)s=u[h++],F&&!o.call(a,s)||(e[s]=a[s]);return e}:si;At({target:"Object",stat:!0,forced:Object.assign!==Zn},{assign:Zn});Lt.Object.assign;var ui=V.f,Dr=function(a){return function(t){for(var e,n=A(t),r=oe(n),i=r.length,o=0,s=[];o<i;)e=r[o++],F&&!ui.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},Zn={entries:Dr(!0),values:Dr(!1)},ci=Zn.entries;At({target:"Object",stat:!0},{entries:function(t){return ci(t)}});Lt.Object.entries;var hi=Zn.values;At({target:"Object",stat:!0},{values:function(t){return hi(t)}});Lt.Object.values;function li(t){if(k(e=t)&&(void 0!==(n=e[fi])?!!n:"RegExp"==C(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var fi=fe("match"),pi=fe("match"),Dr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[pi]=!1,"/./"[e](n)}catch(t){}}return!1};At({target:"String",proto:!0,forced:!Dr("includes")},{includes:function(t,e){return!!~String(N(this)).indexOf(li(t),1<arguments.length?e:void 0)}});wt("String","includes");var di,Zn=Y.f,vi="".startsWith,yi=Math.min,Dr=Dr("startsWith"),di=!(Dr||(!(di=Zn(String.prototype,"startsWith"))||di.writable));At({target:"String",proto:!0,forced:!di&&!Dr},{startsWith:function(t,e){var n=String(N(this));li(t);e=St(yi(1<arguments.length?e:void 0,n.length)),t=String(t);return vi?vi.call(n,t,e):n.slice(e,e+t.length)===t}});wt("String","startsWith");At({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(N(this)),n="",r=Tt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});wt("String","repeat");var gi,mi=fe("species"),_i=fe("isConcatSpreadable"),bi=9007199254740991,wi="Maximum allowed index exceeded",Dr=51<=On||!T(function(){var t=[];return t[_i]=!1,t.concat()[0]!==t}),wt=(gi="concat",51<=On||!T(function(){var t=[];return(t.constructor={})[mi]=function(){return{foo:1}},1!==t[gi](Boolean).foo}));At({target:"Array",proto:!0,forced:!Dr||!wt},{concat:function(){for(var t,e,n,r=kt(this),i=Ar(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(!k(t))return!1;var e=t[_i];return void 0!==e?!!e:Or(t)}(n=-1===s?r:arguments[s])){if(e=St(n.length),bi<o+e)throw TypeError(wi);for(t=0;t<e;t++,o++)t in n&&Br(i,o,n[t])}else{if(bi<=o)throw TypeError(wi);Br(i,o++,n)}return i.length=o,i}});function Ei(t){var e=Lt.Symbol||(Lt.Symbol={});P(e,t)||ki(e,t,{value:Ai.f(t)})}function Ii(t,e){var n=Hi[t]=ye(Fi[Di]);return xi(n,{type:Ri,tag:t,description:e}),F||(n.description=e),n}function Ti(e,t){D(e);var n=A(t),t=oe(n).concat($i(n));return Oi(t,function(t){F&&!Ji.call(n,t)||Xi(e,t,n[t])}),e}var Si=zt.f,Ci={}.toString,Ni="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],wt={f:function(t){return Ni&&"[object Window]"==Ci.call(t)?function(t){try{return Si(t)}catch(t){return Ni.slice()}}(t):Si(A(t))}},Ai={f:fe},ki=J.f,Oi=Kn.forEach,Pi=_t("hidden"),Ri="Symbol",Di="prototype",Kn=fe("toPrimitive"),xi=Dt.set,Li=Dt.getterFor(Ri),Mi=Object[Di],Fi=M.Symbol,ji=It("JSON","stringify"),Ui=Y.f,Vi=J.f,qi=wt.f,Bi=V.f,Hi=vt("symbols"),Wi=vt("op-symbols"),zi=vt("string-to-symbol-registry"),Gi=vt("symbol-to-string-registry"),_t=vt("wks"),vt=M.QObject,Ki=!vt||!vt[Di]||!vt[Di].findChild,Qi=F&&T(function(){return 7!=ye(Vi({},"a",{get:function(){return Vi(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Ui(Mi,e);r&&delete Mi[e],Vi(t,e,n),r&&t!==Mi&&Vi(Mi,e,r)}:Vi,Yi=j?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Fi},Xi=function(t,e,n){t===Mi&&Xi(Wi,e,n),D(t);e=O(e,!0);return D(n),P(Hi,e)?(n.enumerable?(P(t,Pi)&&t[Pi][e]&&(t[Pi][e]=!1),n=ye(n,{enumerable:S(0,!1)})):(P(t,Pi)||Vi(t,Pi,S(1,{})),t[Pi][e]=!0),Qi(t,e,n)):Vi(t,e,n)},Ji=function(t){var e=O(t,!0),t=Bi.call(this,e);return!(this===Mi&&P(Hi,e)&&!P(Wi,e))&&(!(t||!P(this,e)||!P(Hi,e)||P(this,Pi)&&this[Pi][e])||t)},vt=function(t,e){var n=A(t),t=O(e,!0);if(n!==Mi||!P(Hi,t)||P(Wi,t)){e=Ui(n,t);return!e||!P(Hi,t)||P(n,Pi)&&n[Pi][t]||(e.enumerable=!0),e}},j=function(t){var t=qi(A(t)),e=[];return Oi(t,function(t){P(Hi,t)||P(bt,t)||e.push(t)}),e},$i=function(t){var e=t===Mi,t=qi(e?Wi:A(t)),n=[];return Oi(t,function(t){!P(Hi,t)||e&&!P(Mi,t)||n.push(Hi[t])}),n};ge||(xt((Fi=function(t){if(this instanceof Fi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==t?String(t):void 0,e=nt(t),n=function(t){this===Mi&&n.call(Wi,t),P(this,Pi)&&P(this[Pi],e)&&(this[Pi][e]=!1),Qi(this,e,S(1,t))};return F&&Ki&&Qi(Mi,e,{configurable:!0,set:n}),Ii(e,t)})[Di],"toString",function(){return Li(this).tag}),xt(Fi,"withoutSetter",function(t){return Ii(nt(t),t)}),V.f=Ji,J.f=Xi,Y.f=vt,zt.f=wt.f=j,Gt.f=$i,Ai.f=function(t){return Ii(fe(t),t)},F&&(Vi(Fi[Di],"description",{configurable:!0,get:function(){return Li(this).description}}),xt(Mi,"propertyIsEnumerable",Ji,{unsafe:!0}))),At({global:!0,wrap:!0,forced:!ge,sham:!ge},{Symbol:Fi}),Oi(oe(_t),function(t){Ei(t)}),At({target:Ri,stat:!0,forced:!ge},{for:function(t){var e=String(t);if(P(zi,e))return zi[e];t=Fi(e);return zi[e]=t,Gi[t]=e,t},keyFor:function(t){if(!Yi(t))throw TypeError(t+" is not a symbol");if(P(Gi,t))return Gi[t]},useSetter:function(){Ki=!0},useSimple:function(){Ki=!1}}),At({target:"Object",stat:!0,forced:!ge,sham:!F},{create:function(t,e){return void 0===e?ye(t):Ti(ye(t),e)},defineProperty:Xi,defineProperties:Ti,getOwnPropertyDescriptor:vt}),At({target:"Object",stat:!0,forced:!ge},{getOwnPropertyNames:j,getOwnPropertySymbols:$i}),At({target:"Object",stat:!0,forced:T(function(){Gt.f(1)})},{getOwnPropertySymbols:function(t){return Gt.f(kt(t))}}),ji&&(lo=!ge||T(function(){var t=Fi();return"[null]"!=ji([t])||"{}"!=ji({a:t})||"{}"!=ji(Object(t))}),At({target:"JSON",stat:!0,forced:lo},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((k(n=e)||void 0!==t)&&!Yi(t))return Or(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Yi(e))return e}),r[1]=e,ji.apply(null,r)}})),Fi[Di][Kn]||$(Fi[Di],Kn,Fi[Di].valueOf),xe(Fi,Ri),bt[Pi]=!0,Ei("asyncIterator");var Zi,to,eo,no,ro,vt=J.f,io=M.Symbol;!F||"function"!=typeof io||"description"in io.prototype&&void 0===io().description||(Zi={},Nt(to=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof to?new io(e):void 0===e?io():io(e);return""===e&&(Zi[t]=!0),t},io),(vo=to.prototype=io.prototype).constructor=to,eo=vo.toString,no="Symbol(test)"==String(io("test")),ro=/^Symbol\((.*)\)[^)]+$/,vt(vo,"description",{configurable:!0,get:function(){var t=k(this)?this.valueOf():this,e=eo.call(t);if(P(Zi,t))return"";e=no?e.slice(7,-1):e.replace(ro,"$1");return""===e?void 0:e}}),At({global:!0,forced:!0},{Symbol:to})),Ei("hasInstance"),Ei("isConcatSpreadable"),Ei("iterator"),Ei("match"),Ei("matchAll"),Ei("replace"),Ei("search"),Ei("species"),Ei("split"),Ei("toPrimitive"),Ei("toStringTag"),Ei("unscopables"),xe(M.JSON,"JSON",!0),xe(Math,"Math",!0),At({global:!0},{Reflect:{}}),xe(M.Reflect,"Reflect",!0);Lt.Symbol;Ei("asyncDispose"),Ei("dispose"),Ei("observable"),Ei("patternMatch"),Ei("replaceAll");Ai.f("iterator");var oo=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),so=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=J.f,r=nt("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!k(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!P(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!P(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return oo&&s.REQUIRED&&o(t)&&!P(t,r)&&n(t),t}};bt[r]=!0}),j=function(s,t,e){function n(t){var n=p[t];xt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!k(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!k(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!k(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=M[s],p=f&&f.prototype,d=f,v={};return Zt(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),so.REQUIRED=!0):Zt(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=ze(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){Me(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,ie&&"function"==typeof(i=r.constructor)&&i!==t&&k(o=i.prototype)&&o!==t.prototype&&ie(n,o),n);return null!=e&&Ne(e,n[l],{that:n,AS_ENTRIES:c}),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,At({global:!0,forced:d!=f},v),xe(d,s),h||e.setStrong(d,s,c),d},ao=J.f,uo=so.fastKey,co=Dt.set,ho=Dt.getterFor,lo={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=uo(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),F?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){Me(t,s,n),co(t,{type:n,index:ye(null),first:void 0,last:void 0,size:0}),F||(t.size=0),null!=e&&Ne(e,t[i],{that:t,AS_ENTRIES:r})}),a=ho(n),u=function(t,e){var n,r=a(t),t=uo(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return De(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,F?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),F?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=a(this),i=ve(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),De(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),F&&ao(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=ho(e),o=ho(r);nr(t,e,function(t,e){co(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),Le(e)}},Kn=(j("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},lo),Lt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return de(this),(e=void 0!==a)&&de(a),null==t?new this:(r=[],e?(i=0,o=ve(a,2<s?n:void 0,2),Ne(t,function(t){r.push(o(t,i++))})):Ne(t,r.push,{that:r}),new this(r))});At({target:"Map",stat:!0},{from:Kn});vt=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};At({target:"Map",stat:!0},{of:vt});function fo(){for(var t,e=D(this),n=de(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}At({target:"Map",proto:!0,real:!0,forced:dt},{deleteAll:function(){return fo.apply(this,arguments)}});At({target:"Map",proto:!0,real:!0,forced:dt},{emplace:function(t,e){var n=D(this),e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n);return n.set(t,e),e}});function po(t){return Map.prototype.entries.call(t)}At({target:"Map",proto:!0,real:!0,forced:dt},{every:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return!Ne(n,function(t,e,n){if(!i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Map",proto:!0,real:!0,forced:dt},{filter:function(t,e){var n=D(this),r=po(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(Ge(n,It("Map"))),s=de(o.set);return Ne(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{find:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return Ne(n,function(t,e,n){if(i(e,t,r))return n(e)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Map",proto:!0,real:!0,forced:dt},{findKey:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return Ne(n,function(t,e,n){if(i(e,t,r))return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;de(n);var i=de(r.has),o=de(r.get),s=de(r.set);return Ne(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});At({target:"Map",proto:!0,real:!0,forced:dt},{includes:function(i){return Ne(po(D(this)),function(t,e,n){if((r=e)===(e=i)||r!=r&&e!=e)return n();var r},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;de(e);var r=de(n.set);return Ne(t,function(t){r.call(n,e(t),t)}),n}}),At({target:"Map",proto:!0,real:!0,forced:dt},{keyOf:function(r){return Ne(po(D(this)),function(t,e,n){if(e===r)return n(t)},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Map",proto:!0,real:!0,forced:dt},{mapKeys:function(t,e){var n=D(this),r=po(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(Ge(n,It("Map"))),s=de(o.set);return Ne(r,function(t,e){s.call(o,i(e,t,n),e)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{mapValues:function(t,e){var n=D(this),r=po(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(Ge(n,It("Map"))),s=de(o.set);return Ne(r,function(t,e){s.call(o,t,i(e,t,n))},{AS_ENTRIES:!0,IS_ITERATOR:!0}),o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{merge:function(){for(var t=D(this),e=de(t.set),n=0;n<arguments.length;)Ne(arguments[n++],e,{that:t,AS_ENTRIES:!0});return t}}),At({target:"Map",proto:!0,real:!0,forced:dt},{reduce:function(n,t){var r=D(this),e=po(r),i=arguments.length<2,o=i?void 0:t;if(de(n),Ne(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},{AS_ENTRIES:!0,IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty map with no initial value");return o}}),At({target:"Map",proto:!0,real:!0,forced:dt},{some:function(t,e){var r=D(this),n=po(r),i=ve(t,1<arguments.length?e:void 0,3);return Ne(n,function(t,e,n){if(i(e,t,r))return n()},{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Map",proto:!0,real:!0,forced:dt},{update:function(t,e,n){var r=D(this),i=arguments.length;de(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");n=o?r.get(t):de(2<i?n:void 0)(t,r);return r.set(t,e(n,t,r)),r}});var vo=function(t,e,n){var r,i=D(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};At({target:"Map",proto:!0,real:!0,forced:dt},{upsert:vo}),At({target:"Map",proto:!0,real:!0,forced:dt},{updateOrInsert:vo});j("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},lo),Lt.Set;At({target:"Set",stat:!0},{from:Kn}),At({target:"Set",stat:!0},{of:vt});At({target:"Set",proto:!0,real:!0,forced:dt},{addAll:function(){return function(){for(var t=D(this),e=de(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),At({target:"Set",proto:!0,real:!0,forced:dt},{deleteAll:function(){return fo.apply(this,arguments)}});function yo(t){return Set.prototype.values.call(t)}At({target:"Set",proto:!0,real:!0,forced:dt},{every:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3);return!Ne(r,function(t,e){if(!i(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{difference:function(t){var e=D(this),n=new(Ge(e,It("Set")))(e),r=de(n.delete);return Ne(t,function(t){r.call(n,t)}),n}}),At({target:"Set",proto:!0,real:!0,forced:dt},{filter:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(Ge(n,It("Set"))),s=de(o.add);return Ne(r,function(t){i(t,t,n)&&s.call(o,t)},{IS_ITERATOR:!0}),o}}),At({target:"Set",proto:!0,real:!0,forced:dt},{find:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3);return Ne(r,function(t,e){if(i(t,t,n))return e(t)},{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),At({target:"Set",proto:!0,real:!0,forced:dt},{intersection:function(t){var e=D(this),n=new(Ge(e,It("Set"))),r=de(e.has),i=de(n.add);return Ne(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),At({target:"Set",proto:!0,real:!0,forced:dt},{isDisjointFrom:function(t){var n=D(this),r=de(n.has);return!Ne(t,function(t,e){if(!0===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{isSubsetOf:function(t){var e=function(t){var e=Te(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return D(e.call(t))}(this),n=D(t),r=n.has;return"function"!=typeof r&&(n=new(It("Set"))(t),r=de(n.has)),!Ne(e,function(t,e){if(!1===r.call(n,t))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{isSupersetOf:function(t){var n=D(this),r=de(n.has);return!Ne(t,function(t,e){if(!1===r.call(n,t))return e()},{INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{join:function(t){var e=D(this),n=yo(e),e=void 0===t?",":String(t),t=[];return Ne(n,t.push,{that:t,IS_ITERATOR:!0}),t.join(e)}}),At({target:"Set",proto:!0,real:!0,forced:dt},{map:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3),o=new(Ge(n,It("Set"))),s=de(o.add);return Ne(r,function(t){s.call(o,i(t,t,n))},{IS_ITERATOR:!0}),o}}),At({target:"Set",proto:!0,real:!0,forced:dt},{reduce:function(e,t){var n=D(this),r=yo(n),i=arguments.length<2,o=i?void 0:t;if(de(e),Ne(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},{IS_ITERATOR:!0}),i)throw TypeError("Reduce of empty set with no initial value");return o}}),At({target:"Set",proto:!0,real:!0,forced:dt},{some:function(t,e){var n=D(this),r=yo(n),i=ve(t,1<arguments.length?e:void 0,3);return Ne(r,function(t,e){if(i(t,t,n))return e()},{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),At({target:"Set",proto:!0,real:!0,forced:dt},{symmetricDifference:function(t){var e=D(this),n=new(Ge(e,It("Set")))(e),r=de(n.delete),i=de(n.add);return Ne(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),At({target:"Set",proto:!0,real:!0,forced:dt},{union:function(t){var e=D(this),e=new(Ge(e,It("Set")))(e);return Ne(t,de(e.add),{that:e}),e}});var go=Math.floor;At({target:"Number",stat:!0},{isInteger:function(t){return!k(t)&&isFinite(t)&&go(t)===t}});Lt.Number.isInteger;At({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});Lt.Number.isNaN;var mo=function(t,e){return(mo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function _o(t,e){function n(){this.constructor=t}mo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bo=function(){return(bo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function wo(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function Eo(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function Io(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function To(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function So(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(To(arguments[e]));return t}function Co(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function No(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Ao(t){try{return Ro.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var ko={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Oo=function(t,e){if(!t)throw Po(e)},Po=function(t){return new Error("Firebase Database ("+ko.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Ro={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(No(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Do(t){return xo(void 0,t)}function xo(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=xo(t[n],e[n]));return t}var Lo=(Mo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},Mo);function Mo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Fo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function jo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Fo())}function Uo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Vo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function qo(){return!0===ko.NODE_ADMIN}function Bo(){return"indexedDB"in self&&null!=indexedDB}function Ho(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Wo(){return!(!navigator||!navigator.cookieEnabled)}var zo,Go="FirebaseError",Ko=(_o(Qo,zo=Error),Qo);function Qo(t,e,n){e=zo.call(this,e)||this;return e.code=t,e.customData=n,e.name=Go,Object.setPrototypeOf(e,Qo.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,Yo.prototype.create),e}var Yo=(Xo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Jo,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Ko(o,t,i)},Xo);function Xo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Jo=/\{\$([^}]+)}/g;function $o(t){return JSON.parse(t)}function Zo(t){return JSON.stringify(t)}function ts(t){var e={},n={},r={},i="";try{var o=t.split("."),e=$o(Ao(o[0])||""),n=$o(Ao(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function es(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ns(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function rs(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function is(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var os=(ss.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},ss.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},ss.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},ss.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},ss);function ss(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function as(t,e){e=new us(t,e);return e.subscribe.bind(e)}var us=(cs.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},cs.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},cs.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},cs.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=hs),void 0===r.error&&(r.error=hs),void 0===r.complete&&(r.complete=hs);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},cs.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},cs.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},cs.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},cs.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},cs);function cs(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function hs(){}function ls(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function fs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function ps(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(fs(t,e,r)+"must be a valid function.")}function ds(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(fs(t,e,r)+"must be a valid context object.")}function vs(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ys=1e3,gs=2,ms=144e5,_s=.5;function bs(t,e,n){void 0===e&&(e=ys),void 0===n&&(n=gs);n=e*Math.pow(n,t),t=Math.round(_s*n*(Math.random()-.5)*2);return Math.min(ms,n+t)}var ws=(Es.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Es.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Es.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Es);function Es(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Is="[DEFAULT]",Ts=(Ss.prototype.get=function(t){void 0===t&&(t=Is);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Lo;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Ss.prototype.getImmediate=function(t){var e=bo({identifier:Is,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},Ss.prototype.getComponent=function(){return this.component},Ss.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(Is)}catch(t){}try{for(var r=Io(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=To(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Ss.prototype.clearInstance=function(t){void 0===t&&(t=Is),this.instancesDeferred.delete(t),this.instances.delete(t)},Ss.prototype.delete=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(So(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},Ss.prototype.isComponentSet=function(){return null!=this.component},Ss.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===Is?void 0:e),this.instances.set(t,n)),n||null},Ss.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Is},Ss);function Ss(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Cs=(Ns.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ns.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ns.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ts(t,this);return this.providers.set(t,e),e},Ns.prototype.getProviders=function(){return Array.from(this.providers.values())},Ns);function Ns(t){this.name=t,this.providers=new Map}function As(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var ks,Os=[];(Kn=ks=ks||{})[Kn.DEBUG=0]="DEBUG",Kn[Kn.VERBOSE=1]="VERBOSE",Kn[Kn.INFO=2]="INFO",Kn[Kn.WARN=3]="WARN",Kn[Kn.ERROR=4]="ERROR",Kn[Kn.SILENT=5]="SILENT";function Ps(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=xs[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,As(["["+i+"]  "+t.name+":"],n))}}var Rs={debug:ks.DEBUG,verbose:ks.VERBOSE,info:ks.INFO,warn:ks.WARN,error:ks.ERROR,silent:ks.SILENT},Ds=ks.INFO,xs=((vt={})[ks.DEBUG]="log",vt[ks.VERBOSE]="log",vt[ks.INFO]="info",vt[ks.WARN]="warn",vt[ks.ERROR]="error",vt),Ls=(Object.defineProperty(Ms.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ks))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),Ms.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Rs[t]:t},Object.defineProperty(Ms.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ms.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),Ms.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.DEBUG],t)),this._logHandler.apply(this,As([this,ks.DEBUG],t))},Ms.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.VERBOSE],t)),this._logHandler.apply(this,As([this,ks.VERBOSE],t))},Ms.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.INFO],t)),this._logHandler.apply(this,As([this,ks.INFO],t))},Ms.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.WARN],t)),this._logHandler.apply(this,As([this,ks.WARN],t))},Ms.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,As([this,ks.ERROR],t)),this._logHandler.apply(this,As([this,ks.ERROR],t))},Ms);function Ms(t){this.name=t,this._logLevel=Ds,this._logHandler=Ps,this._userLogHandler=null,Os.push(this)}function Fs(e){Os.forEach(function(t){t.setLogLevel(e)})}var Kn=((dt={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",dt["bad-app-name"]="Illegal App name: '{$appName}",dt["duplicate-app"]="Firebase App named '{$appName}' already exists",dt["app-deleted"]="Firebase App named '{$appName}' already deleted",dt["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",dt["invalid-log-argument"]="First argument to `onLog` must be null or a function.",dt),js=new Yo("app","Firebase",Kn),Us="@firebase/app",Vs="[DEFAULT]",qs=((vt={})[Us]="fire-core",vt["@firebase/analytics"]="fire-analytics",vt["@firebase/auth"]="fire-auth",vt["@firebase/database"]="fire-rtdb",vt["@firebase/functions"]="fire-fn",vt["@firebase/installations"]="fire-iid",vt["@firebase/messaging"]="fire-fcm",vt["@firebase/performance"]="fire-perf",vt["@firebase/remote-config"]="fire-rc",vt["@firebase/storage"]="fire-gcs",vt["@firebase/firestore"]="fire-fst",vt["fire-js"]="fire-js",vt["firebase-wrapper"]="fire-js-all",vt),Bs=new Ls("@firebase/app"),Hs=(Object.defineProperty(Ws.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Ws.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Ws.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Ws.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Ws.prototype._getService=function(t,e){return void 0===e&&(e=Vs),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Ws.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Vs),this.container.getProvider(t).clearInstance(e)},Ws.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Bs.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Ws.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Ws.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ws.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw js.create("app-deleted",{appName:this.name_})},Ws);function Ws(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Do(t),this.container=new Cs(e.name),this._addComponent(new ws("app",function(){return o},"PUBLIC"));try{for(var s=Io(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}Hs.prototype.name&&Hs.prototype.options||Hs.prototype.delete||console.log("dc");var zs="8.2.6";function Gs(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=Vs);e=n.name;if("string"!=typeof e||!e)throw js.create("bad-app-name",{appName:String(e)});if(es(c,e))throw js.create("duplicate-app",{appName:e});n=new u(t,n,l);return c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=qs[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Bs.warn(n.join(" "))}o(new ws(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Fs,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw js.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=Os;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=Rs[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:ks[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:zs,INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!es(c,t=t||Vs))throw js.create("no-app",{appName:t});return c[t]}function o(n){var e,t,r,i=n.name;if(h.has(i))return Bs.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw js.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&xo(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=Io(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var dt=function t(){var e=Gs(Hs);return e.INTERNAL=bo(bo({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){xo(e,t)},createSubscribe:as,ErrorFactory:Yo,deepExtend:xo}),e}(),Ks=(Qs.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Qs);function Qs(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Bs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(bu=self.firebase.SDK_VERSION)&&0<=bu.indexOf("LITE")&&Bs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Ys=dt.initializeApp;dt.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Bs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Ys.apply(void 0,t)};var Xs,Js,Xl=dt;(Xs=Xl).INTERNAL.registerComponent(new ws("platform-logger",function(t){return new Ks(t)},"PRIVATE")),Xs.registerVersion(Us,"0.6.14",Js),Xs.registerVersion("fire-js","");Xl.registerVersion("firebase","8.2.6","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},s.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.v(t):this.h(t)}},s.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Qa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Qa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Qa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,e=/^[\w+/_-]+[=]{0,2}$/,a=null;function f(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&e.test(t)?t:""}function s(){}function p(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=p(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==p(t)}function y(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var n="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:g).apply(null,arguments)}function _(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now;function w(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function I(t,e,n){this.code=C+t,this.message=e||N[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new I(e.substring(C.length),t.message,t.serverResponse):null}w(I,Error),I.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},I.prototype.toJSON=function(){return this.w()};var S,C="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in A)if(A[e].id===t)return t=A[e],{firebaseEndpoint:t.Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function P(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,P):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function D(t){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function x(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=k("__EID__")?"__EID__":void 0,w(P,Error),P.prototype.name="CustomError",w(R,P),R.prototype.name="AssertionError",x.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var F=new x(function(){return new j},function(t){t.reset()});function j(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},j.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},j.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=U(t,e)}function z(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function K(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,$=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}t:{var st=l.navigator;if(st){st=st.userAgent;if(st){Y=st;break t}}Y=""}function at(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<lt.length;i++)e=lt[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(y(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function _t(){if(void 0===yt){var t=null,e=l.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(t){l.console&&l.console.error(t.message)}yt=t}else yt=t}return yt}function bt(t,e){this.a=e===St?t:""}function wt(t){return t instanceof bt&&t.constructor===bt?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+p(t)),"type_error:TrustedResourceUrl")}function Et(t,n){var e,r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(It,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),e=t,t=_t(),new bt(e=t?t.createScriptURL(e):e,St)}bt.prototype.sa=!0,bt.prototype.ra=function(){return this.a.toString()},bt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var It=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function Ct(t,e){this.a=e===Dt?t:""}function Nt(t){return t instanceof Ct&&t.constructor===Ct?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+p(t)),"type_error:SafeUrl")}Ct.prototype.sa=!0,Ct.prototype.ra=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var At=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,kt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Pt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Ot.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(kt))&&At.test(e[1])?new Ct(t,Dt):null);var e}function Rt(t){return t instanceof Ct?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Ct(t,Dt))}var Dt={},xt=new Ct("about:invalid#zClosurez",Dt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function Ft(t,e,n,r){return t=t instanceof Ct?t:Rt(t),e=e||l,n=n instanceof dt?vt(n):n||"",e.open(Nt(t),n,r,void 0)}function jt(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return rt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace($,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(Z,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(tt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(et,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(nt,"&#0;"))),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=s;var qt,Bt=at("Opera"),Ht=at("Trident")||at("MSIE"),Wt=at("Edge"),zt=Wt||Ht,Gt=at("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Kt=it(Y.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=l.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(Xt=Y,Gt?/rv:([^\);]+)(\)|;)/.exec(Xt):Wt?/Edge\/([\d\.]+)/.exec(Xt):Ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):Kt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Ht){Xt=Qt();if(null!=Xt&&Xt>parseFloat(Yt)){qt=String(Xt);break t}}qt=Yt}var Jt={};function $t(a){return t=a,e=function(){for(var t=0,e=X(String(qt)).split("."),n=X(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=ot(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==o[2].length,0==s[2].length)||ot(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Jt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Zt=l.document&&Ht?Qt()||(parseInt(qt,10)||void 0):void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!Ht||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:oe.hasOwnProperty(e)?n.setAttribute(oe[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function se(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];if(!d(o)||y(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(y(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(v(o)){s="function"==typeof o.item;break t}}s=!1}V(s?Q(o):o,r)}}}(n,r,e),r}function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ue(t){l.setTimeout(function(){throw t},0)}function ce(t,e){ie||function(){{var t;ie=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(fe)}):function(){var t=fe;!v(l.setImmediate)||l.Window&&l.Window.prototype&&!at("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(re=re||function(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=m(function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()},this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):l.setImmediate(t)}}}(),he||(ie(),he=!0),le.add(t,e)}var he=!1,le=new M;function fe(){for(var t,e,n;n=e=void 0,n=null,(e=le).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){ue(t)}L(F,t)}he=!1}function pe(t,e){if(this.a=de,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Ce(n,ve,t)},function(t){if(!(t instanceof De))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Ce(n,ye,t)})}catch(t){Ce(this,ye,t)}}var de=0,ve=2,ye=3;function ge(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ge.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var me=new x(function(){return new ge},function(t){t.reset()});function _e(t,e,n){var r=me.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof pe)return t;var e=new pe(s);return Ce(e,ve,t),e}function we(n){return new pe(function(t,e){e(n)})}function Ee(t,e,n){Ne(t,e,n,null)||ce(_(e,t))}function Ie(n){return new pe(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Pb:!0,value:n}:{Pb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Ee(n[e],_(t,e,!0),_(t,e,!1));else r(o)})}function Te(t,e){t.b||t.a!=ve&&t.a!=ye||Ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function Se(t,i,o,s){var e=_e(null,null,null);return e.a=new pe(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof De?r(t):n(e)}catch(t){r(t)}}:r}),Te(e.a.c=t,e),e.a}function Ce(t,e,n){var r,i;t.a==de&&(t===n&&(e=ye,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Ne(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ae(t),e!=ye||n instanceof De||(i=n,(r=t).g=!0,ce(function(){r.g&&Re.call(null,i)}))))}function Ne(t,e,n,r){if(t instanceof pe)return Te(t,_e(e||s,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(y(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ae(t){t.h||(t.h=!0,ce(t.gc,t))}function ke(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Oe(t,e,n,r){if(n==ye&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){Re.call(null,t)}L(me,e)}function Pe(t,e,n){e==ve?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}pe.prototype.then=function(t,e,n){return Se(this,v(t)?t:null,v(e)?e:null,n)},pe.prototype.$goog_Thenable=!0,(t=pe.prototype).oa=function(t,e){return(t=_e(t,t,e)).c=!0,Te(this,t),this},t.o=function(t,e){return Se(this,null,t,e)},t.cancel=function(t){var e;this.a==de&&(e=new De(t),ce(function(){!function t(e,n){if(e.a==de)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==de&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):ke(r),Oe(r,o,ye,n)))}e.c=null}else Ce(e,ye,n)}(this,e)},this))},t.$c=function(t){this.a=de,Ce(this,ve,t)},t.ad=function(t){this.a=de,Ce(this,ye,t)},t.gc=function(){for(var t;t=ke(this);)Oe(this,t,this.a,this.i);this.h=!1};var Re=ue;function De(t){P.call(this,t)}function xe(){this.xa=this.xa,this.pa=this.pa}w(De,P);var Le=0;function Me(t){t.xa||(t.xa=!0,t.Da(),0==Le)||(t=t,Object.prototype.hasOwnProperty.call(t,n)&&t[n]||(t[n]=++r))}xe.prototype.xa=!(De.prototype.name="cancel"),xe.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Fe=Object.freeze||function(t){return t},je=!Ht||9<=Number(Zt),Ue=Ht&&!$t("9"),Ve=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Be(t,e){if(qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Gt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:He[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}qe.prototype.preventDefault=function(){this.defaultPrevented=!0},w(Be,qe);var He=Fe({2:"touch",3:"pen",4:"mouse"});Be.prototype.preventDefault=function(){Be.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ue)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Be.prototype.g=function(){return this.a};var We="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ge(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++ze,this.va=this.Pa=!1}function Ke(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function Qe(t){this.src=t,this.a={},this.b=0}function Ye(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(Ke(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Xe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}Qe.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xe(t,e,r,i);return-1<s?(e=t[s],n||(e.Pa=!1)):((e=new Ge(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Je="closure_lm_"+(1e6*Math.random()|0),$e={};function Ze(t,e,n,r,i){if(r&&r.once)en(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=ln(n),t&&t[We]?pn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!1,r,i)}function tn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=y(i)?!!i.capture:!!i,c=cn(t);if(c||(t[Je]=c=new Qe(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=un,r=a=je?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ve||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(on(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function en(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)en(t,e[o],n,r,i);else n=ln(n),t&&t[We]?dn(t,e,n,y(r)?!!r.capture:!!r,i):tn(t,e,n,!0,r,i)}function nn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)nn(t,e[o],n,r,i);else r=y(r)?!!r.capture:!!r,n=ln(n),t&&t[We]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Xe(o=t.a[e],n,r,i))&&(Ke(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&cn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Xe(e,n,r,i)),(n=-1<t?e[t]:null)&&rn(n))}function rn(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[We]?Ye(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(on(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cn(e))?(Ye(n,t),0==n.b&&(n.src=null,e[Je]=null)):Ke(t)))}function on(t){return t in $e?$e[t]:$e[t]="on"+t}function sn(t,e,n,r){var i=!0;if((t=cn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=an(o,r),i=i&&!1!==o)}return i}function an(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&rn(t),n.call(r,e)}function un(t,e){if(t.va)return!0;if(je)return an(t,new Be(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Be(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=sn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=sn(r[i],t,!1,e),n=n&&o}return n}function cn(t){return(t=t[Je])instanceof Qe?t:null}var hn="__closure_events_fn_"+(1e9*Math.random()>>>0);function ln(e){return v(e)?e:(e[hn]||(e[hn]=function(t){return e.handleEvent(t)}),e[hn])}function fn(){xe.call(this),this.v=new Qe(this),(this.ac=this).gb=null}function pn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function dn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function vn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Va||u.src,u.Pa&&Ye(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function yn(t,e,n){if(v(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function gn(n){var r=null;return new pe(function(t,e){-1==(r=yn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw l.clearTimeout(r),t})}function mn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function _n(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function bn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof bn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function wn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];En(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)En(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function En(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(fn,xe),fn.prototype[We]=!0,fn.prototype.addEventListener=function(t,e,n,r){Ze(this,t,e,n,r)},fn.prototype.removeEventListener=function(t,e,n,r){nn(this,t,e,n,r)},fn.prototype.dispatchEvent=function(t){var e,n=this.gb;if(n)for(e=[];n;n=n.gb)e.push(n);n=this.ac;var r=t.type||t;if("string"==typeof t?t=new qe(t,n):t instanceof qe?t.target=t.target||n:(s=t,ft(t=new qe(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=vn(o,r,!0,t)&&s;if(s=vn(o=t.b=n,r,!0,t)&&s,s=vn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=vn(o=t.b=e[i],r,!1,t)&&s;return s},fn.prototype.Da=function(){if(fn.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ke(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=bn.prototype).W=function(){wn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return wn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return En(this.b,t)?this.b[t]:e},t.set=function(t,e){En(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var In=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,Sn(this,t.c),this.l=t.l,this.a=t.a,Cn(this,t.g),this.f=t.f,Nn(this,Gn(t.b)),this.h=t.h):t&&(n=String(t).match(In))?(this.i=!!e,Sn(this,n[1]||"",!0),this.l=Rn(n[2]||""),this.a=Rn(n[3]||"",!0),Cn(this,n[4]),this.f=Rn(n[5]||"",!0),Nn(this,n[6]||"",!0),this.h=Rn(n[7]||"")):(this.i=!!e,this.b=new Vn(null,this.i))}function Sn(t,e,n){t.c=n?Rn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Cn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Nn(t,e,n){var r,i;e instanceof Vn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(qn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Hn(this,e),zn(this,n,t))},r)),r.f=i):(n||(e=Dn(e,jn)),t.b=new Vn(e,t.i))}function An(t,e,n){t.b.set(e,n)}function kn(t,e){return t.b.get(e)}function On(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function Pn(t,e,n,r){var i=new Tn(null,void 0);return t&&Sn(i,t),e&&(i.a=e),n&&Cn(i,n),r&&(i.f=r),i}function Rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Dn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Dn(e,Ln,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Dn(e,Ln,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Dn(n,"/"==n.charAt(0)?Fn:Mn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Dn(n,Un)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?Sn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.f;if(n)Cn(e,t.g);else if(n=!!t.f){if("/"!=i.charAt(0)&&(this.a&&!this.f?i="/"+i:-1!=(r=e.f.lastIndexOf("/"))&&(i=e.f.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(it(r,"./")||it(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.f=i:n=""!==t.b.toString(),n?Nn(e,Gn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Ln=/[#\/\?@]/g,Mn=/[#\?:]/g,Fn=/[#\?]/g,jn=/[#\?@]/g,Un=/#/g;function Vn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function qn(n){n.a||(n.a=new bn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Bn(t){var e=_n(t);if(void 0===e)throw Error("Keys are undefined");var n=new Vn(null,void 0);t=mn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?zn(n,i,o):n.add(i,o)}return n}function Hn(t,e){qn(t),e=Kn(t,e),En(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,En((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&wn(t)))}function Wn(t,e){return qn(t),e=Kn(t,e),En(t.a.b,e)}function zn(t,e,n){Hn(t,e),0<n.length&&(t.c=null,t.a.set(Kn(t,e),Q(n)),t.b+=n.length)}function Gn(t){var e=new Vn;return e.c=t.c,t.a&&(e.a=new bn(t.a),e.b=t.b),e}function Kn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Qn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),$n(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":$n(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Yn,t,e),e.join("")}function Yn(){}(t=Vn.prototype).add=function(t,e){qn(this),this.c=null,t=Kn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){qn(this),this.a.forEach(function(t,e){V(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){qn(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){qn(this);var e=[];if("string"==typeof t)Wn(this,t)&&(e=K(e,this.a.get(Kn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=K(e,t[n])}return e},t.set=function(t,e){return qn(this),this.c=null,Wn(this,t=Kn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.W(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Xn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Jn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function $n(t,e){e.push('"',t.replace(Jn,function(t){var e=Xn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Xn[t]=e),e}),'"')}function Zn(){var t=mr();return Ht&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function tr(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||l.window;var n="about:blank";t&&(n=Nt(Pt(t)||xt)),e.location.href=n}function nr(t){return!!((t=(t||mr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||l.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=mr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),vr(mr())==pr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Pt(void 0!==n.href?n.href:String(n))||xt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof Ct?e:Rt(e),s.href=Nt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Ft("",r,n,s),t=Nt(e),s&&(zt&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new Lt(t=(r=_t())?r.createHTML(t):t,0,Mt),r=s.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(D("expected object of type SafeHtml, got '"+o+"' of type "+p(o)),"type_error:SafeHtml")),r.close())):(s=Ft(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sr=/^[^@]+@[^@]+$/;function ar(){var e=null;return new pe(function(t){"complete"==l.document.readyState?t():(e=function(){t()},en(window,"load",e))}).o(function(t){throw nn(window,"load",e),t})}function ur(t){return t=t||mr(),!("file:"!==Ir()&&"ionic:"!==Ir()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function cr(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function hr(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function lr(){return Xl.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xl.INTERNAL.hasOwnProperty("node")?"Node":hr()?"Worker":"Browser"}function fr(){var t=lr();return"ReactNative"===t||"Node"===t}var pr="Firefox",dr="Chrome";function vr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?pr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var yr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in yr)i[yr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=lr())?r=vr(i=mr()):"Worker"===r&&(r=vr(i=mr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function mr(){return l.navigator&&l.navigator.userAgent||""}function _r(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function br(){try{var t=l.localStorage,e=Ar();if(t)return t.setItem(e,"1"),t.removeItem(e),!Zn()||!!l.indexedDB}catch(t){return hr()&&!!l.indexedDB}return!1}function wr(){return(Er()||"chrome-extension:"===Ir()||ur())&&!fr()&&br()&&!hr()}function Er(){return"http:"===Ir()||"https:"===Ir()}function Ir(){return l.location&&l.location.protocol||null}function Tr(t){return!nr(t=t||mr())&&vr(t)!=pr}function Sr(t){return void 0===t?null:Qn(t)}function Cr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Nr(t){if(null!==t)return JSON.parse(t)}function Ar(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=vr(t=t||mr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Or(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Pr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=mr(),e=lr(),this.b=nr(t)||"ReactNative"===e}function Rr(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function xr(){return _r("fireauth.oauthhelper",l)||_r("fireauth.iframe",l)}Pr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!Er()&&"chrome-extension:"!==Ir()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Lr,Mr={};function Fr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),Lr=2==jr.abcd}catch(t){Lr=!1}function Ur(t,e,n){Lr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Vr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ur(t,n,e[n])}function qr(t){var e={};return Vr(e,t),e}function Br(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ur(e,n,Br(t[n]));return e}function Hr(t){var e=t&&(t[Qr]?"phone":null);if(!(e&&t&&t[Kr]))throw new I("internal-error","Internal assert: invalid MultiFactorInfo object");Ur(this,"uid",t[Kr]),Ur(this,"displayName",t[zr]||null);var n=null;t[Gr]&&(n=new Date(t[Gr]).toUTCString()),Ur(this,"enrollmentTime",n),Ur(this,"factorId",e)}function Wr(t){try{var e=new Yr(t)}catch(t){e=null}return e}Hr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var zr="displayName",Gr="enrolledAt",Kr="mfaEnrollmentId",Qr="phoneInfo";function Yr(t){Hr.call(this,t),Ur(this,"phoneNumber",t[Qr])}function Xr(t){var e={},n=t[ti],r=t[ni],i=t[ri];if(t=Wr(t[ei]),!i||i!=$r&&i!=Zr&&!n||i==Zr&&!r||i==Jr&&!t)throw Error("Invalid checkActionCode response!");i==Zr?(e[oi]=n||null,e[ai]=n||null,e[ii]=r):(e[oi]=r||null,e[ai]=r||null,e[ii]=n||null),e[si]=t||null,Ur(this,ci,i),Ur(this,ui,Br(e))}w(Yr,Hr),Yr.prototype.w=function(){var t=Yr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Jr="REVERT_SECOND_FACTOR_ADDITION",$r="EMAIL_SIGNIN",Zr="VERIFY_AND_CHANGE_EMAIL",ti="email",ei="mfaInfo",ni="newEmail",ri="requestType",ii="email",oi="fromEmail",si="multiFactorInfo",ai="previousEmail",ui="data",ci="operation";function hi(t){var e=kn(t=On(t),li)||null,n=kn(t,fi)||null,r=(r=kn(t,vi)||null)&&gi[r]||null;if(!e||!n||!r)throw new I("argument-error",li+", "+fi+"and "+vi+" are required in a valid action code URL.");Vr(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,pi)||null,languageCode:kn(t,di)||null,tenantId:kn(t,yi)||null})}var li="apiKey",fi="oobCode",pi="continueUrl",di="languageCode",vi="mode",yi="tenantId",gi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Jr,signIn:$r,verifyAndChangeEmail:Zr,verifyEmail:"VERIFY_EMAIL"};function mi(t){try{return new hi(t)}catch(t){return null}}function _i(t){var e=t[Ti];if(void 0===e)throw new I("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new I("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[bi])&&"object"==typeof r){e=r[Ni];var n=r[Si],r=r[Ci];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new I("argument-error",Si+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new I("argument-error",Ci+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new I("argument-error",Ni+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new I("missing-android-pkg-name")}}else if(void 0!==r)throw new I("argument-error",bi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ii])&&"object"==typeof e){if("string"==typeof(e=e[Ai])&&e.length)this.f=e;else if(void 0!==e)throw new I("argument-error",Ai+" property must be a non empty string when specified.")}else if(void 0!==e)throw new I("argument-error",Ii+" property must be a non null object when specified.");if(void 0!==(e=t[Ei])&&"boolean"!=typeof e)throw new I("argument-error",Ei+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[wi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new I("argument-error",wi+" property must be a non empty string when specified.");this.i=t||null}var bi="android",wi="dynamicLinkDomain",Ei="handleCodeInApp",Ii="iOS",Ti="url",Si="installApp",Ci="minimumVersion",Ni="packageName",Ai="bundleId";function ki(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var Oi=null;function Pi(t){var e=[];return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Oi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Oi){Oi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Oi[o]&&(Oi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e.push(t)}),e}function Ri(t){var e=xi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Di(t){try{return new Ri(t)}catch(t){return null}}function xi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Pi(t);for(t=[],n=e=0;e<r.length;){var i,o,s,a=r[e++];a<128?t[n++]=String.fromCharCode(a):191<a&&a<224?(i=r[e++],t[n++]=String.fromCharCode((31&a)<<6|63&i)):239<a&&a<365?(s=((7&a)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&a)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Ri.prototype.T=function(){return this.f},Ri.prototype.l=function(){return this.c},Ri.prototype.toString=function(){return this.h};var Li="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Mi=["client_id","response_type","scope","redirect_uri","state"],Fi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Mi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Mi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Mi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Li},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function ji(t){for(var e in Fi)if(Fi[e].fa==t)return Fi[e];return null}function Ui(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Gi,e["github.com"]=zi,e["twitter.com"]=Ki;var n=t&&t[qi];try{if(n)return new(e[n]?e[n]:Hi)(t);if(void 0!==t[Vi])return new Bi(t)}catch(t){}return null}var Vi="idToken",qi="providerId";function Bi(t){var e,n=t[qi];if(n||!t[Vi]||(e=Di(t[Vi]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Ur(this,"providerId",n),Ur(this,"isNewUser",e)}function Hi(t){Bi.call(this,t),Ur(this,"profile",Br((t=Nr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Hi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function zi(t){if(Hi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",this.profile&&this.profile.login||null)}function Gi(t){if(Hi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Hi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",t.screenName||null)}function Qi(t){var e=kn(r=On(t),"link"),n=kn(On(e),"link"),r=kn(r,"deep_link_id");return kn(On(r),"link")||r||n||e||t}function Yi(t,e){if(!t&&!e)throw new I("internal-error","Internal assert: no raw session string available");if(t&&e)throw new I("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Ji}w(Hi,Bi),w(Wi,Hi),w(zi,Hi),w(Gi,Hi),w(Ki,Hi);var Xi="enroll",Ji="signin";function $i(){}function Zi(t,n){return t.then(function(t){if(t[Bs]){var e=Di(t[Bs]);if(!e||n!=e.i)throw new I("user-mismatch");return t}throw new I("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==C+"user-not-found"?new I("user-mismatch"):t})}function to(t,e){if(!e)throw new I("internal-error","failed to construct a credential");this.a=e,Ur(this,"providerId",t),Ur(this,"signInMethod",t)}function eo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function no(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new to(t.providerId,t.pendingToken)}catch(t){}return null}function ro(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ur(this,"idToken",e.idToken),e.accessToken&&Ur(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ur(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new I("internal-error","failed to construct a credential");Ur(this,"accessToken",e.oauthToken),Ur(this,"secret",e.oauthTokenSecret)}Ur(this,"providerId",t),Ur(this,"signInMethod",n)}function io(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Bn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function oo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ro(t.providerId,e,t.signInMethod)}catch(t){}}return null}function so(t,e){this.Qc=e||[],Vr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(ji(t)||{}).Ja||null,this.ob=null}function ao(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new I("argument-error",'SAML provider IDs must be prefixed with "saml."');so.call(this,t,[])}function uo(t){so.call(this,t,Mi),this.a=[]}function co(){uo.call(this,"facebook.com")}function ho(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new co).credential({accessToken:e})}function lo(){uo.call(this,"github.com")}function fo(t){if(!t)throw new I("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return y(t)&&(e=t.accessToken),(new lo).credential({accessToken:e})}function po(){uo.call(this,"google.com"),this.Ca("profile")}function vo(t,e){var n=t;return y(t)&&(n=t.idToken,e=t.accessToken),(new po).credential({idToken:n,accessToken:e})}function yo(){so.call(this,"twitter.com",Li)}function go(t,e){var n=t;if(y(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new I("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ro("twitter.com",n,"twitter.com")}function mo(t,e,n){this.a=t,this.f=e,Ur(this,"providerId","password"),Ur(this,"signInMethod",n===bo.EMAIL_LINK_SIGN_IN_METHOD?bo.EMAIL_LINK_SIGN_IN_METHOD:bo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function _o(t){return t&&t.email&&t.password?new mo(t.email,t.password,t.signInMethod):null}function bo(){Vr(this,{providerId:"password",isOAuthProvider:!1})}function wo(t,e){if(!(e=Eo(e)))throw new I("argument-error","Invalid email link!");return new mo(t,e.code,bo.EMAIL_LINK_SIGN_IN_METHOD)}function Eo(t){return(t=mi(t=Qi(t)))&&t.operation===$r?t:null}function Io(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new I("internal-error");this.a=t,Ur(this,"providerId","phone"),this.fa="phone",Ur(this,"signInMethod","phone")}function To(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Io(n)}return null}function So(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Co(t){try{this.a=t||Xl.auth()}catch(t){throw new I("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Vr(this,{providerId:"phone",isOAuthProvider:!1})}function No(t,e){if(!t)throw new I("missing-verification-id");if(!e)throw new I("missing-verification-code");return new Io({eb:t,cb:e})}function Ao(t){if(t.temporaryProof&&t.phoneNumber)return new Io({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return vo(o,n);case"facebook.com":return ho(n);case"github.com":return fo(n);case"twitter.com":return go(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new to(e,s):new ro(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new uo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function ko(t){if(!t.isOAuthProvider)throw new I("invalid-oauth-provider")}function Oo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new I("invalid-auth-event");if(this.g&&this.a)throw new I("invalid-auth-event");if(this.g&&!this.f)throw new I("invalid-auth-event")}function Po(t){return(t=t||{}).type?new Oo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Ro(){this.b=null,this.a=[]}Yi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Yi.prototype.w=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},$i.prototype.ka=function(){},$i.prototype.b=function(){},$i.prototype.c=function(){},$i.prototype.w=function(){},to.prototype.ka=function(t){return ha(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,la(t,n)},to.prototype.c=function(t,e){return Zi(fa(t,eo(this)),e)},to.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ro.prototype.ka=function(t){return ha(t,io(this))},ro.prototype.b=function(t,e){var n=io(this);return n.idToken=e,la(t,n)},ro.prototype.c=function(t,e){return Zi(fa(t,io(this)),e)},ro.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},so.prototype.Ka=function(t){return this.Ib=ht(t),this},w(ao,so),w(uo,so),uo.prototype.Ca=function(t){return W(this.a,t)||this.a.push(t),this},uo.prototype.Qb=function(){return Q(this.a)},uo.prototype.credential=function(t,e){e=y(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new I("argument-error","credential failed: must provide the ID token and/or the access token.");return new ro(this.providerId,e,this.providerId)},w(co,uo),Ur(co,"PROVIDER_ID","facebook.com"),Ur(co,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(lo,uo),Ur(lo,"PROVIDER_ID","github.com"),Ur(lo,"GITHUB_SIGN_IN_METHOD","github.com"),w(po,uo),Ur(po,"PROVIDER_ID","google.com"),Ur(po,"GOOGLE_SIGN_IN_METHOD","google.com"),w(yo,so),Ur(yo,"PROVIDER_ID","twitter.com"),Ur(yo,"TWITTER_SIGN_IN_METHOD","twitter.com"),mo.prototype.ka=function(t){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,ba,{email:this.a,oobCode:this.f}):Ka(t,Ba,{email:this.a,password:this.f})},mo.prototype.b=function(t,e){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,wa,{idToken:e,email:this.a,oobCode:this.f}):Ka(t,xa,{idToken:e,email:this.a,password:this.f})},mo.prototype.c=function(t,e){return Zi(this.ka(t),e)},mo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Vr(bo,{PROVIDER_ID:"password"}),Vr(bo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Vr(bo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Io.prototype.ka=function(t){return t.fb(So(this))},Io.prototype.b=function(t,e){var n=So(this);return n.idToken=e,Ka(t,Wa,n)},Io.prototype.c=function(t,e){var n=So(this);return n.operation="REAUTH",Zi(t=Ka(t,za,n),e)},Io.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Co.prototype.fb=function(r,i){var o=this.a.a;return be(i.verify()).then(function(n){if("string"!=typeof n)throw new I("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new I("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=y(r)?r.session:null,e=y(r)?r.phoneNumber:r,t=t&&t.type==Xi?t.Ha().then(function(t){return Ka(o,Ma,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Ji?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Ka(e,Fa,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Ka(o,Ra,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},Vr(Co,{PROVIDER_ID:"phone"}),Vr(Co,{PHONE_SIGN_IN_METHOD:"phone"}),Oo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Oo.prototype.T=function(){return this.h},Oo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Do,xo=null;function Lo(t){var e="unauthorized-domain",n=void 0,r=On(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",I.call(this,e,n)}function Mo(t,e,n){I.call(this,t,n),(t=e||{}).Jb&&Ur(this,"email",t.Jb),t.ea&&Ur(this,"phoneNumber",t.ea),t.credential&&Ur(this,"credential",t.credential),t.Zb&&Ur(this,"tenantId",t.Zb)}function Fo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:Ao(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new I(e,t.message||void 0);return new Mo(e,n,t.message)}return null}function jo(){}function Uo(t){return t.c||(t.c=t.b())}function Vo(){}function qo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Bo(){}function Ho(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.qc,this),this.a.onerror=m(this.Sb,this),this.a.onprogress=m(this.rc,this),this.a.ontimeout=m(this.vc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function zo(t,e,n){this.reset(t,e,n,void 0,void 0)}function Go(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}w(Lo,I),w(Mo,I),Mo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Mo.prototype.toJSON=function(){return this.w()},jo.prototype.c=null,w(Vo,jo),Vo.prototype.a=function(){var t=qo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Vo.prototype.b=function(){var t={};return qo(this)&&(t[0]=!0,t[1]=!0),t},Do=new Vo,w(Bo,jo),Bo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ho;throw Error("Unsupported browser")},Bo.prototype.b=function(){return{}},(t=Ho.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},zo.prototype.a=null,zo.prototype.reset=function(t,e,n,r,i){delete this.a},Ko.prototype.toString=function(){return this.name};var Qo=new Ko("SEVERE",1e3),Yo=new Ko("WARNING",900),Xo=new Ko("CONFIG",700),Jo=new Ko("FINE",500);Go.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(D("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new zo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var $o,Zo={},ts=null;function es(t){var e,n,r;return ts||(ts=new Go(""),(Zo[""]=ts).c=Xo),(e=Zo[t])||(e=new Go(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=es(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Zo[t]=e),e}function ns(t,e){t&&t.log(Jo,e,void 0)}function rs(t){this.f=t}function is(t){fn.call(this),this.u=t,this.h=void 0,this.readyState=os,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=es("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}w(rs,jo),rs.prototype.a=function(){return new is(this.f)},rs.prototype.b=($o={},function(){return $o}),w(is,fn);var os=0;function ss(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function as(t){t.readyState=4,t.g=null,t.c=null,t.m=null,us(t)}function us(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function cs(t){fn.call(this),this.headers=new bn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=hs,this.u=this.S=!1}(t=is.prototype).open=function(t,e){if(this.readyState!=os)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,us(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,as(this)),this.readyState=os},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,us(this)),this.a&&(this.readyState=3,us(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ss(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?as:us)(this),3==this.readyState&&ss(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,as(this))},t.sc=function(t){this.a&&(this.response=t,as(this))},t.Ua=function(t){var e=this.i;e&&e.log(Yo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&as(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Yo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(Yo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(is.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),w(cs,fn);var hs="";cs.prototype.b=es("goog.net.XhrIo");var ls=/^https?$/i,fs=["POST","PUT"];function ps(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=(e.D?e.D:Do).a(),e.C=e.D?Uo(e.D):Uo(Do),e.a.onreadystatechange=m(e.Vb,e);try{ns(e.b,Es(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return ns(e.b,Es(e,"Error opening Xhr: "+t.message)),void vs(e,t)}t=r||"";var o,s=new bn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)V(t,e,void 0);else for(var n=_n(t),r=mn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ds,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!W(fs,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{_s(e),0<e.g&&(e.u=(o=e.a,Ht&&$t(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ns(e.b,Es(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ma,e)):e.s=yn(e.Ma,e.g,e)),ns(e.b,Es(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ns(e.b,Es(e,"Send error: "+t.message)),vs(e,t)}}function ds(t){return"content-type"==t.toLowerCase()}function vs(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,ys(t),ms(t)}function ys(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function gs(e){if(e.c&&void 0!==h)if(e.C[1]&&4==bs(e)&&2==ws(e))ns(e.b,Es(e,"Local request error detected and ignored"));else if(e.i&&4==bs(e))yn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==bs(e)){ns(e.b,Es(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=ws(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(In)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!ls.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<bs(e)?e.a.statusText:""}catch(t){ns(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+ws(e)+"]",ys(e)}}finally{ms(e)}}}function ms(e,t){if(e.a){_s(e);var n=e.a,r=e.C[0]?s:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(Qo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function _s(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(l.clearTimeout(t.s),t.s=null)}function bs(t){return t.a?t.a.readyState:0}function ws(t){try{return 2<bs(t)?t.a.status:-1}catch(t){return-1}}function Es(t,e){return e+" ["+t.R+" "+t.l+" "+ws(t)+"]"}function Is(t){var e=xs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ts(t,e,n){t.a=!0,t.c=n,t.f=!e,As(t)}function Ss(t){if(t.a){if(!t.v)throw new ks;t.v=!1}}function Cs(t,e,n,r){t.g.push([e,n,r]),t.a&&As(t)}function Ns(t){return H(t.g,function(t){return v(t[1])})}function As(e){var n,r;e.h&&e.a&&Ns(e)&&(n=e.h,(r=Rs[n])&&(l.clearTimeout(r.a),delete Rs[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(O(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Ns(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof Is?(Cs(n,a,t),n.C=!0):n.then(a,t)),r&&(n=new Ps(n),Rs[n.a]=n,e.h=n.a)}function ks(){P.call(this)}function Os(){P.call(this)}function Ps(t){this.a=l.setTimeout(m(this.c,this),0),this.b=t}(t=cs.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ns(this.b,Es(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ns(this.b,Es(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ms(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ms(this,!0)),cs.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?gs(this):this.Jc())},t.Jc=function(){gs(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case hs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Qo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ns(this.b,"Can not get response: "+t.message),null}},Is.prototype.cancel=function(t){var e;this.a?this.c instanceof Is&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Os,Ss(this),Ts(this,!1,t)))},Is.prototype.m=function(t,e){this.i=!1,Ts(this,t,e)},Is.prototype.then=function(t,e,n){var r,i,o=new pe(function(t,e){r=t,i=e});return Cs(this,r,function(t){t instanceof Os?o.cancel():i(t)}),o.then(t,e,n)},Is.prototype.$goog_Thenable=!0,w(ks,P),ks.prototype.message="Deferred has already fired",ks.prototype.name="AlreadyCalledError",w(Os,P),Os.prototype.message="Deferred was canceled",Os.prototype.name="CanceledError",Ps.prototype.c=function(){throw delete Rs[this.a],this.b};var Rs={};function Ds(t){var e=document,n=wt(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new Is(i),s=window.setTimeout(function(){Ls(r,!0);var t=new js(Fs,"Timeout reached for loading script "+n);Ss(o),Ts(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Ls(r,!1,s),Ss(o),Ts(o,!0,null))},r.onerror=function(){Ls(r,!0,s);var t=new js(Ms,"Error while loading script "+n);Ss(o),Ts(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=wt(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=l?f(i.document):(null===a&&(a=f(l.document)),a))&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function xs(){var t;this&&this.Wb&&((t=this.Wb)&&"SCRIPT"==t.tagName&&Ls(t,!0,this.Ma))}function Ls(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ms=0,Fs=1;function js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function Us(t){this.f=t}function Vs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Hs,this.g=ht(t.secureTokenHeaders||Ws),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||zs,this.a=ht(t.firebaseHeaders||Gs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==lr(),!(n=l.XMLHttpRequest||n&&Xl.INTERNAL.node&&Xl.INTERNAL.node.XMLHttpRequest)&&!hr())throw new I("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,hr()?this.f=new rs(self):fr()?this.f=new Us(n):this.f=new Bo,this.b=null}w(js,P),w(Us,jo),Us.prototype.a=function(){return new this.f},Us.prototype.b=function(){return{}};var qs,Bs="idToken",Hs=new Pr(3e4,6e4),Ws={"Content-Type":"application/x-www-form-urlencoded"},zs=new Pr(3e4,6e4),Gs={"Content-Type":"application/json"};function Ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Qs(t,e){e&&(t.l=Ys("https://securetoken.googleapis.com/v1/token",e),t.h=Ys("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Ys("https://identitytoolkit.googleapis.com/v2/",e))}function Ys(t,e){return t=On(t),e=On(e.url),t.f=t.a+t.f,Sn(t,e.c),t.a=e.a,Cn(t,e.g),t.toString()}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Js(t,e,n,r,i,o,s){var a;(t=((a=vr(a=mr())==dr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Ht&&Zt&&!(9<Zt))&&!hr()?(qs=qs||new pe(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[Zs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Cs(t,null,e,void 0)}(Ds(Et($s,{onload:Zs})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),m(t.s,t)):m(t.u,t))(e,n,r,i,o,s)}Vs.prototype.T=function(){return this.b},Vs.prototype.u=function(t,n,e,r,i,o){if(hr()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new I("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new cs(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),pn(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ns(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),dn(a,"ready",function(){s&&clearTimeout(s),Me(this)}),dn(a,"timeout",function(){s&&clearTimeout(s),Me(this),n&&n(null)}),ps(a,t,e,r,i)};var $s=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),Zs="__fcb"+Math.floor(1e6*Math.random()).toString();function ta(t,e,n,r,i,o,s){var a=On(e+n);An(a,"key",t.c),s&&An(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&An(a,c,i[c]);return new pe(function(e,n){Js(t,a.toString(),function(t){t?t.error?n(Ya(t,o||{})):e(t):n(new I("network-request-failed"))},r,u?void 0:Qn(Cr(i)),t.a,t.v.get())})}function ea(t){if("string"!=typeof(t=t.email)||!sr.test(t))throw new I("invalid-email")}function na(t){"email"in t&&ea(t)}function ra(t){if(!t[Bs]){if(t.mfaPendingCredential)throw new I("multi-factor-auth-required",null,ht(t));throw new I("internal-error")}}function ia(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new I("internal-error")}else{if(!t.sessionInfo)throw new I("missing-verification-id");if(!t.code)throw new I("missing-verification-code")}}Vs.prototype.s=function(t,n,r,i,o){var s=this;qs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Vs.prototype.zb=function(){return Ka(this,La,{})},Vs.prototype.Bb=function(t,e){return Ka(this,Da,{idToken:t,email:e})},Vs.prototype.Cb=function(t,e){return Ka(this,xa,{idToken:t,password:e})};var oa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function sa(t){if(!t.phoneVerificationInfo)throw new I("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new I("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new I("missing-verification-code")}function aa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new I("internal-error")}function ua(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Wn(t=new Vn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ca(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Fo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Fo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Fo(t)):t.errorMessage&&(e=Qa(t.errorMessage)),e)throw e;ra(t)}function ha(t,e){return e.returnIdpCredential=!0,Ka(t,ja,e)}function la(t,e){return e.returnIdpCredential=!0,Ka(t,Va,e)}function fa(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,Ua,e)}function pa(t){if(!t.oobCode)throw new I("invalid-action-code")}(t=Vs.prototype).Db=function(t,r){var i={idToken:t},o=[];return ut(oa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ka(this,Da,i)},t.vb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Aa,t)},t.wb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Sa,t)},t.ub=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Ca,t)},t.Eb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ka(this,Na,t)},t.fb=function(t){return Ka(this,Ha,t)},t.nb=function(t,e){return Ka(this,Pa,{oobCode:t,newPassword:e})},t.Ra=function(t){return Ka(this,va,{oobCode:t})},t.jb=function(t){return Ka(this,da,{oobCode:t})};var da={endpoint:"setAccountInfo",A:pa,Z:"email",B:!0},va={endpoint:"resetPassword",A:pa,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new I("internal-error")},B:!0},ya={endpoint:"signupNewUser",A:function(t){if(ea(t),!t.password)throw new I("weak-password")},G:ra,V:!0,B:!0},ga={endpoint:"createAuthUri",B:!0},ma={endpoint:"deleteAccount",N:["idToken"]},_a={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new I("internal-error")}},ba={endpoint:"emailLinkSignin",N:["email","oobCode"],A:ea,G:ra,V:!0,B:!0},wa={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:ea,G:ra,V:!0},Ea={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:sa,G:ra,B:!0,Na:!0},Ia={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:sa,G:ra,B:!0,Na:!0},Ta={endpoint:"getAccountInfo"},Sa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new I("internal-error");ea(t)},Z:"email",B:!0},Ca={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Na={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new I("internal-error")},Z:"email",B:!0},Aa={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new I("internal-error");ea(t)},Z:"email",B:!0},ka={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Oa={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new I("internal-error")}},Pa={endpoint:"resetPassword",A:pa,Z:"email",B:!0},Ra={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Da={endpoint:"setAccountInfo",N:["idToken"],A:na,V:!0},xa={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(na(t),!t.password)throw new I("weak-password")},G:ra,V:!0},La={endpoint:"signupNewUser",G:ra,V:!0,B:!0},Ma={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new I("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new I("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},Fa={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new I("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new I("internal-error")},B:!0,Na:!0},ja={endpoint:"verifyAssertion",A:aa,Ya:ua,G:ca,V:!0,B:!0},Ua={endpoint:"verifyAssertion",A:aa,Ya:ua,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new I("user-not-found");if(t.errorMessage)throw Qa(t.errorMessage);ra(t)},V:!0,B:!0},Va={endpoint:"verifyAssertion",A:function(t){if(aa(t),!t.idToken)throw new I("internal-error")},Ya:ua,G:ca,V:!0},qa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new I("invalid-custom-token")},G:ra,V:!0,B:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ea(t),!t.password)throw new I("wrong-password")},G:ra,V:!0,B:!0},Ha={endpoint:"verifyPhoneNumber",A:ia,G:ra,B:!0},Wa={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new I("internal-error");ia(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Fo(t);ra(t)}},za={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ia,G:ra,B:!0},Ga={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Bs]^!!t.refreshToken)throw new I("internal-error")},B:!0,Na:!0};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return we(new I("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return be(n).then(e.A).then(function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ta(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)}).then(function(t){return r=t,e.Ya?e.Ya(n,r):r}).then(e.G).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new I("internal-error");return r[e.Z]})}function Qa(t){return Ya({error:{errors:[{message:t}],code:400,message:t}})}function Ya(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new I(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new I(i[n],e);return!e&&t&&(e=Sr(t)),new I("internal-error",e)}function Xa(t){var o;this.b=t,this.a=null,this.rb=(o=this,(tu||(tu=new pe(function(t,e){function n(){Or(),_r("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Or(),e(Error("Network Error"))},timeout:$a.get()})}var r;_r("gapi.iframes.Iframe")?t():_r("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){_r("gapi.load")?n():e(Error("Network Error"))},be(Ds(r=Et(Ja,{onload:r}))).o(function(){e(Error("Network Error"))}))}).o(function(t){throw tu=null,t}))).then(function(){return new pe(function(r,i){_r("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Za.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ja=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),$a=new Pr(3e4,6e4),Za=new Pr(5e3,15e3),tu=null;function eu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Pn((t=On(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Pn("https",this.l,null,"/__/auth/iframe"),this.a=t,An(this.a,"apiKey",this.h),An(this.a,"appName",this.i),this.b=null,this.c=[]}function nu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ru(t){try{return Xl.app(t).auth().Ga()}catch(t){return[]}}function iu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function ou(t){var a=tr();return Ka(t,ka,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=On(a)).c,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?On(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(or.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Lo(tr())})}function su(i){return i.m||(i.m=ar().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=ru(i.b),(r=new eu(i.s,i.g,i.b,i.f)).f=t,r.b=e,r.c=Q(n||[]),i.u=r.toString()),i.v=new Xa(i.u),function(r){if(!r.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then(function(){t.a.register("authEvent",e,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.v,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Po(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",be(e)}return e.status="ERROR",be(e)})}(i)})),i.m}function au(t){return t.l||(t.C=t.c?gr(t.c,ru(t.b)):null,t.l=new Vs(t.g,k(t.i),t.C),t.f&&Qs(t.l,t.f)),t.l}function uu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new nu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.yb(h).toString()}function cu(t){if(this.a=t||Xl.INTERNAL.reactNative&&Xl.INTERNAL.reactNative.AsyncStorage,!this.a)throw new I("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function hu(t){this.b=t,this.a={},this.f=m(this.c,this)}eu.prototype.toString=function(){return this.f?An(this.a,"v",this.f):Hn(this.a.b,"v"),this.b?An(this.a,"eid",this.b):Hn(this.a.b,"eid"),this.c.length?An(this.a,"fw",this.c.join(",")):Hn(this.a.b,"fw"),this.a.toString()},nu.prototype.yb=function(t){return this.h=t,this},nu.prototype.toString=function(){var t;if(An(t=this.v?Pn((t=On(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):Pn("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),An(t,"appName",this.c),An(t,"authType",this.m),this.a.isOAuthProvider){var e,n=this.a;try{var r=Xl.app(this.c).auth().la()}catch(t){r=null}for(e in n.ob=r,An(t,"providerId",this.a.providerId),n=Cr((r=this.a).Ib))n[e]=n[e].toString();e=r.Qc,n=ht(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),ct(n)||An(t,"customParameters",Sr(n))}if("function"==typeof this.a.Qb&&((r=this.a.Qb()).length&&An(t,"scopes",r.join(","))),this.l?An(t,"redirectUrl",this.l):Hn(t.b,"redirectUrl"),this.g?An(t,"eventId",this.g):Hn(t.b,"eventId"),this.i?An(t,"v",this.i):Hn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&An(t,s,this.b[s]);return this.h?An(t,"tid",this.h):Hn(t.b,"tid"),this.f?An(t,"eid",this.f):Hn(t.b,"eid"),(s=ru(this.c)).length&&An(t,"fw",s.join(",")),t.toString()},(t=iu.prototype).Ob=function(e,n,t){var r=new I("popup-closed-by-user"),i=new I("web-storage-unsupported"),o=this,s=!1;return this.ma().then(function(){var t,r;r={type:"webStorageSupport"},su(t=o).then(function(){return e=t.v,n=r,e.rb.then(function(){return new pe(function(t){e.a.send(n.type,n,t,_r("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&rr(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new pe(function(e){return function t(){gn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return gn(t).then(function(){n(r)})})},t.Xb=function(){var t=mr();return!Tr(t)&&!kr(t)},t.Tb=function(){return!1},t.Mb=function(e,t,n,r,i,o,s,a){if(!e)return we(new I("popup-blocked"));if(s&&!Tr())return this.ma().o(function(t){rr(e),i(t)}),r(),be();this.a||(this.a=ou(au(this)));var u=this;return this.a.then(function(){var t=u.ma().o(function(t){throw rr(e),i(t),t});return r(),t}).then(function(){ko(n),s||er(uu(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Nb=function(t,e,n,r){this.a||(this.a=ou(au(this)));var i=this;return this.a.then(function(){ko(e),er(uu(i.s,i.g,i.b,t,e,tr(),n,i.c,void 0,i.i,r,i.f))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ma=function(){var t=this;return su(this).then(function(){return t.v.rb}).o(function(){throw t.a=null,new I("network-request-failed")})},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(e){G(this.h,function(t){return t==e})},(t=cu.prototype).get=function(t){return be(this.a.getItem(t)).then(function(t){return t&&Nr(t)})},t.set=function(t,e){return be(this.a.setItem(t,Sr(e)))},t.U=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var lu,fu=[];function pu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function du(t){this.a=t}function vu(t){this.c=t,this.b=!1,this.a=[]}function yu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return we(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new pe(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return gu(r,c),t}).o(function(t){throw gu(r,c),t})}function gu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e}))}function mu(){if(!Eu())throw new I("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;hr()&&self?(this.v=(n=hr()?self:null,V(fu,function(t){t.b==n&&(e=t)}),e||(e=new hu(n),fu.push(e)),e),pu(this.v,"keyChanged",function(t,n){return Nu(r).then(function(e){return 0<e.length&&V(r.a,function(t){t(e)}),{keyProcessed:W(e,n.key)}})}),pu(this.v,"ping",function(){return be(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?be().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):be(null)).then(function(t){(r.h=t)&&(r.g=new vu(new du(t)),yu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&W(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function _u(i){return new pe(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new pe(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return _u(i)}).then(function(t){e(t)}).o(function(t){n(t)}))}})}function bu(t){return t.i||(t.i=_u(t)),t.i}function wu(i,t){var o=0;return new pe(function e(n,r){bu(i).then(t).then(n).o(function(t){return 3<++o?void r(t):bu(i).then(function(t){return t.close(),i.i=void 0,e(n,r)}).o(function(t){r(t)})})})}function Eu(){try{return l.indexedDB}catch(t){return}}function Iu(t){return t.objectStore("firebaseLocalStorage")}function Tu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Su(t){return new pe(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Cu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?yu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):be();var n}function Nu(r){return bu(r).then(function(t){var i=Iu(Tu(t,!1));return i.getAll?Su(i.getAll()):new pe(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Au(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function ku(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then(function(){if(Eu()){var e=Ar(),n="__sak"+e;return lu=lu||new mu,(i=lu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.U(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){V(r.a,function(t){t(e)})}),t})}function Ou(){this.a={},this.type="inMemory"}function Pu(){if(!function(){var t="Node"==lr();if(!(t=Ru()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The LocalStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Ru()||Xl.INTERNAL.node.localStorage,this.type="localStorage"}function Ru(){try{var t=l.localStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Du(){this.type="nullStorage"}function xu(){if(!function(){var t="Node"==lr();if(!(t=Lu()||t&&Xl.INTERNAL.node&&Xl.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==lr())throw new I("internal-error","The SessionStorage compatibility library was not found.");throw new I("web-storage-unsupported")}this.a=Lu()||Xl.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Lu(){try{var t=l.sessionStorage,e=Ar();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Mu(){var t={};t.Browser=Uu,t.Node=Vu,t.ReactNative=qu,t.Worker=Bu,this.a=t[lr()]}hu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],V(t,function(t){e.push(be().then(function(){return t(n.origin,n.data.data)}))}),Ie(e).then(function(t){var e=[];V(t,function(t){e.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})}),V(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},du.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},vu.prototype.close=function(){for(;0<this.a.length;)gu(this,this.a[0]);this.b=!0},(t=mu.prototype).set=function(r,i){var o=this,s=!1;return wu(this,function(t){return Su((t=Iu(Tu(t,!0))).get(r))}).then(function(n){return wu(o,function(t){if(t=Iu(Tu(t,!0)),n)return n.value=i,Su(t.put(n));o.b++,s=!0;var e={};return e.fbase_key=r,e.value=i,Su(t.add(e))})}).then(function(){return o.c[r]=i,Cu(o,r)}).oa(function(){s&&o.b--})},t.get=function(e){return wu(this,function(t){return Su(Iu(Tu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.U=function(e){var n=this,r=!1;return wu(this,function(t){return r=!0,n.b++,Su(Iu(Tu(t,!0)).delete(e))}).then(function(){return delete n.c[e],Cu(n,e)}).oa(function(){r&&n.b--})},t.ca=function(t){var n;0==this.a.length&&(Au(n=this),function e(){n.f=setTimeout(function(){n.l=Nu(n).then(function(e){0<e.length&&V(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&Au(this)},(t=ku.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.U=function(e){return this.b.then(function(t){return t.U(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){G(this.a,function(t){return t==e})},(t=Ou.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.U=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=Pu.prototype).get=function(t){var e=this;return be().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Ze(l.window,"storage",t)},t.ia=function(t){l.window&&nn(l.window,"storage",t)},(t=Du.prototype).get=function(){return be(null)},t.set=function(){return be()},t.U=function(){return be()},t.ca=function(){},t.ia=function(){},(t=xu.prototype).get=function(t){var e=this;return be().then(function(){return Nr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return be().then(function(){var t=Sr(n);null===t?r.U(e):r.a.setItem(e,t)})},t.U=function(t){var e=this;return be().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Fu,ju,Uu={F:Pu,bb:xu},Vu={F:Pu,bb:xu},qu={F:cu,bb:Du},Bu={F:Pu,bb:Du},Hu={rd:"local",NONE:"none",td:"session"};function Wu(){var t=!(kr(mr())||!cr()),e=Tr(),n=br();this.m=t,this.h=e,this.l=n,this.a={},t=Fu=Fu||new Mu;try{this.g=!Zn()&&xr()||!l.indexedDB?new t.a.F:new ku(new(hr()?Ou:t.a.F))}catch(t){this.g=new Ou,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Ou}this.v=new Ou,this.f=m(this.Yb,this),this.b={}}function zu(){return ju=ju||new Wu}function Gu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Ku(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Qu(t,e,n){return n=Ku(e,n),"local"==e.F&&(t.b[n]=null),Gu(t,e.F).U(n)}function Yu(t){t.c&&(clearInterval(t.c),t.c=null)}function Xu(t){this.a=t,this.b=zu()}(t=Wu.prototype).get=function(t,e){return Gu(this,t.F).get(Ku(t,e))},t.set=function(e,t,n){var r=Ku(e,n),i=this,o=Gu(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Ku(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),ct(this.a)&&(Gu(this,"local").ca(this.f),this.h||(Zn()||!xr())&&l.indexedDB||!this.l||(Yu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Be({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Ku(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Gu(this,"local").ia(this.f),Yu(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Gu(this,"local").ia(this.f):Yu(this),this.m)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.mb(e))};Ht&&Zt&&10==Zt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,m(this.mb,this))},t.mb=function(t){this.a[t]&&V(this.a[t],function(t){t()})};var Ju,$u={name:"authEvent",F:"local"};function Zu(){this.a=zu()}function tc(t,e){this.b=ec,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Ju&&(Ju=l.Int32Array?new Int32Array(uc):uc),this.reset()}w(tc,function(){this.b=-1});for(var ec=64,nc=ec-1,rc=[],ic=0;ic<nc;ic++)rc[ic]=0;var oc=K(128,rc);function sc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Ju[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function ac(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(sc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(sc(t),i=0)}}t.c=i,t.g+=n}tc.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):Q(this.h)};var uc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function cc(){tc.call(this,8,hc)}w(cc,tc);var hc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function lc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Zu,this.g=new Xu(this.h),this.f=null,this.b=[],this.a=this.c=null}function fc(t){return new I("invalid-cordova-configuration",t)}function pc(t){var e=new cc;ac(e,t),t=[];var n=8*e.g;e.c<56?ac(e,oc,56-e.c):ac(e,oc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(sc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function dc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function vc(a){return a.f||(a.f=a.ma().then(function(){return new pe(function(n){function e(r){t=!0,s&&s.cancel(),yc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=Qi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Nr(kn(e=On(n),"firebaseError")||null))?T(e):null)?new Oo(t.c,t.b,null,null,e,null,t.T()):new Oo(t.c,t.b,n,t.f,null,null,t.T())),n=e||o),dc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Sa(t),!1}),i=a,o=new Oo("unknown",null,null,null,new I("no-auth-event")),t=!1,s=gn(500).then(function(){return yc(i).then(function(){t||dc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(_r("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},xo=xo||new Ro,function(t){var n=xo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=_r("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function yc(e){var t,n=null;return(t=e.g).b.get($u,t.a).then(Po).then(function(t){return n=t,Qu((t=e.g).b,$u,t.a)}).then(function(){return n})}function gc(t){this.a=t,this.b=zu()}(t=lc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(ur(void 0)?ar().then(function(){return new pe(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):we(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof _r("universalLinks.subscribe",l))throw fc("cordova-universal-links-plugin-fix is not installed");if(void 0===_r("BuildInfo.packageName",l))throw fc("cordova-plugin-buildinfo is not installed");if("function"!=typeof _r("cordova.plugins.browsertab.openUrl",l))throw fc("cordova-plugin-browsertab is not installed");if("function"!=typeof _r("cordova.InAppBrowser.open",l))throw fc("cordova-plugin-inappbrowser is not installed")},function(){throw new I("cordova-not-ready")})},t.Ob=function(t,e){return e(new I("operation-not-supported-in-this-environment")),be()},t.Mb=function(){return we(new I("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return we(new I("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=be().then(function(){return ko(e),vc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Oo(t,r,null,o,new I("no-auth-event"),null,i),a=_r("BuildInfo.packageName",l);if("string"!=typeof a)throw new I("invalid-cordova-configuration");var u=_r("BuildInfo.displayName",l),c={};if(mr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!mr().toLowerCase().match(/android/))return we(new I("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=pc(o),c.sessionId=o;var h=uu(n.v,n.i,n.l,t,e,null,r,n.m,c,n.u,i,n.s);return n.ma().then(function(){var t=n.h;return n.C.a.set($u,s.w(),t)}).then(function(){var t=_r("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new I("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=_r("cordova.plugins.browsertab.openUrl",l)))throw new I("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=_r("cordova.InAppBrowser.open",l)))throw new I("invalid-cordova-configuration");t=mr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new pe(function(e,t){a=function(){var t=_r("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||gn(2e3).then(function(){t(new I("redirect-cancelled-by-user"))})},c=function(){Rr()&&u()},o.addEventListener("resume",u,!1),mr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return yc(i).then(function(){throw t})})}).oa(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Sa(a),i.c=null})},t.Ea=function(e){this.b.push(e),vc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Oo("unknown",null,null,null,new I("no-auth-event")),e(t))})},t.Sa=function(e){G(this.b,function(t){return t==e})};var mc={name:"pendingRedirect",F:"session"};function _c(t){return Qu(t.b,mc,t.a)}function bc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Lc,this.C=new Vc,this.g=new gc(Dc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=wc(this.D,this.v,this.m,S,this.J)}function wc(t,e,n,r,i){var o=Xl.SDK_VERSION||null;return new(ur()?lc:iu)(t,e,n,o,r,i)}function Ec(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.ma().o(function(t){throw e.a==n&&e.reset(),t})}function Ic(n){n.a.Xb()&&Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)}),n.a.Tb()||Mc(n.b)}function Tc(n,t){W(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(mc,t.a).then(function(t){return"pending"==t}).then(function(t){t?_c(n.g).then(function(){Ec(n).o(function(t){var e=new Oo("unknown",null,null,null,new I("operation-not-supported-in-this-environment"));kc(t)&&n.s(e)})}):Ic(n)}).o(function(){Ic(n)})}function Sc(t,e){G(t.h,function(t){return t==e})}bc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=wc(this.D,this.v,this.m,null,this.J),this.i={}},bc.prototype.s=function(t){if(!t)throw new I("invalid-auth-event");if(6e5<=b()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=b())),e=!0;break}}return Mc(this.b),e};var Cc=new Pr(2e3,1e4),Nc=new Pr(3e4,6e4);function Ac(t,e,n,r,i,o,s){return t.a.Mb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function kc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Oc(e,t,n,r,i){var o,s;return(s=e.g).b.set(mc,"pending",s.a).then(function(){return e.a.Nb(t,n,r,i).o(function(t){if(kc(t))throw new I("operation-not-supported-in-this-environment");return o=t,_c(e.g).then(function(){throw o})}).then(function(){return e.a.$b()?new pe(function(){}):_c(e.g).then(function(){return e.qa()}).then(function(){}).o(function(){})})})}function Pc(t,e,n,r,i){return t.a.Ob(r,function(t){e.na(n,null,t,i)},Cc.get())}bc.prototype.qa=function(){return this.b.qa()};var Rc={};function Dc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function xc(t,e,n,r){var i=Dc(e,n,r);return Rc[i]||(Rc[i]=new bc(t,e,n,r)),Rc[i]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mc(t){t.g||(t.g=!0,Uc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&Uc(t,!1,null,null)}function jc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Uc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):jc(t,n):jc(t,{user:null}),t.f=[],t.c=[]}function Vc(){}function qc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Bc(t,e){this.a=e,Ur(this,"verificationId",t)}function Hc(t,e,n,r){return new Co(t).fb(e,n).then(function(t){return new Bc(t,r)})}function Wc(t){var e=xi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new I("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Vr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function zc(t,e,n){var r=e&&e[Kc];if(!r)throw new I("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Yi(null,r),this.b=[];var i=this;V(e[Gc]||[],function(t){(t=Wr(t))&&i.b.push(t)}),Ur(this,"auth",this.a),Ur(this,"session",this.c),Ur(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Uc(this,!0,null,t.a),be()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.T(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Uc(e,a,t,null)}).o(function(t){Uc(e,a,null,t)})}(this,t,e):we(new I("invalid-auth-event")):(Uc(this,!1,null,null),be())):we(new I("invalid-auth-event"))},Lc.prototype.qa=function(){var i=this;return new pe(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new I("timeout"),n.a&&n.a.cancel(),n.a=gn(Nc.get()).then(function(){n.b||(n.g=!0,Uc(n,!0,null,r))}))})},Vc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.T(),t.i).then(function(t){i.na(s,t,null,o)}).o(function(t){i.na(s,null,t,o)})):we(new I("invalid-auth-event"))):we(new I("invalid-auth-event"))},Bc.prototype.confirm=function(t){return t=No(this.verificationId,t),this.a(t)};var Gc="mfaInfo",Kc="mfaPendingCredential";function Qc(t,e,n,r){I.call(this,"multi-factor-auth-required",r,e),this.b=new zc(t,e,n),Ur(this,"resolver",this.b)}function Yc(t,e,n){if(t&&y(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Xc(){}function Jc(t){Ur(this,"factorId",t.fa),this.a=t}function $c(t){if(Jc.call(this,t),this.a.fa!=Co.PROVIDER_ID)throw new I("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Zc(t,e){for(var n in qe.call(this,t),e)this[n]=e[n]}function th(t,e){this.a=t,this.b=[],this.c=m(this.yc,this),Ze(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Kr]=t.uid),t.displayName&&(n[zr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[Qr]=t.phoneNumber);try{e=new Yr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),eh(this,r)}function eh(t,e){t.b=e,Ur(t,"enrolledFactors",e)}function nh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function ih(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function oh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function sh(t,e){t.b=Di(e[Bs]||""),t.a=e.refreshToken,oh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ah(e,t){return r=e.f,i=t,new pe(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Js(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ya(t)):t.access_token&&t.refresh_token?e(t):n(new I("internal-error")):n(new I("network-request-failed"))},"POST",Bn(i).toString(),r.g,r.m.get()):n(new I("internal-error"))}).then(function(t){return e.b=Di(t.access_token),e.a=t.refresh_token,oh(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function uh(t,e){this.a=t||null,this.b=e||null,Vr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function ch(t,e,n,r,i,o){Vr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function hh(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Xl.SDK_VERSION?gr(Xl.SDK_VERSION):null;this.a=new Vs(this.l,k(S),i),t.emulatorConfig&&Qs(this.a,t.emulatorConfig),this.b=new ih(this.a),mh(this,e[Bs]),sh(this.b,e),Ur(this,"refreshToken",this.b.a),wh(this,n||{}),fn.call(this),this.R=!1,this.s&&wr()&&(this.i=xc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new nh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0})),this.aa=m(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Qs(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ph(o,t.f)},this.ba=null,this.O=new th(this,n),Ur(this,"multiFactor",this.O)}function lh(t,e){t.ja&&nn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&Ze(e,"languageCodeChanged",t.Oa)}function fh(t,e){t.X&&nn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&Ze(e,"emulatorConfigChanged",t.Aa)}function ph(t,e){t.$=e,Xs(t.a,Xl.SDK_VERSION?gr(Xl.SDK_VERSION,t.$):null)}function dh(t,e){t.ba&&nn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&Ze(e,"frameworkChanged",t.Ba)}function vh(e){try{return Xl.app(e.m).auth()}catch(t){throw new I("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function yh(t){t.D||t.u.b||(t.u.start(),nn(t,"tokenChanged",t.aa),Ze(t,"tokenChanged",t.aa))}function gh(t){nn(t,"tokenChanged",t.aa),t.u.stop()}function mh(t,e){t.za=e,Ur(t,"_lat",e)}function _h(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Ie(e).then(function(){return t})}function bh(t){t.i&&!t.R&&(t.R=!0,Tc(t.i,t))}function wh(t,e){Vr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new uh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Eh(){}function Ih(t){return be().then(function(){if(t.D)throw new I("app-deleted")})}function Th(t){return B(t.providerData,function(t){return t.providerId})}function Sh(t,e){e&&(Ch(t,e.providerId),t.providerData.push(e))}function Ch(t,e){G(t.providerData,function(t){return t.providerId==e})}function Nh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ur(t,e,n)}function Ah(e,t){var n,r;e!=t&&(Vr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Ur(e,"metadata",new uh((r=t.metadata).a,r.b)):Ur(e,"metadata",new uh),V(t.providerData,function(t){Sh(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,n.c=r.c,Ur(e,"refreshToken",e.b.a),eh(e.O,t.O.b))}function kh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Ka((e=i).a,Ta,{idToken:n}).then(m(e.Kc,e)).then(function(){return r||Nh(i,"isAnonymous",!1),t})})}function Oh(t,e){e[Bs]&&t.za!=e[Bs]&&(sh(t.b,e),t.dispatchEvent(new Zc("tokenChanged")),mh(t,e[Bs]),Nh(t,"refreshToken",t.b.a))}function Ph(t,e){return kh(t).then(function(){if(W(Th(t),e))return _h(t).then(function(){throw new I("provider-already-linked")})})}function Rh(t,e,n){return qr({user:t,credential:Ao(e),additionalUserInfo:e=Ui(e),operationType:n})}function Dh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function xh(n,r,t,e,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(n.h&&!i)return we(n.h);var o=ji(t.providerId),s=Ar(n.uid+":::"),a=null;(!Tr()||cr())&&n.s&&t.isOAuthProvider&&(a=uu(n.s,n.l,n.m,r,t,null,s,Xl.SDK_VERSION||null,null,null,n.tenantId));var u=ir(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(Mh(n),!i)return n.I().then(function(){})}).then(function(){return Ac(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new pe(function(t,e){n.na(r,null,new I("cancelled-popup-request"),n.g||null),n.f=t,n.C=e,n.g=s,n.c=Pc(n.i,n,r,u,s)})}).then(function(t){return u&&rr(u),t?qr(t):null}).o(function(t){throw u&&rr(u),t}),Fh(n,e,i)}function Lh(e,t,n,r,i){if(!wr())return we(new I("operation-not-supported-in-this-environment"));if(e.h&&!i)return we(e.h);var o=null,s=Ar(e.uid+":::");return r=r().then(function(){if(Mh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,_h(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Vh,e.w(),t.a)),t}).then(function(){return Oc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ha)return qh(e.ha);throw o}).then(function(){if(o)throw o}),Fh(e,r,i)}function Mh(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new I("internal-error");throw new I("auth-domain-config-required")}}function Fh(n,t,e){var r,i=(t=t,e=e,(r=n).h&&!e?(t.cancel(),we(r.h)):t.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Zc("userInvalidated")),r.h=t),t}));return n.J.push(i),i.oa(function(){z(n.J,i)}),i.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Yc(t.w(),vh(n),m(n.jc,n))),e||t})}function jh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Bs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new hh(e,n,t);return t.providerData&&V(t.providerData,function(t){t&&Sh(i,qr(t))}),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Uh(t){this.a=t,this.b=zu()}zc.prototype.Rc=function(t){var n=this;return t.sb(this.a.a,this.c).then(function(t){var e=ht(n.f);return delete e[Gc],delete e[Kc],ft(e,t),n.g(e)})},w(Qc,I),Xc.prototype.sb=function(t,e,n){return e.type==Xi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:So(o.a)}),Ka(s,Ea,t)})):(r=this,i=t,e.Ha().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:So(r.a)}),Ka(i,Ia,t)}));var r,i,o,s,a},w(Jc,Xc),w($c,Jc),w(Zc,qe),(t=th.prototype).yc=function(t){var e;eh(this,(t=t.hd,e=[],V(t.mfaInfo||[],function(t){(t=Wr(t))&&e.push(t)}),e))},t.Rb=function(){return this.a.I().then(function(t){return new Yi(t,null)})},t.fc=function(e,n){var r=this,i=this.a.a;return this.Rb().then(function(t){return e.sb(i,t,n)}).then(function(t){return Oh(r.a,t),r.a.reload()})},t.bd=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ka(e,Ga,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return eh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,function(t){return t.w()})}}},nh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=gn(rh(n,t)).then(function(){return e=l.document,n=null,Rr()||!e?be():new pe(function(t){n=function(){Rr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},nh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ih.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ih.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new I("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ah(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},uh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(hh,fn),hh.prototype.wa=function(t){this.ya=t,Ks(this.a,t)},hh.prototype.la=function(){return this.ya},hh.prototype.Ga=function(){return Q(this.$)},hh.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},Ur(hh.prototype,"providerId","firebase"),(t=hh.prototype).reload=function(){var t=this;return Fh(this,Ih(this).then(function(){return kh(t).then(function(){return _h(t)}).then(Eh)}))},t.oc=function(t){return this.I(t).then(function(t){return new Wc(t)})},t.I=function(t){var e=this;return Fh(this,Ih(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new I("internal-error");return t.accessToken!=e.za&&(mh(e,t.accessToken),e.dispatchEvent(new Zc("tokenChanged"))),Nh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new I("internal-error");wh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,function(t){return new ch(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Sh(this,n[r]);Nh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Zc("userReloaded",{hd:t}))},t.Lc=function(t){return Fr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Fh(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=Rh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Cc=function(t){return Fr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(e){var n=this,r=null;return Fh(this,Ph(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Rh(n,t,"link"),Dh(n,t)}).then(function(){return r}))},t.Dc=function(t,e){var n=this;return Fh(this,Ph(this,"phone").then(function(){return Hc(vh(n),t,e,m(n.qb,n))}))},t.Mc=function(t,e){var n=this;return Fh(this,be().then(function(){return Hc(vh(n),t,e,m(n.tb,n))}),!0)},t.Bb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.ed=function(e){var n=this;return Fh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.Cb=function(e){var n=this;return Fh(this,this.I().then(function(t){return n.a.Cb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Ih(this);var n=this;return Fh(this,this.I().then(function(t){return n.a.Db(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Nh(n,"displayName",t.displayName||null),Nh(n,"photoURL",t.photoUrl||null),V(n.providerData,function(t){"password"===t.providerId&&(Ur(t,"displayName",n.displayName),Ur(t,"photoURL",n.photoURL))}),_h(n)}).then(Eh))},t.cd=function(e){var n=this;return Fh(this,kh(this).then(function(t){return W(Th(n),e)?Ka(n.a,_a,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return V(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),V(Th(n),function(t){e[t]||Ch(n,t)}),e[Co.PROVIDER_ID]||Ur(n,"phoneNumber",null),_h(n)}):_h(n).then(function(){throw new I("no-such-provider")})}))},t.delete=function(){var e=this;return Fh(this,this.I().then(function(t){return Ka(e.a,ma,{idToken:t})}).then(function(){e.dispatchEvent(new Zc("userDeleted"))})).then(function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");lh(e,null),fh(e,null),dh(e,null),e.J=[],e.D=!0,gh(e),Ur(e,"refreshToken",null),e.i&&Sc(e.i,e)})},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?m(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?m(this.Lb,this):null},t.Ec=function(t){var e=this;return xh(this,"linkViaPopup",t,function(){return Ph(e,t.providerId).then(function(){return _h(e)})},!1)},t.Nc=function(t){return xh(this,"reauthViaPopup",t,function(){return be()},!0)},t.Fc=function(t){var e=this;return Lh(this,"linkViaRedirect",t,function(){return Ph(e,t.providerId)},!1)},t.Oc=function(t){return Lh(this,"reauthViaRedirect",t,function(){return be()},!0)},t.Kb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return la(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Rh(i,t,"link"),Dh(i,t)}).then(function(){return o}),Fh(this,t)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Fh(this,be().then(function(){return Zi(fa(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Rh(i,t,"reauthenticate"),Oh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.ub=function(e){var n=this,r=null;return Fh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:ki(new _i(e))}).then(function(t){return n.a.ub(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Eb=function(e,n){var r=this,i=null;return Fh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:ki(new _i(n))}).then(function(t){return r.a.Eb(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.jc=function(t){var e=null,n=this;return Fh(this,t=Zi(be(t),n.uid).then(function(t){return e=Rh(n,t,"reauthenticate"),Oh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(e,this.metadata.w()),V(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.O.w()),e};var Vh={name:"redirectUser",F:"session"};function qh(t){return Qu(t.b,Vh,t.a)}function Bh(t){var e,n,r,i;this.a=t,this.b=zu(),this.c=null,this.f=(n=zh("local"),r=zh("session"),i=zh("none"),function(n,r,i){var o=Ku(r,i),s=Gu(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=Nr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Wh,e.a).then(function(t){return t?zh(t):n})})})}).then(function(t){return e.c=t,Hh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(zh("local"),this.a,m(this.g,this))}function Hh(t,e){var n,a,r=[];for(n in Hu)Hu[n]!==e&&r.push(Qu(t.b,zh(Hu[n]),t.a));return r.push(Qu(t.b,Wh,t.a)),a=r,new pe(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Ee(a[s],_(t,s),o);else n(i)})}Bh.prototype.g=function(){var e=this,n=zh("local");Yh(this,function(){return be().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Hh(e,"local").then(function(){e.c=n})})})};var Wh={name:"persistence",F:"session"};function zh(t){return{name:"authUser",F:t}}function Gh(t,e){return Yh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Kh(t){return Yh(t,function(){return Qu(t.b,t.c,t.a)})}function Qh(t,e,n){return Yh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),jh(t||{})})})}function Yh(t,e){return t.f=t.f.then(e,e),t.f}function Xh(t){if(this.l=!1,Ur(this,"settings",new qc),Ur(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new I("invalid-api-key");var n,e,r,i,o,s;t=Xl.SDK_VERSION?gr(Xl.SDK_VERSION):null,this.a=new Vs(this.app.options&&this.app.options.apiKey,k(S),t),this.R=[],this.s=[],this.O=[],this.hb=Xl.INTERNAL.createSubscribe(m(this.zc,this)),this.X=void 0,this.bc=Xl.INTERNAL.createSubscribe(m(this.Ac,this)),rl(this,null),this.i=new Bh(this.app.options.apiKey+":"+this.app.name),this.D=new Uh(this.app.options.apiKey+":"+this.app.name),this.$=ul(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(Vh,t.a).then(function(t){return t&&e&&(t.authDomain=e),jh(t||{})})}(e.D,e.app.options.authDomain).then(function(t){return(e.m=t)&&(t.ha=e.D),qh(e.D)});return ul(e,t)}(n).then(function(){return Qh(n.i,e,n.P)}).then(function(e){return e?(e.ha=n.D,n.m&&(n.m.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Gh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:Kh(n.i)})):null}).then(function(t){rl(n,t||null)}),ul(n,t))),this.h=ul(this,(r=this).$.then(function(){return el(r)}).o(function(){}).then(function(){if(!r.l)return r.ja()}).o(function(){}).then(function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(zh("local"),t.a,r.ja))})),this.ba=!1,this.ja=m(this.Zc,this),this.Ba=m(this.da,this),this.ya=m(this.mc,this),this.za=m(this.wc,this),this.Aa=m(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&wr()&&(i.Oa=i.$.then(function(){var t;if(!i.l)return i.b=xc(o,s,i.app.name,i.P),Tc(i.b,i),ol(i)&&bh(ol(i)),i.m&&(bh(i.m),(t=i.m).wa(i.la()),lh(t,i),ph(t=i.m,i.J),dh(t,i),Qs((t=i.m).a,i.P),fh(t,i),i.m=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Gc,this),this.u=0,fn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return t=this.P?qr({protocol:(t=On(this.P.url)).c,host:t.a,port:t.g,options:qr({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function Jh(t){qe.call(this,"languageCodeChanged"),this.h=t}function $h(t){qe.call(this,"emulatorConfigChanged"),this.c=t}function Zh(t){qe.call(this,"frameworkChanged"),this.f=t}function tl(t){return t.Oa||we(new I("auth-domain-config-required"))}function el(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=tl(t).then(function(){return t.b.qa()}).then(function(t){return t?qr(t):null});return ul(t,e)}function nl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.P&&(a.emulatorConfig=o.P),o.$.then(function(){return t=a,e=s,n=o.D,r=o.Ga(),i=new hh(t,e),n&&(i.ha=n),r&&ph(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return ol(o)&&t.uid==ol(o).uid?Ah(ol(o),t):(rl(o,t),bh(t)),o.da(t)}).then(function(){al(o)})}function rl(t,e){var n,r;ol(t)&&(n=ol(t),r=t.Ba,G(n.S,function(t){return t==r}),nn(ol(t),"tokenChanged",t.ya),nn(ol(t),"userDeleted",t.za),nn(ol(t),"userInvalidated",t.Aa),gh(ol(t))),e&&(e.S.push(t.Ba),Ze(e,"tokenChanged",t.ya),Ze(e,"userDeleted",t.za),Ze(e,"userInvalidated",t.Aa),0<t.u&&yh(e)),Ur(t,"currentUser",e),e&&(e.wa(t.la()),lh(e,t),ph(e,t.J),dh(e,t),Qs(e.a,t.P),fh(e,t))}function il(n,t){var e=null,r=null;return ul(n,t.then(function(t){return e=Ao(t),r=Ui(t),nl(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Yc(t.w(),n,m(n.kc,n))),e||t}).then(function(){return qr({user:ol(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function ol(t){return t.currentUser}function sl(t){return ol(t)&&ol(t)._lat||null}function al(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](sl(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](sl(t))}}function ul(t,e){return t.R.push(e),e.oa(function(){z(t.R,e)}),e}function cl(){}function hl(){this.a={},this.b=1e12}Bh.prototype.xb=function(e){var n=null,r=this;return function(t){var e=new I("invalid-persistence-type"),n=new I("unsupported-persistence-type");t:{for(r in Hu)if(Hu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(lr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!br()&&"none"!==t)throw n}}(e),Yh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Hh(r,e)}).then(function(){if(r.c=zh(e),n)return r.b.set(r.c,n,r.a)}):be()})},w(Xh,fn),w(Jh,qe),w($h,qe),w(Zh,qe),(t=Xh.prototype).xb=function(t){return t=this.i.xb(t),ul(this,t)},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Ks(this.a,this.aa),this.dispatchEvent(new Jh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new I("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");e=!!e&&!!e.disableWarnings,n=e,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&!n&&ar().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.P={url:t,ec:e},this.settings.ib=!0,Qs(this.a,this.P),this.dispatchEvent(new $h(this.P))}var n},t.Gc=function(t){this.J.push(t),Xs(this.a,Xl.SDK_VERSION?gr(Xl.SDK_VERSION,this.J):null),this.dispatchEvent(new Zh(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:ol(this)&&ol(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return il(i,ha(i.a,o))})},t.Xc=function(e){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var n=this,t=ji(e.providerId),r=Ar(),i=null;(!Tr()||cr())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=uu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Xl.SDK_VERSION||null,null,null,this.T(),this.P));var o=ir(i,t&&t.ua,t&&t.ta);return ul(this,t=tl(this).then(function(t){return Ac(t,o,"signInViaPopup",e,r,!!i,n.T())}).then(function(){return new pe(function(t,e){n.na("signInViaPopup",null,new I("cancelled-popup-request"),n.g),n.f=t,n.C=e,n.g=r,n.c=Pc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&rr(o),t?qr(t):null}).o(function(t){throw o&&rr(o),t}))},t.Yc=function(t){if(!wr())return we(new I("operation-not-supported-in-this-environment"));var e=this;return ul(this,tl(this).then(function(){return Yh(t=e.i,function(){return t.b.set(Wh,t.c.F,t.a)});var t}).then(function(){return Oc(e.b,"signInViaRedirect",t,void 0,e.T())}))},t.qa=function(){var e=this;return el(this).then(function(t){return e.b&&Fc(e.b.b),t}).o(function(t){throw e.b&&Fc(e.b.b),t})},t.dd=function(t){if(!t)return we(new I("null-user"));if(this.S!=t.tenantId)return we(new I("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.D,s=e.Ga(),a=r.b,(n={})[Bs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new hh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),s&&ph(i,s),Ah(i,r),i);return ul(this,this.h.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return ol(e)&&t.uid==ol(e).uid?(Ah(ol(e),t),e.da(t)):(rl(e,u),bh(u),e.da(u))}).then(function(){al(e)}))},t.Ab=function(){var t=this,e=this.h.then(function(){return t.b&&Fc(t.b.b),ol(t)?(rl(t,null),Kh(t.i).then(function(){al(t)})):be()});return ul(this,e)},t.Zc=function(){var r=this;return Qh(this.i,this.app.options.authDomain).then(function(t){if(!r.l){var e,n;if((n=ol(r)&&t)&&(n=ol(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Ah(ol(r),t),ol(r).I();(ol(r)||t)&&(rl(r,t),t&&(bh(t),t.ha=r.D),r.b&&Tc(r.b,r),al(r))}})},t.da=function(t){return Gh(this.i,t)},t.mc=function(){al(this),this.da(ol(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then(function(){return il(e,be(t))})},t.zc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(ol(e))})},t.Ac=function(t){var e,n,r=this;n=function(){t.next(ol(r))},(e=this).O.push(n),ul(e,e.h.then(function(){!e.l&&W(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(sl(e)))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(ol(r)):"function"==typeof t.next&&t.next(ol(r))}),this.bc(t,e,n)},t.nc=function(t){var e=this,n=this.h.then(function(){return ol(e)?ol(e).I(t).then(function(t){return{accessToken:t}}):null});return ul(this,n)},t.Tc=function(t){var n=this;return this.h.then(function(){return il(n,Ka(n.a,qa,{token:t}))}).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!1),n.da(e),t})},t.Uc=function(t,e){var n=this;return this.h.then(function(){return il(n,Ka(n.a,Ba,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.h.then(function(){return il(n,Ka(n.a,ya,{email:t,password:e}))})},t.$a=function(t){var e=this;return this.h.then(function(){return il(e,t.ka(e.a))})},t.Sc=function(t){return Fr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var n=this;return this.h.then(function(){var t=ol(n);if(t&&t.isAnonymous){var e=qr({providerId:null,isNewUser:!1});return qr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return il(n,n.a.zb()).then(function(t){var e=t.user;return Nh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return ol(this)&&ol(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&ol(this)&&yh(ol(this))},t.Pc=function(e){var n=this;V(this.s,function(t){t==e&&n.u--}),this.u<0&&(this.u=0),0==this.u&&ol(this)&&gh(ol(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),ul(this,this.h.then(function(){e.l||W(e.s,t)&&t(sl(e))}))},t.removeAuthTokenListener=function(e){G(this.s,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(zh("local"),t.a,this.ja),this.b&&(Sc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return ul(this,Ka(this.a,ga,{identifier:t,continueUri:Er()?tr():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Bc=function(t){return!!Eo(t)},t.wb=function(e,n){var r=this;return ul(this,be().then(function(){var t=new _i(n);if(!t.c)throw new I("argument-error",Ei+" must be true when sending sign in link to email");return ki(t)}).then(function(t){return r.a.wb(e,t)}).then(function(){}))},t.jd=function(t){return this.Ra(t).then(function(t){return t.data.email})},t.nb=function(t,e){return ul(this,this.a.nb(t,e).then(function(){}))},t.Ra=function(t){return ul(this,this.a.Ra(t).then(function(t){return new Xr(t)}))},t.jb=function(t){return ul(this,this.a.jb(t).then(function(){}))},t.vb=function(e,t){var n=this;return ul(this,be().then(function(){return void 0===t||ct(t)?{}:ki(new _i(t))}).then(function(t){return n.a.vb(e,t)}).then(function(){}))},t.Wc=function(t,e){return ul(this,Hc(this,t,e,m(this.$a,this)))},t.Vc=function(n,r){var i=this;return ul(this,be().then(function(){var t=r||tr(),e=wo(n,t);if(!(t=Eo(t)))throw new I("argument-error","Invalid email link!");if(t.tenantId!==i.T())throw new I("tenant-id-mismatch");return i.$a(e)}))},cl.prototype.render=function(){},cl.prototype.reset=function(){},cl.prototype.getResponse=function(){},cl.prototype.execute=function(){};var ll=null;function fl(t,e){return(e=pl(e))&&t.a[e]||null}function pl(t){return(t=void 0===t?1e12:t)?t.toString():null}function dl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ze(this.f,"click",this.i)}function vl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function yl(){}function gl(){}hl.prototype.render=function(t,e){return this.a[this.b.toString()]=new dl(t,e),this.b++},hl.prototype.reset=function(t){var e=fl(this,t);t=pl(t),e&&t&&(e.delete(),delete this.a[t])},hl.prototype.getResponse=function(t){return(t=fl(this,t))?t.getResponse():null},hl.prototype.execute=function(t){(t=fl(this,t))&&t.execute()},dl.prototype.getResponse=function(){return vl(this),this.b},dl.prototype.execute=function(){vl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},dl.prototype.delete=function(){vl(this),this.g=!0,clearTimeout(this.a),this.a=null,nn(this.f,"click",this.i)},Ur(yl,"FACTOR_ID","phone"),gl.prototype.g=function(){return be(ll=ll||new hl)},gl.prototype.c=function(){};var ml=null;function _l(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var bl=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),wl=new Pr(3e4,6e4);_l.prototype.g=function(i){var o=this;return new pe(function(t,e){var r=setTimeout(function(){e(new I("network-request-failed"))},wl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new I("internal-error"))),delete l[o.a]},be(Ds(Et(bl,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new I("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},_l.prototype.c=function(){this.b--};var El=null;function Il(t,e,n,r,i,o,s){if(Ur(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?ml=ml||new gl:El=El||new _l,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Cl])throw new I("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Nl],!l.document)throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new I("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Vs(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[Tl];this.a[Tl]=function(t){var e;Al(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=_r(u,l))&&e(t)};var c=this.a[Sl];this.a[Sl]=function(){var t;Al(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=_r(c,l))&&t()}}var Tl="callback",Sl="expired-callback",Cl="sitekey",Nl="size";function Al(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function kl(t,e){return t.h.push(e),e.oa(function(){z(t.h,e)}),e}function Ol(t){if(t.D)throw new I("internal-error","RecaptchaVerifier instance has been destroyed.")}function Pl(t,e,n){var r=!1;try{this.b=n||Xl.app()}catch(t){throw new I("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new I("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Xl.SDK_VERSION?gr(Xl.SDK_VERSION,o):null,Il.call(this,n,t,e,function(){try{var e=i.b.auth().la()}catch(t){e=null}return e},o,k(S),r)}function Rl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new I("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Dl.length)throw new I("internal-error","Argument validator received an unsupported number of arguments.");n=Dl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new I("argument-error",t+" failed: "+r)}(t=Il.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=kl(this,be().then(function(){if(Er()&&!hr())return ar();throw new I("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.u())}).then(function(t){return e.g=t,Ka(e.s,Oa,{})}).then(function(t){e.a[Cl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Ol(this);var n=this;return kl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.v,n.i||(t=ee(e),e=se("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Ol(this);var i=this;return kl(this,this.render().then(function(e){return new pe(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Ol(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ol(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=ee(this.v);for(;t=e.firstChild;)e.removeChild(t)}},w(Pl,Il);var Dl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function xl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Ll(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ml(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:y}}function Fl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function jl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Ul(n){return{name:n?n+"Credential":"credential",K:n?"a valid "+n+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ka||!e)}}}function Vl(){return{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}}function ql(){return{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Bl(t,e){return y(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Hl(t){return y(t)&&"string"==typeof t.uid}function Wl(){return{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function zl(e,n,t,r){return{name:t||"",K:e.K+" or "+n.K,optional:!!r,M:function(t){return e.M(t)||n.M(t)}}}function Gl(t,e){for(var n in e){var r=e[n].name;t[r]=Yl(r,t[n],e[n].j)}}function Kl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){Rl(t,[n],[r],!0),this[e]=r},r,n,e[n].kb),enumerable:!0})}}function Ql(t,e,n,r){t[e]=Yl(e,n,r)}function Yl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Rl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Gl(Xh.prototype,{jb:{name:"applyActionCode",j:[xl("code")]},Ra:{name:"checkActionCode",j:[xl("code")]},nb:{name:"confirmPasswordReset",j:[xl("code"),xl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[xl("email"),xl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[xl("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[xl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[zl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[zl(Ml(),Fl(),"nextOrObserver"),Fl("opt_error",!0),Fl("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[xl("email"),zl(Ml("opt_actionCodeSettings",!0),jl(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[xl("email"),Ml("actionCodeSettings")]},xb:{name:"setPersistence",j:[xl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Ul()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Ul()]},Tc:{name:"signInWithCustomToken",j:[xl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[xl("email"),xl("password")]},Vc:{name:"signInWithEmailLink",j:[xl("email"),xl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[xl("phoneNumber"),Wl()]},Xc:{name:"signInWithPopup",j:[ql()]},Yc:{name:"signInWithRedirect",j:[ql()]},dd:{name:"updateCurrentUser",j:[zl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof hh)}},jl(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[xl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[xl("url"),Ml("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[xl("code")]}}),Kl(Xh.prototype,{lc:{name:"languageCode",kb:zl(xl(),jl(),"languageCode")},ti:{name:"tenantId",kb:zl(xl(),jl(),"tenantId")}}),(Xh.Persistence=Hu).LOCAL="local",Xh.Persistence.SESSION="session",Xh.Persistence.NONE="none",Gl(hh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Ll("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Ll("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Ul()]},qb:{name:"linkWithCredential",j:[Ul()]},Dc:{name:"linkWithPhoneNumber",j:[xl("phoneNumber"),Wl()]},Ec:{name:"linkWithPopup",j:[ql()]},Fc:{name:"linkWithRedirect",j:[ql()]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Ul()]},tb:{name:"reauthenticateWithCredential",j:[Ul()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[xl("phoneNumber"),Wl()]},Nc:{name:"reauthenticateWithPopup",j:[ql()]},Oc:{name:"reauthenticateWithRedirect",j:[ql()]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[zl(Ml("opt_actionCodeSettings",!0),jl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[xl(null,!0)]},cd:{name:"unlink",j:[xl("provider")]},Bb:{name:"updateEmail",j:[xl("email")]},Cb:{name:"updatePassword",j:[xl("password")]},ed:{name:"updatePhoneNumber",j:[Ul("phone")]},Db:{name:"updateProfile",j:[Ml("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[xl("email"),zl(Ml("opt_actionCodeSettings",!0),jl(null,!0),"opt_actionCodeSettings",!0)]}}),Gl(hl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gl(cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gl(pe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Kl(qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Ll("appVerificationDisabledForTesting")}}),Gl(Bc.prototype,{confirm:{name:"confirm",j:[xl("verificationCode")]}}),Ql($i,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[oo,_o,To,no],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[zl(xl(),Ml(),"json")]),Ql(bo,"credential",function(t,e){return new mo(t,e)},[xl("email"),xl("password")]),Gl(mo.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Gl(co.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(co,"credential",ho,[zl(xl(),Ml(),"token")]),Ql(bo,"credentialWithLink",wo,[xl("email"),xl("emailLink")]),Gl(lo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(lo,"credential",fo,[zl(xl(),Ml(),"token")]),Gl(po.prototype,{Ca:{name:"addScope",j:[xl("scope")]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(po,"credential",vo,[zl(xl(),zl(Ml(),jl()),"idToken"),zl(xl(),jl(),"accessToken",!0)]),Gl(yo.prototype,{Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Ql(yo,"credential",go,[zl(xl(),Ml(),"token"),xl("secret",!0)]),Gl(uo.prototype,{Ca:{name:"addScope",j:[xl("scope")]},credential:{name:"credential",j:[zl(xl(),zl(Ml(),jl()),"optionsOrIdToken"),zl(xl(),jl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ml("customOAuthParameters")]}}),Gl(ro.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Gl(to.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Ql(Co,"credential",No,[xl("verificationId"),xl("verificationCode")]),Gl(Co.prototype,{fb:{name:"verifyPhoneNumber",j:[zl(xl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Bl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Bl(t.session,Ji)&&Hl(t.multiFactorHint):t.session&&t.multiFactorUid?Bl(t.session,Ji)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Wl()]}}),Gl(Io.prototype,{w:{name:"toJSON",j:[xl(null,!0)]}}),Gl(I.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Mo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Lo.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(Qc.prototype,{toJSON:{name:"toJSON",j:[xl(null,!0)]}}),Gl(zc.prototype,{Rc:{name:"resolveSignIn",j:[Vl()]}}),Gl(th.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[Vl(),xl("displayName",!0)]},bd:{name:"unenroll",j:[zl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Hl},xl(),"multiFactorInfoIdentifier")]}}),Gl(Pl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Ql(hi,"parseLink",mi,[xl("link")]),Ql(yl,"assertion",function(t){return new $c(t)},[Ul("phone")]),function(){if(void 0===Xl||!Xl.INTERNAL||!Xl.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:$r,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Jr,VERIFY_AND_CHANGE_EMAIL:Zr,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Xh,AuthCredential:$i,Error:I};Ql(t,"EmailAuthProvider",bo,[]),Ql(t,"FacebookAuthProvider",co,[]),Ql(t,"GithubAuthProvider",lo,[]),Ql(t,"GoogleAuthProvider",po,[]),Ql(t,"TwitterAuthProvider",yo,[]),Ql(t,"OAuthProvider",uo,[xl("providerId")]),Ql(t,"SAMLAuthProvider",ao,[xl("providerId")]),Ql(t,"PhoneAuthProvider",Co,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xh)}}]),Ql(t,"RecaptchaVerifier",Pl,[zl(xl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ml("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Xl.app.App)}}]),Ql(t,"ActionCodeURL",hi,[]),Ql(t,"PhoneMultiFactorGenerator",yl,[]),Xl.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Xh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xl.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.nc,t),addAuthTokenListener:m(t.cc,t),removeAuthTokenListener:m(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xl.registerVersion("@firebase/auth","0.16.3"),Xl.INTERNAL.extendNamespace({User:hh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var $s=(Zs.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Zo(e))},Zs.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:$o(t)},Zs.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Zs.prototype.prefixedName_=function(t){return this.prefix_+t},Zs.prototype.toString=function(){return this.domStorage_.toString()},Zs);function Zs(t){this.domStorage_=t,this.prefix_="firebase:"}var ta=(ea.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},ea.prototype.get=function(t){return es(this.cache_,t)?this.cache_[t]:null},ea.prototype.remove=function(t){delete this.cache_[t]},ea);function ea(){this.cache_={},this.isInMemoryStorage=!0}function na(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Oo(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new os).update(e),t=t.digest(),Ro.encodeByteArray(t)}function ra(t,e){Oo(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(da.logLevel=ks.VERBOSE,ga=da.log.bind(da),e&&pa.set("logging_enabled",!0)):"function"==typeof t?ga=t:(ga=null,pa.remove("logging_enabled"))}function ia(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+ya.apply(void 0,So(t));da.error(n)}function oa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+ya.apply(void 0,So(t));throw da.error(n),new Error(n)}function sa(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+ya.apply(void 0,So(t));da.warn(n)}function aa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function ua(t,e){return t===e?0:t<e?-1:1}function ca(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Zo(e))}function ha(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var la,Kn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new $s(e)}}catch(t){}return new ta},fa=Kn("localStorage"),pa=Kn("sessionStorage"),da=new Ls("@firebase/database"),va=(la=1,function(){return la++}),ya=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=ya.apply(null,i):n+="object"==typeof i?Zo(i):i,n+=" "}return n},ga=null,ma=!0,_a=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ma&&(ma=!1,null===ga&&!0===pa.get("logging_enabled")&&ra(!0)),ga&&(t=ya.apply(null,e),ga(t))},ba=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];_a.apply(void 0,So([n],t))}},wa="[MIN_NAME]",Ea="[MAX_NAME]",Ia=function(t,e){if(t===e)return 0;if(t===wa||e===Ea)return-1;if(e===wa||t===Ea)return 1;var n=Ra(t),r=Ra(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Ta=function(t){if("object"!=typeof t||null===t)return Zo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Zo(n[i]),r+=":",r+=Ta(t[n[i]]);return r+="}"};function Sa(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Ca(t){var e,n,r,i;Oo(!aa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Na(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw sa("Exception was thrown by user callback.",t),e},Math.floor(0))}}function Aa(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var ka=new RegExp("^-?(0*)\\d{1,10}$"),Oa=-2147483648,Pa=2147483647,Ra=function(t){if(ka.test(t)){t=Number(t);if(Oa<=t&&t<=Pa)return t}return null},Da=(Object.defineProperty(xa,"Empty",{get:function(){return new xa("")},enumerable:!1,configurable:!0}),xa.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},xa.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},xa.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new xa(this.pieces_,t)},xa.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},xa.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},xa.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},xa.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},xa.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new xa(t,0)},xa.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof xa)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new xa(e,0)},xa.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},xa.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return xa.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},xa.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=Ia(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},xa.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},xa.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},xa);function xa(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var La=(Object.defineProperty(Ma,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Ma,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Ma.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=vs(t),this.checkValid_()},Ma.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=vs(t),0<this.parts_.length&&--this.byteLength_},Ma.prototype.checkValid_=function(){if(this.byteLength_>Ma.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Ma.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Ma.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Ma.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Ma.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Ma);function Ma(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=vs(this.parts_[n]);this.checkValid_()}var Fa=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ja="websocket",Ua="long_polling",Va=(qa.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},qa.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},qa.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},qa.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},qa.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&fa.set("host:"+this.host,this.internalHost))},qa.prototype.connectionURL=function(t,e){var n;if(Oo("string"==typeof t,"typeof type must == string"),Oo("object"==typeof e,"typeof params must == object"),t===ja)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Ua)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Sa(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},qa.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},qa.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},qa);function qa(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=fa.get("host:"+t)||this.host}function Ba(t,e){var n=tu(t),r=n.namespace;return"firebase.com"===n.domain&&oa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||oa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&sa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Va(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new Da(n.pathString)}}function Ha(t){return"string"==typeof t&&0!==t.length&&!eu.test(t)}function Wa(t){return"string"==typeof t&&0!==t.length&&!nu.test(t)}function za(t){return null===t||"string"==typeof t||"number"==typeof t&&!aa(t)||t&&"object"==typeof t&&es(t,".sv")}function Ga(t,e,n,r,i){i&&void 0===n||iu(fs(t,e,i),n,r)}function Ka(t,e,n,r,i){if(!i||void 0!==n){var o=fs(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Sa(n,function(t,e){t=new Da(t);if(iu(o,e,r.child(t)),".priority"===t.getBack()&&!za(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Ha(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Da.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function Qa(t,e,n,r){if(!r||void 0!==n){if(aa(n))throw new Error(fs(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!za(n))throw new Error(fs(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ya(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(fs(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Xa(t,e,n,r){if(!(r&&void 0===n||Ha(n)))throw new Error(fs(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function Ja(t,e,n,r){if(!(r&&void 0===n||Wa(n)))throw new Error(fs(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function $a(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Za(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!Ha(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Wa(r)))throw new Error(fs(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var tu=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Io(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):sa("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},eu=/[\[\].#$\/\u0000-\u001F\u007F]/,nu=/[\[\].#$\u0000-\u001F\u007F]/,ru=10485760,iu=function(n,t,e){var r=e instanceof Da?new La(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(aa(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>ru/3&&vs(t)>ru)throw new Error(n+"contains a string greater than "+ru+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Sa(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!Ha(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),iu(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ou=(su.prototype.cancel=function(t){ls("OnDisconnect.cancel",0,1,arguments.length),ps("OnDisconnect.cancel",1,t,!0);var e=new Lo;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},su.prototype.remove=function(t){ls("OnDisconnect.remove",0,1,arguments.length),$a("OnDisconnect.remove",this.path_),ps("OnDisconnect.remove",1,t,!0);var e=new Lo;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},su.prototype.set=function(t,e){ls("OnDisconnect.set",1,2,arguments.length),$a("OnDisconnect.set",this.path_),Ga("OnDisconnect.set",1,t,this.path_,!1),ps("OnDisconnect.set",2,e,!0);var n=new Lo;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},su.prototype.setWithPriority=function(t,e,n){ls("OnDisconnect.setWithPriority",2,3,arguments.length),$a("OnDisconnect.setWithPriority",this.path_),Ga("OnDisconnect.setWithPriority",1,t,this.path_,!1),Qa("OnDisconnect.setWithPriority",2,e,!1),ps("OnDisconnect.setWithPriority",3,n,!0);var r=new Lo;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},su.prototype.update=function(t,e){if(ls("OnDisconnect.update",1,2,arguments.length),$a("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,sa("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ka("OnDisconnect.update",1,t,this.path_,!1),ps("OnDisconnect.update",2,e,!0);var i=new Lo;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},su);function su(t,e){this.repo_=t,this.path_=e}var au=(uu.prototype.toJSON=function(){return ls("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},uu);function uu(t,e){this.committed=t,this.snapshot=e}function cu(t){if(t===""+Pa)return"-";var e=Ra(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?Ea:(e=n[i],e=pu.charAt(pu.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function hu(t){if(t===""+Oa)return wa;var e=Ra(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+Pa:(delete n[n.length-1],n.join("")):(n[n.length-1]=pu.charAt(pu.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var lu,fu,pu="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",du=(lu=0,fu=[],function(t){var e=t===lu;lu=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=pu.charAt(t%64),t=Math.floor(t/64);Oo(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===fu[r];r--)fu[r]=0;fu[r]++}else for(r=0;r<12;r++)fu[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=pu.charAt(fu[r]);return Oo(20===i.length,"nextPushId: Length should be 20."),i}),vu=(yu.Wrap=function(t,e){return new yu(t,e)},yu);function yu(t,e){this.name=t,this.node=e}var gu,vt=(mu.prototype.getCompare=function(){return this.compare.bind(this)},mu.prototype.indexedValueChanged=function(t,e){t=new vu(wa,t),e=new vu(wa,e);return 0!==this.compare(t,e)},mu.prototype.minPost=function(){return vu.MIN},mu);function mu(){}var _u,bu=(_o(wu,_u=vt),Object.defineProperty(wu,"__EMPTY_NODE",{get:function(){return gu},set:function(t){gu=t},enumerable:!1,configurable:!0}),wu.prototype.compare=function(t,e){return Ia(t.name,e.name)},wu.prototype.isDefinedOn=function(t){throw Po("KeyIndex.isDefinedOn not expected to be called.")},wu.prototype.indexedValueChanged=function(t,e){return!1},wu.prototype.minPost=function(){return vu.MIN},wu.prototype.maxPost=function(){return new vu(Ea,gu)},wu.prototype.makePost=function(t,e){return Oo("string"==typeof t,"KeyIndex indexValue must always be a string."),new vu(t,gu)},wu.prototype.toString=function(){return".key"},wu);function wu(){return null!==_u&&_u.apply(this,arguments)||this}var Eu,Iu=new bu;function Tu(t){return"number"==typeof t?"number:"+Ca(t):"string:"+t}var Su,Cu,Nu,Au,ku=function(t){var e;t.isLeafNode()?(e=t.val(),Oo("string"==typeof e||"number"==typeof e||"object"==typeof e&&es(e,".sv"),"Priority must be a string or number.")):Oo(t===Eu||t.isEmpty(),"priority of unexpected type."),Oo(t===Eu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Ou=(Object.defineProperty(Pu,"__childrenNodeConstructor",{get:function(){return Su},set:function(t){Su=t},enumerable:!1,configurable:!0}),Pu.prototype.isLeafNode=function(){return!0},Pu.prototype.getPriority=function(){return this.priorityNode_},Pu.prototype.updatePriority=function(t){return new Pu(this.value_,t)},Pu.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Pu.__childrenNodeConstructor.EMPTY_NODE},Pu.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Pu.__childrenNodeConstructor.EMPTY_NODE},Pu.prototype.hasChild=function(){return!1},Pu.prototype.getPredecessorChildName=function(t,e){return null},Pu.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Pu.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Pu.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Oo(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Pu.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Pu.prototype.isEmpty=function(){return!1},Pu.prototype.numChildren=function(){return 0},Pu.prototype.forEachChild=function(t,e){return!1},Pu.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Pu.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Tu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Ca(this.value_):this.value_,this.lazyHash_=na(t)),this.lazyHash_},Pu.prototype.getValue=function(){return this.value_},Pu.prototype.compareTo=function(t){return t===Pu.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Pu.__childrenNodeConstructor?-1:(Oo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Pu.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Pu.VALUE_TYPE_ORDER.indexOf(e),i=Pu.VALUE_TYPE_ORDER.indexOf(n);return Oo(0<=r,"Unknown leaf type: "+e),Oo(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Pu.prototype.withIndex=function(){return this},Pu.prototype.isIndexed=function(){return!0},Pu.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Pu.VALUE_TYPE_ORDER=["object","boolean","number","string"],Pu);function Pu(t,e){void 0===e&&(e=Pu.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Oo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),ku(this.priorityNode_)}function Ru(){return null!==Au&&Au.apply(this,arguments)||this}var Du=new(_o(Ru,Au=vt),Ru.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?Ia(t.name,e.name):r},Ru.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Ru.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Ru.prototype.minPost=function(){return vu.MIN},Ru.prototype.maxPost=function(){return new vu(Ea,new Ou("[PRIORITY-POST]",Nu))},Ru.prototype.makePost=function(t,e){t=Cu(t);return new vu(e,new Ou("[PRIORITY-POST]",t))},Ru.prototype.toString=function(){return".priority"},Ru),xu=(Lu.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},Lu.prototype.hasNext=function(){return 0<this.nodeStack_.length},Lu.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Lu);function Lu(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Mu=(Fu.prototype.copy=function(t,e,n,r,i){return new Fu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Fu.prototype.count=function(){return this.left.count()+1+this.right.count()},Fu.prototype.isEmpty=function(){return!1},Fu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Fu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Fu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Fu.prototype.minKey=function(){return this.min_().key},Fu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Fu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Fu.prototype.removeMin_=function(){if(this.left.isEmpty())return Uu.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Fu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Uu.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Fu.prototype.isRed_=function(){return this.color},Fu.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Fu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Fu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Fu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Fu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Fu.prototype.rotateRight_=function(){var t=this.copy(null,null,Fu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Fu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Fu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Fu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Fu.RED=!0,Fu.BLACK=!1,Fu);function Fu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Fu.RED,this.left=null!=r?r:Uu.EMPTY_NODE,this.right=null!=i?i:Uu.EMPTY_NODE}ju.prototype.copy=function(t,e,n,r,i){return this},ju.prototype.insert=function(t,e,n){return new Mu(t,e,null)},ju.prototype.remove=function(t,e){return this},ju.prototype.count=function(){return 0},ju.prototype.isEmpty=function(){return!0},ju.prototype.inorderTraversal=function(t){return!1},ju.prototype.reverseTraversal=function(t){return!1},ju.prototype.minKey=function(){return null},ju.prototype.maxKey=function(){return null},ju.prototype.check_=function(){return 0},ju.prototype.isRed_=function(){return!1},dt=ju;function ju(){}var Uu=(Vu.prototype.insert=function(t,e){return new Vu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Mu.BLACK,null,null))},Vu.prototype.remove=function(t){return new Vu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Mu.BLACK,null,null))},Vu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Vu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Vu.prototype.isEmpty=function(){return this.root_.isEmpty()},Vu.prototype.count=function(){return this.root_.count()},Vu.prototype.minKey=function(){return this.root_.minKey()},Vu.prototype.maxKey=function(){return this.root_.maxKey()},Vu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Vu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Vu.prototype.getIterator=function(t){return new xu(this.root_,null,this.comparator_,!1,t)},Vu.prototype.getIteratorFrom=function(t,e){return new xu(this.root_,t,this.comparator_,!1,e)},Vu.prototype.getReverseIteratorFrom=function(t,e){return new xu(this.root_,t,this.comparator_,!0,e)},Vu.prototype.getReverseIterator=function(t){return new xu(this.root_,null,this.comparator_,!0,t)},Vu.EMPTY_NODE=new dt,Vu);function Vu(t,e){void 0===e&&(e=Vu.EMPTY_NODE),this.comparator_=t,this.root_=e}var qu=Math.log(2),Bu=(Hu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Hu);function Hu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/qu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Wu,zu,Gu=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new Mu(i,r.node,Mu.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new Mu(i,r.node,Mu.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new Mu(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,Mu.BLACK):(r(u,Mu.BLACK),r(u,Mu.RED))}return n}(new Bu(c.length));return new Uu(e||t,n)},Ku={},Qu=(Object.defineProperty(Yu,"Default",{get:function(){return Oo(Du,"ChildrenNode.ts has not been loaded"),Wu=Wu||new Yu({".priority":Ku},{".priority":Du})},enumerable:!1,configurable:!0}),Yu.prototype.get=function(t){var e=ns(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Uu?e:null},Yu.prototype.hasIndex=function(t){return es(this.indexSet_,t.toString())},Yu.prototype.addIndex=function(t,e){Oo(t!==Iu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(vu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Gu(r,t.getCompare()):Ku;var a=t.toString(),u=bo({},this.indexSet_);u[a]=t;e=bo({},this.indexes_);return e[a]=n,new Yu(e,u)},Yu.prototype.addToIndexes=function(s,a){var u=this;return new Yu(is(this.indexes_,function(t,e){var n=ns(u.indexSet_,e);if(Oo(n,"Missing index implementation for "+e),t===Ku){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(vu.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Gu(r,n.getCompare())}return Ku}n=a.get(s.name);return n&&(t=t.remove(new vu(s.name,n))),t.insert(s,s.node)}),this.indexSet_)},Yu.prototype.removeFromIndexes=function(n,r){return new Yu(is(this.indexes_,function(t){if(t===Ku)return t;var e=r.get(n.name);return e?t.remove(new vu(n.name,e)):t}),this.indexSet_)},Yu);function Yu(t,e){this.indexes_=t,this.indexSet_=e}function Xu(t,e){return Ia(t.name,e.name)}function Ju(t,e){return Ia(t,e)}var $u,Zu=(Object.defineProperty(tc,"EMPTY_NODE",{get:function(){return zu=zu||new tc(new Uu(Ju),null,Qu.Default)},enumerable:!1,configurable:!0}),tc.prototype.isLeafNode=function(){return!1},tc.prototype.getPriority=function(){return this.priorityNode_||zu},tc.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new tc(this.children_,t,this.indexMap_)},tc.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?zu:t},tc.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},tc.prototype.hasChild=function(t){return null!==this.children_.get(t)},tc.prototype.updateImmediateChild=function(t,e){if(Oo(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new vu(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?zu:this.priorityNode_;return new tc(r,n,i)},tc.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Oo(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,e)},tc.prototype.isEmpty=function(){return this.children_.isEmpty()},tc.prototype.numChildren=function(){return this.children_.count()},tc.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Du,function(t,e){r[t]=e.val(n),i++,s&&tc.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},tc.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+Tu(this.getPriority().val())+":"),this.forEachChild(Du,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":na(n)),this.lazyHash_},tc.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new vu(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},tc.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},tc.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new vu(t,this.children_.get(t)):null},tc.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},tc.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new vu(t,this.children_.get(t)):null},tc.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},tc.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},tc.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,vu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},tc.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},tc.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,vu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},tc.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===nc?-1:0},tc.prototype.withIndex=function(t){if(t===Iu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new tc(this.children_,this.priorityNode_,t)},tc.prototype.isIndexed=function(t){return t===Iu||this.indexMap_.hasIndex(t)},tc.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Du),n=t.getIterator(Du),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},tc.prototype.resolveIndex_=function(t){return t===Iu?null:this.indexMap_.get(t.toString())},tc.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,tc);function tc(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&ku(this.priorityNode_),this.children_.isEmpty()&&Oo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ec(){return $u.call(this,new Uu(Ju),Zu.EMPTY_NODE,Qu.Default)||this}var nc=new(_o(ec,$u=Zu),ec.prototype.compareTo=function(t){return t===this?0:1},ec.prototype.equals=function(t){return t===this},ec.prototype.getPriority=function(){return this},ec.prototype.getImmediateChild=function(t){return Zu.EMPTY_NODE},ec.prototype.isEmpty=function(){return!1},ec);Object.defineProperties(vu,{MIN:{value:new vu(wa,Zu.EMPTY_NODE)},MAX:{value:new vu(Ea,nc)}}),bu.__EMPTY_NODE=Zu.EMPTY_NODE,Ou.__childrenNodeConstructor=Zu,Eu=nc,Nu=nc;var rc,ic=!0;function oc(n,t){if(void 0===t&&(t=null),null===n)return Zu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Oo(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ou(n,oc(t));if(n instanceof Array||!ic){var r=Zu.EMPTY_NODE;return Sa(n,function(t,e){es(n,t)&&"."!==t.substring(0,1)&&(!(e=oc(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(oc(t))}var i=[],o=!1;if(Sa(n,function(t,e){"."!==t.substring(0,1)&&((e=oc(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new vu(t,e))))}),0===i.length)return Zu.EMPTY_NODE;var e=Gu(i,Xu,function(t){return t.name},Ju);if(o){var s=Gu(i,Du.getCompare());return new Zu(e,oc(t),new Qu({".priority":s},{".priority":Du}))}return new Zu(e,oc(t),Qu.Default)}function sc(){return null!==rc&&rc.apply(this,arguments)||this}Cu=oc;var ac,uc=new(_o(sc,rc=vt),sc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Ia(t.name,e.name):n},sc.prototype.isDefinedOn=function(t){return!0},sc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},sc.prototype.minPost=function(){return vu.MIN},sc.prototype.maxPost=function(){return vu.MAX},sc.prototype.makePost=function(t,e){t=oc(t);return new vu(e,t)},sc.prototype.toString=function(){return".value"},sc),cc=(_o(hc,ac=vt),hc.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},hc.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},hc.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?Ia(t.name,e.name):r},hc.prototype.makePost=function(t,e){t=oc(t),t=Zu.EMPTY_NODE.updateChild(this.indexPath_,t);return new vu(e,t)},hc.prototype.maxPost=function(){var t=Zu.EMPTY_NODE.updateChild(this.indexPath_,nc);return new vu(Ea,t)},hc.prototype.toString=function(){return this.indexPath_.slice().join("/")},hc);function hc(t){var e=ac.call(this)||this;return e.indexPath_=t,Oo(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var lc=(fc.prototype.val=function(){return ls("DataSnapshot.val",0,0,arguments.length),this.node_.val()},fc.prototype.exportVal=function(){return ls("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},fc.prototype.toJSON=function(){return ls("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},fc.prototype.exists=function(){return ls("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},fc.prototype.child=function(t){ls("DataSnapshot.child",0,1,arguments.length),t=String(t),Ja("DataSnapshot.child",1,t,!1);var e=new Da(t),t=this.ref_.child(e);return new fc(this.node_.getChild(e),t,Du)},fc.prototype.hasChild=function(t){ls("DataSnapshot.hasChild",1,1,arguments.length),Ja("DataSnapshot.hasChild",1,t,!1);t=new Da(t);return!this.node_.getChild(t).isEmpty()},fc.prototype.getPriority=function(){return ls("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},fc.prototype.forEach=function(n){var r=this;return ls("DataSnapshot.forEach",1,1,arguments.length),ps("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new fc(e,r.ref_.child(t),Du))})},fc.prototype.hasChildren=function(){return ls("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(fc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),fc.prototype.numChildren=function(){return ls("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},fc.prototype.getRef=function(){return ls("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(fc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),fc);function fc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var pc=(dc.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},dc.prototype.getEventType=function(){return this.eventType},dc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},dc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Zo(this.snapshot.exportVal())},dc);function dc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var vc=(yc.prototype.getPath=function(){return this.path},yc.prototype.getEventType=function(){return"cancel"},yc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},yc.prototype.toString=function(){return this.path.toString()+":cancel"},yc);function yc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var gc=(mc.prototype.respondsTo=function(t){return"value"===t},mc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new pc("value",this,new lc(t.snapshotNode,e.getRef(),n))},mc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Oo(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},mc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new vc(this,t,e):null},mc.prototype.matches=function(t){return t instanceof mc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},mc.prototype.hasAnyCallback=function(){return null!==this.callback_},mc);function mc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var _c,bc=(wc.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return es(this.callbacks_,t)},wc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new vc(this,t,e):null},wc.prototype.createEvent=function(t,e){Oo(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new pc(t.type,this,new lc(t.snapshotNode,n,e),t.prevName)},wc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Oo(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},wc.prototype.matches=function(e){var n=this;if(e instanceof wc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},wc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},wc);function wc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Ec=(Object.defineProperty(Ic,"__referenceConstructor",{get:function(){return Oo(_c,"Reference.ts has not been loaded"),_c},set:function(t){_c=t},enumerable:!1,configurable:!0}),Ic.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Iu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==wa)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ea)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Du){if(null!=e&&!za(e)||null!=n&&!za(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Oo(t.getIndex()instanceof cc||t.getIndex()===uc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},Ic.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},Ic.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},Ic.prototype.getQueryParams=function(){return this.queryParams_},Ic.prototype.getRef=function(){return ls("Query.ref",0,0,arguments.length),new Ic.__referenceConstructor(this.repo,this.path)},Ic.prototype.on=function(t,e,n,r){ls("Query.on",2,4,arguments.length),Ya("Query.on",1,t,!1),ps("Query.on",2,e,!1);n=Ic.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},Ic.prototype.onValueEvent=function(t,e,n){n=new gc(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,n)},Ic.prototype.onChildEvent=function(t,e,n){n=new bc(t,e,n);this.repo.addEventCallbackForQuery(this,n)},Ic.prototype.off=function(t,e,n){ls("Query.off",0,3,arguments.length),Ya("Query.off",1,t,!0),ps("Query.off",2,e,!0),ds("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new gc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new bc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Ic.prototype.get=function(){return this.repo.getValue(this)},Ic.prototype.once=function(e,n,t,r){var i=this;ls("Query.once",1,4,arguments.length),Ya("Query.once",1,e,!1),ps("Query.once",2,n,!0);var o=Ic.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Lo;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},Ic.prototype.limitToFirst=function(t){if(ls("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Ic(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},Ic.prototype.limitToLast=function(t){if(ls("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Ic(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},Ic.prototype.orderByChild=function(t){if(ls("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Ja("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new Da(t);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new cc(t),t=this.queryParams_.orderBy(t);return Ic.validateQueryEndpoints_(t),new Ic(this.repo,this.path,t,!0)},Ic.prototype.orderByKey=function(){ls("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Iu);return Ic.validateQueryEndpoints_(t),new Ic(this.repo,this.path,t,!0)},Ic.prototype.orderByPriority=function(){ls("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Du);return Ic.validateQueryEndpoints_(t),new Ic(this.repo,this.path,t,!0)},Ic.prototype.orderByValue=function(){ls("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(uc);return Ic.validateQueryEndpoints_(t),new Ic(this.repo,this.path,t,!0)},Ic.prototype.startAt=function(t,e){void 0===t&&(t=null),ls("Query.startAt",0,2,arguments.length),Ga("Query.startAt",1,t,this.path,!0),Xa("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(Ic.validateLimit_(n),Ic.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new Ic(this.repo,this.path,n,this.orderByCalled_)},Ic.prototype.startAfter=function(t,e){void 0===t&&(t=null),ls("Query.startAfter",0,2,arguments.length),Ga("Query.startAfter",1,t,this.path,!1),Xa("Query.startAfter",2,e,!0);e=this.queryParams_.startAfter(t,e);if(Ic.validateLimit_(e),Ic.validateQueryEndpoints_(e),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new Ic(this.repo,this.path,e,this.orderByCalled_)},Ic.prototype.endAt=function(t,e){void 0===t&&(t=null),ls("Query.endAt",0,2,arguments.length),Ga("Query.endAt",1,t,this.path,!0),Xa("Query.endAt",2,e,!0);e=this.queryParams_.endAt(t,e);if(Ic.validateLimit_(e),Ic.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Ic(this.repo,this.path,e,this.orderByCalled_)},Ic.prototype.endBefore=function(t,e){void 0===t&&(t=null),ls("Query.endBefore",0,2,arguments.length),Ga("Query.endBefore",1,t,this.path,!1),Xa("Query.endBefore",2,e,!0);e=this.queryParams_.endBefore(t,e);if(Ic.validateLimit_(e),Ic.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new Ic(this.repo,this.path,e,this.orderByCalled_)},Ic.prototype.equalTo=function(t,e){if(ls("Query.equalTo",1,2,arguments.length),Ga("Query.equalTo",1,t,this.path,!1),Xa("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(t,e).endAt(t,e)},Ic.prototype.toString=function(){return ls("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Ic.prototype.toJSON=function(){return ls("Query.toJSON",0,1,arguments.length),this.toString()},Ic.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Ic.prototype.queryIdentifier=function(){var t=this.queryObject(),t=Ta(t);return"{}"===t?"default":t},Ic.prototype.isEqual=function(t){if(ls("Query.isEqual",1,1,arguments.length),!(t instanceof Ic)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},Ic.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ps(t,3,r.cancel,!0),r.context=n,ds(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(fs(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(Ic.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),Ic);function Ic(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var Tc=(Sc.prototype.getImmediateChild=function(t){return new Sc(this.node_.getImmediateChild(t))},Sc.prototype.node=function(){return this.node_},Sc);function Sc(t){this.node_=t}var Cc=(Nc.prototype.getImmediateChild=function(t){t=this.path_.child(t);return new Nc(this.syncTree_,t)},Nc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},Nc);function Nc(t,e){this.syncTree_=t,this.path_=e}function Ac(t,e,n,r){return Dc(e,new Cc(n,t),r)}function kc(t,e,n){return Dc(t,new Tc(e),n)}var Oc=function(t,e,n){return t&&"object"==typeof t?(Oo(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Pc(t[".sv"],e,n):"object"==typeof t[".sv"]?Rc(t[".sv"],e):void Oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Pc=function(t,e,n){if("timestamp"===t)return n.timestamp;Oo(!1,"Unexpected server value: "+t)},Rc=function(t,e,n){t.hasOwnProperty("increment")||Oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&Oo(!1,"Unexpected increment value: "+t);e=e.node();if(Oo(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t};function Dc(t,r,i){var e=t.getPriority().val(),n=Oc(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Oc(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Ou(e,oc(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new Ou(n))),t.forEachChild(Du,function(t,e){var n=Dc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var xc,Lc=(Mc.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Mc.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Mc),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},Mc.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Du,function(t,e){n.remember(new Da(t),e)}),this.forget(t)}if(0<this.children.size){e=t.getFront();return t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size}return!0},Mc.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new Da(n.toString()+"/"+t);e.forEachTree(t,r)})},Mc.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Mc);function Mc(){this.value=null,this.children=new Map}(Kn=xc=xc||{})[Kn.OVERWRITE=0]="OVERWRITE",Kn[Kn.MERGE=1]="MERGE",Kn[Kn.ACK_USER_WRITE=2]="ACK_USER_WRITE",Kn[Kn.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Fc=(jc.User=new jc(!0,!1,null,!1),jc.Server=new jc(!1,!0,null,!1),jc.forServerTaggedQuery=function(t){return new jc(!1,!0,t,!0)},jc);function jc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Oo(!r||e,"Tagged queries must be from server.")}var Uc,Vc=(qc.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Oo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Da(t));return new qc(Da.Empty,e,this.revert)}return Oo(this.path.getFront()===t,"operationForChild called for unrelated child."),new qc(this.path.popFront(),this.affectedTree,this.revert)},qc);function qc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=xc.ACK_USER_WRITE,this.source=Fc.User}var Bc=(Hc.fromObject=function(t){var n=Hc.Empty;return Sa(t,function(t,e){n=n.set(new Da(t),e)}),n},Hc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Hc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Da.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==e?null:{path:new Da(n).child(e.path),value:e.value}},Hc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Hc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),e=this.children.get(e);return null!==e?e.subtree(t.popFront()):Hc.Empty},Hc.prototype.set=function(t,e){if(t.isEmpty())return new Hc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||Hc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new Hc(this.value,e)},Hc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Hc.Empty:new Hc(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?Hc.Empty:new Hc(this.value,t)}return this},Hc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),e=this.children.get(e);return e?e.get(t.popFront()):null},Hc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||Hc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Hc(this.value,e)},Hc.prototype.fold=function(t){return this.fold_(Da.Empty,t)},Hc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Hc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Da.Empty,e)},Hc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),r=this.children.get(i);return r?r.findOnPath_(t.popFront(),e.child(i),n):null},Hc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Da.Empty,e)},Hc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Hc.Empty},Hc.prototype.foreach=function(t){this.foreach_(Da.Empty,t)},Hc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Hc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Hc.Empty=new Hc(null),Hc);function Hc(t,e){void 0===e&&(e=Uc=Uc||new Uu(ua)),this.value=t,this.children=e}var Wc=(zc.prototype.operationForChild=function(t){return this.path.isEmpty()?new zc(this.source,Da.Empty):new zc(this.source,this.path.popFront())},zc);function zc(t,e){this.source=t,this.path=e,this.type=xc.LISTEN_COMPLETE}var Gc=(Kc.prototype.operationForChild=function(t){return this.path.isEmpty()?new Kc(this.source,Da.Empty,this.snap.getImmediateChild(t)):new Kc(this.source,this.path.popFront(),this.snap)},Kc);function Kc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=xc.OVERWRITE}var Qc=(Yc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new Da(t));return e.isEmpty()?null:e.value?new Gc(this.source,Da.Empty,e.value):new Yc(this.source,Da.Empty,e)}return Oo(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Yc(this.source,this.path.popFront(),this.children)},Yc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Yc);function Yc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=xc.MERGE}var Xc=(Jc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Jc.prototype.isFiltered=function(){return this.filtered_},Jc.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;t=t.getFront();return this.isCompleteForChild(t)},Jc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Jc.prototype.getNode=function(){return this.node_},Jc);function Jc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var $c=(Zc.prototype.updateEventSnap=function(t,e,n){return new Zc(new Xc(t,e,n),this.serverCache_)},Zc.prototype.updateServerSnap=function(t,e,n){return new Zc(this.eventCache_,new Xc(t,e,n))},Zc.prototype.getEventCache=function(){return this.eventCache_},Zc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Zc.prototype.getServerCache=function(){return this.serverCache_},Zc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Zc.Empty=new Zc(new Xc(Zu.EMPTY_NODE,!1,!1),new Xc(Zu.EMPTY_NODE,!1,!1)),Zc);function Zc(t,e){this.eventCache_=t,this.serverCache_=e}var th=(eh.valueChange=function(t){return new eh(eh.VALUE,t)},eh.childAddedChange=function(t,e){return new eh(eh.CHILD_ADDED,e,t)},eh.childRemovedChange=function(t,e){return new eh(eh.CHILD_REMOVED,e,t)},eh.childChangedChange=function(t,e,n){return new eh(eh.CHILD_CHANGED,e,t,n)},eh.childMovedChange=function(t,e){return new eh(eh.CHILD_MOVED,e,t)},eh.CHILD_ADDED="child_added",eh.CHILD_REMOVED="child_removed",eh.CHILD_CHANGED="child_changed",eh.CHILD_MOVED="child_moved",eh.VALUE="value",eh);function eh(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var nh=(rh.prototype.updateChild=function(t,e,n,r,i,o){Oo(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(th.childRemovedChange(e,s)):Oo(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(th.childAddedChange(e,n)):o.trackChildChange(th.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},rh.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Du,function(t,e){n.hasChild(t)||i.trackChildChange(th.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Du,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(th.childChangedChange(t,e,n)):i.trackChildChange(th.childAddedChange(t,e))})),n.withIndex(this.index_)},rh.prototype.updatePriority=function(t,e){return t.isEmpty()?Zu.EMPTY_NODE:t.updatePriority(e)},rh.prototype.filtersNodes=function(){return!1},rh.prototype.getIndexedFilter=function(){return this},rh.prototype.getIndex=function(){return this.index_},rh);function rh(t){this.index_=t}var ih=(oh.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Oo(e===th.CHILD_ADDED||e===th.CHILD_CHANGED||e===th.CHILD_REMOVED,"Only child changes supported for tracking"),Oo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===th.CHILD_ADDED&&i===th.CHILD_REMOVED)this.changeMap.set(n,th.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===th.CHILD_REMOVED&&i===th.CHILD_ADDED)this.changeMap.delete(n);else if(e===th.CHILD_REMOVED&&i===th.CHILD_CHANGED)this.changeMap.set(n,th.childRemovedChange(n,r.oldSnap));else if(e===th.CHILD_CHANGED&&i===th.CHILD_ADDED)this.changeMap.set(n,th.childAddedChange(n,t.snapshotNode));else{if(e!==th.CHILD_CHANGED||i!==th.CHILD_CHANGED)throw Po("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,th.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},oh.prototype.getChanges=function(){return Array.from(this.changeMap.values())},oh);function oh(){this.changeMap=new Map}function sh(){}var ah=new(sh.prototype.getCompleteChild=function(t){return null},sh.prototype.getChildAfterChild=function(t,e,n){return null},sh),uh=(ch.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new Xc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},ch.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},ch);function ch(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var hh=function(t,e){this.viewCache=t,this.changes=e},lh=(fh.prototype.assertIndexed=function(t){Oo(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Oo(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},fh.prototype.applyOperation=function(t,e,n,r){var i=new ih;if(e.type===xc.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(Oo(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===xc.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(Oo(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===xc.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==xc.LISTEN_COMPLETE)throw Po("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return fh.maybeAddValueEvent_(t,s,i),new hh(s,i)},fh.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(th.valueChange(e.getCompleteEventSnap())))},fh.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=e.isEmpty()?(Oo(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof Zu?s:Zu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(Oo(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},fh.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,ah,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new uh(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},fh.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new uh(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):Zu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},fh.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},fh.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t);fh.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t);fh.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},fh.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},fh.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Bc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new Da(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new Da(t),e,i,o,s,a))}),c},fh.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Bc.Empty;return a.getNode().forEachChild(Iu,function(t,e){u=u.set(new Da(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Bc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},fh.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,ah,r)},fh.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new uh(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Oo(s instanceof Zu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,Zu.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(Da.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},fh);function fh(t){this.filter_=t}var ph=(dh.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===th.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(th.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,th.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,th.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,th.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,th.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,th.VALUE,t,n,e),i},dh.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,t=t.filter(function(t){return t.type===e});t.sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},dh.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},dh.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Po("Should only compare child_ events.");t=new vu(t.childName,t.snapshotNode),e=new vu(e.childName,e.snapshotNode);return this.index_.compare(t,e)},dh);function dh(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var vh,yh=(gh.prototype.getQuery=function(){return this.query_},gh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},gh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},gh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},gh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},gh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Oo(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},gh.prototype.applyOperation=function(t,e,n){t.type===xc.MERGE&&null!==t.source.queryId&&(Oo(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Oo(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),Oo(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},gh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Du,function(t,e){n.push(th.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(th.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},gh.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,n)},gh);function gh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new nh(n.getIndex()),i=n.getNodeFilter();this.processor_=new lh(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(Zu.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(Zu.EMPTY_NODE,t.getNode(),null),r=new Xc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Xc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new $c(i,r),this.eventGenerator_=new ph(this.query_)}var mh=(Object.defineProperty(_h,"__referenceConstructor",{get:function(){return Oo(vh,"Reference.ts has not been loaded"),vh},set:function(t){Oo(!vh,"__referenceConstructor has already been defined"),vh=t},enumerable:!1,configurable:!0}),_h.prototype.isEmpty=function(){return 0===this.views.size},_h.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Oo(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=Io(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},_h.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof Zu?n.calcCompleteEventChildren(r):Zu.EMPTY_NODE,!1),i=new $c(new Xc(o,s,!1),new Xc(r,i,!1)),u=new yh(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},_h.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=Io(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=To(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new _h.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},_h.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=Io(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},_h.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=Io(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},_h.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();t=t.queryIdentifier();return this.views.get(t)},_h.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},_h.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},_h.prototype.getCompleteView=function(){var e,t;try{for(var n=Io(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},_h);function _h(){this.views=new Map}var bh=(wh.prototype.addWrite=function(t,e){if(t.isEmpty())return new wh(new Bc(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,n=Da.relativePath(r,t),i=i.updateChild(n,e);return new wh(this.writeTree_.set(r,i))}e=new Bc(e);return new wh(this.writeTree_.setTree(t,e))},wh.prototype.addWrites=function(n,t){var r=this;return Sa(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},wh.prototype.removeWrite=function(t){return t.isEmpty()?wh.Empty:new wh(this.writeTree_.setTree(t,Bc.Empty))},wh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},wh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(Da.relativePath(e.path,t)):null},wh.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Du,function(t,e){n.push(new vu(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new vu(t,e.value))}),n},wh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new wh(null!=e?new Bc(e):this.writeTree_.subtree(t))},wh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},wh.prototype.apply=function(t){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Oo(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}}(Da.Empty,this.writeTree_,t)},wh.Empty=new wh(new Bc(null)),wh);function wh(t){this.writeTree_=t}var Eh=(Ih.prototype.childWrites=function(t){return new Th(t,this)},Ih.prototype.addOverwrite=function(t,e,n,r){Oo(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},Ih.prototype.addMerge=function(t,e,n){Oo(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},Ih.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},Ih.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Oo(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Sa(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},Ih.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},Ih.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(Da.Empty)){var o=Ih.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||Zu.EMPTY_NODE;return o.apply(s)}return null}o=this.visibleWrites_.getCompleteNode(e);if(null!=o)return o;o=this.visibleWrites_.childCompoundWrite(e);if(o.isEmpty())return t;if(null!=t||o.hasCompleteWrite(Da.Empty)){var s=t||Zu.EMPTY_NODE;return o.apply(s)}return null},Ih.prototype.calcCompleteEventChildren=function(t,e){var n=Zu.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Du,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Du,function(t,e){e=i.childCompoundWrite(new Da(t)).apply(e);n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},Ih.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Oo(n||r,"Either existingEventSnap or existingServerSnap must exist");t=t.child(e);if(this.visibleWrites_.hasCompleteWrite(t))return null;t=this.visibleWrites_.childCompoundWrite(t);return t.isEmpty()?r.getChild(e):t.apply(r.getChild(e))},Ih.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),t=this.visibleWrites_.getCompleteNode(r);return null!=t?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},Ih.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},Ih.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),t=a.getCompleteNode(Da.Empty);if(null!=t)s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},Ih.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},Ih.prototype.resetTree_=function(){this.visibleWrites_=Ih.layerTree_(this.allWrites_,Ih.DefaultFilter_,Da.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Ih.DefaultFilter_=function(t){return t.visible},Ih.layerTree_=function(t,e,n){for(var r=bh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=Da.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=Da.relativePath(s,n),r=r.addWrite(Da.Empty,o.snap.getChild(a)));else{if(!o.children)throw Po("WriteRecord should have .snap or .children");n.contains(s)?(a=Da.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=Da.relativePath(s,n)).isEmpty()?r=r.addWrites(Da.Empty,o.children):(o=ns(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(Da.Empty,a)))}}}return r},Ih);function Ih(){this.visibleWrites_=bh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Th=(Sh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Sh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Sh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Sh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Sh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Sh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Sh.prototype.child=function(t){return new Sh(this.treePath_.child(t),this.writeTree_)},Sh);function Sh(t,e){this.treePath_=t,this.writeTree_=e}var Ch=(Nh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Gc(Fc.User,t,e)):[]},Nh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);e=Bc.fromObject(e);return this.applyOperationToSyncPoints_(new Qc(Fc.User,t,e))},Nh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Bc.Empty;return null!=n.snap?r=r.set(Da.Empty,!0):Sa(n.children,function(t,e){r=r.set(new Da(t),e)}),this.applyOperationToSyncPoints_(new Vc(n.path,r,e))}return[]},Nh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Gc(Fc.Server,t,e))},Nh.prototype.applyServerMerge=function(t,e){e=Bc.fromObject(e);return this.applyOperationToSyncPoints_(new Qc(Fc.Server,t,e))},Nh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Wc(Fc.Server,t))},Nh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];n=Nh.parseQueryKey_(r),r=n.path,n=n.queryId,t=Da.relativePath(r,t),e=new Gc(Fc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)},Nh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){n=Nh.parseQueryKey_(r),r=n.path,n=n.queryId,t=Da.relativePath(r,t),e=Bc.fromObject(e),e=new Qc(Fc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)}return[]},Nh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){e=Nh.parseQueryKey_(n),n=e.path,e=e.queryId,t=Da.relativePath(n,t),t=new Wc(Fc.forServerTaggedQuery(e),t);return this.applyTaggedOperation_(n,t)}return[]},Nh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=Da.relativePath(t,n);r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(Da.Empty)):(o=new mh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=Zu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){e=e.getCompleteServerCache(Da.Empty);e&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=Nh.makeQueryKey_(t),Oo(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=Nh.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},Nh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(o&&!a){i=this.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=this.createListenerForView_(h);this.listenProvider_.startListening(Nh.queryForListening_(l),this.tagForQuery_(l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(Nh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(Nh.makeQueryKey_(t));r.listenProvider_.stopListening(Nh.queryForListening_(t),e)})),this.removeTags_(e)}return s},Nh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){t=Da.relativePath(t,n),t=e.getCompleteServerCache(t);if(t)return t});return e.calcCompleteEventCache(n,r,t,!0)},Nh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Sa(n,function(t,e){r=r.concat(e)}),r})},Nh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=Nh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},Nh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Nh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(Nh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)Oo(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Sa(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(Nh.queryForListening_(s),this.tagForQuery_(s))}return e},Nh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||Zu.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);t=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n}(t,n);return e.removeEventRegistration(n,null,t)}}},Nh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Nh.parseQueryKey_=function(t){var e=t.indexOf("$");return Oo(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Da(t.substr(0,e))}},Nh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Nh.prototype.tagForQuery_=function(t){t=Nh.makeQueryKey_(t);return this.queryToTagMap.get(t)},Nh.getNextQueryTag_=function(){return Nh.nextQueryTag_++},Nh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Oo(n,"Missing sync point for query tag that we're tracking");t=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,t,null)},Nh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(Da.Empty))},Nh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(Da.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(Da.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},Nh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(Da.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(Da.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},Nh.nextQueryTag_=1,Nh);function Nh(t){this.listenProvider_=t,this.syncPointTree_=Bc.Empty,this.pendingWriteTree_=new Eh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Ah=(kh.prototype.getNode=function(t){return this.rootNode_.getChild(t)},kh.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},kh);function kh(){this.rootNode_=Zu.EMPTY_NODE}var Oh=(Ph.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),es(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Ph.prototype.get=function(){return Do(this.counters_)},Ph);function Ph(){this.counters_={}}var Rh=(Dh.getCollection=function(t){t=t.toString();return this.collections_[t]||(this.collections_[t]=new Oh),this.collections_[t]},Dh.getOrCreateReporter=function(t,e){t=t.toString();return this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},Dh.collections_={},Dh.reporters_={},Dh);function Dh(){}var xh=(Lh.prototype.get=function(){var t=this.collection_.get(),n=bo({},t);return this.last_&&Sa(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},Lh);function Lh(t){this.collection_=t,this.last_=null}var Mh=(Fh.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Fh.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Sa(t,function(t,e){0<e&&es(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Aa(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Fh);function Fh(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new xh(t);t=1e4+2e4*Math.random();Aa(this.reportStats_.bind(this),Math.floor(t))}var jh=(Uh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Vh(i)),e.add(r)}e&&this.eventLists_.push(e)},Uh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Uh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Uh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Uh);function Uh(){this.eventLists_=[],this.recursionDepth_=0}var Vh=(qh.prototype.add=function(t){this.events_.push(t)},qh.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),ga&&_a("event: "+n.toString()),Na(e))}},qh.prototype.getPath=function(){return this.path_},qh);function qh(t){this.path_=t,this.events_=[]}Bh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=So(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Bh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Bh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Bh.prototype.validateEventType_=function(e){Oo(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},dt=Bh;function Bh(t){this.allowedEvents_=t,this.listeners_={},Oo(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Hh,Wh=(_o(zh,Hh=dt),zh.getInstance=function(){return new zh},zh.prototype.getInitialEvent=function(t){return Oo("visible"===t,"Unknown event type: "+t),[this.visible_]},zh);function zh(){var e,t,n=Hh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Gh,Kh=(_o(Qh,Gh=dt),Qh.getInstance=function(){return new Qh},Qh.prototype.getInitialEvent=function(t){return Oo("online"===t,"Unknown event type: "+t),[this.online_]},Qh.prototype.currentlyOnline=function(){return this.online_},Qh);function Qh(){var t=Gh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||jo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Yh=(Xh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Xh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Na(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},Xh);function Xh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Jh="pLPCommand",$h="pRTLPCB",Zh=(tl.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Yh(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new el(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=To(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=To(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.hostname&&Fa.test(location.hostname)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},tl.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},tl.forceAllow=function(){tl.forceAllow_=!0},tl.forceDisallow=function(){tl.forceDisallow_=!0},tl.isAvailable=function(){return!!tl.forceAllow_||!(tl.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},tl.prototype.markConnectionHealthy=function(){},tl.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},tl.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},tl.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},tl.prototype.send=function(t){t=Zo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=No(t);return Ro.encodeByteArray(t,!0)}(t),e=ha(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},tl.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},tl.prototype.incrementIncomingBytes_=function(t){t=Zo(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},tl);function tl(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ba(t),this.stats_=Rh.getCollection(e),this.urlFn=function(t){return e.connectionURL(Ua,t)}}var el=(nl.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_a("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},nl.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},nl.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},nl.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},nl.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},nl.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},nl.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){_a("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},nl);function nl(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=va(),window[Jh+this.uniqueCallbackIdentifier]=t,window[$h+this.uniqueCallbackIdentifier]=e,this.myIFrame=nl.createIFrame_();e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){_a("frame writing exception"),t.stack&&_a(t.stack),_a(t)}}var rl="";function il(t){rl=t}var ol=null;"undefined"!=typeof MozWebSocket?ol=MozWebSocket:"undefined"!=typeof WebSocket&&(ol=WebSocket);var sl=(al.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.hostname&&Fa.test(location.hostname)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(ja,r)},al.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{qo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new ol(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},al.prototype.start=function(){},al.forceDisallow=function(){al.forceDisallow_=!0},al.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==ol&&!al.forceDisallow_},al.previouslyFailed=function(){return fa.isInMemoryStorage||!0===fa.get("previous_websocket_failure")},al.prototype.markConnectionHealthy=function(){fa.remove("previous_websocket_failure")},al.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=$o(t),this.onMessage(t))},al.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},al.prototype.extractFrameCount_=function(t){if(Oo(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},al.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},al.prototype.send=function(t){this.resetKeepAlive();t=Zo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=ha(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},al.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},al.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},al.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},al.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},al.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},al.responsesRequiredToBeHealthy=2,al.healthyTimeout=3e4,al);function al(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ba(this.connId),this.stats_=Rh.getCollection(e),this.connURL=al.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var ul=(Object.defineProperty(cl,"ALL_TRANSPORTS",{get:function(){return[Zh,sl]},enumerable:!1,configurable:!0}),cl.prototype.initTransports_=function(t){var e,n,r=sl&&sl.isAvailable(),i=r&&!sl.previouslyFailed();if(t.webSocketOnly&&(r||sa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[sl];else{var o=this.transports_=[];try{for(var s=Io(cl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},cl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},cl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},cl);function cl(t){this.initTransports_(t)}var hl=(ll.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=Aa(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},ll.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},ll.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},ll.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},ll.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},ll.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},ll.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},ll.prototype.onSecondaryMessageReceived_=function(t){var e=ca("t",t),t=ca("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},ll.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},ll.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},ll.prototype.onPrimaryMessageReceived_=function(t){var e=ca("t",t),t=ca("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},ll.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},ll.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},ll.prototype.onControl_=function(t){var e=ca("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?ia("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ia("Unknown control packet command: "+e)}},ll.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&sa("Protocol version mismatch detected"),this.tryStartUpgrade_())},ll.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},ll.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Aa(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},ll.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},ll.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Aa(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},ll.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},ll.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},ll.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},ll.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},ll.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},ll.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},ll.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},ll);function ll(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ba("c:"+this.id+":"),this.transportManager_=new ul(e),this.log_("Connection created"),this.start_()}fl.prototype.put=function(t,e,n,r){},fl.prototype.merge=function(t,e,n,r){},fl.prototype.refreshAuthToken=function(t){},fl.prototype.onDisconnectPut=function(t,e,n){},fl.prototype.onDisconnectMerge=function(t,e,n){},fl.prototype.onDisconnectCancel=function(t,e){},fl.prototype.reportStats=function(t){},bu=fl;function fl(){}var pl,dl=1e3,vl=3e5,yl=(_o(gl,pl=bu),gl.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Zo(e)),Oo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},gl.prototype.get=function(t){var n=this,r=new Lo,i={p:t.path.toString(),q:t.queryObject()},e={action:"g",request:i,onComplete:function(t){var e=t.d;"ok"===t.s?(n.onDataUpdate_(i.p,e,!1,null),r.resolve(e)):r.reject(e)}};this.outstandingGets_.push(e),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=n.outstandingGets_[o];void 0!==t&&e===t&&(delete n.outstandingGets_[o],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),n.log_("get "+o+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),r.promise},gl.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Oo(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Oo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},gl.prototype.sendGet_=function(e){var n=this,r=this.outstandingGets_[e];this.sendRequest("g",r.request,function(t){delete n.outstandingGets_[e],n.outstandingGetCount_--,0===n.outstandingGetCount_&&(n.outstandingGets_=[]),r.onComplete&&r.onComplete(t)})},gl.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;gl.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},gl.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&es(t,"w")&&(t=ns(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),sa("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},gl.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},gl.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=ts(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},gl.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=ts(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},gl.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Oo(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},gl.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},gl.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},gl.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},gl.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},gl.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},gl.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},gl.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},gl.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},gl.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},gl.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},gl.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Zo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},gl.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):ia("Unrecognized action received from server: "+Zo(t)+"\nAre you using the latest client?")},gl.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},gl.prototype.scheduleConnect_=function(t){var e=this;Oo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},gl.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},gl.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},gl.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=dl),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},gl.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+gl.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Oo(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?_a("getToken() completed but was canceled"):(_a("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new hl(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){sa(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&sa(t),c())}))},gl.prototype.interrupt=function(t){_a("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},gl.prototype.resume=function(t){_a("Resuming connection for reason: "+t),delete this.interruptReasons_[t],rs(this.interruptReasons_)&&(this.reconnectDelay_=dl,this.realtime_||this.scheduleConnect_(0))},gl.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},gl.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},gl.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return Ta(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},gl.prototype.removeListen_=function(t,e){var n,r=new Da(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},gl.prototype.onAuthRevoked_=function(t,e){_a("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},gl.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},gl.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=Io(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Io(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},gl.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+rl.replace(/\./g,"-")]=1,jo()?t["framework.cordova"]=1:Vo()&&(t["framework.reactnative"]=1),this.reportStats(t)},gl.prototype.shouldReconnect_=function(){var t=Kh.getInstance().currentlyOnline();return rs(this.interruptReasons_)&&t},gl.nextPersistentConnectionId_=0,gl.nextConnectionId_=0,gl);function gl(t,e,n,r,i,o,s){var a=pl.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=gl.nextPersistentConnectionId_++,a.log_=ba("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingGets_=[],a.outstandingPutCount_=0,a.outstandingGetCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=dl,a.maxReconnectDelay_=vl,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!qo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Wh.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&Kh.getInstance().on("online",a.onOnline_,a),a}var ml,_l=(_o(bl,ml=bu),bl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},bl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Oo(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},bl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=bl.getListenId_(t,n),a={};this.listens_[s]=a;t=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),ns(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},bl.prototype.unlisten=function(t,e){e=bl.getListenId_(t,e);delete this.listens_[e]},bl.prototype.get=function(t){var n=this,e=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new Lo;return this.restRequest_(r+".json",e,function(t,e){404===t&&(t=e=null),null===t?(n.onDataUpdate_(r,e,!1,null),i.resolve(e)):i.reject(new Error(e))}),i.promise},bl.prototype.refreshAuthToken=function(t){},bl.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=$o(n.responseText)}catch(t){sa("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&sa("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},bl);function bl(t,e,n){var r=ml.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ba("p:rest:"),r.listens_={},r}var wl=function(){this.children={},this.childCount=0,this.value=null},El=(Il.prototype.subTree=function(t){for(var e=t instanceof Da?t:new Da(t),n=this,r=e.getFront();null!==r;)n=new Il(r,n,ns(n.node_.children,r)||new wl),r=(e=e.popFront()).getFront();return n},Il.prototype.getValue=function(){return this.node_.value},Il.prototype.setValue=function(t){Oo(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Il.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Il.prototype.hasChildren=function(){return 0<this.node_.childCount},Il.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Il.prototype.forEachChild=function(n){var r=this;Sa(this.node_.children,function(t,e){n(new Il(t,r,e))})},Il.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Il.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Il.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Il.prototype.path=function(){return new Da(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Il.prototype.name=function(){return this.name_},Il.prototype.parent=function(){return this.parent_},Il.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Il.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=es(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Il);function Il(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new wl),this.name_=t,this.parent_=e,this.node_=n}var Tl,Sl="repo_interrupt";(vt=Tl=Tl||{})[vt.RUN=0]="RUN",vt[vt.SENT=1]="SENT",vt[vt.COMPLETED=2]="COMPLETED",vt[vt.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",vt[vt.NEEDS_ABORT=4]="NEEDS_ABORT";var Cl=(Nl.prototype.start=function(){var s=this;if(this.stats_=Rh.getCollection(this.repoInfo_),this.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new _l(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Zo(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new yl(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Rh.getOrCreateReporter(this.repoInfo_,function(){return new Mh(s.stats_,s.server_)}),this.infoData_=new Ah,this.infoSyncTree_=new Ch({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new Ch({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})},Nl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Nl.prototype.name=function(){return this.repoInfo_.namespace},Nl.prototype.serverTime=function(){var t=this.infoData_.getNode(new Da(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Nl.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},Nl.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new Da(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s=[],t=i;0<(s=r?n?(o=is(e,function(t){return oc(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=oc(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=is(e,function(t){return oc(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=oc(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},Nl.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Nl.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Nl.prototype.onServerInfoUpdate_=function(t){var n=this;Sa(t,function(t,e){n.updateInfo_(t,e)})},Nl.prototype.updateInfo_=function(t,e){t=new Da("/.info/"+t),e=oc(e);this.infoData_.updateSnapshot(t,e);e=this.infoSyncTree_.applyServerOverwrite(t,e);this.eventQueue_.raiseEventsForChangedPath(t,e)},Nl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Nl.prototype.getValue=function(n){var r=this,t=this.serverSyncTree_.calcCompleteEventCache(n.path);return t.isEmpty()?this.server_.get(n).then(function(t){var e=oc(t),t=r.serverSyncTree_.applyServerOverwrite(n.path,e);return r.eventQueue_.raiseEventsAtPath(n.path,t),Promise.resolve(new lc(e,n.getRef(),n.getQueryParams().getIndex()))},function(t){return r.log_("get for query "+Zo(n)+" failed: "+t),Promise.reject(new Error(t))}):Promise.resolve(new lc(t,n.getRef(),n.getQueryParams().getIndex()))},Nl.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),t=oc(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n=kc(t,e,n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||sa("set at "+r+" failed: "+t);n=o.serverSyncTree_.ackUserWrite(s,!n);o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)});t=this.abortTransactions_(r);this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},Nl.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};Sa(t,function(t,e){n=!1,u[t]=Ac(i.child(t),oc(e),s.serverSyncTree_,r)}),n?(_a("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){var n="ok"===t;n||sa("update at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(a,!n),n=0<r.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(n,r),s.callOnCompleteCallback(o,t,e)}),Sa(t,function(t){t=s.abortTransactions_(i.child(t));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},Nl.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new Lc;this.onDisconnect_.forEachTree(Da.Empty,function(t,e){e=Ac(t,e,n.serverSyncTree_,r);i.remember(t,e)});var o=[];i.forEachTree(Da.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e));t=n.abortTransactions_(t);n.rerunTransactions_(t)}),this.onDisconnect_=new Lc,this.eventQueue_.raiseEventsForChangedPath(Da.Empty,o)},Nl.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},Nl.prototype.onDisconnectSet=function(n,t,r){var i=this,o=oc(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Nl.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=oc(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Nl.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(rs(r))return _a("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&Sa(r,function(t,e){e=oc(e);o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},Nl.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},Nl.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},Nl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(Sl)},Nl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(Sl)},Nl.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new xh(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),Sa(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},Nl.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Nl.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),_a.apply(void 0,So([n],t))},Nl.prototype.callOnCompleteCallback=function(n,r,i){n&&Na(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(Nl.prototype,"database",{get:function(){return this.__database||(this.__database=new Wl(this))},enumerable:!1,configurable:!0}),Nl.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Ll(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:va(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);s.currentInputSnapshot=e;var a,n=s.update(e.val());void 0===n?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(a=new lc(s.currentInputSnapshot,new Ll(this,s.path),Du),s.onComplete(null,!1,a))):(iu("transaction failed: Data returned ",n,s.path),s.status=Tl.RUN,(a=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),r.setValue(a),r=void 0,"object"==typeof n&&null!==n&&es(n,".priority")?(r=ns(n,".priority"),Oo(za(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||Zu.EMPTY_NODE).getPriority().val(),a=this.generateServerValues(),r=oc(n,r),a=kc(r,e,a),s.currentOutputSnapshotRaw=r,s.currentOutputSnapshotResolved=a,s.currentWriteId=this.getNextWriteId_(),s=this.serverSyncTree_.applyUserOverwrite(t,a,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,s),this.sendReadyTransactions_())},Nl.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||Zu.EMPTY_NODE},Nl.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Oo(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Tl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},Nl.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,t=e.hash(),r=0;r<a.length;r++){var i=a[r];Oo(i.status===Tl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=Tl.SENT,i.retryCount++;var o=Da.relativePath(s,i.path),n=n.updateChild(o,i.currentOutputSnapshotRaw)}var e=n.val(!0),c=s;this.server_.put(c.toString(),e,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++){a[o].status=Tl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new Ll(u,a[o].path),r=new lc(n,r,Du),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher()}u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e);for(o=0;o<i.length;o++)Na(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===Tl.SENT_NEEDS_ABORT?a[o].status=Tl.NEEDS_ABORT:a[o].status=Tl.RUN;else{sa("transaction at "+c.toString()+" failed: "+t);for(o=0;o<a.length;o++)a[o].status=Tl.NEEDS_ABORT,a[o].abortReason=t}u.rerunTransactions_(s)}},t)},Nl.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),t=e.path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},Nl.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Tl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=Da.relativePath(e,c.path),l=!1,f=void 0;Oo(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===Tl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===Tl.RUN&&(r=25<=c.retryCount?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(iu("transaction failed: Data returned ",u,c.path),a=oc(u),"object"==typeof u&&null!=u&&es(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=this.generateServerValues(),u=kc(a,s,u),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=Tl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new Ll(this,t[o].path),c=t[o].currentInputSnapshot,l=new lc(c,l,Du),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)Na(n[o]);this.sendReadyTransactions_()}},Nl.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},Nl.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Nl.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Nl.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Tl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Nl.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),t=this.transactionQueueTree_.subTree(t);return t.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Nl.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===Tl.SENT_NEEDS_ABORT||(e[o].status===Tl.SENT?(Oo(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Tl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Oo(e[o].status===Tl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Na(n[o])}},Nl);function Nl(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Lc,this.transactionQueueTree_=new El,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}var Al=(kl.prototype.getStartPost=function(){return this.startPost_},kl.prototype.getEndPost=function(){return this.endPost_},kl.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},kl.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new vu(e,n))||(n=Zu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},kl.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Zu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Zu.EMPTY_NODE),i=this;return e.forEachChild(Du,function(t,e){i.matches(new vu(t,e))||(r=r.updateImmediateChild(t,Zu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},kl.prototype.updatePriority=function(t,e){return t},kl.prototype.filtersNodes=function(){return!0},kl.prototype.getIndexedFilter=function(){return this.indexedFilter_},kl.prototype.getIndex=function(){return this.index_},kl.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},kl.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},kl);function kl(t){this.indexedFilter_=new nh(t.getIndex()),this.index_=t.getIndex(),this.startPost_=kl.getStartPost_(t),this.endPost_=kl.getEndPost_(t)}var Ol=(Pl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new vu(e,n))||(n=Zu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Pl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Zu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Zu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Zu.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,Zu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Pl.prototype.updatePriority=function(t,e){return t},Pl.prototype.filtersNodes=function(){return!0},Pl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Pl.prototype.getIndex=function(){return this.index_},Pl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Oo(a.numChildren()===this.limit_,"");var u=new vu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(th.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(th.childRemovedChange(e,l));l=a.updateImmediateChild(e,Zu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(th.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(th.childRemovedChange(c.name,c.node)),i.trackChildChange(th.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Zu.EMPTY_NODE)):t},Pl);function Pl(t){this.rangedFilter_=new Al(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Rl=(Dl.prototype.hasStart=function(){return this.startSet_},Dl.prototype.hasStartAfter=function(){return this.startAfterSet_},Dl.prototype.hasEndBefore=function(){return this.endBeforeSet_},Dl.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Dl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Dl.prototype.getIndexStartValue=function(){return Oo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Dl.prototype.getIndexStartName=function(){return Oo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wa},Dl.prototype.hasEnd=function(){return this.endSet_},Dl.prototype.getIndexEndValue=function(){return Oo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Dl.prototype.getIndexEndName=function(){return Oo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ea},Dl.prototype.hasLimit=function(){return this.limitSet_},Dl.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Dl.prototype.getLimit=function(){return Oo(this.limitSet_,"Only valid if limit has been set"),this.limit_},Dl.prototype.getIndex=function(){return this.index_},Dl.prototype.copy_=function(){var t=new Dl;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Dl.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Dl.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Dl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Dl.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Dl.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Dl.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Dl.prototype.startAfter=function(t,e){var n;return(n=this.index_===Iu?("string"==typeof t&&(t=cu(t)),this.startAt(t,e)):(n=void 0,n=null==e?Ea:cu(e),this.startAt(t,n))).startAfterSet_=!0,n},Dl.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Dl.prototype.endBefore=function(t,e){var n=this.index_===Iu?("string"==typeof t&&(t=hu(t)),this.endAt(t,e)):(n=null==e?wa:hu(e),this.endAt(t,n));return n.endBeforeSet_=!0,n},Dl.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Dl.prototype.getQueryObject=function(){var t,e=Dl.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Du&&(n[e.INDEX]=this.index_.toString()),n},Dl.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Dl.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Du},Dl.prototype.getNodeFilter=function(){return this.loadsAllData()?new nh(this.getIndex()):new(this.hasLimit()?Ol:Al)(this)},Dl.prototype.toRestQueryStringParameters=function(){var t,e=Dl.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Du?e.PRIORITY_INDEX:this.index_===uc?e.VALUE_INDEX:this.index_===Iu?e.KEY_INDEX:(Oo(this.index_ instanceof cc,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Zo(t),this.startSet_&&(n[e.START_AT]=Zo(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Zo(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Zo(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Zo(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Dl.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Dl.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Dl.DEFAULT=new Dl,Dl);function Dl(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Du}var xl,Ll=(_o(Ml,xl=Ec),Ml.prototype.getKey=function(){return ls("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Ml.prototype.child=function(t){var e,n,r,i;return ls("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof Da||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),Ja(e,n,r,i)):Ja("Reference.child",1,t,!1)),new Ml(this.repo,this.path.child(t))},Ml.prototype.getParent=function(){ls("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Ml(this.repo,t)},Ml.prototype.getRoot=function(){ls("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Ml.prototype.databaseProp=function(){return this.repo.database},Ml.prototype.set=function(t,e){ls("Reference.set",1,2,arguments.length),$a("Reference.set",this.path),Ga("Reference.set",1,t,this.path,!1),ps("Reference.set",2,e,!0);var n=new Lo;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Ml.prototype.update=function(t,e){if(ls("Reference.update",1,2,arguments.length),$a("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,sa("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Ka("Reference.update",1,t,this.path,!1),ps("Reference.update",2,e,!0);var i=new Lo;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Ml.prototype.setWithPriority=function(t,e,n){if(ls("Reference.setWithPriority",2,3,arguments.length),$a("Reference.setWithPriority",this.path),Ga("Reference.setWithPriority",1,t,this.path,!1),Qa("Reference.setWithPriority",2,e,!1),ps("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Lo;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Ml.prototype.remove=function(t){return ls("Reference.remove",0,1,arguments.length),$a("Reference.remove",this.path),ps("Reference.remove",1,t,!0),this.set(null,t)},Ml.prototype.transaction=function(t,r,e){if(ls("Reference.transaction",1,3,arguments.length),$a("Reference.transaction",this.path),ps("Reference.transaction",1,t,!1),ps("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(fs(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Lo;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new au(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Ml.prototype.setPriority=function(t,e){ls("Reference.setPriority",1,2,arguments.length),$a("Reference.setPriority",this.path),Qa("Reference.setPriority",1,t,!1),ps("Reference.setPriority",2,e,!0);var n=new Lo;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Ml.prototype.push=function(t,e){ls("Reference.push",0,2,arguments.length),$a("Reference.push",this.path),Ga("Reference.push",1,t,this.path,!0),ps("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=du(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Ml.prototype.onDisconnect=function(){return $a("Reference.onDisconnect",this.path),new ou(this.repo,this.path)},Object.defineProperty(Ml.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Ml.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Ml.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Ml.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Ml);function Ml(t,e){if(!(t instanceof Cl))throw new Error("new Reference() no longer supported - use app.database().");return xl.call(this,t,e,Rl.DEFAULT,!1)||this}Ec.__referenceConstructor=Ll,mh.__referenceConstructor=Ll;var Fl=(jl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(_a("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},jl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},jl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},jl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',sa(t)},jl);function jl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Ul=(Vl.prototype.getToken=function(t){return Promise.resolve({accessToken:Vl.EMULATOR_AUTH_TOKEN})},Vl.prototype.addTokenChangeListener=function(t){t(Vl.EMULATOR_AUTH_TOKEN)},Vl.prototype.removeTokenChangeListener=function(t){},Vl.prototype.notifyForInvalidToken=function(){},Vl.EMULATOR_AUTH_TOKEN="owner",Vl);function Vl(){}var ql,Bl=(Hl.getInstance=function(){return ql=ql||new Hl},Hl.prototype.interrupt=function(){var e,t,n,r;try{for(var i=Io(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Io(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Hl.prototype.resume=function(){var e,t,n,r;try{for(var i=Io(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,Io(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Hl.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Va(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Ul)},Hl.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||oa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_a("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ba(i,r),a=s.repoInfo,n=void 0;"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ba(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Ul:new Fl(t,e);return Za("Invalid Firebase Database URL",1,s),s.path.isEmpty()||oa("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},Hl.prototype.deleteRepo=function(t){var e=ns(this.repos_,t.app.name);e&&ns(e,t.key)===t||oa("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},Hl.prototype.createRepo=function(t,e,n){var r=ns(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ns(r,t.toURLString());return i&&oa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Cl(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Hl.prototype.forceRestClient=function(t){this.useRestClient_=t},Hl);function Hl(){this.repos_={},this.useRestClient_=!1}var Wl=(Object.defineProperty(zl.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(zl.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Ll(this.repo_,Da.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(zl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),zl.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?oa("Cannot call useEmulator() after instance has already been initialized."):Bl.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},zl.prototype.ref=function(t){return this.checkDeleted_("ref"),ls("database.ref",0,1,arguments.length),t instanceof Ll?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},zl.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),ls(e,1,1,arguments.length);var n=Ba(t,this.repo_.repoInfo_.nodeAdmin);Za(e,1,n);t=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||t.host===this.repo_.repoInfo_.host||oa(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},zl.prototype.checkDeleted_=function(t){null===this.repoInternal_&&oa("Cannot call "+t+" on a deleted database.")},zl.prototype.goOffline=function(){ls("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},zl.prototype.goOnline=function(){ls("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},zl.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},zl);function zl(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return wo(e,void 0,void 0,function(){return Eo(this,function(t){return this.checkDeleted_("delete"),Bl.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof Cl||oa("Don't call new Database() directly - please use firebase.database().")}var Gl=Object.freeze({__proto__:null,forceLongPolling:function(){sl.forceDisallow(),Zh.forceAllow()},forceWebSockets:function(){Zh.forceDisallow()},isWebSocketsAvailable:function(){return sl.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return il(r),(r=new Ts("auth-internal",new Cs("database-standalone"))).setComponent(new ws("auth-internal",function(){return i},"PRIVATE")),{instance:Bl.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),Kn=yl;yl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},yl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Kl,Ql=Object.freeze({__proto__:null,DataConnection:Kn,RealTimeConnection:hl,hijackHash:function(i){var o=yl.prototype.put;return yl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){yl.prototype.put=o}},ConnectionTarget:Va,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Bl.getInstance().forceRestClient(t)}}),Yl=Wl.ServerValue;il((Kl=Xl).SDK_VERSION),Kl.INTERNAL.registerComponent(new ws("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Bl.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:Ll,Query:Ec,Database:Wl,DataSnapshot:lc,enableLogging:ra,INTERNAL:Gl,ServerValue:Yl,TEST_ACCESS:Ql}).setMultipleInstances(!0)),Kl.registerVersion("@firebase/database","0.9.2");var Jl=function(t,e){return(Jl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function $l(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var dt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Zl={},tf=dt||self;function ef(){}function nf(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function rf(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var of="closure_uid_"+(1e9*Math.random()>>>0),sf=0;function af(t,e,n){return t.call.apply(t.bind,arguments)}function uf(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function cf(t,e,n){return(cf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?af:uf).apply(null,arguments)}function hf(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function lf(){return Date.now()}function ff(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function pf(){this.j=this.j,this.i=this.i}pf.prototype.j=!1,pf.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,of)&&t[of]||(t[of]=++sf))},pf.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var df=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},vf=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function yf(){return Array.prototype.concat.apply([],arguments)}function gf(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function mf(t){return/^[\s\xa0]*$/.test(t)}var _f,bf=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function wf(t,e){return-1!=t.indexOf(e)}function Ef(t,e){return t<e?-1:e<t?1:0}t:{var If=tf.navigator;if(If){If=If.userAgent;if(If){_f=If;break t}}_f=""}function Tf(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Sf(t){var e,n={};for(e in t)n[e]=t[e];return n}var Cf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Nf(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Cf.length;i++)e=Cf[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function Af(t){return Af[" "](t),t}Af[" "]=ef;var kf,Of=wf(_f,"Opera"),Pf=wf(_f,"Trident")||wf(_f,"MSIE"),Rf=wf(_f,"Edge"),Df=Rf||Pf,xf=wf(_f,"Gecko")&&!(wf(_f.toLowerCase(),"webkit")&&!wf(_f,"Edge"))&&!(wf(_f,"Trident")||wf(_f,"MSIE"))&&!wf(_f,"Edge"),Lf=wf(_f.toLowerCase(),"webkit")&&!wf(_f,"Edge");function Mf(){var t=tf.document;return t?t.documentMode:void 0}t:{var Ff="",jf=(jf=_f,xf?/rv:([^\);]+)(\)|;)/.exec(jf):Rf?/Edge\/([\d\.]+)/.exec(jf):Pf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(jf):Lf?/WebKit\/(\S+)/.exec(jf):Of?/(?:Version)[ \/]?(\S+)/.exec(jf):void 0);if(jf&&(Ff=jf?jf[1]:""),Pf){jf=Mf();if(null!=jf&&jf>parseFloat(Ff)){kf=String(jf);break t}}kf=Ff}var Uf={};function Vf(a){return t=a,e=function(){for(var t=0,e=bf(String(kf)).split("."),n=bf(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Ef(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Ef(0==o[2].length,0==s[2].length)||Ef(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Uf,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var qf=tf.document&&Pf?Mf()||(parseInt(kf,10)||void 0):void 0,Bf=!Pf||9<=Number(qf),Hf=Pf&&!Vf("9"),Wf=function(){if(!tf.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{tf.addEventListener("test",ef,e),tf.removeEventListener("test",ef,e)}catch(t){}return t}();function zf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Gf(t,e){if(zf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(xf){t:{try{Af(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Kf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}zf.prototype.b=function(){this.defaultPrevented=!0},ff(Gf,zf);var Kf={2:"touch",3:"pen",4:"mouse"};Gf.prototype.b=function(){Gf.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Hf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Qf="closure_listenable_"+(1e6*Math.random()|0),Yf=0;function Xf(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Yf,this.Y=this.Z=!1}function Jf(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function $f(t){this.src=t,this.a={},this.b=0}function Zf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=df(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Jf(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function tp(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}$f.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=tp(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Xf(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ep="closure_lm_"+(1e6*Math.random()|0),np={};function rp(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=lp(r);return e&&e[Qf]?e.wa(n,r,rf(i)?!!i.capture:!!i,o):ip(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)rp(t,e[o],n,r,i);return null}return n=lp(n),t&&t[Qf]?t.va(e,n,rf(r)?!!r.capture:!!r,i):ip(t,e,n,!1,r,i)}function ip(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=rf(i)?!!i.capture:!!i;if(s&&!Bf)return null;var a,u,c=cp(t);if(c||(t[ep]=c=new $f(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=up,r=u=Bf?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Wf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(sp(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function op(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Qf]?Zf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(sp(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=cp(e))?(Zf(n,t),0==n.b&&(n.src=null,e[ep]=null)):Jf(t)))}function sp(t){return t in np?np[t]:np[t]="on"+t}function ap(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&op(t),n.call(r,e)}function up(t,e){if(t.Y)return!0;if(Bf)return ap(t,new Gf(e,this));if(!e)t:{e=["window","event"];for(var n=tf,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ap(t,e=new Gf(e,this))}function cp(t){return(t=t[ep])instanceof $f?t:null}var hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function lp(e){return"function"==typeof e?e:(e[hp]||(e[hp]=function(t){return e.handleEvent(t)}),e[hp])}function fp(){pf.call(this),this.c=new $f(this),(this.J=this).C=null}function pp(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new zf(e,t):e instanceof zf?e.target=e.target||t:(s=e,Nf(e=new zf(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=dp(o,r,!0,e)&&s;if(s=dp(o=e.a=t,r,!0,e)&&s,s=dp(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=dp(o=e.a=n[i],r,!1,e)&&s}function dp(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Zf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}ff(fp,pf),fp.prototype[Qf]=!0,(bu=fp.prototype).addEventListener=function(t,e,n,r){rp(this,t,e,n,r)},bu.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=rf(i)?!!i.capture:!!i,r=lp(r),e&&e[Qf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=tp(s=e.a[n],r,i,o))&&(Jf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&cp(e))&&(n=e.a[n.toString()],e=-1,n&&(e=tp(n,r,i,o)),(r=-1<e?n[e]:null)&&op(r))}(this,t,e,n,r)},bu.G=function(){if(fp.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Jf(n[r]);delete e.a[t],e.b--}}this.C=null},bu.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},bu.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var vp=tf.JSON.stringify;function yp(){this.b=this.a=null}var gp,mp=(_p.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new _p(function(){return new bp},function(t){t.reset()}));function _p(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function bp(){this.next=this.b=this.a=null}function wp(t,e){var n;gp||(n=tf.Promise.resolve(void 0),gp=function(){n.then(Tp)}),Ep||(gp(),Ep=!0),Ip.add(t,e)}yp.prototype.add=function(t,e){var n=mp.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},bp.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Ep=!(bp.prototype.reset=function(){this.next=this.b=this.a=null}),Ip=new yp;function Tp(){for(var t,e;n=e=void 0,n=null,(e=Ip).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){tf.setTimeout(function(){throw t},0)}(t)}var n=mp;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}Ep=!1}function Sp(t,e){fp.call(this),this.b=t||1,this.a=e||tf,this.f=cf(this.Za,this),this.g=lf()}function Cp(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Np(t,e,n){if("function"==typeof t)n&&(t=cf(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=cf(t.handleEvent,t)}return 2147483647<Number(e)?-1:tf.setTimeout(t,e||0)}ff(Sp,fp),(bu=Sp.prototype).aa=!1,bu.M=null,bu.Za=function(){var t;this.aa&&(0<(t=lf()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),pp(this,"tick"),this.aa&&(Cp(this),this.start())))},bu.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=lf())},bu.G=function(){Sp.X.G.call(this),Cp(this),delete this.a};var Ap,kp,Op,Pp=(Jl(kp=Dp,Op=Ap=pf),kp.prototype=null===Op?Object.create(Op):(Rp.prototype=Op.prototype,new Rp),Dp.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Np(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Dp.prototype.G=function(){Ap.prototype.G.call(this),this.a&&(tf.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Dp);function Rp(){this.constructor=kp}function Dp(t,e){var n=Ap.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function xp(t){pf.call(this),this.b=t,this.a={}}ff(xp,pf);var Lp=[];function Mp(t,e,n,r){Array.isArray(n)||(n&&(Lp[0]=n.toString()),n=Lp);for(var i=0;i<n.length;i++){var o=rp(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Fp(t){Tf(t.a,function(t,e){this.a.hasOwnProperty(e)&&op(t)},t),t.a={}}function jp(){this.a=!0}function Up(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return vp(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}xp.prototype.G=function(){xp.X.G.call(this),Fp(this)},xp.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},jp.prototype.info=function(){};var Vp={},qp=null;function Bp(){return qp=qp||new fp}function Hp(t){zf.call(this,Vp.Fa,t)}function Wp(t){var e=Bp();pp(e,new Hp(e))}function zp(t,e){zf.call(this,Vp.STAT_EVENT,t),this.stat=e}function Gp(t){var e=Bp();pp(e,new zp(e,t))}function Kp(t){zf.call(this,Vp.Ga,t)}function Qp(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return tf.setTimeout(function(){t()},e)}Vp.Fa="serverreachability",ff(Hp,zf),Vp.STAT_EVENT="statevent",ff(zp,zf),Vp.Ga="timingevent",ff(Kp,zf);vt={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Kn={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Yp(){}function Xp(t){var e;return(e=t.a)||(e=t.a={}),e}function Jp(){}Yp.prototype.a=null;var $p,dt={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Zp(){zf.call(this,"d")}function td(){zf.call(this,"c")}function ed(){}function nd(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new xp(this),this.P=rd,t=Df?125:void 0,this.R=new Sp(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ff(Zp,zf),ff(td,zf),ff(ed,Yp),$p=new ed;var rd=45e3,id={},od={};function sd(t,e,n){t.H=1,t.i=Nd(wd(e)),t.j=n,t.I=!0,ad(t,null)}function ad(t,e){t.u=lf(),cd(t),t.l=wd(t.i);var s,a,u,c,h,l,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Vd(n.b,"t",r),t.D=0,t.a=Dv(t.g,t.g.C?e:null),0<t.O&&(t.F=new Pp(cf(t.Ca,t,t.a),t.O)),Mp(t.J,t.a,"readystatechange",t.Xa),e=t.B?Sf(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Wp(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.S,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function ud(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?od:(i=Number(a.substring(i,o)),isNaN(i)?id:(o+=1)+i>a.length?od:(a=a.substr(o,i),r.D=o+i,a)));if(a==od){4==e&&(t.h=4,Gp(14),s=!1),Up(t.c,t.f,null,"[Incomplete Response]");break}if(a==id){t.h=4,Gp(15),Up(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}Up(t.c,t.f,a,null),dd(t,a)}4==e&&0==n.length&&(t.h=1,Gp(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Sv(e),e.F=!0,Gp(11))):(Up(t.c,t.f,n,"[Invalid Chunked Response]"),pd(t),fd(t))}function cd(t){t.T=lf()+t.P,hd(t,t.P)}function hd(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Qp(cf(t.Va,t),e)}function ld(t){t.o&&(tf.clearTimeout(t.o),t.o=null)}function fd(t){0==t.g.v||t.A||Av(t.g,t)}function pd(t){ld(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Cp(t.R),Fp(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function dd(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||Kd(a.b,t)))if(a.I=t.N,!t.C&&Kd(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;Nv(a),yv(a)}Tv(a),Gp(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=Qp(cf(a.Sa,a),6e3));if(Gd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Ov(a,11)}else if(!t.C&&a.a!=t||Nv(a),!mf(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++){c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(wf(r,"spdy")||wf(r,"quic")||wf(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Qd(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,Cd(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.U&&(a.N=lf()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Rv(n,n.C?n.ga:null,n.fa),i.C?(Yd(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(ld(o),cd(o)),n.a=i):Iv(n),0<a.g.length&&_v(a)):"stop"!=c[0]&&"close"!=c[0]||Ov(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Ov(a,7):vv(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0)}Wp(4)}catch(t){}}function vd(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(nf(t)||"string"==typeof t)vf(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(nf(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(nf(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function yd(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof yd)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function gd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];md(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)md(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function md(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(bu=nd.prototype).setTimeout=function(t){this.P=t},bu.Xa=function(t){t=t.target;var e=this.F;e&&3==lv(t)?e.f():this.Ca(t)},bu.Ca=function(t){try{if(t==this.a)t:{var e=lv(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!Df&&!this.a.$())){this.A||4!=e||7==n||Wp(8==n||r<=0?3:2),ld(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.S,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!mf(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,Gp(12),pd(this),fd(this);break t}Up(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,dd(this,s)}this.I?(ud(this,e,n),Df&&this.b&&3==e&&(Mp(this.J,this.R,"tick",this.Wa),this.R.start())):(Up(this.c,this.f,n,null),dd(this,n)),4==e&&pd(this),this.b&&!this.A&&(4==e?Av(this.g,this):(this.b=!1,cd(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,Gp(12)):(this.h=0,Gp(13)),pd(this),fd(this)}}}catch(t){}var a,u,c,h,l,f},bu.Wa=function(){var t,e;this.a&&(t=lv(this.a),e=this.a.$(),this.D<e.length&&(ld(this),ud(this,t,e),this.b&&4!=t&&cd(this)))},bu.cancel=function(){this.A=!0,pd(this)},bu.Va=function(){this.o=null;var t,e,n=lf();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Wp(3),Gp(17)),pd(this),this.h=2,fd(this)):hd(this,this.T-n)},(bu=yd.prototype).K=function(){gd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},bu.L=function(){return gd(this),this.a.concat()},bu.get=function(t,e){return md(this.b,t)?this.b[t]:e},bu.set=function(t,e){md(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},bu.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var _d=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bd(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof bd?(this.a=void 0!==e?e:t.a,Ed(this,t.f),this.j=t.j,Id(this,t.c),Td(this,t.h),this.g=t.g,e=t.b,(n=new Md).c=e.c,e.a&&(n.a=new yd(e.a),n.b=e.b),Sd(this,n),this.i=t.i):t&&(n=String(t).match(_d))?(this.a=!!e,Ed(this,n[1]||"",!0),this.j=Ad(n[2]||""),Id(this,n[3]||"",!0),Td(this,n[4]),this.g=Ad(n[5]||"",!0),Sd(this,n[6]||"",!0),this.i=Ad(n[7]||"")):(this.a=!!e,this.b=new Md(null,this.a))}function wd(t){return new bd(t)}function Ed(t,e,n){t.f=n?Ad(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Id(t,e,n){t.c=n?Ad(e,!0):e}function Td(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Sd(t,e,n){var r,i;e instanceof Md?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Fd(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(jd(this,e),Vd(this,n,t))},r)),r.f=i):(n||(e=kd(e,xd)),t.b=new Md(e,t.a))}function Cd(t,e,n){t.b.set(e,n)}function Nd(t){return Cd(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^lf()).toString(36)),t}function Ad(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function kd(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Od),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Od(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bd.prototype.toString=function(){var t=[],e=this.f;e&&t.push(kd(e,Pd,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(kd(e,Pd,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(kd(n,"/"==n.charAt(0)?Dd:Rd,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",kd(n,Ld)),t.join("")};var Pd=/[#\/\?@]/g,Rd=/[#\?:]/g,Dd=/[#\?]/g,xd=/[#\?@]/g,Ld=/#/g;function Md(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Fd(n){n.a||(n.a=new yd,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function jd(t,e){Fd(t),e=qd(t,e),md(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,md((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&gd(t)))}function Ud(t,e){return Fd(t),e=qd(t,e),md(t.a.b,e)}function Vd(t,e,n){jd(t,e),0<n.length&&(t.c=null,t.a.set(qd(t,e),gf(n)),t.b+=n.length)}function qd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(bu=Md.prototype).add=function(t,e){Fd(this),this.c=null,t=qd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},bu.forEach=function(n,r){Fd(this),this.a.forEach(function(t,e){vf(t,function(t){n.call(r,t,e,this)},this)},this)},bu.L=function(){Fd(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},bu.K=function(t){Fd(this);var e=[];if("string"==typeof t)Ud(this,t)&&(e=yf(e,this.a.get(qd(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=yf(e,t[n])}return e},bu.set=function(t,e){return Fd(this),this.c=null,Ud(this,t=qd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},bu.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},bu.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Bd=function(t,e){this.b=t,this.a=e};function Hd(t){this.g=t||Wd,t=tf.PerformanceNavigationTiming?0<(t=tf.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(tf.ia&&tf.ia.ya&&tf.ia.ya()&&tf.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Wd=10;function zd(t){return t.b||t.a&&t.a.size>=t.f}function Gd(t){return t.b?1:t.a?t.a.size:0}function Kd(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Qd(t,e){t.a?t.a.add(e):t.b=e}function Yd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Xd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return gf(t.c);var r=t.c;try{for(var i=$l(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Jd(){}function $d(){this.a=new Jd}function Zd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Hd.prototype.cancel=function(){var e,t;if(this.c=Xd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=$l(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Jd.prototype.stringify=function(t){return tf.JSON.stringify(t,void 0)},Jd.prototype.parse=function(t){return tf.JSON.parse(t,void 0)};var tv=tf.JSON.parse;function ev(t){fp.call(this),this.headers=new yd,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=nv,this.D=this.F=!1}ff(ev,fp);var nv="",rv=/^https?$/i,iv=["POST","PUT"];function ov(t){return"content-type"==t.toLowerCase()}function sv(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,av(t),cv(t)}function av(t){t.u||(t.u=!0,pp(t,"complete"),pp(t,"error"))}function uv(t){if(t.b&&void 0!==Zl&&(!t.s[1]||4!=lv(t)||2!=t.W()))if(t.l&&4==lv(t))Np(t.za,0,t);else if(pp(t,"readystatechange"),4==lv(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(_d)[1]||null)&&tf.self&&tf.self.location&&(i=(r=tf.self.location.protocol).substr(0,r.length-1)),n=!rv.test(i?i.toLowerCase():"")),e=n);if(e)pp(t,"complete"),pp(t,"success");else{t.h=6;try{var a=2<lv(t)?t.a.statusText:""}catch(o){a=""}t.f=a+" ["+t.W()+"]",av(t)}}finally{cv(t)}}}function cv(t,e){if(t.a){hv(t);var n=t.a,r=t.s[0]?ef:null;t.a=null,t.s=null,e||pp(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function hv(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(tf.clearTimeout(t.m),t.m=null)}function lv(t){return t.a?t.a.readyState:0}function fv(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Tf(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Cd(t,e,n))}function pv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function dv(t){this.pa=0,this.g=[],this.c=new jp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=pv("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=pv("baseRetryDelayMs",5e3,t),this.Ra=pv("retryDelaySeedMs",1e4,t),this.Ma=pv("forwardChannelMaxRetries",2,t),this.ma=pv("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Hd(t&&t.concurrentRequestLimit),this.ka=new $d,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function vv(t){var e,n;gv(t),3==t.v&&(e=t.R++,Cd(n=wd(t.B),"SID",t.J),Cd(n,"RID",e),Cd(n,"TYPE","terminate"),wv(t,n),(e=new nd(t,t.c,e,void 0)).H=2,e.i=Nd(wd(n)),n=!1,tf.navigator&&tf.navigator.sendBeacon&&(n=tf.navigator.sendBeacon(e.i.toString(),"")),!n&&tf.Image&&((new Image).src=e.i,n=!0),n||(e.a=Dv(e.g,null),e.a.ba(e.i)),e.u=lf(),cd(e)),Pv(t)}function yv(t){t.a&&(Sv(t),t.a.cancel(),t.a=null)}function gv(t){yv(t),t.j&&(tf.clearTimeout(t.j),t.j=null),Nv(t),t.b.cancel(),t.h&&("number"==typeof t.h&&tf.clearTimeout(t.h),t.h=null)}function mv(t,e){t.g.push(new Bd(t.Oa++,e)),3==t.v&&_v(t)}function _v(t){zd(t.b)||t.h||(t.h=!0,wp(t.Ba,t),t.u=0)}function bv(t,e){var n=e?e.f:t.R++,r=wd(t.B);Cd(r,"SID",t.J),Cd(r,"RID",n),Cd(r,"AID",t.P),wv(t,r),t.i&&t.l&&fv(r,t.i,t.l),n=new nd(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Ev(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Qd(t.b,n),sd(n,r,e)}function wv(t,n){t.f&&vd({},function(t,e){Cd(n,e,t)})}function Ev(t,e,n){n=Math.min(t.g.length,n);var r=t.f?cf(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{vd(t,function(t,e){var n=t;rf(t)&&(n=vp(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Iv(t){t.a||t.j||(t.T=1,wp(t.Aa,t),t.o=0)}function Tv(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=Qp(cf(t.Aa,t),kv(t,t.o)),t.o++,1)}function Sv(t){null!=t.s&&(tf.clearTimeout(t.s),t.s=null)}function Cv(t){t.a=new nd(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=wd(t.la);Cd(e,"RID","rpc"),Cd(e,"SID",t.J),Cd(e,"CI",t.H?"0":"1"),Cd(e,"AID",t.P),wv(t,e),Cd(e,"TYPE","xmlhttp"),t.i&&t.l&&fv(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Nd(wd(e)),n.j=null,n.I=!0,ad(n,t)}function Nv(t){null!=t.m&&(tf.clearTimeout(t.m),t.m=null)}function Av(t,e){var n,r=null;if(t.a==e){Nv(t),Sv(t),t.a=null;var i=2}else{if(!Kd(t.b,e))return;r=e.s,Yd(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=lf()-e.u,n=t.u,pp(i=Bp(),new Kp(i)),_v(t)):Iv(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(Gd(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)))return t.h=Qp(cf(t.Ba,t,e),kv(t,t.u)),t.u++,1}}(t,e)||2==i&&Tv(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Ov(t,5);break;case 4:Ov(t,10);break;case 3:Ov(t,6);break;default:Ov(t,2)}}function kv(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ov(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=cf(t.Ya,t),r||(r=new bd("//www.google.com/images/cleardot.gif"),tf.location&&"http"==tf.location.protocol||Ed(r,"https"),Nd(r)),n=r.toString(),r=o,o=new jp,tf.Image?((i=new Image).onload=hf(Zd,o,i,"TestLoadImage: loaded",!0,r),i.onerror=hf(Zd,o,i,"TestLoadImage: error",!1,r),i.onabort=hf(Zd,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=hf(Zd,o,i,"TestLoadImage: timeout",!1,r),tf.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):Gp(2),t.v=0,t.f&&t.f.ra(e),Pv(t),gv(t)}function Pv(t){t.v=0,t.I=-1,t.f&&(0==Xd(t.b).length&&0==t.g.length||(t.b.c.length=0,gf(t.g),t.g.length=0),t.f.qa())}function Rv(t,e,n){var r,i,o,s,a,u=(s=n)instanceof bd?wd(s):new bd(s,void 0);return""!=u.c?(e&&Id(u,e+"."+u.c),Td(u,u.h)):(a=tf.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new bd(null,void 0),r&&Ed(a,r),i&&Id(a,i),o&&Td(a,o),s&&(a.g=s),u=a),t.V&&Tf(t.V,function(t,e){Cd(u,e,t)}),e=t.A,n=t.na,e&&n&&Cd(u,e,n),Cd(u,"VER",t.ha),wv(t,u),u}function Dv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ev(t.Na)).F=t.C,e}function xv(){}function Lv(){if(Pf&&!(10<=Number(qf)))throw Error("Environmental error: no available transport.")}function Mv(t,e){fp.call(this),this.a=new dv(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!mf(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!mf(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Uv(this)}function Fv(t){Zp.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function jv(){td.call(this),this.status=1}function Uv(t){this.a=t}(bu=ev.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Xp(this.H):Xp($p),this.a.onreadystatechange=cf(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void sv(this,t)}t=n||"";var i,o=new yd(this.headers);r&&vd(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=ov,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=tf.FormData&&t instanceof tf.FormData,0<=df(iv,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{hv(this),0<this.o&&((this.D=(i=this.a,Pf&&Vf(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=cf(this.xa,this)):this.m=Np(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){sv(this,t)}},bu.xa=function(){void 0!==Zl&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,pp(this,"timeout"),this.abort(8))},bu.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,pp(this,"complete"),pp(this,"abort"),cv(this))},bu.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),cv(this,!0)),ev.X.G.call(this)},bu.za=function(){this.j||(this.A||this.l||this.g?uv(this):this.Ua())},bu.Ua=function(){uv(this)},bu.W=function(){try{return 2<lv(this)?this.a.status:-1}catch(t){return-1}},bu.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},bu.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),tv(e)}},bu.ua=function(){return this.h},bu.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(bu=dv.prototype).ha=8,bu.v=1,bu.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new nd(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Nf(r=Sf(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Ev(this,n,e),Cd(i=wd(this.B),"RID",t),Cd(i,"CVER",22),this.A&&Cd(i,"X-HTTP-Session-Id",this.A),wv(this,i),this.i&&r&&fv(i,this.i,r),Qd(this.b,n),this.Ia&&Cd(i,"TYPE","init"),this.da?(Cd(i,"$req",e),Cd(i,"SID","null"),n.U=!0,sd(n,i,null)):sd(n,i,e),this.v=2}}else 3==this.v&&(t?bv(this,t):0==this.g.length||zd(this.b)||bv(this))},bu.Aa=function(){var t;this.j=null,Cv(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=Qp(cf(this.Ta,this),t))},bu.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Gp(10),yv(this),Cv(this))},bu.Sa=function(){null!=this.m&&(this.m=null,yv(this),Tv(this),Gp(19))},bu.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Gp(2)):(this.c.info("Failed to ping google.com"),Gp(1))},(bu=xv.prototype).ta=function(){},bu.sa=function(){},bu.ra=function(){},bu.qa=function(){},bu.Ja=function(){},Lv.prototype.a=function(t,e){return new Mv(t,e)},ff(Mv,fp),Mv.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Gp(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Rv(t,null,t.fa),_v(t)},Mv.prototype.close=function(){vv(this.a)},Mv.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,mv(this.a,e)):this.l?((e={}).__data__=vp(t),mv(this.a,e)):mv(this.a,t)},Mv.prototype.G=function(){this.a.f=null,delete this.f,vv(this.a),delete this.a,Mv.X.G.call(this)},ff(Fv,Zp),ff(jv,td),ff(Uv,xv),Uv.prototype.ta=function(){pp(this.a,"a")},Uv.prototype.sa=function(t){pp(this.a,new Fv(t))},Uv.prototype.ra=function(t){pp(this.a,new jv)},Uv.prototype.qa=function(){pp(this.a,"b")},Lv.prototype.createWebChannel=Lv.prototype.a,Mv.prototype.send=Mv.prototype.h,Mv.prototype.open=Mv.prototype.g,vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,Kn.COMPLETE="complete",(Jp.EventType=dt).OPEN="a",dt.CLOSE="b",dt.ERROR="c",dt.MESSAGE="d",fp.prototype.listen=fp.prototype.va,ev.prototype.listenOnce=ev.prototype.wa,ev.prototype.getLastError=ev.prototype.Qa,ev.prototype.getLastErrorCode=ev.prototype.ua,ev.prototype.getStatus=ev.prototype.W,ev.prototype.getResponseJson=ev.prototype.Pa,ev.prototype.getResponseText=ev.prototype.$,ev.prototype.send=ev.prototype.ba;var Vv=Bp,qv=vt,Bv=Kn,Hv=Vp,Wv=10,zv=11,Gv=Jp,Kv=ev,Qv=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Yv=(Object.defineProperty(Jv.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Jv.prototype.isEqual=function(t){return t instanceof Jv&&t.projectId===this.projectId&&t.database===this.database},Jv),Xv=new Ls("@firebase/firestore");function Jv(t,e){this.projectId=t,this.database=e||"(default)"}function $v(){return Xv.logLevel}function Zv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xv.logLevel<=ks.DEBUG&&(e=n.map(ny),Xv.debug.apply(Xv,Co(["Firestore (8.2.6): "+t],e)))}function ty(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xv.logLevel<=ks.ERROR&&(e=n.map(ny),Xv.error.apply(Xv,Co(["Firestore (8.2.6): "+t],e)))}function ey(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Xv.logLevel<=ks.WARN&&(e=n.map(ny),Xv.warn.apply(Xv,Co(["Firestore (8.2.6): "+t],e)))}function ny(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function ry(t){void 0===t&&(t="Unexpected state");t="FIRESTORE (8.2.6) INTERNAL ASSERTION FAILED: "+t;throw ty(t),new Error(t)}function iy(t){t||ry()}var oy=(sy.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},sy);function sy(){}function ay(t,e){return t<e?-1:e<t?1:0}function uy(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function cy(t){return t+"\0"}var hy=(ly.fromBase64String=function(t){return new ly(atob(t))},ly.fromUint8Array=function(t){return new ly(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},ly.prototype.toBase64=function(){return t=this.h,btoa(t);var t},ly.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.h)},ly.prototype.l=function(){return 2*this.h.length},ly.prototype._=function(t){return ay(this.h,t.h)},ly.prototype.isEqual=function(t){return this.h===t.h},ly);function ly(t){this.h=t}hy.T=new hy("");var fy,py={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},dy=(_o(_y,fy=Error),_y),vy=(my.fromBase64String=function(t){try{return new my(hy.fromBase64String(t))}catch(t){throw new dy(py.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},my.fromUint8Array=function(t){return new my(hy.fromUint8Array(t))},my.prototype.toBase64=function(){return this.I.toBase64()},my.prototype.toUint8Array=function(){return this.I.toUint8Array()},my.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},my.prototype.isEqual=function(t){return this.I.isEqual(t.I)},my),yy=(gy.prototype.m=function(){return null!=this.uid},gy.prototype.A=function(){return this.m()?"uid:"+this.uid:"anonymous-user"},gy.prototype.isEqual=function(t){return t.uid===this.uid},gy);function gy(t){this.uid=t}function my(t){this.I=t}function _y(t,e){var n=this;return(n=fy.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}yy.UNAUTHENTICATED=new yy(null),yy.R=new yy("google-credentials-uid"),yy.P=new yy("first-party-uid");function by(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t}var wy=(Oy.prototype.getToken=function(){return Promise.resolve(null)},Oy.prototype.p=function(){},Oy.prototype.v=function(t){(this.V=t)(yy.UNAUTHENTICATED)},Oy.prototype.S=function(){this.V=null},Oy),Ey=(ky.prototype.getToken=function(){var e=this,n=this.N,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.N!==n?(Zv("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(iy("string"==typeof t.accessToken),new by(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},ky.prototype.p=function(){this.forceRefresh=!0},ky.prototype.v=function(t){this.V=t,this.C&&t(this.currentUser)},ky.prototype.S=function(){this.auth&&this.auth.removeAuthTokenListener(this.D),this.D=null,this.V=null},ky.prototype.F=function(){var t=this.auth&&this.auth.getUid();return iy(null===t||"string"==typeof t),new yy(t)},ky),Iy=(Object.defineProperty(Ay.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.O.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Ay),Ty=(Ny.prototype.getToken=function(){return Promise.resolve(new Iy(this.O,this.k))},Ny.prototype.v=function(t){t(yy.P)},Ny.prototype.S=function(){},Ny.prototype.p=function(){},Ny),Sy=(Cy.prototype.L=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Cy.prototype.next=function(){var t=++this.previousValue;return this.$&&this.$(t),t},Cy);function Cy(t,e){var n=this;this.previousValue=t,e&&(e.M=function(t){return n.L(t)},this.$=function(t){return e.B(t)})}function Ny(t,e){this.O=t,this.k=e}function Ay(t,e){this.O=t,this.k=e,this.type="FirstParty",this.user=yy.P}function ky(t){var e=this;this.D=null,this.currentUser=yy.UNAUTHENTICATED,this.C=!1,this.N=0,this.V=null,this.forceRefresh=!1,this.D=function(){e.N++,e.currentUser=e.F(),e.C=!0,e.V&&e.V(e.currentUser)},this.N=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.D):(this.D(null),t.get().then(function(t){e.auth=t,e.D&&e.auth.addAuthTokenListener(e.D)},function(){}))}function Oy(){this.V=null}Sy.q=-1;var Py,Ry,Dy=(Wy.now=function(){return Wy.fromMillis(Date.now())},Wy.fromDate=function(t){return Wy.fromMillis(t.getTime())},Wy.fromMillis=function(t){var e=Math.floor(t/1e3);return new Wy(e,1e6*(t-1e3*e))},Wy.prototype.toDate=function(){return new Date(this.toMillis())},Wy.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},Wy.prototype.U=function(t){return this.seconds===t.seconds?ay(this.nanoseconds,t.nanoseconds):ay(this.seconds,t.seconds)},Wy.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},Wy.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},Wy.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},Wy.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},Wy),xy=(Hy.K=function(t){return new Hy(t)},Hy.min=function(){return new Hy(new Dy(0,0))},Hy.prototype._=function(t){return this.timestamp.U(t.timestamp)},Hy.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Hy.prototype.W=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Hy.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Hy.prototype.j=function(){return this.timestamp},Hy),vt=(Object.defineProperty(By.prototype,"length",{get:function(){return this.G},enumerable:!1,configurable:!0}),By.prototype.isEqual=function(t){return 0===By.H(this,t)},By.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof By?t.forEach(function(t){e.push(t)}):e.push(t),this.J(e)},By.prototype.limit=function(){return this.offset+this.length},By.prototype.Y=function(t){return t=void 0===t?1:t,this.J(this.segments,this.offset+t,this.length-t)},By.prototype.X=function(){return this.J(this.segments,this.offset,this.length-1)},By.prototype.Z=function(){return this.segments[this.offset]},By.prototype.tt=function(){return this.get(this.length-1)},By.prototype.get=function(t){return this.segments[this.offset+t]},By.prototype.et=function(){return 0===this.length},By.prototype.nt=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},By.prototype.st=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},By.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},By.prototype.it=function(){return this.segments.slice(this.offset,this.limit())},By.H=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},By),Ly=(_o(qy,Ry=vt),qy.prototype.J=function(t,e,n){return new qy(t,e,n)},qy.prototype.rt=function(){return this.it().join("/")},qy.prototype.toString=function(){return this.rt()},qy.ot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new dy(py.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new qy(n)},qy.ct=function(){return new qy([])},qy),My=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Fy=(_o(Vy,Py=vt),Vy.prototype.J=function(t,e,n){return new Vy(t,e,n)},Vy.at=function(t){return My.test(t)},Vy.prototype.rt=function(){return this.it().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vy.at(t)||(t="`"+t+"`"),t}).join(".")},Vy.prototype.toString=function(){return this.rt()},Vy.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},Vy.ht=function(){return new Vy(["__name__"])},Vy.lt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new dy(py.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new dy(py.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new dy(py.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new dy(py.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vy(e)},Vy.ct=function(){return new Vy([])},Vy),jy=(Uy._t=function(t){return new Uy(Ly.ot(t))},Uy.ft=function(t){return new Uy(Ly.ot(t).Y(5))},Uy.prototype.dt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Uy.prototype.isEqual=function(t){return null!==t&&0===Ly.H(this.path,t.path)},Uy.prototype.toString=function(){return this.path.toString()},Uy.H=function(t,e){return Ly.H(t.path,e.path)},Uy.wt=function(t){return t.length%2==0},Uy.Et=function(t){return new Uy(new Ly(t.slice()))},Uy);function Uy(t){this.path=t}function Vy(){return null!==Py&&Py.apply(this,arguments)||this}function qy(){return null!==Ry&&Ry.apply(this,arguments)||this}function By(t,e,n){void 0===e?e=0:e>t.length&&ry(),void 0===n?n=t.length-e:n>t.length-e&&ry(),this.segments=t,this.offset=e,this.G=n}function Hy(t){this.timestamp=t}function Wy(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new dy(py.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new dy(py.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new dy(py.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new dy(py.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function zy(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Gy(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ky(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Qy=(Xy.prototype.Tt=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].nt(t))return!0;return!1},Xy.prototype.isEqual=function(t){return uy(this.fields,t.fields,function(t,e){return t.isEqual(e)})},Xy),Yy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xy(t){(this.fields=t).sort(Fy.H)}function Jy(t){if(iy(!!t),"string"!=typeof t)return{seconds:$y(t.seconds),nanos:$y(t.nanos)};var e=0,n=Yy.exec(t);iy(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function $y(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zy(t){return"string"==typeof t?hy.fromBase64String(t):hy.fromUint8Array(t)}function tg(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function eg(t){t=Jy(t.mapValue.fields.__local_write_time__.timestampValue);return new Dy(t.seconds,t.nanos)}function ng(t){return null==t}function rg(t){return 0===t&&1/t==-1/0}function ig(t){return"number"==typeof t&&Number.isInteger(t)&&!rg(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function og(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tg(t)?4:10:ry()}function sg(r,i){var t,e=og(r);if(e!==og(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return eg(r).isEqual(eg(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Jy(r.timestampValue),t=Jy(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,Zy(r.bytesValue).isEqual(Zy(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,$y((t=r).geoPointValue.latitude)===$y(e.geoPointValue.latitude)&&$y(t.geoPointValue.longitude)===$y(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return $y(t.integerValue)===$y(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=$y(t.doubleValue),e=$y(e.doubleValue);return t===e?rg(t)===rg(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return uy(r.arrayValue.values||[],i.arrayValue.values||[],sg);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(zy(e)!==zy(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!sg(e[t],n[t])))return!1;return!0}();default:return ry()}}function ag(t,e){return void 0!==(t.values||[]).find(function(t){return sg(t,e)})}function ug(t,e){var n,r,i=og(t),o=og(e);if(i!==o)return ay(i,o);switch(i){case 0:return 0;case 1:return ay(t.booleanValue,e.booleanValue);case 2:return n=e,r=$y(t.integerValue||t.doubleValue),n=$y(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return cg(t.timestampValue,e.timestampValue);case 4:return cg(eg(t),eg(e));case 5:return ay(t.stringValue,e.stringValue);case 6:return function(t,e){t=Zy(t),e=Zy(e);return t._(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ay(n[i],r[i]);if(0!==o)return o}return ay(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=ay($y(i.latitude),$y(r.latitude)))?n:ay($y(i.longitude),$y(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ug(n[i],r[i]);if(o)return o}return ay(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ay(r[s],o[s]);if(0!==a)return a;a=ug(n[r[s]],i[o[s]]);if(0!==a)return a}return ay(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ry()}}function cg(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ay(t,e);var n=Jy(t),t=Jy(e),e=ay(n.seconds,t.seconds);return 0!==e?e:ay(n.nanos,t.nanos)}function hg(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Jy(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Zy(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,jy.ft(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):ry();var e}(t)}function lg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.rt()}}function fg(t){return t&&"integerValue"in t}function pg(t){return!!t&&"arrayValue"in t}function dg(t){return t&&"nullValue"in t}function vg(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yg(t){return t&&"mapValue"in t}var gg=(bg.empty=function(){return new bg({mapValue:{}})},bg.prototype.field=function(t){if(t.et())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!yg(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.tt()])||null},bg.prototype.isEqual=function(t){return sg(this.proto,t.proto)},bg),mg=(_g.prototype.set=function(t,e){return this.Rt(t,e),this},_g.prototype.delete=function(t){return this.Rt(t,null),this},_g.prototype.Rt=function(t,e){for(var n=this.At,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===og(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.tt(),e)},_g.prototype.Pt=function(){var t=this.yt(Fy.ct(),this.At);return null!=t?new gg(t):this.It},_g.prototype.yt=function(r,t){var i=this,o=!1,e=this.It.field(r),s=yg(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.yt(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},_g);function _g(t){void 0===t&&(t=gg.empty()),this.It=t,this.At=new Map}function bg(t){this.proto=t}var wg,Eg,Ig,Kn=function(t,e){this.key=t,this.version=e},Tg=(_o(Og,Ig=Kn),Og.prototype.field=function(t){return this.gt.field(t)},Og.prototype.data=function(){return this.gt},Og.prototype.bt=function(){return this.gt.proto},Og.prototype.isEqual=function(t){return t instanceof Og&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Vt===t.Vt&&this.hasCommittedMutations===t.hasCommittedMutations&&this.gt.isEqual(t.gt)},Og.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.gt.toString()+", {hasLocalMutations: "+this.Vt+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Og.prototype,"hasPendingWrites",{get:function(){return this.Vt||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Og),Sg=(_o(kg,Eg=Kn),kg.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(kg.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),kg.prototype.isEqual=function(t){return t instanceof kg&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},kg),Cg=(_o(Ag,wg=Kn),Ag.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ag.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Ag.prototype.isEqual=function(t){return t instanceof Ag&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Ag),Ng=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.vt=null};function Ag(){return null!==wg&&wg.apply(this,arguments)||this}function kg(t,e,n){var r=this;return(r=Eg.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Og(t,e,n,r){var i=this;return(i=Ig.call(this,t,e)||this).gt=n,i.Vt=!!r.Vt,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Pg(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ng(t,e,n,r,i,o,s)}function Rg(t){var e=t;return null===e.vt&&(t=e.path.rt(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.rt()+t.op.toString()+hg(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.rt()+t.dir}).join(","),ng(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=am(e.startAt)),e.endAt&&(t+="|ub:",t+=am(e.endAt)),e.vt=t),e.vt}function Dg(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!sg(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!hm(t.startAt,e.startAt)&&hm(t.endAt,e.endAt)}function xg(t){return jy.wt(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Lg,Mg=(_o(Fg,Lg=function(){}),Fg.create=function(t,e,n){return t.ut()?"in"===e||"not-in"===e?this.St(t,e,n):new qg(t,e,n):"array-contains"===e?new $g(t,n):"in"===e?new Zg(t,n):"not-in"===e?new tm(t,n):"array-contains-any"===e?new em(t,n):new Fg(t,e,n)},Fg.St=function(t,e,n){return new("in"===e?Bg:Hg)(t,n)},Fg.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.Dt(ug(t,this.value)):null!==t&&og(this.value)===og(t)&&this.Dt(ug(t,this.value))},Fg.prototype.Dt=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return ry()}},Fg.prototype.Ct=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Fg);function Fg(t,e,n){var r=this;return(r=Lg.call(this)||this).field=t,r.op=e,r.value=n,r}var jg,Ug,Vg,qg=(_o(Gg,Vg=Mg),Gg.prototype.matches=function(t){t=jy.H(t.key,this.key);return this.Dt(t)},Gg),Bg=(_o(zg,Ug=Mg),zg.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},zg),Hg=(_o(Wg,jg=Mg),Wg.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Wg);function Wg(t,e){var n=this;return(n=jg.call(this,t,"not-in",e)||this).keys=Kg(0,e),n}function zg(t,e){var n=this;return(n=Ug.call(this,t,"in",e)||this).keys=Kg(0,e),n}function Gg(t,e,n){var r=this;return(r=Vg.call(this,t,e,n)||this).key=jy.ft(n.referenceValue),r}function Kg(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return jy.ft(t.referenceValue)})}var Qg,Yg,Xg,Jg,$g=(_o(sm,Jg=Mg),sm.prototype.matches=function(t){t=t.field(this.field);return pg(t)&&ag(t.arrayValue,this.value)},sm),Zg=(_o(om,Xg=Mg),om.prototype.matches=function(t){t=t.field(this.field);return null!==t&&ag(this.value.arrayValue,t)},om),tm=(_o(im,Yg=Mg),im.prototype.matches=function(t){if(ag(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!ag(this.value.arrayValue,t)},im),em=(_o(rm,Qg=Mg),rm.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!pg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return ag(e.value.arrayValue,t)})},rm),nm=function(t,e){this.position=t,this.before=e};function rm(t,e){return Qg.call(this,t,"array-contains-any",e)||this}function im(t,e){return Yg.call(this,t,"not-in",e)||this}function om(t,e){return Xg.call(this,t,"in",e)||this}function sm(t,e){return Jg.call(this,t,"array-contains",e)||this}function am(t){return(t.before?"b":"a")+":"+t.position.map(hg).join(",")}var um=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function cm(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.ut()?jy.H(jy.ft(s.referenceValue),n.key):ug(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function hm(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!sg(t.position[n],e.position[n]))return!1;return!0}var lm=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.xt=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.Nt=null,this.Ft=null,this.startAt,this.endAt};function fm(t,e,n,r,i,o,s,a){return new lm(t,e,n,r,i,o,s,a)}function pm(t){return new lm(t)}function dm(t){return!ng(t.limit)&&"F"===t.limitType}function vm(t){return!ng(t.limit)&&"L"===t.limitType}function ym(t){return 0<t.xt.length?t.xt[0].field:null}function gm(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.Ct())return r.field}return null}function mm(t){return null!==t.collectionGroup}function _m(t){var e=t;if(null===e.Nt){e.Nt=[];var n=gm(e),t=ym(e);if(null!==n&&null===t)n.ut()||e.Nt.push(new um(n)),e.Nt.push(new um(Fy.ht(),"asc"));else{for(var r=!1,i=0,o=e.xt;i<o.length;i++){var s=o[i];e.Nt.push(s),s.field.ut()&&(r=!0)}r||(n=0<e.xt.length?e.xt[e.xt.length-1].dir:"asc",e.Nt.push(new um(Fy.ht(),n)))}}return e.Nt}function bm(t){var e=t;if(!e.Ft)if("F"===e.limitType)e.Ft=Pg(e.path,e.collectionGroup,_m(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=_m(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new um(o.field,s))}var a=e.endAt?new nm(e.endAt.position,!e.endAt.before):null,t=e.startAt?new nm(e.startAt.position,!e.startAt.before):null;e.Ft=Pg(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.Ft}function wm(t,e,n){return new lm(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Em(t,e){return Dg(bm(t),bm(e))&&t.limitType===e.limitType}function Im(t){return Rg(bm(t))+"|lt:"+t.limitType}function Tm(t){return"Query(target="+(e=bm(t),n=e.path.rt(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.rt()+" "+t.op+" "+hg(t.value)}).join(", ")+"]"),ng(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.rt()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+am(e.startAt)),e.endAt&&(n+=", endAt: "+am(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function Sm(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.dt(e.collectionGroup)&&e.path.nt(n):jy.wt(e.path)?e.path.isEqual(n):e.path.st(n))&&function(t){for(var e=0,n=i.xt;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||cm(t.startAt,_m(t),n))&&(!t.endAt||!cm(t.endAt,_m(t),n)));var e,n}function Cm(a){return function(t,e){for(var n=!1,r=0,i=_m(a);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.ut()?jy.H(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?ug(n,t):ry()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return ry()}}(o,t,e);if(0!==s)return s;n=n||o.field.ut()}return 0}}var Nm=(Am.prototype.Mt=function(t){return new Am(this.target,this.targetId,this.Ot,t,this.kt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Am.prototype.Lt=function(t,e){return new Am(this.target,this.targetId,this.Ot,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},Am.prototype.$t=function(t){return new Am(this.target,this.targetId,this.Ot,this.sequenceNumber,this.kt,t,this.resumeToken)},Am);function Am(t,e,n,r,i,o,s){void 0===i&&(i=xy.min()),void 0===o&&(o=xy.min()),void 0===s&&(s=hy.T),this.target=t,this.targetId=e,this.Ot=n,this.sequenceNumber=r,this.kt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function km(t,e){if(t.Bt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rg(e)?"-0":e}}function Om(t){return{integerValue:""+t}}function Pm(t,e){return ig(e)?Om(e):km(t,e)}vt=function(){this.qt=void 0};function Rm(t,e){return t instanceof zm?fg(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var Dm,xm,Lm=(_o(jm,xm=vt),jm),Mm=(_o(Fm,Dm=vt),Fm);function Fm(t){var e=this;return(e=Dm.call(this)||this).elements=t,e}function jm(){return null!==xm&&xm.apply(this,arguments)||this}function Um(t,e){for(var n=Qm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return sg(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Vm,qm=(_o(Bm,Vm=vt),Bm);function Bm(t){var e=this;return(e=Vm.call(this)||this).elements=t,e}function Hm(t,e){for(var n=Qm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!sg(t,e)})}(i[r]);return{arrayValue:{values:n}}}var Wm,zm=(_o(Gm,Wm=vt),Gm);function Gm(t,e){var n=this;return(n=Wm.call(this)||this).Qt=t,n.Ut=e,n}function Km(t){return $y(t.integerValue||t.doubleValue)}function Qm(t){return pg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Ym(t,e){this.version=t,this.transformResults=e}var Xm=function(t,e){this.field=t,this.transform=e},Jm=($m.Kt=function(){return new $m},$m.exists=function(t){return new $m(void 0,t)},$m.updateTime=function(t){return new $m(t)},Object.defineProperty($m.prototype,"Wt",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),$m.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},$m);function $m(t,e){this.updateTime=t,this.exists=e}function Zm(t,e){return void 0!==t.updateTime?e instanceof Tg&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Tg}Kn=function(){};function t_(t,e,n){return t instanceof o_?function(t,e,n){if(!Zm(t.jt,e))return e;var r=t.value,n=l_(t.fieldTransforms,n,e),r=f_(t.fieldTransforms,r,n),e=n_(e);return new Tg(t.key,e,r,{Vt:!0})}(t,e,n):t instanceof s_?function(t,e,n){if(!Zm(t.jt,e))return e;var r=n_(e),e=c_(t,e,l_(t.fieldTransforms,n,e));return new Tg(t.key,r,e,{Vt:!0})}(t,e,n):(e=e,Zm((t=t).jt,e)?new Sg(t.key,xy.min()):e)}function e_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.jt.isEqual(e.jt)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&uy(n,r,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Mm&&e instanceof Mm||t instanceof qm&&e instanceof qm?uy(t.elements,e.elements,sg):t instanceof zm&&e instanceof zm?sg(t.Ut,e.Ut):t instanceof Lm&&e instanceof Lm)})))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.Gt.isEqual(e.Gt));var n,r}function n_(t){return t instanceof Tg?t.version:xy.min()}var r_,i_,o_=(_o(u_,i_=Kn),u_),s_=(_o(a_,r_=Kn),a_);function a_(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=r_.call(this)||this).key=t,o.data=e,o.Gt=n,o.jt=r,o.fieldTransforms=i,o.type=1,o}function u_(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=i_.call(this)||this).key=t,i.value=e,i.jt=n,i.fieldTransforms=r,i.type=0,i}function c_(t,e,n){var r,i,o;return i=t,e=r=e instanceof Tg?e.data():gg.empty(),o=new mg(e),i.Gt.fields.forEach(function(t){var e;t.et()||(null!==(e=i.data.field(t))?o.set(t,e):o.delete(t))}),r=o.Pt(),f_(t.fieldTransforms,r,n)}function h_(t,e,n){var r=[];iy(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Tg&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof Mm?Um(o,s):o instanceof qm?Hm(o,s):a))}return r}function l_(t,e,n){for(var r,i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof Tg&&(c=n.field(a.field)),i.push((r=c,a=e,c=void 0,(u=u)instanceof Lm?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof Mm?Um(u,r):u instanceof qm?Hm(u,r):(u=Rm(c=u,r),r=Km(u)+Km(c.Ut),fg(u)&&fg(c.Ut)?Om(r):km(c.Qt,r))))}return i}function f_(t,e,n){for(var r=new mg(e),i=0;i<t.length;i++){var o=t[i];r.set(o.field,n[i])}return r.Pt()}function p_(t){this.count=t}var d_,v_,y_,g_=(_o(b_,y_=Kn),b_),m_=(_o(__,v_=Kn),__);function __(t,e){var n=this;return(n=v_.call(this)||this).key=t,n.jt=e,n.type=3,n.fieldTransforms=[],n}function b_(t,e){var n=this;return(n=y_.call(this)||this).key=t,n.jt=e,n.type=2,n.fieldTransforms=[],n}function w_(t){switch(t){case py.OK:return ry(),0;case py.CANCELLED:case py.UNKNOWN:case py.DEADLINE_EXCEEDED:case py.RESOURCE_EXHAUSTED:case py.INTERNAL:case py.UNAVAILABLE:case py.UNAUTHENTICATED:return;case py.INVALID_ARGUMENT:case py.NOT_FOUND:case py.ALREADY_EXISTS:case py.PERMISSION_DENIED:case py.FAILED_PRECONDITION:case py.ABORTED:case py.OUT_OF_RANGE:case py.UNIMPLEMENTED:case py.DATA_LOSS:return 1;default:return ry(),0}}function E_(t){if(void 0===t)return ty("GRPC error has no .code"),py.UNKNOWN;switch(t){case d_.OK:return py.OK;case d_.CANCELLED:return py.CANCELLED;case d_.UNKNOWN:return py.UNKNOWN;case d_.DEADLINE_EXCEEDED:return py.DEADLINE_EXCEEDED;case d_.RESOURCE_EXHAUSTED:return py.RESOURCE_EXHAUSTED;case d_.INTERNAL:return py.INTERNAL;case d_.UNAVAILABLE:return py.UNAVAILABLE;case d_.UNAUTHENTICATED:return py.UNAUTHENTICATED;case d_.INVALID_ARGUMENT:return py.INVALID_ARGUMENT;case d_.NOT_FOUND:return py.NOT_FOUND;case d_.ALREADY_EXISTS:return py.ALREADY_EXISTS;case d_.PERMISSION_DENIED:return py.PERMISSION_DENIED;case d_.FAILED_PRECONDITION:return py.FAILED_PRECONDITION;case d_.ABORTED:return py.ABORTED;case d_.OUT_OF_RANGE:return py.OUT_OF_RANGE;case d_.UNIMPLEMENTED:return py.UNIMPLEMENTED;case d_.DATA_LOSS:return py.DATA_LOSS;default:return ry()}}(vt=d_=d_||{})[vt.OK=0]="OK",vt[vt.CANCELLED=1]="CANCELLED",vt[vt.UNKNOWN=2]="UNKNOWN",vt[vt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vt[vt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vt[vt.NOT_FOUND=5]="NOT_FOUND",vt[vt.ALREADY_EXISTS=6]="ALREADY_EXISTS",vt[vt.PERMISSION_DENIED=7]="PERMISSION_DENIED",vt[vt.UNAUTHENTICATED=16]="UNAUTHENTICATED",vt[vt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vt[vt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vt[vt.ABORTED=10]="ABORTED",vt[vt.OUT_OF_RANGE=11]="OUT_OF_RANGE",vt[vt.UNIMPLEMENTED=12]="UNIMPLEMENTED",vt[vt.INTERNAL=13]="INTERNAL",vt[vt.UNAVAILABLE=14]="UNAVAILABLE",vt[vt.DATA_LOSS=15]="DATA_LOSS";var I_=(A_.prototype.zt=function(t,e){return new A_(this.H,this.root.zt(t,e,this.H).copy(null,null,S_.Ht,null,null))},A_.prototype.remove=function(t){return new A_(this.H,this.root.remove(t,this.H).copy(null,null,S_.Ht,null,null))},A_.prototype.get=function(t){for(var e=this.root;!e.et();){var n=this.H(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},A_.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.et();){var r=this.H(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},A_.prototype.et=function(){return this.root.et()},Object.defineProperty(A_.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),A_.prototype.Jt=function(){return this.root.Jt()},A_.prototype.Yt=function(){return this.root.Yt()},A_.prototype.Xt=function(t){return this.root.Xt(t)},A_.prototype.forEach=function(n){this.Xt(function(t,e){return n(t,e),!1})},A_.prototype.toString=function(){var n=[];return this.Xt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},A_.prototype.Zt=function(t){return this.root.Zt(t)},A_.prototype.te=function(){return new T_(this.root,null,this.H,!1)},A_.prototype.ee=function(t){return new T_(this.root,t,this.H,!1)},A_.prototype.ne=function(){return new T_(this.root,null,this.H,!0)},A_.prototype.se=function(t){return new T_(this.root,t,this.H,!0)},A_),T_=(N_.prototype.oe=function(){var t=this.re.pop(),e={key:t.key,value:t.value};if(this.ie)for(t=t.left;!t.et();)this.re.push(t),t=t.right;else for(t=t.right;!t.et();)this.re.push(t),t=t.left;return e},N_.prototype.ce=function(){return 0<this.re.length},N_.prototype.ae=function(){if(0===this.re.length)return null;var t=this.re[this.re.length-1];return{key:t.key,value:t.value}},N_),S_=(C_.prototype.copy=function(t,e,n,r,i){return new C_(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},C_.prototype.et=function(){return!1},C_.prototype.Xt=function(t){return this.left.Xt(t)||t(this.key,this.value)||this.right.Xt(t)},C_.prototype.Zt=function(t){return this.right.Zt(t)||t(this.key,this.value)||this.left.Zt(t)},C_.prototype.min=function(){return this.left.et()?this:this.left.min()},C_.prototype.Jt=function(){return this.min().key},C_.prototype.Yt=function(){return this.right.et()?this.key:this.right.Yt()},C_.prototype.zt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.zt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.zt(t,e,n))).ue()},C_.prototype.he=function(){if(this.left.et())return C_.EMPTY;var t=this;return t.left.le()||t.left.left.le()||(t=t._e()),(t=t.copy(null,null,null,t.left.he(),null)).ue()},C_.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.et()||r.left.le()||r.left.left.le()||(r=r._e()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.le()&&(r=r.fe()),r.right.et()||r.right.le()||r.right.left.le()||(r=r.de()),0===e(t,r.key)){if(r.right.et())return C_.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.he())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.ue()},C_.prototype.le=function(){return this.color},C_.prototype.ue=function(){var t=this;return t.right.le()&&!t.left.le()&&(t=t.we()),t.left.le()&&t.left.left.le()&&(t=t.fe()),t.left.le()&&t.right.le()&&(t=t.Ee()),t},C_.prototype._e=function(){var t=this.Ee();return t.right.left.le()&&(t=(t=(t=t.copy(null,null,null,null,t.right.fe())).we()).Ee()),t},C_.prototype.de=function(){var t=this.Ee();return t.left.left.le()&&(t=(t=t.fe()).Ee()),t},C_.prototype.we=function(){var t=this.copy(null,null,C_.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},C_.prototype.fe=function(){var t=this.copy(null,null,C_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},C_.prototype.Ee=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},C_.prototype.Te=function(){var t=this.Ie();return Math.pow(2,t)<=this.size+1},C_.prototype.Ie=function(){if(this.le()&&this.left.le())throw ry();if(this.right.le())throw ry();var t=this.left.Ie();if(t!==this.right.Ie())throw ry();return t+(this.le()?0:1)},C_);function C_(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:C_.RED,this.left=null!=r?r:C_.EMPTY,this.right=null!=i?i:C_.EMPTY,this.size=this.left.size+1+this.right.size}function N_(t,e,n,r){this.ie=r,this.re=[];for(var i=1;!t.et();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.ie?t.left:t.right;else{if(0===i){this.re.push(t);break}this.re.push(t),t=this.ie?t.right:t.left}}function A_(t,e){this.H=t,this.root=e||S_.EMPTY}function k_(){this.size=0}S_.EMPTY=null,S_.RED=!0,S_.Ht=!1,S_.EMPTY=(Object.defineProperty(k_.prototype,"key",{get:function(){throw ry()},enumerable:!1,configurable:!0}),Object.defineProperty(k_.prototype,"value",{get:function(){throw ry()},enumerable:!1,configurable:!0}),Object.defineProperty(k_.prototype,"color",{get:function(){throw ry()},enumerable:!1,configurable:!0}),Object.defineProperty(k_.prototype,"left",{get:function(){throw ry()},enumerable:!1,configurable:!0}),Object.defineProperty(k_.prototype,"right",{get:function(){throw ry()},enumerable:!1,configurable:!0}),k_.prototype.copy=function(t,e,n,r,i){return this},k_.prototype.zt=function(t,e,n){return new S_(t,e)},k_.prototype.remove=function(t,e){return this},k_.prototype.et=function(){return!0},k_.prototype.Xt=function(t){return!1},k_.prototype.Zt=function(t){return!1},k_.prototype.Jt=function(){return null},k_.prototype.Yt=function(){return null},k_.prototype.le=function(){return!1},k_.prototype.Te=function(){return!0},k_.prototype.Ie=function(){return 0},new k_);var O_=(x_.prototype.has=function(t){return null!==this.data.get(t)},x_.prototype.first=function(){return this.data.Jt()},x_.prototype.last=function(){return this.data.Yt()},Object.defineProperty(x_.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),x_.prototype.indexOf=function(t){return this.data.indexOf(t)},x_.prototype.forEach=function(n){this.data.Xt(function(t,e){return n(t),!1})},x_.prototype.me=function(t,e){for(var n=this.data.ee(t[0]);n.ce();){var r=n.oe();if(0<=this.H(r.key,t[1]))return;e(r.key)}},x_.prototype.Ae=function(t,e){for(var n=void 0!==e?this.data.ee(e):this.data.te();n.ce();)if(!t(n.oe().key))return},x_.prototype.Re=function(t){t=this.data.ee(t);return t.ce()?t.oe().key:null},x_.prototype.te=function(){return new P_(this.data.te())},x_.prototype.ee=function(t){return new P_(this.data.ee(t))},x_.prototype.add=function(t){return this.copy(this.data.remove(t).zt(t,!0))},x_.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},x_.prototype.et=function(){return this.data.et()},x_.prototype.Pe=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},x_.prototype.isEqual=function(t){if(!(t instanceof x_))return!1;if(this.size!==t.size)return!1;for(var e=this.data.te(),n=t.data.te();e.ce();){var r=e.oe().key,i=n.oe().key;if(0!==this.H(r,i))return!1}return!0},x_.prototype.it=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},x_.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},x_.prototype.copy=function(t){var e=new x_(this.H);return e.data=t,e},x_),P_=(D_.prototype.oe=function(){return this.ye.oe().key},D_.prototype.ce=function(){return this.ye.ce()},D_),R_=new I_(jy.H);function D_(t){this.ye=t}function x_(t){this.H=t,this.data=new I_(this.H)}var L_=new I_(jy.H);var M_=new I_(jy.H);var F_=new O_(jy.H);function j_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=F_,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var U_=new O_(ay);var V_=(nb.pe=function(t){return new nb(t.H)},nb.prototype.has=function(t){return null!=this.ge.get(t)},nb.prototype.get=function(t){return this.ge.get(t)},nb.prototype.first=function(){return this.Ve.Jt()},nb.prototype.last=function(){return this.Ve.Yt()},nb.prototype.et=function(){return this.Ve.et()},nb.prototype.indexOf=function(t){t=this.ge.get(t);return t?this.Ve.indexOf(t):-1},Object.defineProperty(nb.prototype,"size",{get:function(){return this.Ve.size},enumerable:!1,configurable:!0}),nb.prototype.forEach=function(n){this.Ve.Xt(function(t,e){return n(t),!1})},nb.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.ge.zt(t.key,t),e.Ve.zt(t,null))},nb.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.ge.remove(t),this.Ve.remove(e)):this},nb.prototype.isEqual=function(t){if(!(t instanceof nb))return!1;if(this.size!==t.size)return!1;for(var e=this.Ve.te(),n=t.Ve.te();e.ce();){var r=e.oe().key,i=n.oe().key;if(!r.isEqual(i))return!1}return!0},nb.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},nb.prototype.copy=function(t,e){var n=new nb;return n.H=this.H,n.ge=t,n.Ve=e,n},nb),q_=(eb.prototype.track=function(t){var e=t.doc.key,n=this.be.get(e);!n||0!==t.type&&3===n.type?this.be=this.be.zt(e,t):3===t.type&&1!==n.type?this.be=this.be.zt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.be=this.be.zt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.be=this.be.remove(e):1===t.type&&2===n.type?this.be=this.be.zt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.be=this.be.zt(e,{type:2,doc:t.doc}):ry()},eb.prototype.ve=function(){var n=[];return this.be.Xt(function(t,e){n.push(e)}),n},eb),B_=(tb.Ne=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new tb(t,e,V_.pe(e),i,n,r,!0,!1)},Object.defineProperty(tb.prototype,"hasPendingWrites",{get:function(){return!this.De.et()},enumerable:!1,configurable:!0}),tb.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ce===t.Ce&&this.De.isEqual(t.De)&&Em(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Se.isEqual(t.Se)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},tb),H_=(Z_.Le=function(t,e){var n=new Map;return n.set(t,W_.$e(t,e)),new Z_(xy.min(),n,U_,R_,j_())},Z_),W_=($_.$e=function(t,e){return new $_(hy.T,e,j_(),j_(),j_())},$_),z_=function(t,e,n,r){this.Ke=t,this.removedTargetIds=e,this.key=n,this.We=r},G_=function(t,e){this.targetId=t,this.je=e},K_=function(t,e,n,r){void 0===n&&(n=hy.T),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Q_=(Object.defineProperty(J_.prototype,"Be",{get:function(){return this.Je},enumerable:!1,configurable:!0}),Object.defineProperty(J_.prototype,"resumeToken",{get:function(){return this.He},enumerable:!1,configurable:!0}),Object.defineProperty(J_.prototype,"Xe",{get:function(){return 0!==this.Ge},enumerable:!1,configurable:!0}),Object.defineProperty(J_.prototype,"Ze",{get:function(){return this.Ye},enumerable:!1,configurable:!0}),J_.prototype.tn=function(t){0<t.l()&&(this.Ye=!0,this.He=t)},J_.prototype.en=function(){var n=j_(),r=j_(),i=j_();return this.ze.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:ry()}}),new W_(this.He,this.Je,n,r,i)},J_.prototype.nn=function(){this.Ye=!1,this.ze=ib()},J_.prototype.sn=function(t,e){this.Ye=!0,this.ze=this.ze.zt(t,e)},J_.prototype.rn=function(t){this.Ye=!0,this.ze=this.ze.remove(t)},J_.prototype.on=function(){this.Ge+=1},J_.prototype.cn=function(){--this.Ge},J_.prototype.an=function(){this.Ye=!0,this.Je=!0},J_),Y_=(X_.prototype.dn=function(t){for(var e=0,n=t.Ke;e<n.length;e++){var r=n[e];t.We instanceof Tg?this.wn(r,t.We):t.We instanceof Sg&&this.En(r,t.key,t.We)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.En(r,t.key,t.We)},X_.prototype.Tn=function(n){var r=this;this.In(n,function(t){var e=r.mn(t);switch(n.state){case 0:r.An(t)&&e.tn(n.resumeToken);break;case 1:e.cn(),e.Xe||e.nn(),e.tn(n.resumeToken);break;case 2:e.cn(),e.Xe||r.removeTarget(t);break;case 3:r.An(t)&&(e.an(),e.tn(n.resumeToken));break;case 4:r.An(t)&&(r.Rn(t),e.tn(n.resumeToken));break;default:ry()}})},X_.prototype.In=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.hn.forEach(function(t,e){r.An(e)&&n(e)})},X_.prototype.Pn=function(t){var e=t.targetId,n=t.je.count,t=this.yn(e);t&&(xg(t=t.target)?0===n?(t=new jy(t.path),this.En(e,t,new Sg(t,xy.min()))):iy(1===n):this.gn(e)!==n&&(this.Rn(e),this.fn=this.fn.add(e)))},X_.prototype.Vn=function(r){var i=this,o=new Map;this.hn.forEach(function(t,e){var n=i.yn(e);n&&(t.Be&&xg(n.target)&&(n=new jy(n.target.path),null!==i.ln.get(n)||i.pn(e,n)||i.En(e,n,new Sg(n,r))),t.Ze&&(o.set(e,t.en()),t.nn()))});var s=j_();this._n.forEach(function(t,e){var n=!0;e.Ae(function(t){t=i.yn(t);return!t||2===t.Ot||(n=!1)}),n&&(s=s.add(t))});var t=new H_(r,o,this.fn,this.ln,s);return this.ln=R_,this._n=rb(),this.fn=new O_(ay),t},X_.prototype.wn=function(t,e){var n;this.An(t)&&(n=this.pn(t,e.key)?2:0,this.mn(t).sn(e.key,n),this.ln=this.ln.zt(e.key,e),this._n=this._n.zt(e.key,this.bn(e.key).add(t)))},X_.prototype.En=function(t,e,n){var r;this.An(t)&&(r=this.mn(t),this.pn(t,e)?r.sn(e,1):r.rn(e),this._n=this._n.zt(e,this.bn(e).delete(t)),n&&(this.ln=this.ln.zt(e,n)))},X_.prototype.removeTarget=function(t){this.hn.delete(t)},X_.prototype.gn=function(t){var e=this.mn(t).en();return this.un.vn(t).size+e.qe.size-e.Qe.size},X_.prototype.on=function(t){this.mn(t).on()},X_.prototype.mn=function(t){var e=this.hn.get(t);return e||(e=new Q_,this.hn.set(t,e)),e},X_.prototype.bn=function(t){var e=this._n.get(t);return e||(e=new O_(ay),this._n=this._n.zt(t,e)),e},X_.prototype.An=function(t){var e=null!==this.yn(t);return e||Zv("WatchChangeAggregator","Detected inactive target",t),e},X_.prototype.yn=function(t){var e=this.hn.get(t);return e&&e.Xe?null:this.un.Sn(t)},X_.prototype.Rn=function(e){var n=this;this.hn.set(e,new Q_),this.un.vn(e).forEach(function(t){n.En(e,t,null)})},X_.prototype.pn=function(t,e){return this.un.vn(t).has(e)},X_);function X_(t){this.un=t,this.hn=new Map,this.ln=R_,this._n=rb(),this.fn=new O_(ay)}function J_(){this.Ge=0,this.ze=ib(),this.He=hy.T,this.Je=!1,this.Ye=!0}function $_(t,e,n,r,i){this.resumeToken=t,this.Be=e,this.qe=n,this.Ue=r,this.Qe=i}function Z_(t,e,n,r,i){this.kt=t,this.Fe=e,this.Oe=n,this.ke=r,this.Me=i}function tb(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Se=n,this.docChanges=r,this.De=i,this.fromCache=o,this.Ce=s,this.xe=a}function eb(){this.be=new I_(jy.H)}function nb(n){this.H=n?function(t,e){return n(t,e)||jy.H(t.key,e.key)}:function(t,e){return jy.H(t.key,e.key)},this.ge=L_,this.Ve=new I_(this.H)}function rb(){return new I_(jy.H)}function ib(){return new I_(jy.H)}var ob={asc:"ASCENDING",desc:"DESCENDING"},sb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ab=function(t,e){this.t=t,this.Bt=e};function ub(t,e){return t.Bt?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function cb(t,e){return t.Bt?e.toBase64():e.toUint8Array()}function hb(t){return iy(!!t),xy.K((t=Jy(t),new Dy(t.seconds,t.nanos)))}function lb(t,e){return new Ly(["projects",t.projectId,"databases",t.database]).child("documents").child(e).rt()}function fb(t){t=Ly.ot(t);return iy(Pb(t)),t}function pb(t,e){return lb(t.t,e.path)}function db(t,e){e=fb(e);if(e.get(1)!==t.t.projectId)throw new dy(py.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new dy(py.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new jy(mb(e))}function vb(t,e){return lb(t.t,e)}function yb(t){t=fb(t);return 4===t.length?Ly.ct():mb(t)}function gb(t){return new Ly(["projects",t.t.projectId,"databases",t.t.database]).rt()}function mb(t){return iy(4<t.length&&"documents"===t.get(4)),t.Y(5)}function _b(t,e,n){return{name:pb(t,e),fields:n.proto.mapValue.fields}}function bb(t,e,n){var r=db(t,e.name),t=hb(e.updateTime),e=new gg({mapValue:{fields:e.fields}});return new Tg(r,t,e,{hasCommittedMutations:!!n})}function wb(t,e){var n,r,i;if(e instanceof o_)n={update:_b(t,e.key,e.value)};else if(e instanceof g_)n={delete:pb(t,e.key)};else if(e instanceof s_)n={update:_b(t,e.key,e.data),updateMask:(i=e.Gt,r=[],i.fields.forEach(function(t){return r.push(t.rt())}),{fieldPaths:r})};else{if(!(e instanceof m_))return ry();n={verify:pb(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Lm)return{fieldPath:t.field.rt(),setToServerValue:"REQUEST_TIME"};if(e instanceof Mm)return{fieldPath:t.field.rt(),appendMissingElements:{values:e.elements}};if(e instanceof qm)return{fieldPath:t.field.rt(),removeAllFromArray:{values:e.elements}};if(e instanceof zm)return{fieldPath:t.field.rt(),increment:e.Ut};throw ry()})),e.jt.Wt||(n.currentDocument=void 0!==(i=e.jt).updateTime?{updateTime:(e=t,t=i.updateTime,ub(e,t.j()))}:void 0!==i.exists?{exists:i.exists}:ry()),n}function Eb(e,t){var n=t.currentDocument?void 0!==(s=t.currentDocument).updateTime?Jm.updateTime(hb(s.updateTime)):void 0!==s.exists?Jm.exists(s.exists):Jm.Kt():Jm.Kt(),r=t.updateTransforms?t.updateTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(iy("REQUEST_TIME"===e.setToServerValue),r=new Lm):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new Mm(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new qm(n)):"increment"in e?r=new zm(t,e.increment):ry();e=Fy.lt(e.fieldPath);return new Xm(e,r)}(e,t)}):[];if(t.update){t.update.name;var i=db(e,t.update.name),o=new gg({mapValue:{fields:t.update.fields}});if(t.updateMask){var s=(s=t.updateMask.fieldPaths||[],new Qy(s.map(function(t){return Fy.lt(t)})));return new s_(i,o,s,n,r)}return new o_(i,o,n,r)}if(t.delete){r=db(e,t.delete);return new g_(r,n)}if(t.verify){t=db(e,t.verify);return new m_(t,n)}return ry()}function Ib(t,e){return{documents:[vb(t,e.path)]}}function Tb(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=vb(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=vb(t,r.X()),n.structuredQuery.from=[{collectionId:r.tt()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(vg(t.value))return{unaryFilter:{field:Ab(t.field),op:"IS_NAN"}};if(dg(t.value))return{unaryFilter:{field:Ab(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(vg(t.value))return{unaryFilter:{field:Ab(t.field),op:"IS_NOT_NAN"}};if(dg(t.value))return{unaryFilter:{field:Ab(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ab(t.field),op:(e=t.op,sb[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:Ab((t=t).field),direction:(t=t.dir,ob[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.Bt||ng(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=Cb(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Cb(e.endAt)),n}function Sb(t){var e=yb(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(iy(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[Ob(t)]:void 0!==t.fieldFilter?[(n=t,Mg.create(kb(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ry()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):ry():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new um(kb((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=ng(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=Nb(n.startAt));var a=null;return n.endAt&&(a=Nb(n.endAt)),fm(e,i,t,o,r,"F",s,a)}function Cb(t){return{before:t.before,values:t.position}}function Nb(t){var e=!!t.before,t=t.values||[];return new nm(t,e)}function Ab(t){return{fieldPath:t.rt()}}function kb(t){return Fy.lt(t.fieldPath)}function Ob(t){switch(t.unaryFilter.op){case"IS_NAN":var e=kb(t.unaryFilter.field);return Mg.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=kb(t.unaryFilter.field);return Mg.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=kb(t.unaryFilter.field);return Mg.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=kb(t.unaryFilter.field);return Mg.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ry()}}function Pb(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}var Rb,Db=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})},xb=(Hb.prototype.catch=function(t){return this.next(void 0,t)},Hb.prototype.next=function(r,i){var o=this;return this.Nn&&ry(),this.Nn=!0,this.xn?this.error?this.Fn(i,this.error):this.On(r,this.result):new Hb(function(e,n){o.Dn=function(t){o.On(r,t).next(e,n)},o.Cn=function(t){o.Fn(i,t).next(e,n)}})},Hb.prototype.kn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Hb.prototype.Mn=function(t){try{var e=t();return e instanceof Hb?e:Hb.resolve(e)}catch(t){return Hb.reject(t)}},Hb.prototype.On=function(t,e){return t?this.Mn(function(){return t(e)}):Hb.resolve(e)},Hb.prototype.Fn=function(t,e){return t?this.Mn(function(){return t(e)}):Hb.reject(e)},Hb.resolve=function(n){return new Hb(function(t,e){t(n)})},Hb.reject=function(n){return new Hb(function(t,e){e(n)})},Hb.Ln=function(t){return new Hb(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Hb.$n=function(t){for(var n=Hb.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?Hb.resolve(t):e()})}(r[e]);return n},Hb.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Ln(i)},Hb),Lb=(Bb.open=function(t,e,n,r){try{return new Bb(e,t.transaction(r,n))}catch(t){throw new jb(e,t)}},Object.defineProperty(Bb.prototype,"qn",{get:function(){return this.Bn.promise},enumerable:!1,configurable:!0}),Bb.prototype.abort=function(t){t&&this.Bn.reject(t),this.aborted||(Zv("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Bb.prototype.store=function(t){t=this.transaction.objectStore(t);return new zb(t)},Bb),Mb=(qb.delete=function(t){return Zv("SimpleDb","Removing database:",t),Kb(window.indexedDB.deleteDatabase(t)).kn()},qb.Kn=function(){if("undefined"==typeof indexedDB)return!1;if(qb.Wn())return!0;var t=Fo(),e=qb.Qn(t),n=0<e&&e<10,e=qb.jn(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},qb.Wn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Gn)},qb.zn=function(t,e){return t.store(e)},qb.Qn=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},qb.jn=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},qb.prototype.Hn=function(o){return wo(this,void 0,void 0,function(){var e,i=this;return Eo(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Zv("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new jb(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new dy(py.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new jb(o,t))},r.onupgradeneeded=function(t){Zv("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Un.Jn(e,r.transaction,t.oldVersion,i.version).next(function(){Zv("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Yn&&(this.db.onversionchange=function(t){return i.Yn(t)}),this.db)]}})})},qb.prototype.Xn=function(e){this.Yn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},qb.prototype.runTransaction=function(a,n,u,c){return wo(this,void 0,void 0,function(){var i,o,s,e;return Eo(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Hn(a)];case 2:return s.db=t.sent(),e=Lb.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),xb.reject(t)}).kn(),r={},n.catch(function(){}),[4,e.qn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Zv("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},qb.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},qb),Fb=(Object.defineProperty(Vb.prototype,"xn",{get:function(){return this.ts},enumerable:!1,configurable:!0}),Object.defineProperty(Vb.prototype,"ns",{get:function(){return this.es},enumerable:!1,configurable:!0}),Object.defineProperty(Vb.prototype,"cursor",{set:function(t){this.Zn=t},enumerable:!1,configurable:!0}),Vb.prototype.done=function(){this.ts=!0},Vb.prototype.ss=function(t){this.es=t},Vb.prototype.delete=function(){return Kb(this.Zn.delete())},Vb),jb=(_o(Ub,Rb=dy),Ub);function Ub(t,e){var n=this;return(n=Rb.call(this,py.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function Vb(t){this.Zn=t,this.ts=!1,this.es=null}function qb(t,e,n){this.name=t,this.version=e,this.Un=n,12.2===qb.Qn(Fo())&&ty("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Bb(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Bn=new Db,this.transaction.oncomplete=function(){n.Bn.resolve()},this.transaction.onabort=function(){t.error?n.Bn.reject(new jb(e,t.error)):n.Bn.resolve()},this.transaction.onerror=function(t){t=Yb(t.target.error);n.Bn.reject(new jb(e,t))}}function Hb(t){var e=this;this.Dn=null,this.Cn=null,this.result=void 0,this.error=void 0,this.xn=!1,this.Nn=!1,t(function(t){e.xn=!0,e.result=t,e.Dn&&e.Dn(t)},function(t){e.xn=!0,e.error=t,e.Cn&&e.Cn(t)})}function Wb(t){return"IndexedDbTransactionError"===t.name}var zb=(Gb.prototype.put=function(t,e){t=void 0!==e?(Zv("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Zv("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return Kb(t)},Gb.prototype.add=function(t){return Zv("SimpleDb","ADD",this.store.name,t,t),Kb(this.store.add(t))},Gb.prototype.get=function(e){var n=this;return Kb(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Zv("SimpleDb","GET",n.store.name,e,t),t})},Gb.prototype.delete=function(t){return Zv("SimpleDb","DELETE",this.store.name,t),Kb(this.store.delete(t))},Gb.prototype.count=function(){return Zv("SimpleDb","COUNT",this.store.name),Kb(this.store.count())},Gb.prototype.rs=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.os(e,function(t,e){n.push(e)}).next(function(){return n})},Gb.prototype.cs=function(t,e){Zv("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.us=!1;e=this.cursor(e);return this.os(e,function(t,e,n){return n.delete()})},Gb.prototype.hs=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.os(n,e)},Gb.prototype.ls=function(r){var t=this.cursor({});return new xb(function(n,e){t.onerror=function(t){t=Yb(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},Gb.prototype.os=function(t,i){var o=[];return new xb(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new Fb(n),(t=i(n.primaryKey,n.value,e))instanceof xb&&(t=t.catch(function(t){return e.done(),xb.reject(t)}),o.push(t)),e.xn?r():null===e.ns?n.continue():n.continue(e.ns)):r()}}).next(function(){return xb.Ln(o)})},Gb.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},Gb.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.us?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},Gb);function Gb(t){this.store=t}function Kb(t){return new xb(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=Yb(t.target.error);n(t)}})}var Qb=!1;function Yb(t){var e=Mb.Qn(Fo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new dy("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Qb||(Qb=!0,setTimeout(function(){throw n},0)),n}}return t}var Xb=(Jb.Ts=function(t,e,n,r,i){i=new Jb(t,e,Date.now()+n,r,i);return i.start(n),i},Jb.prototype.start=function(t){var e=this;this.Is=setTimeout(function(){return e.As()},t)},Jb.prototype.Rs=function(){return this.As()},Jb.prototype.cancel=function(t){null!==this.Is&&(this.clearTimeout(),this.Es.reject(new dy(py.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Jb.prototype.As=function(){var e=this;this._s.Ps(function(){return null!==e.Is?(e.clearTimeout(),e.op().then(function(t){return e.Es.resolve(t)})):Promise.resolve()})},Jb.prototype.clearTimeout=function(){null!==this.Is&&(this.ws(this),clearTimeout(this.Is),this.Is=null)},Jb);function Jb(t,e,n,r,i){this._s=t,this.fs=e,this.ds=n,this.op=r,this.ws=i,this.Es=new Db,this.then=this.Es.promise.then.bind(this.Es.promise),this.Es.promise.catch(function(t){})}function $b(t,e){if(ty("AsyncQueue",e+": "+t),Wb(t))return new dy(py.UNAVAILABLE,e+": "+t);throw t}var Zb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kn=(tw.prototype.gs=function(t){this.ys.push(t)},tw.prototype.Vs=function(){this.ys.forEach(function(t){return t()})},tw);function tw(){this.ys=[]}function ew(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=nw(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return nw(e)}function nw(t){return t+""}function rw(t){var e=t.length;if(iy(2<=e),2===e)return iy(""===t.charAt(0)&&""===t.charAt(1)),Ly.ct();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&ry(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:ry()}o=s+2}return new Ly(r)}function iw(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var ow=function(t,e){this.seconds=t,this.nanoseconds=e};iw.store="owner",iw.key="owner";function sw(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}sw.store="mutationQueues",sw.keyPath="userId";function aw(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}aw.store="mutations",aw.keyPath="batchId",aw.userMutationsIndex="userMutationsIndex",aw.userMutationsKeyPath=["userId","batchId"];var uw=(cw.prefixForUser=function(t){return[t]},cw.prefixForPath=function(t,e){return[t,ew(e)]},cw.key=function(t,e,n){return[t,ew(e),n]},cw);function cw(){}uw.store="documentMutations",uw.PLACEHOLDER=new uw;function hw(t,e){this.path=t,this.readTime=e}function lw(t,e){this.path=t,this.version=e}var fw=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};fw.store="remoteDocuments",fw.readTimeIndex="readTimeIndex",fw.readTimeIndexPath="readTime",fw.collectionReadTimeIndex="collectionReadTimeIndex",fw.collectionReadTimeIndexPath=["parentPath","readTime"];function pw(t){this.byteSize=t}pw.store="remoteDocumentGlobal",pw.key="remoteDocumentGlobalKey";function dw(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}dw.store="targets",dw.keyPath="targetId",dw.queryTargetsIndexName="queryTargetsIndex",dw.queryTargetsKeyPath=["canonicalId","targetId"];var vw=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};vw.store="targetDocuments",vw.keyPath=["targetId","path"],vw.documentTargetsIndex="documentTargetsIndex",vw.documentTargetsKeyPath=["path","targetId"];function yw(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}yw.key="targetGlobalKey",yw.store="targetGlobal";function gw(t,e){this.collectionId=t,this.parent=e}gw.store="collectionParents",gw.keyPath=["collectionId","parent"];function mw(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}mw.store="clientMetadata",mw.keyPath="clientId";function _w(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}_w.store="bundles",_w.keyPath="bundleId";function bw(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}bw.store="namedQueries",bw.keyPath="name";var ww,Ew=Co(Co(Co(Co([sw.store,aw.store,uw.store,fw.store,dw.store,iw.store,yw.store,vw.store],[mw.store]),[pw.store]),[gw.store]),[_w.store,bw.store]),Iw=(_o(Tw,ww=Kn),Tw);function Tw(t,e){var n=this;return(n=ww.call(this)||this).ps=t,n.bs=e,n}function Sw(t,e){return Mb.zn(t.ps,e)}var Cw=(Ow.prototype.Ss=function(t,e,n){for(var r,i,o,s,a,u,c=n.Ds,h=0;h<this.mutations.length;h++){var l=this.mutations[h];l.key.isEqual(t)&&(r=l,i=e,o=c[h],l=u=a=s=void 0,e=r instanceof o_?(a=o,l=(s=r).value,a.transformResults&&(u=h_(s.fieldTransforms,i,a.transformResults),l=f_(s.fieldTransforms,l,u)),new Tg(s.key,a.version,l,{hasCommittedMutations:!0})):r instanceof s_?function(t,e,n){if(!Zm(t.jt,e))return new Cg(t.key,n.version);e=c_(t,e,n.transformResults?h_(t.fieldTransforms,e,n.transformResults):[]);return new Tg(t.key,n.version,e,{hasCommittedMutations:!0})}(r,i,o):new Sg(r.key,o.version,{hasCommittedMutations:!0}))}return e},Ow.prototype.Cs=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(i=r[n]).key.isEqual(t)&&(e=t_(i,e,this.vs));for(var i,o=0,s=this.mutations;o<s.length;o++){(i=s[o]).key.isEqual(t)&&(e=t_(i,e,this.vs))}return e},Ow.prototype.xs=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Cs(t.key,n.get(t.key));e&&(i=i.zt(t.key,e))}),i},Ow.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},j_())},Ow.prototype.isEqual=function(t){return this.batchId===t.batchId&&uy(this.mutations,t.mutations,e_)&&uy(this.baseMutations,t.baseMutations,e_)},Ow),Nw=(kw.from=function(t,e,n){iy(t.mutations.length===n.length);for(var r=M_,i=t.mutations,o=0;o<i.length;o++)r=r.zt(i[o].key,n[o].version);return new kw(t,e,n,r)},kw),Aw=function(t){this.Os=t};function kw(t,e,n,r){this.batch=t,this.Ns=e,this.Ds=n,this.Fs=r}function Ow(t,e,n,r){this.batchId=t,this.vs=e,this.baseMutations=n,this.mutations=r}function Pw(t,e){if(e.document)return bb(t.Os,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=jy.Et(e.noDocument.path),r=Mw(e.noDocument.readTime);return new Sg(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){n=jy.Et(e.unknownDocument.path),r=Mw(e.unknownDocument.version);return new Cg(n,r)}return ry()}function Rw(t,e,n){var r=Dw(n),n=e.key.path.X().it();if(e instanceof Tg){var i={name:pb(o=t.Os,(s=e).key),fields:s.bt().mapValue.fields,updateTime:ub(o,s.version.j())},o=e.hasCommittedMutations;return new fw(null,null,i,o,r,n)}if(e instanceof Sg){var s=e.key.path.it(),i=Lw(e.version),o=e.hasCommittedMutations;return new fw(null,new hw(s,i),null,o,r,n)}if(e instanceof Cg){o=e.key.path.it(),e=Lw(e.version);return new fw(new lw(o,e),null,null,!0,r,n)}return ry()}function Dw(t){t=t.j();return[t.seconds,t.nanoseconds]}function xw(t){t=new Dy(t[0],t[1]);return xy.K(t)}function Lw(t){t=t.j();return new ow(t.seconds,t.nanoseconds)}function Mw(t){t=new Dy(t.seconds,t.nanoseconds);return xy.K(t)}function Fw(e,t){for(var n=(t.baseMutations||[]).map(function(t){return Eb(e.Os,t)}),r=0;r<t.mutations.length-1;++r){var i,o=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i=t.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var s=t.mutations.map(function(t){return Eb(e.Os,t)}),a=Dy.fromMillis(t.localWriteTimeMs);return new Cw(t.batchId,a,n,s)}function jw(t){var e=Mw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Mw(t.lastLimboFreeSnapshotVersion):xy.min(),r=void 0!==t.query.documents?(iy(1===(r=t.query).documents.length),bm(pm(yb(r.documents[0])))):bm(Sb(t.query));return new Nm(r,t.targetId,0,t.lastListenSequenceNumber,e,n,hy.fromBase64String(t.resumeToken))}function Uw(t,e){var n=Lw(e.kt),r=Lw(e.lastLimboFreeSnapshotVersion),i=(xg(e.target)?Ib:Tb)(t.Os,e.target),t=e.resumeToken.toBase64();return new dw(e.targetId,Rg(e.target),n,t,e.sequenceNumber,r,i)}function Vw(t){var e=Sb({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?wm(e,e.limit,"L"):e}var qw=(Bw.prototype.ks=function(t,e){return Hw(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:Mw(t.createTime),version:t.version}})},Bw.prototype.Ms=function(t,e){return Hw(t).put({bundleId:(e=e).id,createTime:Lw(hb(e.createTime)),version:e.version})},Bw.prototype.Ls=function(t,e){return Ww(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:Vw(t.bundledQuery),readTime:Mw(t.readTime)}})},Bw.prototype.$s=function(t,e){return Ww(t).put({name:(e=e).name,readTime:Lw(hb(e.readTime)),bundledQuery:e.bundledQuery})},Bw);function Bw(){}function Hw(t){return Sw(t,_w.store)}function Ww(t){return Sw(t,bw.store)}var zw=(Xw.prototype.qs=function(t,e){return this.Bs.add(e),xb.resolve()},Xw.prototype.Us=function(t,e){return xb.resolve(this.Bs.getEntries(e))},Xw),Gw=(Yw.prototype.add=function(t){var e=t.tt(),n=t.X(),r=this.index[e]||new O_(Ly.H),t=!r.has(n);return this.index[e]=r.add(n),t},Yw.prototype.has=function(t){var e=t.tt(),t=t.X(),e=this.index[e];return e&&e.has(t)},Yw.prototype.getEntries=function(t){return(this.index[t]||new O_(Ly.H)).it()},Yw),Kw=(Qw.prototype.qs=function(t,e){var n=this;if(this.Qs.has(e))return xb.resolve();var r=e.tt(),i=e.X();t.gs(function(){n.Qs.add(e)});i={collectionId:r,parent:ew(i)};return Jw(t).put(i)},Qw.prototype.Us=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[cy(i),""],!1,!0);return Jw(t).rs(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(rw(r.parent))}return o})},Qw);function Qw(){this.Qs=new Gw}function Yw(){this.index={}}function Xw(){this.Bs=new Gw}function Jw(t){return Sw(t,gw.store)}var $w={Ks:!1,Ws:0,js:0,Gs:0},Zw=(tE.Ys=function(t){return new tE(t,tE.Xs,tE.Zs)},tE);function tE(t,e,n){this.zs=t,this.Hs=e,this.Js=n}function eE(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){if(e.code!==py.FAILED_PRECONDITION||e.message!==Zb)throw e;return Zv("LocalStore","Unexpectedly lost primary lease"),[2]})})}Zw.Xs=10,Zw.Zs=1e3,Zw.ti=new Zw(41943040,Zw.Xs,Zw.Zs),Zw.ei=new Zw(-1,0,0);var nE=(iE.prototype.get=function(t){var e=this.ni(t),e=this.ii[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.si(o,t))return i}},iE.prototype.has=function(t){return void 0!==this.get(t)},iE.prototype.set=function(t,e){var n=this.ni(t),r=this.ii[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.si(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.ii[n]=[[t,e]]},iE.prototype.delete=function(t){var e=this.ni(t),n=this.ii[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.si(n[r][0],t))return 1===n.length?delete this.ii[e]:n.splice(r,1),!0;return!1},iE.prototype.forEach=function(s){Gy(this.ii,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},iE.prototype.et=function(){return Ky(this.ii)},iE),vt=(rE.prototype.ci=function(t){t=this.ri.get(t);return t?t.readTime:xy.min()},rE.prototype.ai=function(t,e){this.ui(),this.ri.set(t.key,{hi:t,readTime:e})},rE.prototype.li=function(t,e){void 0===e&&(e=null),this.ui(),this.ri.set(t,{hi:null,readTime:e})},rE.prototype._i=function(t,e){this.ui();var n=this.ri.get(e);return void 0!==n?xb.resolve(n.hi):this.fi(t,e)},rE.prototype.getEntries=function(t,e){return this.di(t,e)},rE.prototype.apply=function(t){return this.ui(),this.oi=!0,this.wi(t)},rE.prototype.ui=function(){},rE);function rE(){this.ri=new nE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.oi=!1}function iE(t,e){this.ni=t,this.si=e,this.ii={}}function oE(t,e,n){var r=t.store(aw.store),i=t.store(uw.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.hs({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){iy(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=uw.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return xb.Ln(o).next(function(){return a})}function sE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ry();e=t.noDocument}return JSON.stringify(e).length}var aE=(uE.mi=function(t,e,n,r){return iy(""!==t.uid),new uE(t.m()?t.uid:"",e,n,r)},uE.prototype.Ai=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return hE(t).hs({index:aw.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},uE.prototype.Ri=function(d,v,y,g){var m=this,_=lE(d),b=hE(d);return b.add({}).next(function(t){iy("number"==typeof t);for(var e,n,r,i,o,s=new Cw(t,v,y,g),a=(e=m.Qt,n=m.userId,i=(r=s).baseMutations.map(function(t){return wb(e.Os,t)}),o=r.mutations.map(function(t){return wb(e.Os,t)}),new aw(n,r.batchId,r.vs.toMillis(),i,o)),u=[],c=new O_(function(t,e){return ay(t.rt(),e.rt())}),h=0,l=g;h<l.length;h++){var f=l[h],p=uw.key(m.userId,f.key.path,t),c=c.add(f.key.path.X());u.push(b.put(a)),u.push(_.put(p,uw.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Ei.qs(d,t))}),d.gs(function(){m.Ii[t]=s.keys()}),xb.Ln(u).next(function(){return s})})},uE.prototype.Pi=function(t,e){var n=this;return hE(t).get(e).next(function(t){return t?(iy(t.userId===n.userId),Fw(n.Qt,t)):null})},uE.prototype.yi=function(t,e){var n=this;return this.Ii[e]?xb.resolve(this.Ii[e]):this.Pi(t,e).next(function(t){if(t){t=t.keys();return n.Ii[e]=t}return null})},uE.prototype.gi=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return hE(t).hs({index:aw.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(iy(e.batchId>=i),o=Fw(r.Qt,e)),n.done()}).next(function(){return o})},uE.prototype.Vi=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return hE(t).hs({index:aw.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},uE.prototype.pi=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return hE(t).rs(aw.userMutationsIndex,n).next(function(t){return t.map(function(t){return Fw(e.Qt,t)})})},uE.prototype.bi=function(o,s){var a=this,t=uw.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return lE(o).hs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=rw(i);if(r===a.userId&&s.path.isEqual(i))return hE(o).get(t).next(function(t){if(!t)throw ry();iy(t.userId===a.userId),u.push(Fw(a.Qt,t))});n.done()}).next(function(){return u})},uE.prototype.vi=function(e,t){var s=this,a=new O_(ay),n=[];return t.forEach(function(o){var t=uw.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=lE(e).hs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=rw(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),xb.Ln(n).next(function(){return s.Si(e,a)})},uE.prototype.Di=function(t,e){var o=this,s=e.path,a=s.length+1,e=uw.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new O_(ay);return lE(t).hs({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=rw(i);r===o.userId&&s.nt(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Si(t,u)})},uE.prototype.Si=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(hE(e).get(t).next(function(t){if(null===t)throw ry();iy(t.userId===n.userId),r.push(Fw(n.Qt,t))}))}),xb.Ln(i).next(function(){return r})},uE.prototype.Ci=function(e,n){var r=this;return oE(e.ps,this.userId,n).next(function(t){return e.gs(function(){r.xi(n.batchId)}),xb.forEach(t,function(t){return r.Ti.Ni(e,t)})})},uE.prototype.xi=function(t){delete this.Ii[t]},uE.prototype.Fi=function(e){var i=this;return this.Ai(e).next(function(t){if(!t)return xb.resolve();var t=IDBKeyRange.lowerBound(uw.prefixForUser(i.userId)),r=[];return lE(e).hs({range:t},function(t,e,n){t[0]===i.userId?(t=rw(t[1]),r.push(t)):n.done()}).next(function(){iy(0===r.length)})})},uE.prototype.Oi=function(t,e){return cE(t,this.userId,e)},uE.prototype.ki=function(t){var e=this;return fE(t).get(this.userId).next(function(t){return t||new sw(e.userId,-1,"")})},uE);function uE(t,e,n,r){this.userId=t,this.Qt=e,this.Ei=n,this.Ti=r,this.Ii={}}function cE(t,o,e){var e=uw.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return lE(t).hs({range:e,us:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function hE(t){return Sw(t,aw.store)}function lE(t){return Sw(t,uw.store)}function fE(t){return Sw(t,sw.store)}var pE=(yE.prototype.next=function(){return this.Mi+=2,this.Mi},yE.Li=function(){return new yE(0)},yE.$i=function(){return new yE(-1)},yE),dE=(vE.prototype.Bi=function(n){var r=this;return this.qi(n).next(function(t){var e=new pE(t.highestTargetId);return t.highestTargetId=e.next(),r.Ui(n,t).next(function(){return t.highestTargetId})})},vE.prototype.Qi=function(t){return this.qi(t).next(function(t){return xy.K(new Dy(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},vE.prototype.Ki=function(t){return this.qi(t).next(function(t){return t.highestListenSequenceNumber})},vE.prototype.Wi=function(e,n,r){var i=this;return this.qi(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.j()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Ui(e,t)})},vE.prototype.ji=function(e,n){var r=this;return this.Gi(e,n).next(function(){return r.qi(e).next(function(t){return t.targetCount+=1,r.zi(n,t),r.Ui(e,t)})})},vE.prototype.Hi=function(t,e){return this.Gi(t,e)},vE.prototype.Ji=function(e,t){var n=this;return this.Yi(e,t.targetId).next(function(){return gE(e).delete(t.targetId)}).next(function(){return n.qi(e)}).next(function(t){return iy(0<t.targetCount),--t.targetCount,n.Ui(e,t)})},vE.prototype.Xi=function(n,r,i){var o=this,s=0,a=[];return gE(n).hs(function(t,e){e=jw(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.Ji(n,e)))}).next(function(){return xb.Ln(a)}).next(function(){return s})},vE.prototype.In=function(t,n){return gE(t).hs(function(t,e){e=jw(e);n(e)})},vE.prototype.qi=function(t){return mE(t).get(yw.key).next(function(t){return iy(null!==t),t})},vE.prototype.Ui=function(t,e){return mE(t).put(yw.key,e)},vE.prototype.Gi=function(t,e){return gE(t).put(Uw(this.Qt,e))},vE.prototype.zi=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},vE.prototype.Zi=function(t){return this.qi(t).next(function(t){return t.targetCount})},vE.prototype.tr=function(t,r){var e=Rg(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return gE(t).hs({range:e,index:dw.queryTargetsIndexName},function(t,e,n){e=jw(e);Dg(r,e.target)&&(i=e,n.done())}).next(function(){return i})},vE.prototype.er=function(n,t,r){var i=this,o=[],s=_E(n);return t.forEach(function(t){var e=ew(t.path);o.push(s.put(new vw(r,e))),o.push(i.Ti.nr(n,r,t))}),xb.Ln(o)},vE.prototype.sr=function(n,t,r){var i=this,o=_E(n);return xb.forEach(t,function(t){var e=ew(t.path);return xb.Ln([o.delete([r,e]),i.Ti.ir(n,r,t)])})},vE.prototype.Yi=function(t,e){t=_E(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},vE.prototype.rr=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=_E(t),r=j_();return t.hs({range:e,us:!0},function(t,e,n){t=rw(t[1]),t=new jy(t);r=r.add(t)}).next(function(){return r})},vE.prototype.Oi=function(t,e){var e=ew(e.path),e=IDBKeyRange.bound([e],[cy(e)],!1,!0),i=0;return _E(t).hs({index:vw.documentTargetsIndex,us:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},vE.prototype.Sn=function(t,e){return gE(t).get(e).next(function(t){return t?jw(t):null})},vE);function vE(t,e){this.Ti=t,this.Qt=e}function yE(t){this.Mi=t}function gE(t){return Sw(t,dw.store)}function mE(t){return Sw(t,yw.store)}function _E(t){return Sw(t,vw.store)}function bE(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=ay(n,t);return 0===t?ay(r,e):t}var wE=(AE.prototype.ur=function(){return++this.ar},AE.prototype.hr=function(t){var e=[t,this.ur()];this.buffer.size<this.cr?this.buffer=this.buffer.add(e):bE(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(AE.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),AE),EE=(NE.prototype.start=function(t){-1!==this.lr.params.zs&&this.wr(t)},NE.prototype.stop=function(){this.dr&&(this.dr.cancel(),this.dr=null)},Object.defineProperty(NE.prototype,"Er",{get:function(){return null!==this.dr},enumerable:!1,configurable:!0}),NE.prototype.wr=function(n){var t=this,e=this._r?3e5:6e4;Zv("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.dr=this._s.Tr("lru_garbage_collection",e,function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:this.dr=null,this._r=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.Ir(this.lr)];case 2:return t.sent(),[3,7];case 3:return Wb(e=t.sent())?(Zv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,eE(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.wr(n)];case 8:return t.sent(),[2]}})})})},NE),IE=(CE.prototype.Ar=function(t,e){return this.mr.Rr(t).next(function(t){return Math.floor(e/100*t)})},CE.prototype.Pr=function(t,e){var n=this;if(0===e)return xb.resolve(Sy.q);var r=new wE(e);return this.mr.In(t,function(t){return r.hr(t.sequenceNumber)}).next(function(){return n.mr.yr(t,function(t){return r.hr(t)})}).next(function(){return r.maxValue})},CE.prototype.Xi=function(t,e,n){return this.mr.Xi(t,e,n)},CE.prototype.gr=function(t,e){return this.mr.gr(t,e)},CE.prototype.Vr=function(e,n){var r=this;return-1===this.params.zs?(Zv("LruGarbageCollector","Garbage collection skipped; disabled"),xb.resolve($w)):this.pr(e).next(function(t){return t<r.params.zs?(Zv("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.zs),$w):r.br(e,n)})},CE.prototype.pr=function(t){return this.mr.pr(t)},CE.prototype.br=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Ar(e,this.params.Hs).next(function(t){return i=t>h.params.Js?(Zv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.Js+" from "+t),h.params.Js):t,s=Date.now(),h.Pr(e,i)}).next(function(t){return r=t,a=Date.now(),h.Xi(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.gr(e,r)}).next(function(t){return c=Date.now(),$v()<=ks.DEBUG&&Zv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),xb.resolve({Ks:!0,Ws:i,js:o,Gs:t})})},CE),TE=(SE.prototype.Rr=function(t){var n=this.vr(t);return this.db.Sr().Zi(t).next(function(e){return n.next(function(t){return e+t})})},SE.prototype.vr=function(t){var e=0;return this.yr(t,function(t){e++}).next(function(){return e})},SE.prototype.In=function(t,e){return this.db.Sr().In(t,e)},SE.prototype.yr=function(t,n){return this.Dr(t,function(t,e){return n(e)})},SE.prototype.nr=function(t,e,n){return kE(t,n)},SE.prototype.ir=function(t,e,n){return kE(t,n)},SE.prototype.Xi=function(t,e,n){return this.db.Sr().Xi(t,e,n)},SE.prototype.Ni=kE,SE.prototype.Cr=function(t,e){return r=e,i=!1,fE(n=t).ls(function(t){return cE(n,t,r).next(function(t){return t&&(i=!0),xb.resolve(!t)})}).next(function(){return i});var n,r,i},SE.prototype.gr=function(n,r){var i=this,o=this.db.Fr().Nr(),s=[],a=0;return this.Dr(n,function(e,t){t<=r&&(t=i.Cr(n,e).next(function(t){if(!t)return a++,o._i(n,e).next(function(){return o.li(e),_E(n).delete([0,ew(e.path)])})}),s.push(t))}).next(function(){return xb.Ln(s)}).next(function(){return o.apply(n)}).next(function(){return a})},SE.prototype.removeTarget=function(t,e){e=e.Mt(t.bs);return this.db.Sr().Hi(t,e)},SE.prototype.Or=kE,SE.prototype.Dr=function(t,r){var i,t=_E(t),o=Sy.q;return t.hs({index:vw.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==Sy.q&&r(new jy(rw(i)),o),o=e,i=t):o=Sy.q}).next(function(){o!==Sy.q&&r(new jy(rw(i)),o)})},SE.prototype.pr=function(t){return this.db.Fr().kr(t)},SE);function SE(t,e){this.db=t,this.lr=new IE(this,e)}function CE(t,e){this.mr=t,this.params=e}function NE(t,e){this.lr=t,this._s=e,this._r=!1,this.dr=null}function AE(t){this.cr=t,this.buffer=new O_(bE),this.ar=0}function kE(t,e){return _E(t).put((t=t.bs,new vw(0,ew(e.path),t)))}var OE,PE=(xE.prototype.ai=function(t,e,n){return ME(t).put(FE(e),n)},xE.prototype.li=function(t,e){t=ME(t),e=FE(e);return t.delete(e)},xE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Mr(e,t)})},xE.prototype._i=function(t,e){var n=this;return ME(t).get(FE(e)).next(function(t){return n.Lr(t)})},xE.prototype.$r=function(t,e){var n=this;return ME(t).get(FE(e)).next(function(t){var e=n.Lr(t);return e?{hi:e,size:sE(t)}:null})},xE.prototype.getEntries=function(t,e){var n=this,r=R_;return this.Br(t,e,function(t,e){e=n.Lr(e);r=r.zt(t,e)}).next(function(){return r})},xE.prototype.qr=function(t,e){var r=this,i=R_,o=new I_(jy.H);return this.Br(t,e,function(t,e){var n=r.Lr(e);o=n?(i=i.zt(t,n),o.zt(t,sE(e))):(i=i.zt(t,null),o.zt(t,0))}).next(function(){return{Ur:i,Qr:o}})},xE.prototype.Br=function(t,e,i){if(e.et())return xb.resolve();var n=IDBKeyRange.bound(e.first().path.it(),e.last().path.it()),o=e.te(),s=o.oe();return ME(t).hs({range:n},function(t,e,n){for(var r=jy.Et(t);s&&jy.H(s,r)<0;)i(s,null),s=o.oe();s&&s.isEqual(r)&&(i(s,e),s=o.ce()?o.oe():null),s?n.ss(s.path.it()):n.done()}).next(function(){for(;s;)i(s,null),s=o.ce()?o.oe():null})},xE.prototype.Kr=function(t,r,e){var n,i=this,o=L_,s=r.path.length+1,a={};return e.isEqual(xy.min())?(n=r.path.it(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.it(),e=Dw(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=fw.collectionReadTimeIndex),ME(t).hs(a,function(t,e,n){t.length===s&&(e=Pw(i.Qt,e),r.path.nt(e.key.path)?e instanceof Tg&&Sm(r,e)&&(o=o.zt(e.key,e)):n.done())}).next(function(){return o})},xE.prototype.Nr=function(t){return new RE(this,!!t&&t.Wr)},xE.prototype.kr=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},xE.prototype.getMetadata=function(t){return LE(t).get(pw.key).next(function(t){return iy(!!t),t})},xE.prototype.Mr=function(t,e){return LE(t).put(pw.key,e)},xE.prototype.Lr=function(t){if(t){t=Pw(this.Qt,t);return t instanceof Sg&&t.version.isEqual(xy.min())?null:t}return null},xE),RE=(_o(DE,OE=vt),DE.prototype.wi=function(i){var o=this,s=[],a=0,u=new O_(function(t,e){return ay(t.rt(),e.rt())});return this.ri.forEach(function(t,e){var n,r=o.Gr.get(t);e.hi?(n=Rw(o.jr.Qt,e.hi,o.ci(t)),u=u.add(t.path.X()),e=sE(n),a+=e-r,s.push(o.jr.ai(i,t,n))):(a-=r,o.Wr?(r=Rw(o.jr.Qt,new Sg(t,xy.min()),o.ci(t)),s.push(o.jr.ai(i,t,r))):s.push(o.jr.li(i,t)))}),u.forEach(function(t){s.push(o.jr.Ei.qs(i,t))}),s.push(this.jr.updateMetadata(i,a)),xb.Ln(s)},DE.prototype.fi=function(t,e){var n=this;return this.jr.$r(t,e).next(function(t){return null===t?(n.Gr.set(e,0),null):(n.Gr.set(e,t.size),t.hi)})},DE.prototype.di=function(t,e){var n=this;return this.jr.qr(t,e).next(function(t){var e=t.Ur;return t.Qr.forEach(function(t,e){n.Gr.set(t,e)}),e})},DE);function DE(t,e){var n=this;return(n=OE.call(this)||this).jr=t,n.Wr=e,n.Gr=new nE(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function xE(t,e){this.Qt=t,this.Ei=e}function LE(t){return Sw(t,pw.store)}function ME(t){return Sw(t,fw.store)}function FE(t){return t.path.it()}var jE=(UE.prototype.Jn=function(e,n,t,r){var i=this;iy(t<r&&0<=t&&r<=11);var o=new Lb("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(iw.store),(s=e).createObjectStore(sw.store,{keyPath:sw.keyPath}),s.createObjectStore(aw.store,{keyPath:aw.keyPath,autoIncrement:!0}).createIndex(aw.userMutationsIndex,aw.userMutationsKeyPath,{unique:!0}),s.createObjectStore(uw.store),VE(e),e.createObjectStore(fw.store));var s,a=xb.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(vw.store),s.deleteObjectStore(dw.store),s.deleteObjectStore(yw.store),VE(e)),a=a.next(function(){return t=o.store(yw.store),e=new yw(0,0,xy.min().j(),0),t.put(yw.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(aw.store).rs().next(function(t){n.deleteObjectStore(aw.store),n.createObjectStore(aw.store,{keyPath:aw.keyPath,autoIncrement:!0}).createIndex(aw.userMutationsIndex,aw.userMutationsKeyPath,{unique:!0});var e=r.store(aw.store),t=t.map(function(t){return e.put(t)});return xb.Ln(t)});var n,r})),a=a.next(function(){e.createObjectStore(mw.store,{keyPath:mw.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.zr(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(pw.store),i.Hr(o)})),t<7&&7<=r&&(a=a.next(function(){return i.Jr(o)})),t<8&&8<=r&&(a=a.next(function(){return i.Yr(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(fw.store)).createIndex(fw.readTimeIndex,fw.readTimeIndexPath,{unique:!1}),t.createIndex(fw.collectionReadTimeIndex,fw.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.Xr(o)})),t<11&&11<=r&&(a=a.next(function(){e.createObjectStore(_w.store,{keyPath:_w.keyPath}),e.createObjectStore(bw.store,{keyPath:bw.keyPath})})),a},UE.prototype.Hr=function(e){var n=0;return e.store(fw.store).hs(function(t,e){n+=sE(e)}).next(function(){var t=new pw(n);return e.store(pw.store).put(pw.key,t)})},UE.prototype.zr=function(n){var r=this,t=n.store(sw.store),i=n.store(aw.store);return t.rs().next(function(t){return xb.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.rs(aw.userMutationsIndex,t).next(function(t){return xb.forEach(t,function(t){iy(t.userId===e.userId);t=Fw(r.Qt,t);return oE(n,e.userId,t).next(function(){})})})})})},UE.prototype.Jr=function(t){var o=t.store(vw.store),e=t.store(fw.store);return t.store(yw.store).get(yw.key).next(function(r){var i=[];return e.hs(function(t,e){var n=new Ly(t),t=[0,ew(n)];i.push(o.get(t).next(function(t){return t?xb.resolve():o.put(new vw(0,ew(n),r.highestListenSequenceNumber))}))}).next(function(){return xb.Ln(i)})})},UE.prototype.Yr=function(t,e){t.createObjectStore(gw.store,{keyPath:gw.keyPath});function r(t){if(i.add(t)){var e=t.tt(),t=t.X();return n.put({collectionId:e,parent:ew(t)})}}var n=e.store(gw.store),i=new Gw;return e.store(fw.store).hs({us:!0},function(t,e){t=new Ly(t);return r(t.X())}).next(function(){return e.store(uw.store).hs({us:!0},function(t,e){t[0];var n=t[1],n=(t[2],rw(n));return r(n.X())})})},UE.prototype.Xr=function(t){var n=this,r=t.store(dw.store);return r.hs(function(t,e){e=jw(e),e=Uw(n.Qt,e);return r.put(e)})},UE);function UE(t){this.Qt=t}function VE(t){t.createObjectStore(vw.store,{keyPath:vw.keyPath}).createIndex(vw.documentTargetsIndex,vw.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(dw.store,{keyPath:dw.keyPath}).createIndex(dw.queryTargetsIndexName,dw.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(yw.store)}var qE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",BE=(HE.prototype.start=function(){var e=this;return this.To().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new dy(py.FAILED_PRECONDITION,qE);return e.Io(),e.mo(),e.Ao(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e._o.Ki(t)})}).then(function(t){e.so=new Sy(t,e.eo)}).then(function(){e.io=!0}).catch(function(t){return e.lo&&e.lo.close(),Promise.reject(t)})},HE.prototype.Ro=function(n){var t=this;return this.uo=function(e){return wo(t,void 0,void 0,function(){return Eo(this,function(t){return this.Er?[2,n(e)]:[2]})})},n(this.isPrimary)},HE.prototype.Po=function(n){var t=this;this.lo.Xn(function(e){return wo(t,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},HE.prototype.yo=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Zr.Ps(function(){return wo(e,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.Er?[4,this.To()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},HE.prototype.To=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return zE(e).put(new mw(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.Vo(e).next(function(t){t||(n.isPrimary=!1,n.Zr.po(function(){return n.uo(!1)}))})}).next(function(){return n.bo(e)}).next(function(t){return n.isPrimary&&!t?n.vo(e).next(function(){return!1}):!!t&&n.So(e).next(function(){return!0})})}).catch(function(t){if(Wb(t))return Zv("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Zv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Zr.po(function(){return n.uo(t)}),n.isPrimary=t})},HE.prototype.Vo=function(t){var e=this;return WE(t).get(iw.key).next(function(t){return xb.resolve(e.Do(t))})},HE.prototype.Co=function(t){return zE(t).delete(this.clientId)},HE.prototype.xo=function(){return wo(this,void 0,void 0,function(){var e,n,r,i,o=this;return Eo(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.No(this.ao,18e5)?[3,2]:(this.ao=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=Sw(t,mw.store);return r.rs().next(function(t){var e=o.Fo(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return xb.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Eo)for(n=0,r=e;n<r.length;n++)i=r[n],this.Eo.removeItem(this.Oo(i.clientId));t.label=2;case 2:return[2]}})})},HE.prototype.Ao=function(){var t=this;this.co=this.Zr.Tr("client_metadata_refresh",4e3,function(){return t.To().then(function(){return t.xo()}).then(function(){return t.Ao()})})},HE.prototype.Do=function(t){return!!t&&t.ownerId===this.clientId},HE.prototype.bo=function(e){var r=this;return this.no?xb.resolve(!0):WE(e).get(iw.key).next(function(t){if(null!==t&&r.No(t.leaseTimestampMs,5e3)&&!r.ko(t.ownerId)){if(r.Do(t)&&r.networkEnabled)return!0;if(!r.Do(t)){if(!t.allowTabSynchronization)throw new dy(py.FAILED_PRECONDITION,qE);return!1}}return!(!r.networkEnabled||!r.inForeground)||zE(e).rs().next(function(t){return void 0===r.Fo(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Zv("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},HE.prototype.Mo=function(){return wo(this,void 0,void 0,function(){var n=this;return Eo(this,function(t){switch(t.label){case 0:return this.io=!1,this.Lo(),this.co&&(this.co.cancel(),this.co=null),this.$o(),this.Bo(),[4,this.lo.runTransaction("shutdown","readwrite",[iw.store,mw.store],function(t){var e=new Iw(t,Sy.q);return n.vo(e).next(function(){return n.Co(e)})})];case 1:return t.sent(),this.lo.close(),this.qo(),[2]}})})},HE.prototype.Fo=function(t,e){var n=this;return t.filter(function(t){return n.No(t.updateTimeMs,e)&&!n.ko(t.clientId)})},HE.prototype.Uo=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return zE(t).rs().next(function(t){return e.Fo(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(HE.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),HE.prototype.Qo=function(t){return aE.mi(t,this.Qt,this.Ei,this.Ti)},HE.prototype.Sr=function(){return this._o},HE.prototype.Fr=function(){return this.fo},HE.prototype.Ko=function(){return this.Ei},HE.prototype.Wo=function(){return this.wo},HE.prototype.runTransaction=function(e,n,r){var i=this;Zv("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.lo.runTransaction(e,t,Ew,function(t){return o=new Iw(t,i.so?i.so.next():Sy.q),"readwrite-primary"===n?i.Vo(o).next(function(t){return!!t||i.bo(o)}).next(function(t){if(!t)throw ty("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Zr.po(function(){return i.uo(!1)}),new dy(py.FAILED_PRECONDITION,Zb);return r(o)}).next(function(t){return i.So(o).next(function(){return t})}):i.jo(o).next(function(){return r(o)})}).then(function(t){return o.Vs(),t})},HE.prototype.jo=function(t){var e=this;return WE(t).get(iw.key).next(function(t){if(null!==t&&e.No(t.leaseTimestampMs,5e3)&&!e.ko(t.ownerId)&&!e.Do(t)&&!(e.no||e.allowTabSynchronization&&t.allowTabSynchronization))throw new dy(py.FAILED_PRECONDITION,qE)})},HE.prototype.So=function(t){var e=new iw(this.clientId,this.allowTabSynchronization,Date.now());return WE(t).put(iw.key,e)},HE.Kn=function(){return Mb.Kn()},HE.prototype.vo=function(t){var e=this,n=WE(t);return n.get(iw.key).next(function(t){return e.Do(t)?(Zv("IndexedDbPersistence","Releasing primary lease."),n.delete(iw.key)):xb.resolve()})},HE.prototype.No=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(ty("Detected an update time that is in the future: "+t+" > "+n),1))},HE.prototype.Io=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.oo=function(){t.Zr.Ps(function(){return t.inForeground="visible"===t.document.visibilityState,t.To()})},this.document.addEventListener("visibilitychange",this.oo),this.inForeground="visible"===this.document.visibilityState)},HE.prototype.$o=function(){this.oo&&(this.document.removeEventListener("visibilitychange",this.oo),this.oo=null)},HE.prototype.mo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ro=function(){e.Lo(),e.Zr.Ps(function(){return e.Mo()})},this.window.addEventListener("unload",this.ro))},HE.prototype.Bo=function(){this.ro&&(this.window.removeEventListener("unload",this.ro),this.ro=null)},HE.prototype.ko=function(t){try{var e=null!==(null===(e=this.Eo)||void 0===e?void 0:e.getItem(this.Oo(t)));return Zv("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return ty("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},HE.prototype.Lo=function(){if(this.Eo)try{this.Eo.setItem(this.Oo(this.clientId),String(Date.now()))}catch(t){ty("Failed to set zombie client id.",t)}},HE.prototype.qo=function(){if(this.Eo)try{this.Eo.removeItem(this.Oo(this.clientId))}catch(t){}},HE.prototype.Oo=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},HE);function HE(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Zr=i,this.window=o,this.document=s,this.eo=u,this.no=c,this.so=null,this.io=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ro=null,this.inForeground=!1,this.oo=null,this.co=null,this.ao=Number.NEGATIVE_INFINITY,this.uo=function(t){return Promise.resolve()},!HE.Kn())throw new dy(py.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Ti=new TE(this,r),this.ho=e+"main",this.Qt=new Aw(a),this.lo=new Mb(this.ho,11,new jE(this.Qt)),this._o=new dE(this.Ti,this.Qt),this.Ei=new Kw,this.fo=(e=this.Qt,a=this.Ei,new PE(e,a)),this.wo=new qw,this.window&&this.window.localStorage?this.Eo=this.window.localStorage:(this.Eo=null,!1===c&&ty("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function WE(t){return Sw(t,iw.store)}function zE(t){return Sw(t,mw.store)}function GE(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function KE(t,e){this.progress=t,this.Go=e}var QE=(eI.prototype.Ho=function(e,n){var r=this;return this.zo.bi(e,n).next(function(t){return r.Jo(e,n,t)})},eI.prototype.Jo=function(t,r,i){return this.fo._i(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Cs(r,t);return t})},eI.prototype.Yo=function(t,e,i){var o=R_;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Cs(t,e);o=o.zt(t,e)}),o},eI.prototype.Xo=function(e,t){var n=this;return this.fo.getEntries(e,t).next(function(t){return n.Zo(e,t)})},eI.prototype.Zo=function(e,r){var i=this;return this.zo.vi(e,r).next(function(t){var t=i.Yo(e,r,t),n=R_;return t.forEach(function(t,e){e=e||new Sg(t,xy.min()),n=n.zt(t,e)}),n})},eI.prototype.Kr=function(t,e,n){return r=e,jy.wt(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.tc(t,e.path):mm(e)?this.ec(t,e,n):this.nc(t,e,n);var r},eI.prototype.tc=function(t,e){return this.Ho(t,new jy(e)).next(function(t){var e=L_;return t instanceof Tg&&(e=e.zt(t.key,t)),e})},eI.prototype.ec=function(n,r,i){var o=this,s=r.collectionGroup,a=L_;return this.Ei.Us(n,s).next(function(t){return xb.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new lm(t,null,e.xt.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.nc(n,e,i).next(function(t){t.forEach(function(t,e){a=a.zt(t,e)})})}).next(function(){return a})})},eI.prototype.nc=function(e,n,t){var u,c,r=this;return this.fo.Kr(e,n,t).next(function(t){return u=t,r.zo.Di(e,n)}).next(function(t){return c=t,r.sc(e,c,u).next(function(t){u=t;for(var e=0,n=c;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,s=t_(s,u.get(a),r.vs);u=s instanceof Tg?u.zt(a,s):u.remove(a)}})}).next(function(){return u.forEach(function(t,e){Sm(n,e)||(u=u.remove(t))}),u})},eI.prototype.sc=function(t,e,n){for(var r=j_(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof s_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.fo.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Tg&&(c=c.zt(t,e))}),c})},eI),YE=(tI.oc=function(t,e){for(var n=j_(),r=j_(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new tI(t,e.fromCache,n,r)},tI),XE=(ZE.prototype.cc=function(t){this.ac=t},ZE.prototype.Kr=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.xt.length||1===r.xt.length&&r.xt[0].field.ut())||i.isEqual(xy.min())?this.uc(e,r):this.ac.Xo(e,o).next(function(t){var n=s.hc(r,t);return(dm(r)||vm(r))&&s.lc(r.limitType,n,o,i)?s.uc(e,r):($v()<=ks.DEBUG&&Zv("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Tm(r)),s.ac.Kr(e,r,i).next(function(e){return n.forEach(function(t){e=e.zt(t.key,t)}),e}))})},ZE.prototype.hc=function(n,t){var r=new O_(Cm(n));return t.forEach(function(t,e){e instanceof Tg&&Sm(n,e)&&(r=r.add(e))}),r},ZE.prototype.lc=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version._(r))},ZE.prototype.uc=function(t,e){return $v()<=ks.DEBUG&&Zv("QueryEngine","Using full collection scan to execute query:",Tm(e)),this.ac.Kr(t,e,xy.min())},ZE),JE=($E.prototype.Ir=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Vr(t,n.fc)})},$E);function $E(t,e,n,r){this.persistence=t,this._c=e,this.Qt=r,this.fc=new I_(ay),this.dc=new nE(Rg,Dg),this.wc=xy.min(),this.zo=t.Qo(n),this.Ec=t.Fr(),this._o=t.Sr(),this.Tc=new QE(this.Ec,this.zo,this.persistence.Ko()),this.wo=t.Wo(),this._c.cc(this.Tc)}function ZE(){}function tI(t,e,n,r){this.targetId=t,this.fromCache=e,this.ic=n,this.rc=r}function eI(t,e,n){this.fo=t,this.zo=e,this.Ei=n}function nI(t,e,n,r){return new JE(t,e,n,r)}function rI(i,o){return wo(this,void 0,void 0,function(){var e,n,m,r;return Eo(this,function(t){switch(t.label){case 0:return n=(e=i).zo,m=e.Tc,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.zo.pi(y).next(function(t){return g=t,n=e.persistence.Qo(o),m=new QE(e.Ec,n,e.persistence.Ko()),n.pi(y)}).next(function(t){for(var e=[],n=[],r=j_(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Xo(y,r).next(function(t){return{Ic:t,mc:e,Ac:n}})})})];case 1:return r=t.sent(),[2,(e.zo=n,e.Tc=m,e._c.cc(e.Tc),r)]}})})}function iI(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Ec.Nr({Wr:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=xb.resolve(),n.forEach(function(n){a=a.next(function(){return o._i(r,n)}).next(function(t){var e=t,t=i.Fs.get(n);iy(null!==t),(!e||e.version._(t)<0)&&(e=s.Ss(n,e,i))&&o.ai(e,i.Ns)})}),a.next(function(){return e.zo.Ci(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.zo.Fi(t)}).next(function(){return l.Tc.Xo(t,u)})})}function oI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e._o.Qi(t)})}function sI(t,r){var u=t,c=r.kt,h=u.fc;return u.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=u.Ec.Nr({Wr:!0});h=u.fc;var a=[];r.Fe.forEach(function(t,e){var n,r,i,o=h.get(e);o&&(a.push(u._o.sr(s,t.Qe,e).next(function(){return u._o.er(s,t.qe,e)})),0<(i=t.resumeToken).l()&&(n=o.Lt(i,c).Mt(s.bs),h=h.zt(e,n),r=o,i=t,iy(0<(o=n).resumeToken.l()),(0===r.resumeToken.l()||3e8<=o.kt.W()-r.kt.W()||0<i.qe.size+i.Ue.size+i.Qe.size)&&a.push(u._o.Hi(s,n))))});var e,n=R_;return r.ke.forEach(function(t,e){r.Me.has(t)&&a.push(u.persistence.Ti.Or(s,t))}),a.push(aI(s,t,r.ke,c,void 0).next(function(t){n=t})),c.isEqual(xy.min())||(e=u._o.Qi(s).next(function(t){return u._o.Wi(s,s.bs,c)}),a.push(e)),xb.Ln(a).next(function(){return t.apply(s)}).next(function(){return u.Tc.Zo(s,n)})}).then(function(t){return u.fc=h,t})}function aI(t,s,e,a,u){var n=j_();return e.forEach(function(t){return n=n.add(t)}),s.getEntries(t,n).next(function(i){var o=R_;return e.forEach(function(t,e){var n=i.get(t),r=(null==u?void 0:u.get(t))||a;e instanceof Sg&&e.version.isEqual(xy.min())?(s.li(t,r),o=o.zt(t,e)):null==n||0<e.version._(n.version)||0===e.version._(n.version)&&n.hasPendingWrites?(s.ai(e,r),o=o.zt(t,e)):Zv("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o})}function uI(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i._o.tr(e,r).next(function(t){return t?(n=t,xb.resolve(n)):i._o.Bi(e).next(function(t){return n=new Nm(r,t,0,e.bs),i._o.ji(e,n).next(function(){return n})})})}).then(function(t){var e=i.fc.get(t.targetId);return(null===e||0<t.kt._(e.kt))&&(i.fc=i.fc.zt(t.targetId,t),i.dc.set(r,t.targetId)),t})}function cI(i,o,s){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:n=(e=i).fc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Ti.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Wb(r=t.sent()))throw r;return Zv("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.fc=e.fc.remove(o),e.dc.delete(n.target),[2]}})})}function hI(t,o,s){var a=t,u=xy.min(),c=j_();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=bm(o),(void 0!==(t=(i=t).dc.get(r))?xb.resolve(i.fc.get(t)):i._o.tr(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a._o.rr(e,t.targetId).next(function(t){c=t})}).next(function(){return a._c.Kr(e,o,s?u:xy.min(),s?c:j_())}).next(function(t){return{documents:t,Rc:c}});var t,n,r,i})}function lI(t,e){var n=t,r=n._o,t=n.fc.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Sn(t,e).next(function(t){return t?t.target:null})})}function fI(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Ec,n=t,t=s.wc,r=e,i=R_,o=Dw(t),t=ME(n),n=IDBKeyRange.lowerBound(o,!0),t.hs({index:fw.readTimeIndex,range:n},function(t,e){var n=Pw(r.Qt,e);i=i.zt(n.key,n),o=e.readTime}).next(function(){return{Go:i,readTime:xw(o)}});var e,n,r,i,o}).then(function(t){var e=t.Go,t=t.readTime;return s.wc=t,e})}function pI(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=ME(t),r=xy.min(),t.hs({index:fw.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=xw(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.wc=t})]})})}var dI,vI,yI=(LI.prototype.ks=function(t,e){return xb.resolve(this.Vc.get(e))},LI.prototype.Ms=function(t,e){return this.Vc.set(e.id,{id:e.id,version:e.version,createTime:hb(e.createTime)}),xb.resolve()},LI.prototype.Ls=function(t,e){return xb.resolve(this.bc.get(e))},LI.prototype.$s=function(t,e){return this.bc.set(e.name,{name:(e=e).name,query:Vw(e.bundledQuery),readTime:hb(e.readTime)}),xb.resolve()},LI),gI=(xI.prototype.et=function(){return this.vc.et()},xI.prototype.nr=function(t,e){e=new mI(t,e);this.vc=this.vc.add(e),this.Dc=this.Dc.add(e)},xI.prototype.xc=function(t,e){var n=this;t.forEach(function(t){return n.nr(t,e)})},xI.prototype.ir=function(t,e){this.Nc(new mI(t,e))},xI.prototype.Fc=function(t,e){var n=this;t.forEach(function(t){return n.ir(t,e)})},xI.prototype.Oc=function(t){var e=this,n=new jy(new Ly([])),r=new mI(n,t),t=new mI(n,t+1),i=[];return this.Dc.me([r,t],function(t){e.Nc(t),i.push(t.key)}),i},xI.prototype.kc=function(){var e=this;this.vc.forEach(function(t){return e.Nc(t)})},xI.prototype.Nc=function(t){this.vc=this.vc.delete(t),this.Dc=this.Dc.delete(t)},xI.prototype.Mc=function(t){var e=new jy(new Ly([])),n=new mI(e,t),t=new mI(e,t+1),r=j_();return this.Dc.me([n,t],function(t){r=r.add(t.key)}),r},xI.prototype.Oi=function(t){var e=new mI(t,0),e=this.vc.Re(e);return null!==e&&t.isEqual(e.key)},xI),mI=(DI.Sc=function(t,e){return jy.H(t.key,e.key)||ay(t.Lc,e.Lc)},DI.Cc=function(t,e){return ay(t.Lc,e.Lc)||jy.H(t.key,e.key)},DI),_I=(RI.prototype.Ai=function(t){return xb.resolve(0===this.zo.length)},RI.prototype.Ri=function(t,e,n,r){var i=this.$c;this.$c++,0<this.zo.length&&this.zo[this.zo.length-1];n=new Cw(i,e,n,r);this.zo.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.Bc=this.Bc.add(new mI(a.key,i)),this.Ei.qs(t,a.key.path.X())}return xb.resolve(n)},RI.prototype.Pi=function(t,e){return xb.resolve(this.qc(e))},RI.prototype.gi=function(t,e){e+=1,e=this.Uc(e),e=e<0?0:e;return xb.resolve(this.zo.length>e?this.zo[e]:null)},RI.prototype.Vi=function(){return xb.resolve(0===this.zo.length?-1:this.$c-1)},RI.prototype.pi=function(t){return xb.resolve(this.zo.slice())},RI.prototype.bi=function(t,e){var n=this,r=new mI(e,0),e=new mI(e,Number.POSITIVE_INFINITY),i=[];return this.Bc.me([r,e],function(t){t=n.qc(t.Lc);i.push(t)}),xb.resolve(i)},RI.prototype.vi=function(t,e){var n=this,r=new O_(ay);return e.forEach(function(t){var e=new mI(t,0),t=new mI(t,Number.POSITIVE_INFINITY);n.Bc.me([e,t],function(t){r=r.add(t.Lc)})}),xb.resolve(this.Qc(r))},RI.prototype.Di=function(t,e){var n=e.path,r=n.length+1,e=n;jy.wt(e)||(e=e.child(""));var e=new mI(new jy(e),0),i=new O_(ay);return this.Bc.Ae(function(t){var e=t.key.path;return!!n.nt(e)&&(e.length===r&&(i=i.add(t.Lc)),!0)},e),xb.resolve(this.Qc(i))},RI.prototype.Qc=function(t){var e=this,n=[];return t.forEach(function(t){t=e.qc(t);null!==t&&n.push(t)}),n},RI.prototype.Ci=function(n,r){var i=this;iy(0===this.Kc(r.batchId,"removed")),this.zo.shift();var o=this.Bc;return xb.forEach(r.mutations,function(t){var e=new mI(t.key,r.batchId);return o=o.delete(e),i.Ti.Ni(n,t.key)}).next(function(){i.Bc=o})},RI.prototype.xi=function(t){},RI.prototype.Oi=function(t,e){var n=new mI(e,0),n=this.Bc.Re(n);return xb.resolve(e.isEqual(n&&n.key))},RI.prototype.Fi=function(t){return this.zo.length,xb.resolve()},RI.prototype.Kc=function(t,e){return this.Uc(t)},RI.prototype.Uc=function(t){return 0===this.zo.length?0:t-this.zo[0].batchId},RI.prototype.qc=function(t){t=this.Uc(t);return t<0||t>=this.zo.length?null:this.zo[t]},RI),bI=(PI.prototype.ai=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.Wc(e);return this.docs=this.docs.zt(r,{hi:e,size:i,readTime:n}),this.size+=i-o,this.Ei.qs(t,r.path.X())},PI.prototype.li=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},PI.prototype._i=function(t,e){e=this.docs.get(e);return xb.resolve(e?e.hi:null)},PI.prototype.getEntries=function(t,e){var n=this,r=R_;return e.forEach(function(t){var e=n.docs.get(t);r=r.zt(t,e?e.hi:null)}),xb.resolve(r)},PI.prototype.Kr=function(t,e,n){for(var r=L_,i=new jy(e.path.child("")),o=this.docs.ee(i);o.ce();){var s=o.oe(),a=s.key,u=s.value,s=u.hi,u=u.readTime;if(!e.path.nt(a.path))break;u._(n)<=0||s instanceof Tg&&Sm(e,s)&&(r=r.zt(s.key,s))}return xb.resolve(r)},PI.prototype.jc=function(t,e){return xb.forEach(this.docs,function(t){return e(t)})},PI.prototype.Nr=function(t){return new wI(this)},PI.prototype.kr=function(t){return xb.resolve(this.size)},PI),wI=(_o(OI,vI=vt),OI.prototype.wi=function(n){var r=this,i=[];return this.ri.forEach(function(t,e){e&&e.hi?i.push(r.jr.ai(n,e.hi,r.ci(t))):r.jr.li(t)}),xb.Ln(i)},OI.prototype.fi=function(t,e){return this.jr._i(t,e)},OI.prototype.di=function(t,e){return this.jr.getEntries(t,e)},OI),EI=(kI.prototype.In=function(t,n){return this.Gc.forEach(function(t,e){return n(e)}),xb.resolve()},kI.prototype.Qi=function(t){return xb.resolve(this.lastRemoteSnapshotVersion)},kI.prototype.Ki=function(t){return xb.resolve(this.zc)},kI.prototype.Bi=function(t){return this.highestTargetId=this.Jc.next(),xb.resolve(this.highestTargetId)},kI.prototype.Wi=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.zc&&(this.zc=e),xb.resolve()},kI.prototype.Gi=function(t){this.Gc.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.Jc=new pE(e),this.highestTargetId=e),t.sequenceNumber>this.zc&&(this.zc=t.sequenceNumber)},kI.prototype.ji=function(t,e){return this.Gi(e),this.targetCount+=1,xb.resolve()},kI.prototype.Hi=function(t,e){return this.Gi(e),xb.resolve()},kI.prototype.Ji=function(t,e){return this.Gc.delete(e.target),this.Hc.Oc(e.targetId),--this.targetCount,xb.resolve()},kI.prototype.Xi=function(n,r,i){var o=this,s=0,a=[];return this.Gc.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.Gc.delete(t),a.push(o.Yi(n,e.targetId)),s++)}),xb.Ln(a).next(function(){return s})},kI.prototype.Zi=function(t){return xb.resolve(this.targetCount)},kI.prototype.tr=function(t,e){e=this.Gc.get(e)||null;return xb.resolve(e)},kI.prototype.er=function(t,e,n){return this.Hc.xc(e,n),xb.resolve()},kI.prototype.sr=function(e,t,n){this.Hc.Fc(t,n);var r=this.persistence.Ti,i=[];return r&&t.forEach(function(t){i.push(r.Ni(e,t))}),xb.Ln(i)},kI.prototype.Yi=function(t,e){return this.Hc.Oc(e),xb.resolve()},kI.prototype.rr=function(t,e){e=this.Hc.Mc(e);return xb.resolve(e)},kI.prototype.Oi=function(t,e){return xb.resolve(this.Hc.Oi(e))},kI),II=(AI.prototype.start=function(){return Promise.resolve()},AI.prototype.Mo=function(){return this.io=!1,Promise.resolve()},Object.defineProperty(AI.prototype,"Er",{get:function(){return this.io},enumerable:!1,configurable:!0}),AI.prototype.Po=function(){},AI.prototype.yo=function(){},AI.prototype.Ko=function(){return this.Ei},AI.prototype.Qo=function(t){var e=this.Yc[t.A()];return e||(e=new _I(this.Ei,this.Ti),this.Yc[t.A()]=e),e},AI.prototype.Sr=function(){return this._o},AI.prototype.Fr=function(){return this.fo},AI.prototype.Wo=function(){return this.wo},AI.prototype.runTransaction=function(t,e,n){var r=this;Zv("MemoryPersistence","Starting transaction:",t);var i=new TI(this.so.next());return this.Ti.Zc(),n(i).next(function(t){return r.Ti.ta(i).next(function(){return t})}).kn().then(function(t){return i.Vs(),t})},AI.prototype.ea=function(e,n){return xb.$n(Object.values(this.Yc).map(function(t){return function(){return t.Oi(e,n)}}))},AI),TI=(_o(NI,dI=Kn),NI),SI=(CI.ia=function(t){return new CI(t)},Object.defineProperty(CI.prototype,"ra",{get:function(){if(this.sa)return this.sa;throw ry()},enumerable:!1,configurable:!0}),CI.prototype.nr=function(t,e,n){return this.na.nr(n,e),this.ra.delete(n.toString()),xb.resolve()},CI.prototype.ir=function(t,e,n){return this.na.ir(n,e),this.ra.add(n.toString()),xb.resolve()},CI.prototype.Ni=function(t,e){return this.ra.add(e.toString()),xb.resolve()},CI.prototype.removeTarget=function(t,e){var n=this;this.na.Oc(e.targetId).forEach(function(t){return n.ra.add(t.toString())});var r=this.persistence.Sr();return r.rr(t,e.targetId).next(function(t){t.forEach(function(t){return n.ra.add(t.toString())})}).next(function(){return r.Ji(t,e)})},CI.prototype.Zc=function(){this.sa=new Set},CI.prototype.ta=function(n){var r=this,i=this.persistence.Fr().Nr();return xb.forEach(this.ra,function(t){var e=jy._t(t);return r.oa(n,e).next(function(t){t||i.li(e)})}).next(function(){return r.sa=null,i.apply(n)})},CI.prototype.Or=function(t,e){var n=this;return this.oa(t,e).next(function(t){t?n.ra.delete(e.toString()):n.ra.add(e.toString())})},CI.prototype.Xc=function(t){return 0},CI.prototype.oa=function(t,e){var n=this;return xb.$n([function(){return xb.resolve(n.na.Oi(e))},function(){return n.persistence.Sr().Oi(t,e)},function(){return n.persistence.ea(t,e)}])},CI);function CI(t){this.persistence=t,this.na=new gI,this.sa=null}function NI(t){var e=this;return(e=dI.call(this)||this).bs=t,e}function AI(t,e){var n=this;this.Yc={},this.so=new Sy(0),this.io=!1,this.io=!0,this.Ti=t(this),this._o=new EI(this),this.Ei=new zw,this.fo=(t=this.Ei,new bI(t,function(t){return n.Ti.Xc(t)})),this.Qt=new Aw(e),this.wo=new yI(this.Qt)}function kI(t){this.persistence=t,this.Gc=new nE(Rg,Dg),this.lastRemoteSnapshotVersion=xy.min(),this.highestTargetId=0,this.zc=0,this.Hc=new gI,this.targetCount=0,this.Jc=pE.Li()}function OI(t){var e=this;return(e=vI.call(this)||this).jr=t,e}function PI(t,e){this.Ei=t,this.Wc=e,this.docs=new I_(jy.H),this.size=0}function RI(t,e){this.Ei=t,this.Ti=e,this.zo=[],this.$c=1,this.Bc=new O_(mI.Sc)}function DI(t,e){this.key=t,this.Lc=e}function xI(){this.vc=new O_(mI.Sc),this.Dc=new O_(mI.Cc)}function LI(t){this.Qt=t,this.Vc=new Map,this.bc=new Map}function MI(t,e){return"firestore_clients_"+t+"_"+e}function FI(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.m()&&(n+="_"+e.uid),n}function jI(t,e){return"firestore_targets_"+t+"_"+e}var UI,VI=(cT.ca=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new dy(r.error.code,r.error.message)),i?new cT(t,e,r.state,o):(ty("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},cT.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},cT),qI=(uT.ca=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new dy(n.error.code,n.error.message)),r?new uT(t,n.state,i):(ty("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},uT.prototype.aa=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},uT),BI=(aT.ca=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=U_,o=0;r&&o<n.activeTargetIds.length;++o)r=ig(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new aT(t,i):(ty("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},aT),HI=(sT.ca=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new sT(e.clientId,e.onlineState):(ty("SharedClientState","Failed to parse online state: "+t),null)},sT),WI=(oT.prototype.ua=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},oT.prototype.ha=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},oT.prototype.aa=function(){var t={activeTargetIds:this.activeTargetIds.it(),updateTimeMs:Date.now()};return JSON.stringify(t)},oT),zI=(iT.Kn=function(t){return!(!t||!t.localStorage)},iT.prototype.start=function(){return wo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this._a.Uo()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.la&&(i=this.getItem(MI(this.persistenceKey,r)))&&(o=BI.ca(r,i))&&(this.Ea=this.Ea.zt(o.clientId,o));for(this.Va(),(s=this.storage.getItem(this.ya))&&(a=this.pa(s))&&this.ba(a),u=0,c=this.Ta;u<c.length;u++)h=c[u],this.wa(h);return this.Ta=[],this.window.addEventListener("unload",function(){return l.Mo()}),this.Er=!0,[2]}})})},iT.prototype.B=function(t){this.setItem(this.ma,JSON.stringify(t))},iT.prototype.va=function(){return this.Sa(this.Ea)},iT.prototype.Da=function(n){var r=!1;return this.Ea.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},iT.prototype.Ca=function(t){this.xa(t,"pending")},iT.prototype.Na=function(t,e,n){this.xa(t,e,n),this.Fa(t)},iT.prototype.Oa=function(t){var e,n="not-current";return this.Da(t)&&(!(e=this.storage.getItem(jI(this.persistenceKey,t)))||(e=qI.ca(t,e))&&(n=e.state)),this.ka.ua(t),this.Va(),n},iT.prototype.Ma=function(t){this.ka.ha(t),this.Va()},iT.prototype.La=function(t){return this.ka.activeTargetIds.has(t)},iT.prototype.$a=function(t){this.removeItem(jI(this.persistenceKey,t))},iT.prototype.Ba=function(t,e,n){this.qa(t,e,n)},iT.prototype.Ua=function(t,e,n){var r=this;e.forEach(function(t){r.Fa(t)}),this.currentUser=t,n.forEach(function(t){r.Ca(t)})},iT.prototype.Qa=function(t){this.Ka(t)},iT.prototype.Wa=function(){this.ja()},iT.prototype.Mo=function(){this.Er&&(this.window.removeEventListener("storage",this.da),this.removeItem(this.Ia),this.Er=!1)},iT.prototype.getItem=function(t){var e=this.storage.getItem(t);return Zv("SharedClientState","READ",t,e),e},iT.prototype.setItem=function(t,e){Zv("SharedClientState","SET",t,e),this.storage.setItem(t,e)},iT.prototype.removeItem=function(t){Zv("SharedClientState","REMOVE",t),this.storage.removeItem(t)},iT.prototype.wa=function(t){var e=this,o=t;if(o.storageArea===this.storage){if(Zv("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Ia)return void ty("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Zr.po(function(){return wo(e,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){if(this.Er){if(null!==o.key)if(this.Aa.test(o.key)){if(null==o.newValue)return e=this.Ga(o.key),[2,this.za(e,null)];if(e=this.Ha(o.key,o.newValue))return[2,this.za(e.clientId,e)]}else if(this.Ra.test(o.key)){if(null!==o.newValue&&(n=this.Ja(o.key,o.newValue)))return[2,this.Ya(n)]}else if(this.Pa.test(o.key)){if(null!==o.newValue&&(r=this.Xa(o.key,o.newValue)))return[2,this.Za(r)]}else if(o.key===this.ya){if(null!==o.newValue&&(i=this.pa(o.newValue)))return[2,this.ba(i)]}else if(o.key===this.ma)(i=function(t){var e=Sy.q;if(null!=t)try{var n=JSON.parse(t);iy("number"==typeof n),e=n}catch(t){ty("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==Sy.q&&this.M(i);else if(o.key===this.ga)return[2,this._a.tu()]}else this.Ta.push(o);return[2]})})})}},Object.defineProperty(iT.prototype,"ka",{get:function(){return this.Ea.get(this.la)},enumerable:!1,configurable:!0}),iT.prototype.Va=function(){this.setItem(this.Ia,this.ka.aa())},iT.prototype.xa=function(t,e,n){n=new VI(this.currentUser,t,e,n),t=FI(this.persistenceKey,this.currentUser,t);this.setItem(t,n.aa())},iT.prototype.Fa=function(t){t=FI(this.persistenceKey,this.currentUser,t);this.removeItem(t)},iT.prototype.Ka=function(t){t={clientId:this.la,onlineState:t};this.storage.setItem(this.ya,JSON.stringify(t))},iT.prototype.qa=function(t,e,n){var r=jI(this.persistenceKey,t),n=new qI(t,e,n);this.setItem(r,n.aa())},iT.prototype.ja=function(){this.setItem(this.ga,"value-not-used")},iT.prototype.Ga=function(t){t=this.Aa.exec(t);return t?t[1]:null},iT.prototype.Ha=function(t,e){t=this.Ga(t);return BI.ca(t,e)},iT.prototype.Ja=function(t,e){var n=this.Ra.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return VI.ca(new yy(n),t,e)},iT.prototype.Xa=function(t,e){t=this.Pa.exec(t),t=Number(t[1]);return qI.ca(t,e)},iT.prototype.pa=function(t){return HI.ca(t)},iT.prototype.Ya=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return e.user.uid===this.currentUser.uid?[2,this._a.eu(e.batchId,e.state,e.error)]:(Zv("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},iT.prototype.Za=function(t){return this._a.nu(t.targetId,t.state,t.error)},iT.prototype.za=function(t,e){var n=this,r=e?this.Ea.zt(t,e):this.Ea.remove(t),i=this.Sa(this.Ea),o=this.Sa(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this._a.su(s,a).then(function(){n.Ea=r})},iT.prototype.ba=function(t){this.Ea.get(t.clientId)&&this.fa(t.onlineState)},iT.prototype.Sa=function(t){var n=U_;return t.forEach(function(t,e){n=n.Pe(e.activeTargetIds)}),n},iT),GI=(rT.prototype.Ca=function(t){},rT.prototype.Na=function(t,e,n){},rT.prototype.Oa=function(t){return this.iu.ua(t),this.ru[t]||"not-current"},rT.prototype.Ba=function(t,e,n){this.ru[t]=e},rT.prototype.Ma=function(t){this.iu.ha(t)},rT.prototype.La=function(t){return this.iu.activeTargetIds.has(t)},rT.prototype.$a=function(t){delete this.ru[t]},rT.prototype.va=function(){return this.iu.activeTargetIds},rT.prototype.Da=function(t){return this.iu.activeTargetIds.has(t)},rT.prototype.start=function(){return this.iu=new WI,Promise.resolve()},rT.prototype.Ua=function(t,e,n){},rT.prototype.Qa=function(t){},rT.prototype.Mo=function(){},rT.prototype.B=function(t){},rT.prototype.Wa=function(){},rT),KI=(nT.prototype.ou=function(t){},nT.prototype.Mo=function(){},nT),QI=(eT.prototype.ou=function(t){this.lu.push(t)},eT.prototype.Mo=function(){window.removeEventListener("online",this.cu),window.removeEventListener("offline",this.uu)},eT.prototype._u=function(){window.addEventListener("online",this.cu),window.addEventListener("offline",this.uu)},eT.prototype.au=function(){Zv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(0)},eT.prototype.hu=function(){Zv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.lu;t<e.length;t++)(0,e[t])(1)},eT.Kn=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},eT),YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},XI=(tT.prototype.wu=function(t){this.Eu=t},tT.prototype.Tu=function(t){this.Iu=t},tT.prototype.onMessage=function(t){this.mu=t},tT.prototype.close=function(){this.du()},tT.prototype.send=function(t){this.fu(t)},tT.prototype.Au=function(){this.Eu()},tT.prototype.Ru=function(t){this.Iu(t)},tT.prototype.Pu=function(t){this.mu(t)},tT),JI=(ZI.prototype.pu=function(e,t,n,r){var i=this.bu(e,t);Zv("RestConnection","Sending: ",i,n);t={};return this.vu(t,r),this.Su(e,i,t,n).then(function(t){return Zv("RestConnection","Received: ",t),t},function(t){throw ey("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},ZI.prototype.Du=function(t,e,n,r){return this.pu(t,e,n,r)},ZI.prototype.vu=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.2.6",t["Content-Type"]="text/plain",e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n])},ZI.prototype.bu=function(t,e){t=YI[t];return this.gu+"/v1/"+e+":"+t},_o($I,UI=ZI),$I.prototype.Su=function(o,e,s,a){return new Promise(function(n,r){var i=new Kv;i.listenOnce(Bv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case qv.NO_ERROR:var t=i.getResponseJson();Zv("Connection","XHR received:",JSON.stringify(t)),n(t);break;case qv.TIMEOUT:Zv("Connection",'RPC "'+o+'" timed out'),r(new dy(py.DEADLINE_EXCEEDED,"Request time out"));break;case qv.HTTP_ERROR:var e=i.getStatus();Zv("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(py).indexOf(e)?e:py.UNKNOWN,r(new dy(e,t.message))):r(new dy(py.UNKNOWN,"Server responded with status "+i.getStatus())):r(new dy(py.UNAVAILABLE,"Connection failed."));break;default:ry()}}finally{Zv("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},$I.prototype.Cu=function(t,e){var n=[this.gu,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Lv,i=Vv(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.vu(t.initMessageHeaders,e),jo()||Vo()||0<=Fo().indexOf("Electron/")||(0<=(e=Fo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=Fo().indexOf("MSAppHost/")||Uo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Zv("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),s=!1,a=!1,u=new XI({fu:function(t){a?Zv("Connection","Not sending because WebChannel is closed:",t):(s||(Zv("Connection","Opening WebChannel transport."),o.open(),s=!0),Zv("Connection","WebChannel sending:",t),o.send(t))},du:function(){return o.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(o,Gv.EventType.OPEN,function(){a||Zv("Connection","WebChannel transport opened.")}),t(o,Gv.EventType.CLOSE,function(){a||(a=!0,Zv("Connection","WebChannel transport closed"),u.Ru())}),t(o,Gv.EventType.ERROR,function(t){a||(a=!0,ey("Connection","WebChannel transport errored:",t),u.Ru(new dy(py.UNAVAILABLE,"The operation could not be completed")))}),t(o,Gv.EventType.MESSAGE,function(t){var e,n,r,i;a||(iy(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Zv("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=d_[r];if(void 0!==t)return E_(t)}(),i=n.message,void 0===t&&(t=py.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,u.Ru(new dy(t,i)),o.close()):(Zv("Connection","WebChannel received:",e),u.Pu(e)))}),t(i,Hv.STAT_EVENT,function(t){t.stat===Wv?Zv("Connection","Detected buffering proxy"):t.stat===zv&&Zv("Connection","Detected no buffering proxy")}),setTimeout(function(){u.Au()},0),u},$I);function $I(t){var e=this;return(e=UI.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function ZI(t){this.yu=t,this.t=t.t;var e=t.ssl?"https":"http";this.gu=e+"://"+t.host,this.Vu="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function tT(t){this.fu=t.fu,this.du=t.du}function eT(){var t=this;this.cu=function(){return t.au()},this.uu=function(){return t.hu()},this.lu=[],this._u()}function nT(){}function rT(){this.iu=new WI,this.ru={},this.fa=null,this.M=null}function iT(t,e,n,r,i){this.window=t,this.Zr=e,this.persistenceKey=n,this.la=r,this._a=null,this.fa=null,this.M=null,this.da=this.wa.bind(this),this.Ea=new I_(ay),this.Er=!1,this.Ta=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ia=MI(this.persistenceKey,this.la),this.ma="firestore_sequence_number_"+this.persistenceKey,this.Ea=this.Ea.zt(this.la,new WI),this.Aa=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Ra=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Pa=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.ya="firestore_online_state_"+this.persistenceKey,this.ga="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.da)}function oT(){this.activeTargetIds=U_}function sT(t,e){this.clientId=t,this.onlineState=e}function aT(t,e){this.clientId=t,this.activeTargetIds=e}function uT(t,e,n){this.targetId=t,this.state=e,this.error=n}function cT(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function hT(){return"undefined"!=typeof window?window:null}function lT(){return"undefined"!=typeof document?document:null}function fT(t){return new ab(t,!0)}function pT(t,e,n,r,i){var o=this;this.bh=t,this.Sh=e,this._s=n,this.Dh={},this.Ch=[],this.xh=new Map,this.Nh=new Set,this.Fh=[],this.Oh=i,this.Oh.ou(function(t){n.Ps(function(){return wo(o,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return MT(this)?(Zv("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return(e=n).Nh.add(4),[4,kT(e)];case 1:return t.sent(),e.kh.set("Unknown"),e.Nh.delete(4),[4,AT(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.kh=new wT(n,r)}var dT,vT,yT,gT=(NT.prototype.reset=function(){this.Ou=0},NT.prototype.Lu=function(){this.Ou=this.Fu},NT.prototype.$u=function(t){var e=this;this.cancel();var n=Math.floor(this.Ou+this.Bu()),r=Math.max(0,Date.now()-this.Mu),i=Math.max(0,n-r);0<i&&Zv("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ou+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ku=this.Zr.Tr(this.fs,i,function(){return e.Mu=Date.now(),t()}),this.Ou*=this.Nu,this.Ou<this.xu&&(this.Ou=this.xu),this.Ou>this.Fu&&(this.Ou=this.Fu)},NT.prototype.qu=function(){null!==this.ku&&(this.ku.Rs(),this.ku=null)},NT.prototype.cancel=function(){null!==this.ku&&(this.ku.cancel(),this.ku=null)},NT.prototype.Bu=function(){return(Math.random()-.5)*this.Ou},NT),vt=(CT.prototype.zu=function(){return 1===this.state||2===this.state||4===this.state},CT.prototype.Hu=function(){return 2===this.state},CT.prototype.start=function(){3!==this.state?this.auth():this.Ju()},CT.prototype.stop=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.zu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},CT.prototype.Yu=function(){this.state=0,this.Gu.reset()},CT.prototype.Xu=function(){var t=this;this.Hu()&&null===this.ju&&(this.ju=this.Zr.Tr(this.Uu,6e4,function(){return t.Zu()}))},CT.prototype.th=function(t){this.eh(),this.stream.send(t)},CT.prototype.Zu=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return this.Hu()?[2,this.close(0)]:[2]})})},CT.prototype.eh=function(){this.ju&&(this.ju.cancel(),this.ju=null)},CT.prototype.close=function(e,n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.eh(),this.Gu.cancel(),this.Wu++,3!==e?this.Gu.reset():n&&n.code===py.RESOURCE_EXHAUSTED?(ty(n.toString()),ty("Using maximum backoff delay to prevent overloading the backend."),this.Gu.Lu()):n&&n.code===py.UNAUTHENTICATED&&this.Ku.p(),null!==this.stream&&(this.nh(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Tu(n)];case 1:return t.sent(),[2]}})})},CT.prototype.nh=function(){},CT.prototype.auth=function(){var n=this;this.state=1;var t=this.sh(this.Wu),e=this.Wu;this.Ku.getToken().then(function(t){n.Wu===e&&n.ih(t)},function(e){t(function(){var t=new dy(py.UNKNOWN,"Fetching auth token failed: "+e.message);return n.rh(t)})})},CT.prototype.ih=function(t){var e=this,n=this.sh(this.Wu);this.stream=this.oh(t),this.stream.wu(function(){n(function(){return e.state=2,e.listener.wu()})}),this.stream.Tu(function(t){n(function(){return e.rh(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},CT.prototype.Ju=function(){var t=this;this.state=4,this.Gu.$u(function(){return wo(t,void 0,void 0,function(){return Eo(this,function(t){return this.state=0,this.start(),[2]})})})},CT.prototype.rh=function(t){return Zv("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},CT.prototype.sh=function(e){var n=this;return function(t){n.Zr.Ps(function(){return n.Wu===e?t():(Zv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},CT),mT=(_o(ST,yT=vt),ST.prototype.oh=function(t){return this.Qu.Cu("Listen",t)},ST.prototype.onMessage=function(t){this.Gu.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:ry(),r=e.targetChange.targetIds||[],i=(s=e.targetChange.resumeToken,t.Bt?(iy(void 0===s||"string"==typeof s),hy.fromBase64String(s||"")):(iy(void 0===s||s instanceof Uint8Array),hy.fromUint8Array(s||new Uint8Array))),o=(a=e.targetChange.cause)&&(u=void 0===(c=a).code?py.UNKNOWN:E_(c.code),new dy(u,c.message||"")),s=new K_(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=db(t,n.document.name),i=hb(n.document.updateTime);var a=new gg({mapValue:{fields:n.document.fields}}),u=(o=new Tg(r,i,a,{}),n.targetIds||[]),c=n.removedTargetIds||[];s=new z_(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=db(t,n.document),i=n.readTime?hb(n.readTime):xy.min(),a=new Sg(r,i),o=n.removedTargetIds||[],s=new z_([],o,a.key,a);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=db(t,n.document),i=n.removedTargetIds||[],s=new z_([],i,r,null);else{if(!("filter"in e))return ry();e.filter;e=e.filter;e.targetId,n=e.count||0,r=new p_(n),i=e.targetId,s=new G_(i,r)}return s}(this.Qt,t),t=function(t){if(!("targetChange"in t))return xy.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?hb(t.readTime):xy.min()}(t);return this.listener.ah(e,t)},ST.prototype.uh=function(t){var e,n,r,i={};i.database=gb(this.Qt),i.addTarget=(e=this.Qt,(r=xg(r=(n=t).target)?{documents:Ib(e,r)}:{query:Tb(e,r)}).targetId=n.targetId,0<n.resumeToken.l()?r.resumeToken=cb(e,n.resumeToken):0<n.kt._(xy.min())&&(r.readTime=ub(e,n.kt.j())),r);var o,t=(this.Qt,o=t,null==(t=function(){switch(o.Ot){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ry()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.th(i)},ST.prototype.hh=function(t){var e={};e.database=gb(this.Qt),e.removeTarget=t,this.th(e)},ST),_T=(_o(TT,vT=vt),Object.defineProperty(TT.prototype,"_h",{get:function(){return this.lh},enumerable:!1,configurable:!0}),TT.prototype.start=function(){this.lh=!1,this.lastStreamToken=void 0,vT.prototype.start.call(this)},TT.prototype.nh=function(){this.lh&&this.fh([])},TT.prototype.oh=function(t){return this.Qu.Cu("Write",t)},TT.prototype.onMessage=function(t){if(iy(!!t.streamToken),this.lastStreamToken=t.streamToken,this.lh){this.Gu.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(iy(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?hb(t.updateTime):hb(e);n.isEqual(xy.min())&&(n=hb(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new Ym(n,e)}(t,r)})):[]),n=hb(t.commitTime);return this.listener.dh(n,e)}var n,r;return iy(!t.writeResults||0===t.writeResults.length),this.lh=!0,this.listener.wh()},TT.prototype.Eh=function(){var t={};t.database=gb(this.Qt),this.th(t)},TT.prototype.fh=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return wb(e.Qt,t)})};this.th(t)},TT),bT=(_o(IT,dT=function(){}),IT.prototype.Ih=function(){if(this.Th)throw new dy(py.FAILED_PRECONDITION,"The client has already been terminated.")},IT.prototype.pu=function(e,n,r){var i=this;return this.Ih(),this.credentials.getToken().then(function(t){return i.Qu.pu(e,n,r,t)}).catch(function(t){throw t.code===py.UNAUTHENTICATED&&i.credentials.p(),t})},IT.prototype.Du=function(e,n,r){var i=this;return this.Ih(),this.credentials.getToken().then(function(t){return i.Qu.Du(e,n,r,t)}).catch(function(t){throw t.code===py.UNAUTHENTICATED&&i.credentials.p(),t})},IT.prototype.terminate=function(){this.Th=!1},IT),wT=(ET.prototype.Ph=function(){var t=this;0===this.mh&&(this.yh("Unknown"),this.Ah=this._s.Tr("online_state_timeout",1e4,function(){return t.Ah=null,t.gh("Backend didn't respond within 10 seconds."),t.yh("Offline"),Promise.resolve()}))},ET.prototype.Vh=function(t){"Online"===this.state?this.yh("Unknown"):(this.mh++,1<=this.mh&&(this.ph(),this.gh("Connection failed 1 times. Most recent error: "+t.toString()),this.yh("Offline")))},ET.prototype.set=function(t){this.ph(),this.mh=0,"Online"===t&&(this.Rh=!1),this.yh(t)},ET.prototype.yh=function(t){t!==this.state&&(this.state=t,this.fa(t))},ET.prototype.gh=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rh?(ty(t),this.Rh=!1):Zv("OnlineStateTracker",t)},ET.prototype.ph=function(){null!==this.Ah&&(this.Ah.cancel(),this.Ah=null)},ET);function ET(t,e){this._s=t,this.fa=e,this.state="Unknown",this.mh=0,this.Ah=null,this.Rh=!0}function IT(t,e,n){var r=this;return(r=dT.call(this)||this).credentials=t,r.Qu=e,r.Qt=n,r.Th=!1,r}function TT(t,e,n,r,i){var o=this;return(o=vT.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).Qt=r,o.lh=!1,o}function ST(t,e,n,r,i){var o=this;return(o=yT.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).Qt=r,o}function CT(t,e,n,r,i,o){this.Zr=t,this.Uu=n,this.Qu=r,this.Ku=i,this.listener=o,this.state=0,this.Wu=0,this.ju=null,this.stream=null,this.Gu=new gT(t,e)}function NT(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Zr=t,this.fs=e,this.xu=n,this.Nu=r,this.Fu=i,this.Ou=0,this.ku=null,this.Mu=Date.now(),this.reset()}function AT(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:if(!MT(r))return[3,4];e=0,n=r.Fh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function kT(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:e=0,n=r.Fh,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function OT(t,e){t.xh.has(e.targetId)||(t.xh.set(e.targetId,e),LT(t)?xT(t):zT(t).Hu()&&RT(t,e))}function PT(t,e){var n=t,t=zT(n);n.xh.delete(e),t.Hu()&&DT(n,e),0===n.xh.size&&(t.Hu()?t.Xu():MT(n)&&n.kh.set("Unknown"))}function RT(t,e){t.Mh.on(e.targetId),zT(t).uh(e)}function DT(t,e){t.Mh.on(e),zT(t).hh(e)}function xT(e){e.Mh=new Y_({vn:function(t){return e.Dh.vn(t)},Sn:function(t){return e.xh.get(t)||null}}),zT(e).start(),e.kh.Ph()}function LT(t){return MT(t)&&!zT(t).zu()&&0<t.xh.size}function MT(t){return 0===t.Nh.size}function FT(t){t.Mh=void 0}function jT(s,a,u){return wo(this,void 0,void 0,function(){var n,o;return Eo(this,function(t){switch(t.label){case 0:if(s.kh.set("Online"),!(a instanceof K_&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.xh.has(i)?[4,o.Dh.Lh(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.xh.delete(i),o.Mh.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Zv("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,UT(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof z_?s.Mh.dn(a):a instanceof G_?s.Mh.Pn(a):s.Mh.Tn(a),u.isEqual(xy.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,oI(s.bh)];case 8:return o=t.sent(),0<=u._(o)?[4,(i=u,(e=(r=s).Mh.Vn(i)).Fe.forEach(function(t,e){var n;0<t.resumeToken.l()&&((n=r.xh.get(e))&&r.xh.set(e,n.Lt(t.resumeToken,i)))}),e.Oe.forEach(function(t){var e=r.xh.get(t);e&&(r.xh.set(t,e.Lt(hy.T,e.kt)),DT(r,t),e=new Nm(e.target,t,1,e.sequenceNumber),RT(r,e))}),r.Dh.$h(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Zv("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,UT(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function UT(n,r,i){return wo(this,void 0,void 0,function(){var e=this;return Eo(this,function(t){switch(t.label){case 0:if(!Wb(r))throw r;return n.Nh.add(1),[4,kT(n)];case 1:return t.sent(),n.kh.set("Offline"),i=i||function(){return oI(n.bh)},n._s.po(function(){return wo(e,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return Zv("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Nh.delete(1),[4,AT(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function VT(e,n){return n().catch(function(t){return UT(e,t,n)})}function qT(u){return wo(this,void 0,void 0,function(){var i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:o=GT(i=u),s=0<i.Ch.length?i.Ch[i.Ch.length-1].batchId:-1,t.label=1;case 1:if(!(MT(i)&&i.Ch.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.bh,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.zo.gi(t,n)}))];case 3:return null===(a=t.sent())?(0===i.Ch.length&&o.Xu(),[3,7]):(s=a.batchId,function(t,e){t.Ch.push(e);t=GT(t);t.Hu()&&t._h&&t.fh(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,UT(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return BT(i)&&HT(i),[2]}var e,n,r})})}function BT(t){return MT(t)&&!GT(t).zu()&&0<t.Ch.length}function HT(t){GT(t).start()}function WT(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=n,r?(e.Nh.delete(2),[4,AT(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Nh.add(2),[4,kT(e)]);case 3:t.sent(),e.kh.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function zT(n){var t,e,r,i=this;return n.Uh||(n.Uh=(t=n.Sh,e=n._s,r={wu:function(n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return n.xh.forEach(function(t,e){RT(n,t)}),[2]})})}.bind(null,n),Tu:function(e,n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return FT(e),LT(e)?(e.kh.Vh(n),xT(e)):e.kh.set("Unknown"),[2]})})}.bind(null,n),ah:jT.bind(null,n)},t.Ih(),new mT(e,t.Qu,t.credentials,t.Qt,r)),n.Fh.push(function(e){return wo(i,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e?(n.Uh.Yu(),LT(n)?xT(n):n.kh.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Uh.stop()];case 2:t.sent(),FT(n),t.label=3;case 3:return[2]}})})})),n.Uh}function GT(n){var t,e,r,i=this;return n.Qh||(n.Qh=(t=n.Sh,e=n._s,r={wu:function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return GT(e).Eh(),[2]})})}.bind(null,n),Tu:function(e,n){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return n&&GT(e)._h?[4,function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return w_(n=i.code)&&n!==py.ABORTED?(e=r.Ch.shift(),GT(r).Yu(),[4,VT(r,function(){return r.Dh.qh(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,qT(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return BT(e)&&HT(e),[2]}})})}.bind(null,n),wh:function(o){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){for(e=GT(o),n=0,r=o.Ch;n<r.length;n++)i=r[n],e.fh(i.mutations);return[2]})})}.bind(null,n),dh:function(r,i,o){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=r.Ch.shift(),n=Nw.from(e,i,o),[4,VT(r,function(){return r.Dh.Bh(n)})];case 1:return t.sent(),[4,qT(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Ih(),new _T(e,t.Qu,t.credentials,t.Qt,r)),n.Fh.push(function(e){return wo(i,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e?(n.Qh.Yu(),[4,qT(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Qh.stop()];case 3:t.sent(),0<n.Ch.length&&(Zv("RemoteStore","Stopping write stream with "+n.Ch.length+" pending writes"),n.Ch=[]),t.label=4;case 4:return[2]}})})})),n.Qh}function KT(){this.queries=new nE(Im,Em),this.onlineState="Unknown",this.Wh=new Set}var QT=function(){this.Kh=void 0,this.listeners=[]};function YT(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new QT),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.jh(n)];case 2:return o.Kh=t.sent(),[3,4];case 3:return o=t.sent(),o=$b(o,"Initialization of query '"+Tm(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(a),a.Gh(e.onlineState),i.Kh&&a.zh(i.Kh)&&JT(e),[2]}})})}function XT(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){return e=s,n=a.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.Hh(n))]:[2]})})}function JT(t){t.Wh.forEach(function(t){t.next()})}var $T=(oS.prototype.zh=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new B_(t.query,t.docs,t.Se,e,t.De,t.fromCache,t.Ce,!0)}var o=!1;return this.Yh?this.Zh(t)&&(this.Jh.next(t),o=!0):this.tl(t,this.onlineState)&&(this.el(t),o=!0),this.Xh=t,o},oS.prototype.onError=function(t){this.Jh.error(t)},oS.prototype.Gh=function(t){this.onlineState=t;var e=!1;return this.Xh&&!this.Yh&&this.tl(this.Xh,t)&&(this.el(this.Xh),e=!0),e},oS.prototype.tl=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.nl&&n||t.docs.et()&&"Offline"!==e)},oS.prototype.Zh=function(t){if(0<t.docChanges.length)return!0;var e=this.Xh&&this.Xh.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ce&&!e)&&!0===this.options.includeMetadataChanges},oS.prototype.el=function(t){t=B_.Ne(t.query,t.docs,t.De,t.fromCache),this.Yh=!0,this.Jh.next(t)},oS),ZT=(iS.prototype.sl=function(){return"metadata"in this.payload},iS),tS=(rS.prototype.Pc=function(t){return db(this.Qt,t)},rS.prototype.yc=function(t){return t.metadata.exists?bb(this.Qt,t.document,!1):new Sg(this.Pc(t.metadata.name),this.gc(t.metadata.readTime))},rS.prototype.gc=hb,rS),eS=(nS.prototype.rl=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},nS.prototype.ol=function(t){for(var e=new Map,n=new tS(this.Qt),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Pc(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||j_()).add(s);e.set(c,h)}}return e},nS.prototype.complete=function(){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return[4,function(l,f,p,d){return wo(this,void 0,void 0,function(){var n,r,i,o,e,s,a,u,c,h;return Eo(this,function(t){switch(t.label){case 0:for(n=l,r=j_(),i=R_,o=M_,e=0,s=p;e<s.length;e++)a=s[e],u=f.Pc(a.metadata.name),a.document&&(r=r.add(u)),i=i.zt(u,f.yc(a)),o=o.zt(u,f.gc(a.metadata.readTime));return c=n.Ec.Nr({Wr:!0}),[4,uI(n,bm(pm(Ly.ot("__bundle__/docs/"+d))))];case 1:return h=t.sent(),[2,n.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return aI(e,c,i,xy.min(),o).next(function(t){return c.apply(e),t}).next(function(t){return n._o.Yi(e,h.targetId).next(function(){return n._o.er(e,r,h.targetId)}).next(function(){return n.Tc.Zo(e,t)})})})]}})})}(this.bh,new tS(this.Qt),this.documents,this.il.id)];case 1:e=t.sent(),n=this.ol(this.documents),r=0,i=this.queries,t.label=2;case 2:return r<i.length?(i=i[r],[4,function(e,i,o){return void 0===o&&(o=j_()),wo(this,void 0,void 0,function(){var n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,uI(e,bm(Vw(i.bundledQuery)))];case 1:return n=t.sent(),[2,(r=e).persistence.runTransaction("Save named query","readwrite",function(t){var e=hb(i.readTime);if(0<=n.kt._(e))return r.wo.$s(t,i);e=n.Lt(hy.T,e);return r.fc=r.fc.zt(e.targetId,e),r._o.Hi(t,e).next(function(){return r._o.Yi(t,n.targetId)}).next(function(){return r._o.er(t,o,n.targetId)}).next(function(){return r.wo.$s(t,i)})})]}})})}(this.bh,i,n.get(i.name))]):[3,5];case 3:t.sent(),t.label=4;case 4:return r++,[3,2];case 5:return[2,(this.progress.taskState="Success",new KE(Object.assign({},this.progress),e))]}})})},nS);function nS(t,e,n){this.il=t,this.bh=e,this.Qt=n,this.queries=[],this.documents=[],this.progress=sS(t)}function rS(t){this.Qt=t}function iS(t,e){this.payload=t,this.byteLength=e}function oS(t,e,n){this.query=t,this.Jh=e,this.Yh=!1,this.Xh=null,this.onlineState="Unknown",this.options=n||{}}function sS(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var aS=function(t){this.key=t},uS=function(t){this.key=t},cS=(Object.defineProperty(dS.prototype,"_l",{get:function(){return this.cl},enumerable:!1,configurable:!0}),dS.prototype.fl=function(t,e){var s=this,a=e?e.dl:new q_,u=(e||this).ll,c=(e||this).De,h=u,l=!1,f=dm(this.query)&&u.size===this.query.limit?u.last():null,p=vm(this.query)&&u.size===this.query.limit?u.first():null;if(t.Xt(function(t,e){var n=u.get(t),r=(r=e instanceof Tg?e:null)&&(Sm(s.query,r)?r:null),i=!!n&&s.De.has(n.key),o=!!r&&(r.Vt||s.De.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.wl(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.hl(r,f)||p&&s.hl(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),dm(this.query)||vm(this.query))for(;h.size>this.query.limit;){var n=dm(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{ll:h,dl:a,lc:l,De:c}},dS.prototype.wl=function(t,e){return t.Vt&&e.hasCommittedMutations&&!e.Vt},dS.prototype.wi=function(t,e,n){var o=this,r=this.ll;this.ll=t.ll,this.De=t.De;var i=t.dl.ve();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.hl(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ry()}}var r,i}),this.El(n);var s=e?this.Tl():[],n=0===this.ul.size&&this.Be?1:0,e=n!==this.al;return this.al=n,0!==i.length||e?{snapshot:new B_(this.query,t.ll,r,i,t.De,0==n,e,!1),Il:s}:{Il:s}},dS.prototype.Gh=function(t){return this.Be&&"Offline"===t?(this.Be=!1,this.wi({ll:this.ll,dl:new q_,De:this.De,lc:!1},!1)):{Il:[]}},dS.prototype.ml=function(t){return!this.cl.has(t)&&!!this.ll.has(t)&&!this.ll.get(t).Vt},dS.prototype.El=function(t){var e=this;t&&(t.qe.forEach(function(t){return e.cl=e.cl.add(t)}),t.Ue.forEach(function(t){}),t.Qe.forEach(function(t){return e.cl=e.cl.delete(t)}),this.Be=t.Be)},dS.prototype.Tl=function(){var e=this;if(!this.Be)return[];var n=this.ul;this.ul=j_(),this.ll.forEach(function(t){e.ml(t.key)&&(e.ul=e.ul.add(t.key))});var r=[];return n.forEach(function(t){e.ul.has(t)||r.push(new uS(t))}),this.ul.forEach(function(t){n.has(t)||r.push(new aS(t))}),r},dS.prototype.Al=function(t){this.cl=t.Rc,this.ul=j_();t=this.fl(t.documents);return this.wi(t,!0)},dS.prototype.Rl=function(){return B_.Ne(this.query,this.ll,this.De,0===this.al)},dS),hS=function(t,e,n){this.query=t,this.targetId=e,this.view=n},lS=function(t){this.key=t,this.Pl=!1},fS=(Object.defineProperty(pS.prototype,"Ll",{get:function(){return!0===this.Ml},enumerable:!1,configurable:!0}),pS);function pS(t,e,n,r,i,o){this.bh=t,this.yl=e,this.gl=n,this.Vl=r,this.currentUser=i,this.pl=o,this.bl={},this.vl=new nE(Im,Em),this.Sl=new Map,this.Dl=[],this.Cl=new I_(jy.H),this.xl=new Map,this.Nl=new gI,this.Fl={},this.Ol=new Map,this.kl=pE.$i(),this.onlineState="Unknown",this.Ml=void 0}function dS(t,e){this.query=t,this.cl=e,this.al=null,this.Be=!1,this.ul=j_(),this.De=j_(),this.hl=Cm(t),this.ll=new V_(this.hl)}function vS(i,o,s,a){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return i.$l=function(t,e,n){return function(r,i,o,s){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return(e=i.view.fl(o)).lc?[4,hI(r.bh,i.query,!1).then(function(t){t=t.documents;return i.view.fl(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.Fe.get(i.targetId),n=i.view.wi(e,r.Ll,n),[2,(SS(r,i.targetId,n.Il),n.snapshot)]}})})}(i,t,e,n)},[4,hI(i.bh,o,!0)];case 1:return n=t.sent(),r=new cS(o,n.Rc),e=r.fl(n.documents),n=W_.$e(s,a&&"Offline"!==i.onlineState),n=r.wi(e,i.Ll,n),SS(i,s,n.Il),r=new hS(o,s,r),[2,(i.vl.set(o,r),i.Sl.has(s)?i.Sl.get(s).push(o):i.Sl.set(s,[o]),n.snapshot)]}})})}function yS(f,p,d){return wo(this,void 0,void 0,function(){var s,a;return Eo(this,function(t){switch(t.label){case 0:a=xS(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.bh,u=p,h=i,l=Dy.now(),o=u.reduce(function(t,e){return t.add(e.key)},j_()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Tc.Xo(a,o).next(function(t){c=t;for(var e,n=[],r=0,i=u;r<i.length;r++){var o=i[r],s=(e=o,s=c.get(o.key),function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Tg?e.field(o.field):void 0,s=Rm(o.transform,s||null);null!=s&&(n=(null==n?new mg:n).set(o.field,s))}return n?n.Pt():null}(e.fieldTransforms,s));null!=s&&n.push(new s_(o.key,s,function s(t){var a=[];return Gy(t.fields||{},function(t,e){var n=new Fy([t]);if(yg(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Qy(a)}(s.proto.mapValue),Jm.exists(!0)))}return h.zo.Ri(a,l,n,u)})}).then(function(t){var e=t.xs(c);return{batchId:t.batchId,ri:e}}))];case 2:return s=t.sent(),a.Vl.Ca(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.Fl[e.currentUser.A()])||new I_(ay)).zt(n,r),e.Fl[e.currentUser.A()]=i,[4,NS(a,s.ri)];case 3:return t.sent(),[4,qT(a.yl)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=$b(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}function gS(r,i){return wo(this,void 0,void 0,function(){var n,e;return Eo(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,sI(n.bh,i)];case 2:return e=t.sent(),i.Fe.forEach(function(t,e){e=n.xl.get(e);e&&(iy(t.qe.size+t.Ue.size+t.Qe.size<=1),0<t.qe.size?e.Pl=!0:0<t.Ue.size?iy(e.Pl):0<t.Qe.size&&(iy(e.Pl),e.Pl=!1))}),[4,NS(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,eE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function mS(t,n,e){var r,t=t;(t.Ll&&0===e||!t.Ll&&1===e)&&(r=[],t.vl.forEach(function(t,e){e=e.view.Gh(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Gh(i)&&(o=!0)}),o&&JT(t)}(t.gl,n),r.length&&t.bl.ah(r),t.onlineState=n,t.Ll&&t.Vl.Qa(n))}function _S(s,a,u){return wo(this,void 0,void 0,function(){var n,o;return Eo(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.bh,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.zo.Pi(e,r).next(function(t){return iy(null!==t),n=t.keys(),i.zo.Ci(e,t)}).next(function(){return i.zo.Fi(e)}).next(function(){return i.Tc.Xo(e,n)})}))];case 2:return o=t.sent(),ES(n,a,u),wS(n,a),n.Vl.Na(a,"rejected",u),[4,NS(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,eE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function bS(o,s){return wo(this,void 0,void 0,function(){var n,r,i;return Eo(this,function(t){switch(t.label){case 0:MT((n=o).yl)||Zv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.bh).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.zo.Vi(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Ol.get(r)||[]).push(s),n.Ol.set(r,i),[3,4]);case 3:return i=t.sent(),i=$b(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function wS(t,e){(t.Ol.get(e)||[]).forEach(function(t){t.resolve()}),t.Ol.delete(e)}function ES(t,e,n){var r=t,i=r.Fl[r.currentUser.A()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Fl[r.currentUser.A()]=i)}function IS(e,t,n){void 0===n&&(n=null),e.Vl.Ma(t);for(var r=0,i=e.Sl.get(t);r<i.length;r++){var o=i[r];e.vl.delete(o),n&&e.bl.Bl(o,n)}e.Sl.delete(t),e.Ll&&e.Nl.Oc(t).forEach(function(t){e.Nl.Oi(t)||TS(e,t)})}function TS(t,e){var n=t.Cl.get(e);null!==n&&(PT(t.yl,n),t.Cl=t.Cl.remove(e),t.xl.delete(n),CS(t))}function SS(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof aS?(t.Nl.nr(o.key,e),function(t,e){e=e.key;t.Cl.get(e)||(Zv("SyncEngine","New document in limbo: "+e),t.Dl.push(e),CS(t))}(t,o)):o instanceof uS?(Zv("SyncEngine","Document no longer in limbo: "+o.key),t.Nl.ir(o.key,e),t.Nl.Oi(o.key)||TS(t,o.key)):ry()}}function CS(t){for(;0<t.Dl.length&&t.Cl.size<t.pl;){var e=t.Dl.shift(),n=t.kl.next();t.xl.set(n,new lS(e)),t.Cl=t.Cl.zt(e,n),OT(t.yl,new Nm(bm(pm(e.path)),n,2,Sy.q))}}function NS(e,s,a){return wo(this,void 0,void 0,function(){var n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).vl.et()?[3,3]:(n.vl.forEach(function(t,e){o.push(n.$l(e,s,a).then(function(t){t&&(n.Ll&&n.Vl.Ba(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=YE.oc(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.bl.ah(r),[4,function(u,c){return wo(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return xb.forEach(c,function(e){return xb.forEach(e.ic,function(t){return r.persistence.Ti.nr(n,e.targetId,t)}).next(function(){return xb.forEach(e.rc,function(t){return r.persistence.Ti.ir(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Wb(e=t.sent()))throw e;return Zv("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.fc.get(o),a=s.kt,a=s.$t(a),r.fc=r.fc.zt(o,a));return[2]}})})}(n.bh,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function AS(i,o){return wo(this,void 0,void 0,function(){var n,r;return Eo(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Zv("SyncEngine","User change. New user:",o.A()),[4,rI(n.bh,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Ol.forEach(function(t){t.forEach(function(t){t.reject(new dy(py.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ol.clear(),n.Vl.Ua(o,r.mc,r.Ac),[4,NS(n,r.Ic)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function kS(a,u,c,h){return wo(this,void 0,void 0,function(){var o,s;return Eo(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).bh,n=u,i=(r=e).zo,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.yi(e,n).next(function(t){return t?r.Tc.Xo(e,t):xb.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,qT(o.yl)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(ES(o,u,h||null),wS(o,u),o.bh.zo.xi(u)):ry(),t.label=4;case 4:return[4,NS(o,s)];case 5:return t.sent(),[3,7];case 6:Zv("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function OS(h,l){return wo(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return Eo(this,function(t){switch(t.label){case 0:return DS(r=h),xS(r),!0!==l||!0===r.Ml?[3,3]:(e=r.Vl.va(),[4,PS(r,e.it())]);case 1:return i=t.sent(),r.Ml=!0,[4,WT(r.yl,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],OT(r.yl,a);return[3,7];case 3:return!1!==l||!1===r.Ml?[3,7]:(u=[],c=Promise.resolve(),r.Sl.forEach(function(t,e){r.Vl.La(e)?u.push(e):c=c.then(function(){return IS(r,e),cI(r.bh,e,!0)}),PT(r.yl,e)}),[4,c]);case 4:return t.sent(),[4,PS(r,u)];case 5:return t.sent(),(n=r).xl.forEach(function(t,e){PT(n.yl,e)}),n.Nl.kc(),n.xl=new Map,n.Cl=new I_(jy.H),r.Ml=!1,[4,WT(r.yl,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function PS(p,d){return wo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return Eo(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.Sl.get(s))&&0!==u.length?[4,uI(e.bh,bm(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.vl.get(l),[4,function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,hI((e=r).bh,i.query,!0)];case 1:return n=t.sent(),n=i.view.Al(n),[2,(e.Ll&&SS(e,i.targetId,n.Il),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,lI(e.bh,s)];case 8:return f=t.sent(),[4,uI(e.bh,f)];case 9:return a=t.sent(),[4,vS(e,RS(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.bl.ah(r),n)]}})})}function RS(t){return fm(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function DS(t){return t.yl.Dh.$h=gS.bind(null,t),t.yl.Dh.vn=function(t,e){var n=t;if((t=n.xl.get(e))&&t.Pl)return j_().add(t.key);var r=j_();if(!(e=n.Sl.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.vl.get(s),r=r.Pe(s.view._l);return r}.bind(null,t),t.yl.Dh.Lh=function(o,s,a){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return(e=o).Vl.Ba(s,"rejected",a),i=e.xl.get(s),(n=i&&i.key)?(r=(r=new I_(jy.H)).zt(n,new Sg(n,xy.min())),i=j_().add(n),i=new H_(xy.min(),new Map,new O_(ay),r,i),[4,gS(e,i)]):[3,2];case 1:return t.sent(),e.Cl=e.Cl.remove(n),e.xl.delete(s),CS(e),[3,4];case 2:return[4,cI(e.bh,s,!1).then(function(){return IS(e,s,a)}).catch(eE)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.bl.ah=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.queries.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].zh(s)&&(r=!0);a.Kh=s}}r&&JT(n)}.bind(null,t.gl),t.bl.Bl=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.gl),t}function xS(t){return t.yl.Dh.Bh=function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,iI(e.bh,o)];case 2:return r=t.sent(),ES(e,n,null),wS(e,n),e.Vl.Na(n,"acknowledged"),[4,NS(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,eE(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.yl.Dh.qh=_S.bind(null,t),t}function LS(t,e,n){var r=t;(function(f,p,d){return wo(this,void 0,void 0,function(){var a,u,c,h,l;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,14,,15]),[4,p.getMetadata()];case 1:return a=t.sent(),[4,(r=f.bh,o=r,s=hb((i=a).createTime),o.persistence.runTransaction("hasNewerBundle","readonly",function(t){return o.wo.ks(t,i.id)}).then(function(t){return!!t&&0<=t.createTime._(s)}))];case 2:return t.sent()?[4,p.close()]:[3,4];case 3:return[2,(t.sent(),void d.ql({taskState:"Success",documentsLoaded:a.totalDocuments,bytesLoaded:a.totalBytes,totalDocuments:a.totalDocuments,totalBytes:a.totalBytes}))];case 4:return d.Ul(sS(a)),u=new eS(a,f.bh,p.Qt),[4,p.Ql()];case 5:c=t.sent(),t.label=6;case 6:return c?[4,u.rl(c)]:[3,10];case 7:return(h=t.sent())&&d.Ul(h),[4,p.Ql()];case 8:c=t.sent(),t.label=9;case 9:return[3,6];case 10:return[4,u.complete()];case 11:return l=t.sent(),[4,NS(f,l.Go,void 0)];case 12:return t.sent(),[4,(r=f.bh,e=a,(n=r).persistence.runTransaction("Save bundle","readwrite",function(t){return n.wo.Ms(t,e)}))];case 13:return t.sent(),d.ql(l.progress),[3,15];case 14:return ey("SyncEngine","Loading bundle failed with "+(l=t.sent())),d.Kl(l),[3,15];case 15:return[2]}var e,n,r,i,o,s})})})(r,e,n).then(function(){r.Vl.Wa()})}var MS,FS,jS=(zS.prototype.initialize=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.Qt=fT(e.yu.t),this.Vl=this.Wl(e),this.persistence=this.jl(e),[4,this.persistence.start()];case 1:return t.sent(),this.Gl=this.zl(e),this.bh=this.Hl(e),[2]}})})},zS.prototype.zl=function(t){return null},zS.prototype.Hl=function(t){return nI(this.persistence,new XE,t.Jl,this.Qt)},zS.prototype.jl=function(t){return new II(SI.ia,this.Qt)},zS.prototype.Wl=function(t){return new GI},zS.prototype.terminate=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.Gl&&this.Gl.stop(),[4,this.Vl.Mo()];case 1:return t.sent(),[4,this.persistence.Mo()];case 2:return t.sent(),[2]}})})},zS),US=(_o(WS,FS=jS),WS.prototype.initialize=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,FS.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,pI(this.bh)];case 2:return t.sent(),[4,this.Yl.initialize(this,e)];case 3:return t.sent(),[4,xS(this.Yl._a)];case 4:return t.sent(),[4,qT(this.Yl.yl)];case 5:return t.sent(),[2]}})})},WS.prototype.Hl=function(t){return nI(this.persistence,new XE,t.Jl,this.Qt)},WS.prototype.zl=function(t){var e=this.persistence.Ti.lr;return new EE(e,t._s)},WS.prototype.jl=function(t){var e=GE(t.yu.t,t.yu.persistenceKey),n=void 0!==this.cacheSizeBytes?Zw.Ys(this.cacheSizeBytes):Zw.ti;return new BE(this.synchronizeTabs,e,t.clientId,n,t._s,hT(),lT(),this.Qt,this.Vl,!!this.forceOwnership)},WS.prototype.Wl=function(t){return new GI},WS),VS=(_o(HS,MS=US),HS.prototype.initialize=function(r){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:return[4,MS.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Yl._a,this.Vl instanceof zI?(this.Vl._a={eu:kS.bind(null,e),nu:function(i,o,s,a){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return(e=i).Ml?(Zv("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Sl.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,fI(e.bh)];case 3:return n=t.sent(),r=H_.Le(o,"current"===s),[4,NS(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,cI(e.bh,o,!0)];case 6:return t.sent(),IS(e,o,a),[3,8];case 7:ry(),t.label=8;case 8:return[2]}})})}.bind(null,e),su:function(c,h,l){return wo(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return Eo(this,function(t){switch(t.label){case 0:if(!(n=DS(c)).Ml)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Sl.has(r)?(Zv("SyncEngine","Adding an already active target "+r),[3,5]):[4,lI(n.bh,r)]):[3,6];case 2:return i=t.sent(),[4,uI(n.bh,i)];case 3:return o=t.sent(),[4,vS(n,RS(i),o.targetId,!1)];case 4:t.sent(),OT(n.yl,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return Eo(this,function(t){switch(t.label){case 0:return n.Sl.has(e)?[4,cI(n.bh,e,!1).then(function(){PT(n.yl,e),IS(n,e)}).catch(eE)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),Uo:function(t){return t.bh.persistence.Uo()}.bind(null,e),tu:function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){return[2,fI((e=n).bh).then(function(t){return NS(e,t)})]})})}.bind(null,e)},[4,this.Vl.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Ro(function(e){return wo(n,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,OS(this.Yl._a,e)];case 1:return t.sent(),this.Gl&&(e&&!this.Gl.Er?this.Gl.start(this.bh):e||this.Gl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},HS.prototype.Wl=function(t){var e=hT();if(!zI.Kn(e))throw new dy(py.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=GE(t.yu.t,t.yu.persistenceKey);return new zI(e,t._s,n,t.clientId,t.Jl)},HS),qS=(BS.prototype.initialize=function(n,r){return wo(this,void 0,void 0,function(){var e=this;return Eo(this,function(t){switch(t.label){case 0:return this.bh?[3,2]:(this.bh=n.bh,this.Vl=n.Vl,this.Sh=this.Xl(r),this.yl=this.Zl(r),this.gl=this.t_(r),this._a=this.e_(r,!n.synchronizeTabs),this.Vl.fa=function(t){return mS(e._a,t,1)},this.yl.Dh.n_=AS.bind(null,this._a),[4,WT(this.yl,this._a.Ll)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},BS.prototype.t_=function(t){return new KT},BS.prototype.Xl=function(t){var e=fT(t.yu.t),n=(n=t.yu,new JI(n));return t=t.credentials,new bT(t,n,e)},BS.prototype.Zl=function(t){var e=this,n=this.bh,r=this.Sh,i=t._s,o=function(t){return mS(e._a,t,0)},t=new(QI.Kn()?QI:KI);return new pT(n,r,i,o,t)},BS.prototype.e_=function(t,e){return function(t,e,n,r,i,o,s){o=new fS(t,e,n,r,i,o);return s&&(o.Ml=!0),o}(this.bh,this.yl,this.gl,this.Vl,t.Jl,t.pl,e)},BS.prototype.terminate=function(){return function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=n,Zv("RemoteStore","RemoteStore shutting down."),e.Nh.add(5),[4,kT(e)];case 1:return t.sent(),e.Oh.Mo(),e.kh.set("Unknown"),[2]}})})}(this.yl)},BS);function BS(){}function HS(t,e){var n=this;return(n=MS.call(this,t,e,!1)||this).Yl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function WS(t,e,n){var r=this;return(r=FS.call(this)||this).Yl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function zS(){this.synchronizeTabs=!1}function GS(n,r){void 0===r&&(r=10240);var i=0;return{read:function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){return i<n.byteLength?(e={value:n.slice(i,i+r),done:!1},[2,(i+=r,e)]):[2,{done:!0}]})})},cancel:function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return[2]})})},releaseLock:function(){}}}var KS=(tC.prototype.next=function(t){this.observer.next&&this.s_(this.observer.next,t)},tC.prototype.error=function(t){this.observer.error?this.s_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},tC.prototype.i_=function(){this.muted=!0},tC.prototype.s_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},tC),QS=(ZS.prototype.close=function(){return this.r_.cancel()},ZS.prototype.getMetadata=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return[2,this.metadata.promise]})})},ZS.prototype.Ql=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.c_())]}})})},ZS.prototype.c_=function(){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,this.a_()];case 1:return null===(e=t.sent())?[2,null]:(r=this.o_.decode(e),n=Number(r),isNaN(n)&&this.u_("length string ("+r+") is not valid number"),[4,this.h_(n)]);case 2:return r=t.sent(),[2,new ZT(JSON.parse(r),e.length+n)]}})})},ZS.prototype.l_=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},ZS.prototype.a_=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return this.l_()<0?[4,this.__()]:[3,3];case 1:if(t.sent())return[3,3];t.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.l_())<0&&this.u_("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),n)])}})})},ZS.prototype.h_=function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return this.buffer.length<n?[4,this.__()]:[3,3];case 1:t.sent()&&this.u_("Reached the end of bundle when more is expected."),t.label=2;case 2:return[3,0];case 3:return e=this.o_.decode(this.buffer.slice(0,n)),[2,(this.buffer=this.buffer.slice(n),e)]}})})},ZS.prototype.u_=function(t){throw this.r_.cancel(),new Error("Invalid bundle format: "+t)},ZS.prototype.__=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,this.r_.read()];case 1:return(e=t.sent()).done||((n=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n),[2,e.done]}})})},ZS),YS=($S.prototype.isEqual=function(t){return this.f_.isEqual(t.f_)},$S),XS=function(t){this._methodName=t},JS=function(t){this.d_=t};function $S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new dy(py.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.f_=new Fy(t)}function ZS(t,e){var n=this;this.r_=t,this.Qt=e,this.metadata=new Db,this.buffer=new Uint8Array,this.o_=new TextDecoder("utf-8"),this.c_().then(function(t){t&&t.sl()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}function tC(t){this.observer=t,this.muted=!1}function eC(t,e,n){if(!n)throw new dy(py.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function nC(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dy(py.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function rC(t,e,n,r){if(!0===e&&!0===r)throw new dy(py.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function iC(t){if(!jy.wt(t))throw new dy(py.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function oC(t){if(jy.wt(t))throw new dy(py.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function sC(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":ry();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function aC(t,e){if("_delegate"in t&&(t=t.d_),t instanceof e)return t;if(e.name===t.constructor.name)throw new dy(py.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=sC(t);throw new dy(py.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function uC(t,e){if(e<=0)throw new dy(py.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var cC,hC=(bC.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},bC),lC=new Map,fC=(Object.defineProperty(_C.prototype,"app",{get:function(){if(!this.A_)throw new dy(py.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(_C.prototype,"R_",{get:function(){return this.T_},enumerable:!1,configurable:!0}),Object.defineProperty(_C.prototype,"P_",{get:function(){return void 0!==this.y_},enumerable:!1,configurable:!0}),_C.prototype.g_=function(t){if(this.T_)throw new dy(py.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.E_=new hC(t),void 0!==t.credentials&&(this.m_=function(t){if(!t)return new wy;switch(t.type){case"gapi":var e=t.client;return iy(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Ty(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new dy(py.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},_C.prototype.V_=function(){return this.E_},_C.prototype.p_=function(){return this.T_=!0,this.E_},_C.prototype._delete=function(){return this.y_||(this.y_=this.b_()),this.y_},_C.prototype.toJSON=function(){return{app:this.A_,t:this.I_,settings:this.E_}},_C.prototype.b_=function(){return(t=lC.get(this))&&(Zv("ComponentProvider","Removing Datastore"),lC.delete(this),t.terminate()),Promise.resolve();var t},_C),pC=(Object.defineProperty(mC.prototype,"D_",{get:function(){return this.S_.path},enumerable:!1,configurable:!0}),Object.defineProperty(mC.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(mC.prototype,"path",{get:function(){return this.S_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(mC.prototype,"parent",{get:function(){return new vC(this.firestore,this.v_,this.S_.path.X())},enumerable:!1,configurable:!0}),mC.prototype.withConverter=function(t){return new mC(this.firestore,t,this.S_)},mC),dC=(gC.prototype.withConverter=function(t){return new gC(this.firestore,t,this.C_)},gC),vC=(_o(yC,cC=dC),Object.defineProperty(yC.prototype,"id",{get:function(){return this.C_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(yC.prototype,"path",{get:function(){return this.C_.path.rt()},enumerable:!1,configurable:!0}),Object.defineProperty(yC.prototype,"parent",{get:function(){var t=this.D_.X();return t.et()?null:new pC(this.firestore,null,new jy(t))},enumerable:!1,configurable:!0}),yC.prototype.withConverter=function(t){return new yC(this.firestore,t,this.D_)},yC);function yC(t,e,n){var r=this;return(r=cC.call(this,t,e,pm(n))||this).firestore=t,r.D_=n,r.type="collection",r}function gC(t,e,n){this.v_=e,this.C_=n,this.type="query",this.firestore=t}function mC(t,e,n){this.v_=e,this.S_=n,this.type="document",this.firestore=t}function _C(t,e){this.w_="(lite)",this.E_=new hC({}),this.T_=!1,t instanceof Yv?(this.I_=t,this.m_=new wy):(this.A_=t,this.I_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new dy(py.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yv(t.options.projectId)}(t),this.m_=new Ey(e))}function bC(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new dy(py.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new dy(py.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,rC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function wC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof JS&&(t=t.d_),eC("collection","path",e),t instanceof fC)return oC(n=Ly.ot.apply(Ly,Co([e],r))),new vC(t,null,n);if(!(t instanceof pC||t instanceof vC))throw new dy(py.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return oC(n=Ly.ot.apply(Ly,Co([t.path],r)).child(Ly.ot(e))),new vC(t.firestore,null,n)}function EC(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof JS&&(t=t.d_),1===arguments.length&&(e=oy.u()),eC("doc","path",e),t instanceof fC)return iC(n=Ly.ot.apply(Ly,Co([e],r))),new pC(t,null,new jy(n));if(!(t instanceof pC||t instanceof vC))throw new dy(py.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return iC(n=t.D_.child(Ly.ot.apply(Ly,Co([e],r)))),new pC(t.firestore,t instanceof vC?t.v_:null,new jy(n))}function IC(t,e){return t instanceof JS&&(t=t.d_),e instanceof JS&&(e=e.d_),(t instanceof pC||t instanceof vC)&&(e instanceof pC||e instanceof vC)&&t.firestore===e.firestore&&t.path===e.path&&t.v_===e.v_}function TC(t,e){return t instanceof JS&&(t=t.d_),e instanceof JS&&(e=e.d_),t instanceof dC&&e instanceof dC&&t.firestore===e.firestore&&Em(t.C_,e.C_)&&t.v_===e.v_}var SC=(Object.defineProperty(PC.prototype,"latitude",{get:function(){return this.x_},enumerable:!1,configurable:!0}),Object.defineProperty(PC.prototype,"longitude",{get:function(){return this.N_},enumerable:!1,configurable:!0}),PC.prototype.isEqual=function(t){return this.x_===t.x_&&this.N_===t.N_},PC.prototype.toJSON=function(){return{latitude:this.x_,longitude:this.N_}},PC.prototype.U=function(t){return ay(this.x_,t.x_)||ay(this.N_,t.N_)},PC),CC=/^__.*__$/,NC=(OC.prototype.F_=function(t,e){return null!==this.Gt?new s_(t,this.data,this.Gt,e,this.fieldTransforms):new o_(t,this.data,e,this.fieldTransforms)},OC),AC=(kC.prototype.F_=function(t,e){return new s_(t,this.data,this.Gt,e,this.fieldTransforms)},kC);function kC(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}function OC(t,e,n){this.data=t,this.Gt=e,this.fieldTransforms=n}function PC(t,e){if(!isFinite(t)||t<-90||90<t)throw new dy(py.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new dy(py.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.x_=t,this.N_=e}function RC(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw ry()}}var DC=(Object.defineProperty(MC.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(MC.prototype,"k_",{get:function(){return this.settings.k_},enumerable:!1,configurable:!0}),MC.prototype.M_=function(t){return new MC(Object.assign(Object.assign({},this.settings),t),this.t,this.Qt,this.ignoreUndefinedProperties,this.fieldTransforms,this.Gt)},MC.prototype.L_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.M_({path:e,B_:!1});return e.q_(t),e},MC.prototype.U_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.M_({path:t,B_:!1});return t.O_(),t},MC.prototype.Q_=function(t){return this.M_({path:void 0,B_:!0})},MC.prototype.K_=function(t){return lN(t,this.settings.methodName,this.settings.W_||!1,this.path,this.settings.j_)},MC.prototype.contains=function(e){return void 0!==this.Gt.find(function(t){return e.nt(t)})||void 0!==this.fieldTransforms.find(function(t){return e.nt(t.field)})},MC.prototype.O_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.q_(this.path.get(t))},MC.prototype.q_=function(t){if(0===t.length)throw this.K_("Document fields must not be empty");if(RC(this.k_)&&CC.test(t))throw this.K_('Document fields cannot begin and end with "__"')},MC),xC=(LC.prototype.G_=function(t,e,n,r){return void 0===r&&(r=!1),new DC({k_:t,methodName:e,j_:n,path:Fy.ct(),B_:!1,W_:r},this.t,this.Qt,this.ignoreUndefinedProperties)},LC);function LC(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.Qt=n||fT(t)}function MC(t,e,n,r,i,o){this.settings=t,this.t=e,this.Qt=n,this.ignoreUndefinedProperties=r,void 0===i&&this.O_(),this.fieldTransforms=i||[],this.Gt=o||[]}function FC(t){var e=t.p_(),n=fT(t.I_);return new xC(t.I_,!!e.ignoreUndefinedProperties,n)}function jC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.G_(o.merge||o.mergeFields?2:0,e,n,i);aN("Data must be an object, but it was:",s,r);var a,u,r=oN(r,s);if(o.merge)a=new Qy(s.Gt),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=uN(e,l[h],n);if(!s.contains(f))throw new dy(py.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");fN(c,f)||c.push(f)}a=new Qy(c),u=s.fieldTransforms.filter(function(t){return a.Tt(t.field)})}else a=null,u=s.fieldTransforms;return new NC(new gg(r),a,u)}var UC,VC=(_o(qC,UC=XS),qC.prototype.z_=function(t){if(2!==t.k_)throw 1===t.k_?t.K_(this._methodName+"() can only appear at the top level of your update data"):t.K_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.Gt.push(t.path),null},qC.prototype.isEqual=function(t){return t instanceof qC},qC);function qC(){return null!==UC&&UC.apply(this,arguments)||this}function BC(t,e,n){return new DC({k_:3,j_:e.settings.j_,methodName:t._methodName,B_:n},e.t,e.Qt,e.ignoreUndefinedProperties)}var HC,WC,zC,GC,KC=(_o(tN,GC=XS),tN.prototype.z_=function(t){return new Xm(t.path,new Lm)},tN.prototype.isEqual=function(t){return t instanceof tN},tN),QC=(_o(ZC,zC=XS),ZC.prototype.z_=function(t){var e=BC(this,t,!0),n=this.H_.map(function(t){return iN(t,e)}),n=new Mm(n);return new Xm(t.path,n)},ZC.prototype.isEqual=function(t){return this===t},ZC),YC=(_o($C,WC=XS),$C.prototype.z_=function(t){var e=BC(this,t,!0),n=this.H_.map(function(t){return iN(t,e)}),n=new qm(n);return new Xm(t.path,n)},$C.prototype.isEqual=function(t){return this===t},$C),XC=(_o(JC,HC=XS),JC.prototype.z_=function(t){var e=new zm(t.Qt,Pm(t.Qt,this.J_));return new Xm(t.path,e)},JC.prototype.isEqual=function(t){return this===t},JC);function JC(t,e){var n=this;return(n=HC.call(this,t)||this).J_=e,n}function $C(t,e){var n=this;return(n=WC.call(this,t)||this).H_=e,n}function ZC(t,e){var n=this;return(n=zC.call(this,t)||this).H_=e,n}function tN(){return null!==GC&&GC.apply(this,arguments)||this}function eN(t,r,i,e){var o=t.G_(1,r,i);aN("Data must be an object, but it was:",o,e);var s=[],a=new mg;Gy(e,function(t,e){var n=hN(r,t,i);e instanceof JS&&(e=e.d_);t=o.U_(n);e instanceof VC?s.push(n):null!=(t=iN(e,t))&&(s.push(n),a.set(n,t))});e=new Qy(s);return new AC(a.Pt(),e,o.fieldTransforms)}function nN(t,e,n,r,i,o){var s=t.G_(1,e,n),a=[uN(e,r,n)],u=[i];if(o.length%2!=0)throw new dy(py.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(uN(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new mg,v=a.length-1;0<=v;--v){fN(p,a[v])||(h=a[v],(l=u[v])instanceof JS&&(l=l.d_),f=s.U_(h),l instanceof VC?p.push(h):null!=(f=iN(l,f))&&(p.push(h),d.set(h,f)))}i=new Qy(p);return new AC(d.Pt(),i,s.fieldTransforms)}function rN(t,e,n,r){return void 0===r&&(r=!1),iN(n,t.G_(r?4:3,e))}function iN(s,t){if(s instanceof JS&&(s=s.d_),sN(s))return aN("Unsupported field value:",t,s),oN(s,t);if(s instanceof XS)return function(t,e){if(!RC(e.k_))throw e.K_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.K_(t._methodName+"() is not currently supported inside arrays");t=t.z_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(void 0===s&&t.ignoreUndefinedProperties)return null;if(t.path&&t.Gt.push(t.path),s instanceof Array){if(t.settings.B_&&4!==t.k_)throw t.K_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=iN(i[r],t.Q_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof JS&&(t=t.d_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Pm(e.Qt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Dy.fromDate(t);return{timestampValue:ub(e.Qt,n)}}if(t instanceof Dy)return n=new Dy(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:ub(e.Qt,n)};if(t instanceof SC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof vy)return{bytesValue:cb(e.Qt,t.I)};if(t instanceof pC){n=e.t;var r=t.firestore.I_;if(!r.isEqual(n))throw e.K_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:lb(t.firestore.I_||e.t,t.S_.path)}}throw e.K_("Unsupported field value: "+sC(t))}(s,t)}function oN(t,n){var r={};return Ky(t)?n.path&&0<n.path.length&&n.Gt.push(n.path):Gy(t,function(t,e){e=iN(e,n.L_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function sN(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Dy||t instanceof SC||t instanceof vy||t instanceof pC||t instanceof XS)}function aN(t,e,n){if(!sN(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=sC(n);throw"an object"===n?e.K_(t+" a custom object"):e.K_(t+" "+n)}var r}function uN(t,e,n){if(e instanceof JS&&(e=e.d_),e instanceof YS)return e.f_;if("string"==typeof e)return hN(t,e);throw lN("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var cN=new RegExp("[~\\*/\\[\\]]");function hN(e,n,r){if(0<=n.search(cN))throw lN("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(YS.bind.apply(YS,Co([void 0],n.split("."))))).f_}catch(t){throw lN("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function lN(t,e,n,r,i){var o=r&&!r.et(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new dy(py.INVALID_ARGUMENT,(e+=". ")+t+n)}function fN(t,e){return t.some(function(t){return t.isEqual(e)})}var pN=(mN.prototype.ef=function(r){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:if(this.nf(),0<this.mutations.length)throw new dy(py.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return wo(this,void 0,void 0,function(){var n,e,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=gb((n=s).Qt)+"/documents",r={documents:a.map(function(t){return pb(n.Qt,t)})},[4,n.Du("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.Qt,"found"in(t=t)?function(t,e){iy(!!e.found),e.found.name,e.found.updateTime;var n=db(t,e.found.name),t=hb(e.found.updateTime),e=new gg({mapValue:{fields:e.found.fields}});return new Tg(n,t,e,{})}(e,t):"missing"in t?function(t,e){iy(!!e.missing),iy(!!e.readTime);t=db(t,e.missing),e=hb(e.readTime);return new Sg(t,e)}(e,t):ry());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());iy(!!t),o.push(t)}),o)]}})})}(this.Sh,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof Sg||t instanceof Tg?n.sf(t):ry()}),e)]}})})},mN.prototype.set=function(t,e){this.write(e.F_(t,this.jt(t))),this.tf.add(t.toString())},mN.prototype.update=function(t,e){try{this.write(e.F_(t,this.rf(t)))}catch(t){this.Z_=t}this.tf.add(t.toString())},mN.prototype.delete=function(t){this.write(new g_(t,this.jt(t))),this.tf.add(t.toString())},mN.prototype.commit=function(){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:if(this.nf(),this.Z_)throw this.Z_;return e=this.Y_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=jy._t(e);n.mutations.push(new m_(e,n.jt(e)))}),[4,function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return n=gb((e=i).Qt)+"/documents",r={writes:o.map(function(t){return wb(e.Qt,t)})},[4,e.pu("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Sh,this.mutations)];case 1:return t.sent(),this.X_=!0,[2]}})})},mN.prototype.sf=function(t){var e;if(t instanceof Tg)e=t.version;else{if(!(t instanceof Sg))throw ry();e=xy.min()}var n=this.Y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new dy(py.ABORTED,"Document version changed between two reads.")}else this.Y_.set(t.key.toString(),e)},mN.prototype.jt=function(t){var e=this.Y_.get(t.toString());return!this.tf.has(t.toString())&&e?Jm.updateTime(e):Jm.Kt()},mN.prototype.rf=function(t){var e=this.Y_.get(t.toString());if(this.tf.has(t.toString())||!e)return Jm.exists(!0);if(e.isEqual(xy.min()))throw new dy(py.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Jm.updateTime(e)},mN.prototype.write=function(t){this.nf(),this.mutations.push(t)},mN.prototype.nf=function(){},mN),dN=(gN.prototype.run=function(){this.af()},gN.prototype.af=function(){var t=this;this.Gu.$u(function(){return wo(t,void 0,void 0,function(){var e,n,r=this;return Eo(this,function(t){return e=new pN(this.Sh),(n=this.uf(e))&&n.then(function(t){r._s.Ps(function(){return e.commit().then(function(){r.Es.resolve(t)}).catch(function(t){r.hf(t)})})}).catch(function(t){r.hf(t)}),[2]})})})},gN.prototype.uf=function(t){try{var e=this.updateFunction(t);return!ng(e)&&e.catch&&e.then?e:(this.Es.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Es.reject(t),null}},gN.prototype.hf=function(t){var e=this;0<this.cf&&this.lf(t)?(--this.cf,this._s.Ps(function(){return e.af(),Promise.resolve()})):this.Es.reject(t)},gN.prototype.lf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!w_(t)},gN),vN=(yN.prototype.getConfiguration=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.C.promise];case 1:return[2,(t.sent(),{_s:this._s,yu:this.yu,clientId:this.clientId,credentials:this.credentials,Jl:this.user,pl:100})]}})})},yN.prototype.ff=function(t){var e=this;this._f=t,this.C.promise.then(function(){return e._f(e.user)})},yN.prototype.df=function(){if(this._s.wf)throw new dy(py.FAILED_PRECONDITION,"The client has already been terminated.")},yN.prototype.terminate=function(){var t=this;this._s.Ef();var n=new Db;return this._s.Tf(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.If?[4,this.If.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.mf?[4,this.mf.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.S(),n.resolve(),[3,6];case 5:return e=t.sent(),e=$b(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},yN);function yN(t,e,n){var r=this;this.credentials=t,this._s=e,this.yu=n,this.user=yy.UNAUTHENTICATED,this.clientId=oy.u(),this._f=function(){},this.C=new Db,this.credentials.v(function(t){Zv("FirestoreClient","Received user=",t.uid),r.user=t,r._f(t),r.C.resolve()})}function gN(t,e,n,r){this._s=t,this.Sh=e,this.updateFunction=n,this.Es=r,this.cf=5,this.Gu=new gT(this._s,"transaction_retry")}function mN(t){this.Sh=t,this.Y_=new Map,this.mutations=[],this.X_=!1,this.Z_=null,this.tf=new Set}function _N(i,o){return wo(this,void 0,void 0,function(){var e,n,r=this;return Eo(this,function(t){switch(t.label){case 0:return i._s.Af(),Zv("FirestoreClient","Initializing OfflineComponentProvider"),[4,i.getConfiguration()];case 1:return e=t.sent(),[4,o.initialize(e)];case 2:return t.sent(),n=e.Jl,i.ff(function(e){n.isEqual(e)||(n=e,i._s.po(function(){return wo(r,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,rI(o.bh,e)];case 1:return t.sent(),[2]}})})}))}),o.persistence.Po(function(){return i.terminate()}),i.mf=o,[2]}})})}function bN(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return r._s.Af(),[4,wN(r)];case 1:return e=t.sent(),Zv("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.ff(function(t){return r._s.po(function(){return function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return(e=r)._s.Af(),Zv("RemoteStore","RemoteStore received new credentials"),n=MT(e),e.Nh.add(3),[4,kT(e)];case 1:return t.sent(),n&&e.kh.set("Unknown"),[4,e.Dh.n_(i)];case 2:return t.sent(),e.Nh.delete(3),[4,AT(e)];case 3:return t.sent(),[2]}})})}(i.yl,t)})}),r.If=i,[2]}})})}function wN(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e.mf?[3,2]:(Zv("FirestoreClient","Using default OfflineComponentProvider"),[4,_N(e,new jS)]);case 1:t.sent(),t.label=2;case 2:return[2,e.mf]}})})}function EN(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e.If?[3,2]:(Zv("FirestoreClient","Using default OnlineComponentProvider"),[4,bN(e,new qS)]);case 1:t.sent(),t.label=2;case 2:return[2,e.If]}})})}function IN(t){return wN(t).then(function(t){return t.persistence})}function TN(t){return wN(t).then(function(t){return t.bh})}function SN(t){return EN(t).then(function(t){return t.yl})}function CN(t){return EN(t).then(function(t){return t._a})}function NN(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,EN(r)];case 1:return e=t.sent(),[2,((n=e.gl).jh=function(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=DS(s),(o=e.vl.get(a))?(n=o.targetId,e.Vl.Oa(n),r=o.view.Rl(),[3,4]):[3,1];case 1:return[4,uI(e.bh,bm(a))];case 2:return i=t.sent(),o=e.Vl.Oa(i.targetId),n=i.targetId,[4,vS(e,a,n,"current"===o)];case 3:r=t.sent(),e.Ll&&OT(e.yl,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e._a),n.Hh=function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return n=(e=i).vl.get(o),1<(r=e.Sl.get(n.targetId)).length?[2,(e.Sl.set(n.targetId,r.filter(function(t){return!Em(t,o)})),void e.vl.delete(o))]:e.Ll?(e.Vl.Ma(n.targetId),e.Vl.Da(n.targetId)?[3,2]:[4,cI(e.bh,n.targetId,!1).then(function(){e.Vl.$a(n.targetId),PT(e.yl,n.targetId),IS(e,n.targetId)}).catch(eE)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return IS(e,n.targetId),[4,cI(e.bh,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e._a),n)]}})})}function AN(n,r,i){var t=this;void 0===i&&(i={});var o=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new KS({next:function(t){r.Ps(function(){return XT(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new dy(py.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new dy(py.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new $T(pm(i.path),t,{includeMetadataChanges:!0,nl:!0});return YT(n,a)},[4,NN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n._s,r,i,o])]}})})}),o.promise}function kN(n,r,i){var t=this;void 0===i&&(i={});var o=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new KS({next:function(t){n.Ps(function(){return XT(e,s)}),t.fromCache&&"server"===r.source?i.reject(new dy(py.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new $T(t,o,{includeMetadataChanges:!0,nl:!0});return YT(e,s)},[4,NN(n)];case 1:return[2,e.apply(void 0,[t.sent(),n._s,r,i,o])]}})})}),o.promise}var ON=(Object.defineProperty(PN.prototype,"wf",{get:function(){return this.yf},enumerable:!1,configurable:!0}),PN.prototype.Ps=function(t){this.enqueue(t)},PN.prototype.Tf=function(t){this.Sf(),this.Df(t)},PN.prototype.Ef=function(){var t;this.yf||(this.yf=!0,(t=lT())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.vf))},PN.prototype.enqueue=function(t){return this.Sf(),this.yf?new Promise(function(t){}):this.Df(t)},PN.prototype.po=function(t){var e=this;this.Ps(function(){return e.Pf.push(t),e.Cf()})},PN.prototype.Cf=function(){return wo(this,void 0,void 0,function(){var e,n=this;return Eo(this,function(t){switch(t.label){case 0:if(0===this.Pf.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Pf[0]()];case 2:return t.sent(),this.Pf.shift(),this.Gu.reset(),[3,4];case 3:if(!Wb(e=t.sent()))throw e;return Zv("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Pf.length&&this.Gu.$u(function(){return n.Cf()}),t.label=5;case 5:return[2]}})})},PN.prototype.Df=function(t){var r=this,e=this.Rf.then(function(){return r.pf=!0,t().catch(function(t){throw r.Vf=t,r.pf=!1,ty("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.pf=!1,t})});return this.Rf=e},PN.prototype.Tr=function(t,e,n){var r=this;this.Sf(),-1<this.bf.indexOf(t)&&(e=0);n=Xb.Ts(this,t,e,n,function(t){return r.xf(t)});return this.gf.push(n),n},PN.prototype.Sf=function(){this.Vf&&ry()},PN.prototype.Af=function(){},PN.prototype.Nf=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,e=this.Rf];case 1:t.sent(),t.label=2;case 2:if(e!==this.Rf)return[3,0];t.label=3;case 3:return[2]}})})},PN.prototype.Ff=function(t){for(var e=0,n=this.gf;e<n.length;e++)if(n[e].fs===t)return!0;return!1},PN.prototype.Of=function(r){var i=this;return this.Nf().then(function(){i.gf.sort(function(t,e){return t.ds-e.ds});for(var t=0,e=i.gf;t<e.length;t++){var n=e[t];if(n.Rs(),"all"!==r&&n.fs===r)break}return i.Nf()})},PN.prototype.kf=function(t){this.bf.push(t)},PN.prototype.xf=function(t){t=this.gf.indexOf(t);this.gf.splice(t,1)},PN);function PN(){var e=this;this.Rf=Promise.resolve(),this.Pf=[],this.yf=!1,this.gf=[],this.Vf=null,this.pf=!1,this.bf=[],this.Gu=new gT(this,"async_queue_retry"),this.vf=function(){var t=lT();t&&Zv("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Gu.qu()};var t=lT();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.vf)}function RN(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var DN,xN=(FN.prototype.onProgress=function(t,e,n){this.Mf={next:t,error:e,complete:n}},FN.prototype.catch=function(t){return this.Lf.promise.catch(t)},FN.prototype.then=function(t,e){return this.Lf.promise.then(t,e)},FN.prototype.ql=function(t){this.Ul(t),this.Mf.complete&&this.Mf.complete(),this.Lf.resolve(t)},FN.prototype.Kl=function(t){this.$f.taskState="Error",this.Mf.next&&this.Mf.next(this.$f),this.Mf.error&&this.Mf.error(t),this.Lf.reject(t)},FN.prototype.Ul=function(t){this.$f=t,this.Mf.next&&this.Mf.next(t)},FN),LN=(_o(MN,DN=fC),MN.prototype.b_=function(){return this.qf||UN(this),this.qf.terminate()},MN);function MN(t,e){var n=this;return(n=DN.call(this,t,e)||this).Bf=new ON,n.w_="name"in t?t.name:"[DEFAULT]",n}function FN(){this.Mf={},this.Lf=new Db,this.$f={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function jN(t){return t.qf||UN(t),t.qf.df(),t.qf}function UN(t){var e,n,r=t.p_(),r=(e=t.I_,n=t.w_,new Qv(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.qf=new vN(t.m_,t.Bf,r)}function VN(n,r,i){var t=this,o=new Db;return n._s.enqueue(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,_N(n,i)];case 1:return t.sent(),[4,bN(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===py.FAILED_PRECONDITION||t.code===py.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function qN(t){if(t.R_||t.P_)throw new dy(py.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var BN,Kn=(KN.prototype.Uf=function(t,e){switch(void 0===e&&(e="none"),og(t)){case 0:return null;case 1:return t.booleanValue;case 2:return $y(t.integerValue||t.doubleValue);case 3:return this.Qf(t.timestampValue);case 4:return this.Kf(t,e);case 5:return t.stringValue;case 6:return this.Wf(Zy(t.bytesValue));case 7:return this.jf(t.referenceValue);case 8:return this.Gf(t.geoPointValue);case 9:return this.zf(t.arrayValue,e);case 10:return this.Hf(t.mapValue,e);default:throw ry()}},KN.prototype.Hf=function(t,n){var r=this,i={};return Gy(t.fields||{},function(t,e){i[t]=r.Uf(e,n)}),i},KN.prototype.Gf=function(t){return new SC($y(t.latitude),$y(t.longitude))},KN.prototype.zf=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.Uf(t,e)})},KN.prototype.Kf=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return tg(e)?t(e):e}(t);return null==n?null:this.Uf(n,e);case"estimate":return this.Qf(eg(t));default:return null}},KN.prototype.Qf=function(t){t=Jy(t);return new Dy(t.seconds,t.nanos)},KN.prototype.Jf=function(t,e){var n=Ly.ot(t);iy(Pb(n));t=new Yv(n.get(1),n.get(3)),n=new jy(n.Y(5));return t.isEqual(e)||ty("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},KN),HN=(Object.defineProperty(GN.prototype,"id",{get:function(){return this.S_.path.tt()},enumerable:!1,configurable:!0}),Object.defineProperty(GN.prototype,"ref",{get:function(){return new pC(this.Yf,this.v_,this.S_)},enumerable:!1,configurable:!0}),GN.prototype.exists=function(){return null!==this.Zf},GN.prototype.data=function(){if(this.Zf){if(this.v_){var t=new WN(this.Yf,this.Xf,this.S_,this.Zf,null);return this.v_.fromFirestore(t)}return this.Xf.Uf(this.Zf.bt())}},GN.prototype.get=function(t){if(this.Zf){t=this.Zf.data().field(QN("DocumentSnapshot.get",t));if(null!==t)return this.Xf.Uf(t)}},GN),WN=(_o(zN,BN=HN),zN.prototype.data=function(){return BN.prototype.data.call(this)},zN);function zN(){return null!==BN&&BN.apply(this,arguments)||this}function GN(t,e,n,r,i){this.Yf=t,this.Xf=e,this.S_=n,this.Zf=r,this.v_=i}function KN(){}function QN(t,e){return"string"==typeof e?hN(t,e):(e instanceof JS?e.d_:e).f_}function YN(t){if(vm(t)&&0===t.xt.length)throw new dy(py.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}vt=function(){};function XN(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r].td(t)}return t}var JN,$N,ZN,tA,eA,nA=(_o(lA,eA=vt),lA.prototype.td=function(t){var e=FC(t.firestore),e=function(t,e,n,r,i,o){if(r.ut()){if("array-contains"===i||"array-contains-any"===i)throw new dy(py.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){dA(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(pA(n,t,c))}h={arrayValue:{values:s}}}else h=pA(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||dA(o,i),h=rN(e,"where",o,"in"===i||"not-in"===i);var h=Mg.create(r,i,h);return function(t,e){if(e.Ct()){var n=gm(t);if(null!==n&&!n.isEqual(e.field))throw new dy(py.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=ym(t);null!==n&&vA(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new dy(py.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new dy(py.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.C_,e,t.firestore.I_,this.ed,this.nd,this.sd);return new dC(t.firestore,t.v_,(t=t.C_,e=t.filters.concat([e]),new lm(t.path,t.collectionGroup,t.xt.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},lA),rA=(_o(hA,tA=vt),hA.prototype.td=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new dy(py.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new dy(py.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new um(e,n);return e=r,null!==ym(n=t)||null!==(t=gm(n))&&vA(0,t,e.field),r}(t.C_,this.ed,this.rd);return new dC(t.firestore,t.v_,(t=t.C_,e=t.xt.concat([e]),new lm(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},hA),iA=(_o(cA,ZN=vt),cA.prototype.td=function(t){return new dC(t.firestore,t.v_,wm(t.C_,this.od,this.ad))},cA),oA=(_o(uA,$N=vt),uA.prototype.td=function(t){var e=fA(t,this.type,this.ud,this.hd);return new dC(t.firestore,t.v_,(t=t.C_,e=e,new lm(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},uA),sA=(_o(aA,JN=vt),aA.prototype.td=function(t){var e=fA(t,this.type,this.ud,this.hd);return new dC(t.firestore,t.v_,(t=t.C_,e=e,new lm(t.path,t.collectionGroup,t.xt.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},aA);function aA(t,e,n){var r=this;return(r=JN.call(this)||this).type=t,r.ud=e,r.hd=n,r}function uA(t,e,n){var r=this;return(r=$N.call(this)||this).type=t,r.ud=e,r.hd=n,r}function cA(t,e,n){var r=this;return(r=ZN.call(this)||this).type=t,r.od=e,r.ad=n,r}function hA(t,e){var n=this;return(n=tA.call(this)||this).ed=t,n.rd=e,n.type="orderBy",n}function lA(t,e,n){var r=this;return(r=eA.call(this)||this).ed=t,r.nd=e,r.sd=n,r.type="where",r}function fA(t,c,e,n){if(e[0]instanceof JS&&(e[0]=e[0].d_),e[0]instanceof HN)return function(t,e,n,r){if(!n)throw new dy(py.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=_m(t);o<s.length;o++){var a=s[o];if(a.field.ut())i.push(lg(e,n.key));else{var u=n.field(a.field);if(tg(u))throw new dy(py.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.rt();throw new dy(py.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new nm(i,r)}(t.C_,t.firestore.I_,e[0].Zf,n);var r=FC(t.firestore);return function(t,e,n,r,i,o){var s=t.xt;if(i.length>s.length)throw new dy(py.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.ut()){if("string"!=typeof c)throw new dy(py.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!mm(t)&&-1!==c.indexOf("/"))throw new dy(py.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Ly.ot(c));if(!jy.wt(h))throw new dy(py.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new jy(h);a.push(lg(e,h))}else{c=rN(n,r,c);a.push(c)}}return new nm(a,o)}(t.C_,t.firestore.I_,r,c,e,n)}function pA(t,e,n){if(n instanceof JS&&(n=n.d_),"string"==typeof n){if(""===n)throw new dy(py.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!mm(e)&&-1!==n.indexOf("/"))throw new dy(py.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(Ly.ot(n));if(!jy.wt(e))throw new dy(py.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return lg(t,new jy(e))}if(n instanceof pC)return lg(t,n.S_);throw new dy(py.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+sC(n)+".")}function dA(t,e){if(!Array.isArray(t)||0===t.length)throw new dy(py.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new dy(py.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function vA(t,e,n){if(!n.isEqual(e))throw new dy(py.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function yA(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var gA,mA,_A,bA=(_o(kA,_A=Kn),kA.prototype.Wf=function(t){return new vy(t)},kA.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return new pC(this.firestore,null,t)},kA),wA=(AA.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},AA),EA=(_o(NA,mA=HN),NA.prototype.exists=function(){return mA.prototype.exists.call(this)},NA.prototype.data=function(t){if(void 0===t&&(t={}),this.Zf){if(this.v_){var e=new IA(this.Yf,this.Xf,this.S_,this.Zf,this.metadata,null);return this.v_.fromFirestore(e,t)}return this.Xf.Uf(this.Zf.bt(),t.serverTimestamps)}},NA.prototype.get=function(t,e){if(void 0===e&&(e={}),this.Zf){t=this.Zf.data().field(QN("DocumentSnapshot.get",t));if(null!==t)return this.Xf.Uf(t,e.serverTimestamps)}},NA),IA=(_o(CA,gA=EA),CA.prototype.data=function(t){return void 0===t&&(t={}),gA.prototype.data.call(this,t)},CA),TA=(Object.defineProperty(SA.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(SA.prototype,"size",{get:function(){return this._d.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(SA.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),SA.prototype.forEach=function(e,n){var r=this;this._d.docs.forEach(function(t){e.call(n,new IA(r.Yf,r.Xf,t.key,t,new wA(r._d.De.has(t.key),r._d.fromCache),r.query.v_))})},SA.prototype.docChanges=function(t){void 0===t&&(t={});t=!!t.includeMetadataChanges;if(t&&this._d.xe)throw new dy(py.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.fd&&this.dd===t||(this.fd=function(i,e){if(i._d.Se.et()){var n=0;return i._d.docChanges.map(function(t){var e=new IA(i.Yf,i.Xf,t.doc.key,t.doc,new wA(i._d.De.has(t.doc.key),i._d.fromCache),i.query.v_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i._d.Se;return i._d.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new IA(i.Yf,i.Xf,t.doc.key,t.doc,new wA(i._d.De.has(t.doc.key),i._d.fromCache),i.query.v_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ry()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.dd=t),this.fd},SA);function SA(t,e,n,r){this.Yf=t,this.Xf=e,this._d=r,this.metadata=new wA(r.hasPendingWrites,r.fromCache),this.query=n}function CA(){return null!==gA&&gA.apply(this,arguments)||this}function NA(t,e,n,r,i,o){var s=this;return(s=mA.call(this,t,e,n,r,o)||this).Yf=t,s.ld=t,s.metadata=i,s}function AA(t,e){this.hasPendingWrites=t,this.fromCache=e}function kA(t){var e=this;return(e=_A.call(this)||this).firestore=t,e}function OA(t,e){return t instanceof EA&&e instanceof EA?t.Yf===e.Yf&&t.S_.isEqual(e.S_)&&(null===t.Zf?null===e.Zf:t.Zf.isEqual(e.Zf))&&t.v_===e.v_:t instanceof TA&&e instanceof TA&&t.Yf===e.Yf&&TC(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._d.isEqual(e._d)}var PA,RA=(_o(DA,PA=Kn),DA.prototype.Wf=function(t){return new vy(t)},DA.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return new pC(this.firestore,null,t)},DA);function DA(t){var e=this;return(e=PA.call(this)||this).firestore=t,e}function xA(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=aC(t,pC);var o=aC(t.firestore,LN),s=FC(o);return e instanceof JS&&(e=e.d_),MA(o,[("string"==typeof e||e instanceof YS?nN(s,"updateDoc",t.S_,e,n,r):eN(s,"updateDoc",t.S_,e)).F_(t.S_,Jm.exists(!0))])}function LA(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof JS&&(e=e.d_);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||RN(n[i])||(r=n[i],i++);var o,s,a,u,c,h,l={includeMetadataChanges:r.includeMetadataChanges};return RN(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof pC?(a=aC(e.firestore,LN),u=pm(e.S_.path),h={next:function(t){n[i]&&n[i](FA(a,e,t))},error:n[i+1],complete:n[i+2]}):(s=aC(e,dC),a=aC(s.firestore,LN),u=s.C_,c=new RA(a),h={next:function(t){n[i]&&n[i](new TA(a,c,s,t))},error:n[i+1],complete:n[i+2]},YN(e.C_)),function(n,t,e){var r=this,i=new KS(h),o=new $T(t,i,e);return n._s.Ps(function(){return wo(r,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=YT,[4,NN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.i_(),n._s.Ps(function(){return wo(r,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=XT,[4,NN(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(jN(a),u,l)}function MA(t,e){return function(n,r){var t=this,i=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=yS,[4,CN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(jN(t),e)}function FA(t,e,n){var r=n.docs.get(e.S_),i=new RA(t);return new EA(t,i,e.S_,r,new wA(n.hasPendingWrites,n.fromCache),e.v_)}var jA=(UA.prototype.set=function(t,e,n){this.md();t=VA(t,this.Yf),e=yA(t.v_,e,n),n=jC(this.Id,"WriteBatch.set",t.S_,e,null!==t.v_,n);return this.Ed.push(n.F_(t.S_,Jm.Kt())),this},UA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.md();t=VA(t,this.Yf);return e instanceof JS&&(e=e.d_),e="string"==typeof e||e instanceof YS?nN(this.Id,"WriteBatch.update",t.S_,e,n,r):eN(this.Id,"WriteBatch.update",t.S_,e),this.Ed.push(e.F_(t.S_,Jm.exists(!0))),this},UA.prototype.delete=function(t){this.md();t=VA(t,this.Yf);return this.Ed=this.Ed.concat(new g_(t.S_,Jm.Kt())),this},UA.prototype.commit=function(){return this.md(),this.Td=!0,0<this.Ed.length?this.wd(this.Ed):Promise.resolve()},UA.prototype.md=function(){if(this.Td)throw new dy(py.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},UA);function UA(t,e){this.Yf=t,this.wd=e,this.Ed=[],this.Td=!1,this.Id=FC(t)}function VA(t,e){if(t instanceof JS&&(t=t.d_),t.firestore!==e)throw new dy(py.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var qA,BA=(WA.prototype.get=function(t){var e=this,n=VA(t,this.Yf),r=new bA(this.Yf);return this.Ad.ef([n.S_]).then(function(t){if(!t||1!==t.length)return ry();t=t[0];if(t instanceof Sg)return new HN(e.Yf,r,n.S_,null,n.v_);if(t instanceof Tg)return new HN(e.Yf,r,t.key,t,n.v_);throw ry()})},WA.prototype.set=function(t,e,n){t=VA(t,this.Yf),e=yA(t.v_,e,n),n=jC(this.Id,"Transaction.set",t.S_,e,null!==t.v_,n);return this.Ad.set(t.S_,n),this},WA.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=VA(t,this.Yf);return e instanceof JS&&(e=e.d_),e="string"==typeof e||e instanceof YS?nN(this.Id,"Transaction.update",t.S_,e,n,r):eN(this.Id,"Transaction.update",t.S_,e),this.Ad.update(t.S_,e),this},WA.prototype.delete=function(t){t=VA(t,this.Yf);return this.Ad.delete(t.S_),this},_o(HA,qA=WA),HA.prototype.get=function(t){var e=this,n=VA(t,this.Yf),r=new RA(this.Yf);return qA.prototype.get.call(this,t).then(function(t){return new EA(e.Yf,r,n.S_,t.Zf,new wA(!1,!1),n.v_)})},HA);function HA(t,e){var n=this;return(n=qA.call(this,t,e)||this).Yf=t,n}function WA(t,e){this.Yf=t,this.Ad=e,this.Id=FC(t)}function zA(){if("undefined"==typeof Uint8Array)throw new dy(py.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function GA(){if("undefined"==typeof atob)throw new dy(py.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var KA,QA,YA,XA=(_o(rk,YA=JS),rk.fromBase64String=function(t){return GA(),new rk(vy.fromBase64String(t))},rk.fromUint8Array=function(t){return zA(),new rk(vy.fromUint8Array(t))},rk.prototype.toBase64=function(){return GA(),this.d_.toBase64()},rk.prototype.toUint8Array=function(){return zA(),this.d_.toUint8Array()},rk.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},rk.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},rk),JA=(nk.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){qN(t=aC(t,LN));var n=jN(t),r=t.p_(),t=new qS;return VN(n,t,new US(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.d_,{forceOwnership:e})},nk.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){qN(t=aC(t,LN));var e=jN(t),n=t.p_(),t=new qS;return VN(e,t,new VS(t,n.cacheSizeBytes))}(t.d_)},nk.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.R_&&!n.P_)throw new dy(py.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new Db;return n.Bf.Tf(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return Mb.Kn()?(e=n+"main",[4,Mb.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(GE(n.I_,n.w_))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.d_)},nk),$A=(_o(ek,QA=JS),Object.defineProperty(ek.prototype,"I_",{get:function(){return this.d_.I_},enumerable:!1,configurable:!0}),ek.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.d_.V_()),t)).merge,this.d_.g_(t)},ek.prototype.useEmulator=function(t,e){var n,r;n=this.d_,r=t,t=e,"firestore.googleapis.com"!==(e=(n=aC(n,fC)).V_()).host&&e.host!==r&&ey("Host has been set in both settings() and useEmulator(), emulator host will be used"),n.g_(Object.assign(Object.assign({},e),{host:r+":"+t,ssl:!1}))},ek.prototype.enableNetwork=function(){return function(r){var t=this;return r._s.enqueue(function(){return wo(t,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,IN(r)];case 1:return e=t.sent(),[4,SN(r)];case 2:return n=t.sent(),[2,(e.yo(!0),(t=n).Nh.delete(0),AT(t))]}})})})}(jN(aC(this.d_,LN)))},ek.prototype.disableNetwork=function(){return function(r){var t=this;return r._s.enqueue(function(){return wo(t,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,IN(r)];case 1:return e=t.sent(),[4,SN(r)];case 2:return n=t.sent(),[2,(e.yo(!1),function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return(e=n).Nh.add(0),[4,kT(e)];case 1:return t.sent(),e.kh.set("Offline"),[2]}})})}(n))]}})})})}(jN(aC(this.d_,LN)))},ek.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&rC("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Rd.enableMultiTabIndexedDbPersistence(this):this.Rd.enableIndexedDbPersistence(this,n)},ek.prototype.clearPersistence=function(){return this.Rd.clearIndexedDbPersistence(this)},ek.prototype.terminate=function(){return this.Pd&&(this.Pd._removeServiceInstance("firestore"),this.Pd._removeServiceInstance("firestore-exp")),this.d_._delete()},ek.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=bS,[4,CN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(jN(aC(this.d_,LN)))},ek.prototype.onSnapshotsInSync=function(t){return e=this.d_,t=t,function(n,t){var e=this,r=new KS(t);return n._s.Ps(function(){return wo(e,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Wh.add(e),e.next()},[4,NN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.i_(),n._s.Ps(function(){return wo(e,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Wh.delete(e)},[4,NN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(jN(aC(e,LN)),RN(t)?t:{next:t});var e},Object.defineProperty(ek.prototype,"app",{get:function(){if(!this.Pd)throw new dy(py.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Pd},enumerable:!1,configurable:!0}),ek.prototype.collection=function(t){try{return new Ok(this,wC(this.d_,t))}catch(t){throw yk(t,"collection()","Firestore.collection()")}},ek.prototype.doc=function(t){try{return new dk(this,EC(this.d_,t))}catch(t){throw yk(t,"doc()","Firestore.doc()")}},ek.prototype.collectionGroup=function(t){try{return new Nk(this,function(t,e){if(t=aC(t,fC),eC("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new dy(py.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new dC(t,null,(e=e,new lm(Ly.ct(),e)))}(this.d_,t))}catch(t){throw yk(t,"collectionGroup()","Firestore.collectionGroup()")}},ek.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,EN(n).then(function(t){return t.Sh})];case 1:return e=t.sent(),new dN(n._s,e,r,i).run(),[2]}})})}),i.promise}(jN(n=this.d_),function(t){return t=new BA(n,t),e(new ak(r,t))})},ek.prototype.batch=function(){var e=this;return jN(this.d_),new uk(new jA(this.d_,function(t){return MA(e.d_,t)}))},ek.prototype.loadBundle=function(t){throw new dy(py.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},ek.prototype.namedQuery=function(t){throw new dy(py.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},ek),ZA=(_o(tk,KA=Kn),tk.prototype.Wf=function(t){return new XA(new vy(t))},tk.prototype.jf=function(t){t=this.Jf(t,this.firestore.I_);return dk.yd(t,this.firestore,null)},tk);function tk(t){var e=this;return(e=KA.call(this)||this).firestore=t,e}function ek(t,e,n){var r=this;return(r=QA.call(this,e)||this).Rd=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof Yv||(r.Pd=t),r}function nk(){}function rk(){return null!==YA&&YA.apply(this,arguments)||this}var ik,ok,sk,ak=(_o(fk,sk=JS),fk.prototype.get=function(t){var e=this,n=Fk(t);return this.d_.get(n).then(function(t){return new Sk(e.Yf,new EA(e.Yf.d_,e.Xf,t.S_,t.Zf,t.metadata,n.v_))})},fk.prototype.set=function(t,e,n){t=Fk(t);return n?(nC("Transaction.set",n),this.d_.set(t,e,n)):this.d_.set(t,e),this},fk.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Fk(t);return 2===arguments.length?this.d_.update(o,e):(t=this.d_).update.apply(t,Co([o,e,n],r)),this},fk.prototype.delete=function(t){t=Fk(t);return this.d_.delete(t),this},fk),uk=(_o(lk,ok=JS),lk.prototype.set=function(t,e,n){t=Fk(t);return n?(nC("WriteBatch.set",n),this.d_.set(t,e,n)):this.d_.set(t,e),this},lk.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Fk(t);return 2===arguments.length?this.d_.update(o,e):(t=this.d_).update.apply(t,Co([o,e,n],r)),this},lk.prototype.delete=function(t){t=Fk(t);return this.d_.delete(t),this},lk.prototype.commit=function(){return this.d_.commit()},lk),ck=(_o(hk,ik=JS),hk.prototype.fromFirestore=function(t,e){t=new IA(this.Yf.d_,this.Xf,t.S_,t.Zf,t.metadata,null);return this.d_.fromFirestore(new Ck(this.Yf,t),null!=e?e:{})},hk.prototype.toFirestore=function(t,e){return e?this.d_.toFirestore(t,e):this.d_.toFirestore(t)},hk.gd=function(t,e){var n=hk.Vd,r=n.get(t);r||(r=new WeakMap,n.set(t,r));n=r.get(e);return n||(n=new hk(t,new ZA(t),e),r.set(e,n)),n},hk);function hk(t,e,n){var r=this;return(r=ik.call(this,n)||this).Yf=t,r.Xf=e,r}function lk(){return null!==ok&&ok.apply(this,arguments)||this}function fk(t,e){var n=this;return(n=sk.call(this,e)||this).Yf=t,n.Xf=new ZA(t),n}ck.Vd=new WeakMap;var pk,dk=(_o(vk,pk=JS),vk.pd=function(t,e,n){if(t.length%2!=0)throw new dy(py.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.rt()+" has "+t.length);return new vk(e,new pC(e.d_,n,new jy(t)))},vk.yd=function(t,e,n){return new vk(e,new pC(e.d_,n,t))},Object.defineProperty(vk.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(vk.prototype,"parent",{get:function(){return new Ok(this.firestore,this.d_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(vk.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),vk.prototype.collection=function(t){try{return new Ok(this.firestore,wC(this.d_,t))}catch(t){throw yk(t,"collection()","DocumentReference.collection()")}},vk.prototype.isEqual=function(t){return t instanceof JS&&(t=t.d_),t instanceof pC&&IC(this.d_,t)},vk.prototype.set=function(t,e){e=nC("DocumentReference.set",e);try{return function(t,e,n){t=aC(t,pC);var r=aC(t.firestore,LN),e=yA(t.v_,e,n);return MA(r,[jC(FC(r),"setDoc",t.S_,e,null!==t.v_,n).F_(t.S_,Jm.Kt())])}(this.d_,t,e)}catch(t){throw yk(t,"setDoc()","DocumentReference.set()")}},vk.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?xA(this.d_,t):xA.apply(void 0,Co([this.d_,t,e],n))}catch(t){throw yk(t,"updateDoc()","DocumentReference.update()")}},vk.prototype.delete=function(){return MA(aC((t=this.d_).firestore,LN),[new g_(t.S_,Jm.Kt())]);var t},vk.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=gk(t),i=mk(t,function(t){return new Sk(e.firestore,new EA(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))});return LA(this.d_,r,i)},vk.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=aC(e,pC);var n=aC(e.firestore,LN),t=jN(n),r=new RA(n);return function(n,r){var t=this,i=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(o,s,a){return wo(this,void 0,void 0,function(){var r,i;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=s,(n=o).persistence.runTransaction("read document","readonly",function(t){return n.Tc.Ho(t,e)}))];case 1:return(i=t.sent())instanceof Tg?a.resolve(i):i instanceof Sg?a.resolve(null):a.reject(new dy(py.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),i=$b(r,"Failed to get document '"+s+" from cache"),a.reject(i),[3,3];case 3:return[2]}var e,n})})},[4,TN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.S_).then(function(t){return new EA(n,r,e.S_,t,new wA(t instanceof Tg&&t.Vt,!0),e.v_)})}:"server"===(null==t?void 0:t.source)?function(e){e=aC(e,pC);var n=aC(e.firestore,LN);return AN(jN(n),e.S_,{source:"server"}).then(function(t){return FA(n,e,t)})}:function(e){e=aC(e,pC);var n=aC(e.firestore,LN);return AN(jN(n),e.S_).then(function(t){return FA(n,e,t)})})(this.d_).then(function(t){return new Sk(e.firestore,new EA(e.firestore.d_,e.Xf,t.S_,t.Zf,t.metadata,e.d_.v_))})},vk.prototype.withConverter=function(t){return new vk(this.firestore,this.d_.withConverter(ck.gd(this.firestore,t)))},vk);function vk(t,e){var n=this;return(n=pk.call(this,e)||this).firestore=t,n.Xf=new ZA(t),n}function yk(t,e,n){return t.message=t.message.replace(e,n),t}function gk(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!RN(r))return r}return{}}function mk(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=RN(t[0])?t[0]:RN(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var _k,bk,wk,Ek,Ik,Tk,Sk=(_o(Mk,Tk=JS),Object.defineProperty(Mk.prototype,"ref",{get:function(){return new dk(this.Yf,this.d_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(Mk.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(Mk.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Mk.prototype,"exists",{get:function(){return this.d_.exists()},enumerable:!1,configurable:!0}),Mk.prototype.data=function(t){return this.d_.data(t)},Mk.prototype.get=function(t,e){return this.d_.get(t,e)},Mk.prototype.isEqual=function(t){return OA(this.d_,t.d_)},Mk),Ck=(_o(Lk,Ik=Sk),Lk.prototype.data=function(t){return this.d_.data(t)},Lk),Nk=(_o(xk,Ek=JS),xk.prototype.where=function(t,e,n){try{return new xk(this.firestore,XN(this.d_,(r=n,i=e,o=QN("where",t),new nA(o,i,r))))}catch(t){throw yk(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},xk.prototype.orderBy=function(n,t){try{return new xk(this.firestore,XN(this.d_,function(t){void 0===t&&(t="asc");var e=t,t=QN("orderBy",n);return new rA(t,e)}(t)))}catch(n){throw yk(n,/(orderBy|where)\(\)/,"Query.$1()")}},xk.prototype.limit=function(t){try{return new xk(this.firestore,XN(this.d_,(uC("limit",e=t),new iA("limit",e,"F"))))}catch(t){throw yk(t,"limit()","Query.limit()")}var e},xk.prototype.limitToLast=function(t){try{return new xk(this.firestore,XN(this.d_,(uC("limitToLast",e=t),new iA("limitToLast",e,"L"))))}catch(t){throw yk(t,"limitToLast()","Query.limitToLast()")}var e},xk.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xk(this.firestore,XN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oA("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw yk(t,"startAt()","Query.startAt()")}},xk.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xk(this.firestore,XN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new oA("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw yk(t,"startAfter()","Query.startAfter()")}},xk.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xk(this.firestore,XN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sA("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw yk(t,"endBefore()","Query.endBefore()")}},xk.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new xk(this.firestore,XN(this.d_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new sA("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw yk(t,"endAt()","Query.endAt()")}},xk.prototype.isEqual=function(t){return TC(this.d_,t.d_)},xk.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=aC(e,dC);var n=aC(e.firestore,LN),t=jN(n),r=new RA(n);return function(n,r){var t=this,i=new Db;return n._s.Ps(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,hI(i,o,!0)];case 1:return r=t.sent(),e=new cS(o,r.Rc),n=e.fl(r.documents),n=e.wi(n,!1),s.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),r=$b(n,"Failed to execute query '"+o+" against cache"),s.reject(r),[3,3];case 3:return[2]}})})},[4,TN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.C_).then(function(t){return new TA(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=aC(e,dC);var n=aC(e.firestore,LN),t=jN(n),r=new RA(n);return kN(t,e.C_,{source:"server"}).then(function(t){return new TA(n,r,e,t)})}:function(e){e=aC(e,dC);var n=aC(e.firestore,LN),t=jN(n),r=new RA(n);return YN(e.C_),kN(t,e.C_).then(function(t){return new TA(n,r,e,t)})})(this.d_).then(function(t){return new kk(e.firestore,new TA(e.firestore.d_,e.Xf,e.d_,t._d))})},xk.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=gk(t),i=mk(t,function(t){return new kk(e.firestore,new TA(e.firestore.d_,e.Xf,e.d_,t._d))});return LA(this.d_,r,i)},xk.prototype.withConverter=function(t){return new xk(this.firestore,this.d_.withConverter(ck.gd(this.firestore,t)))},xk),Ak=(_o(Dk,wk=JS),Object.defineProperty(Dk.prototype,"type",{get:function(){return this.d_.type},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"doc",{get:function(){return new Ck(this.Yf,this.d_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"oldIndex",{get:function(){return this.d_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(Dk.prototype,"newIndex",{get:function(){return this.d_.newIndex},enumerable:!1,configurable:!0}),Dk),kk=(_o(Rk,bk=JS),Object.defineProperty(Rk.prototype,"query",{get:function(){return new Nk(this.Yf,this.d_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(Rk.prototype,"metadata",{get:function(){return this.d_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Rk.prototype,"size",{get:function(){return this.d_.size},enumerable:!1,configurable:!0}),Object.defineProperty(Rk.prototype,"empty",{get:function(){return this.d_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(Rk.prototype,"docs",{get:function(){var e=this;return this.d_.docs.map(function(t){return new Ck(e.Yf,t)})},enumerable:!1,configurable:!0}),Rk.prototype.docChanges=function(t){var e=this;return this.d_.docChanges(t).map(function(t){return new Ak(e.Yf,t)})},Rk.prototype.forEach=function(e,n){var r=this;this.d_.forEach(function(t){e.call(n,new Ck(r.Yf,t))})},Rk.prototype.isEqual=function(t){return OA(this.d_,t.d_)},Rk),Ok=(_o(Pk,_k=Nk),Object.defineProperty(Pk.prototype,"id",{get:function(){return this.d_.id},enumerable:!1,configurable:!0}),Object.defineProperty(Pk.prototype,"path",{get:function(){return this.d_.path},enumerable:!1,configurable:!0}),Object.defineProperty(Pk.prototype,"parent",{get:function(){var t=this.d_.parent;return t?new dk(this.firestore,t):null},enumerable:!1,configurable:!0}),Pk.prototype.doc=function(t){try{return new dk(this.firestore,void 0===t?EC(this.d_):EC(this.d_,t))}catch(t){throw yk(t,"doc()","CollectionReference.doc()")}},Pk.prototype.add=function(t){var e,n,r,i=this;return e=this.d_,n=t,t=aC(e.firestore,LN),r=EC(e),n=yA(e.v_,n),MA(t,[jC(FC(e.firestore),"addDoc",r.S_,n,null!==e.v_,{}).F_(r.S_,Jm.exists(!1))]).then(function(){return r}).then(function(t){return new dk(i.firestore,t)})},Pk.prototype.isEqual=function(t){return IC(this.d_,t.d_)},Pk.prototype.withConverter=function(t){return new Pk(this.firestore,this.d_.withConverter(ck.gd(this.firestore,t)))},Pk);function Pk(t,e){var n=this;return(n=_k.call(this,t,e)||this).firestore=t,n.d_=e,n}function Rk(t,e){var n=this;return(n=bk.call(this,e)||this).Yf=t,n}function Dk(t,e){var n=this;return(n=wk.call(this,e)||this).Yf=t,n}function xk(t,e){var n=this;return(n=Ek.call(this,e)||this).firestore=t,n.Xf=new ZA(t),n}function Lk(){return null!==Ik&&Ik.apply(this,arguments)||this}function Mk(t,e){var n=this;return(n=Tk.call(this,e)||this).Yf=t,n}function Fk(t){return t instanceof JS&&(t=t.d_),aC(t,pC)}var jk,Uk,vt=(_o(qk,Uk=JS),qk.documentId=function(){return new qk(Fy.ht().rt())},qk.prototype.isEqual=function(t){return t instanceof JS&&(t=t.d_),t instanceof YS&&this.d_.f_.isEqual(t.f_)},qk),Kn=(_o(Vk,jk=JS),Vk.serverTimestamp=function(){var t=new KC("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new Vk(t)},Vk.delete=function(){var t=new VC("deleteField");return t._methodName="FieldValue.delete",new Vk(t)},Vk.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new QC("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new Vk(n)},Vk.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new YC("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new Vk(n)},Vk.increment=function(t){t=new XC("increment",t);return t._methodName="FieldValue.increment",new Vk(t)},Vk.prototype.isEqual=function(t){return this.d_.isEqual(t.d_)},Vk);function Vk(){return null!==jk&&jk.apply(this,arguments)||this}function qk(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Uk.call(this,new(YS.bind.apply(YS,Co([void 0],t))))||this}function Bk(t){return e=this.d_,s=t,n=jN(e=aC(e,LN)),t=new xN,function(n,t,r){var e,i=this,o=(e=s,t=fT(t),e=function(t){if(t instanceof Uint8Array)return GS(t,void 0);if(t instanceof ArrayBuffer)return GS(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new QS(e,t));n._s.Ps(function(){return wo(i,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=LS,[4,CN(n)];case 1:return e.apply(void 0,[t.sent(),o,r]),[2]}})})})}(n,e.I_,t),t;var e,s,n}function Hk(t){var e=this,n=this.d_,t=t;return function(n,r){var t=this;return n._s.enqueue(function(){return wo(t,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",function(t){return n.wo.Ls(t,e)})},[4,TN(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}(jN(n=aC(n,LN)),t).then(function(t){return t?new dC(n,null,t.query):null}).then(function(t){return t?new Nk(e,t):null})}var Wk,zk,Gk={Firestore:$A,GeoPoint:SC,Timestamp:Dy,Blob:XA,Transaction:ak,WriteBatch:uk,DocumentReference:dk,DocumentSnapshot:Sk,Query:Nk,QueryDocumentSnapshot:Ck,QuerySnapshot:kk,CollectionReference:Ok,FieldPath:vt,FieldValue:Kn,setLogLevel:function(t){Xv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(Wk=Xl).INTERNAL.registerComponent(new ws("firestore",function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new $A(e,new LN(e,t),new JA)},"PUBLIC").setServiceProps(Object.assign({},Gk))),Wk.registerVersion("@firebase/firestore","2.1.5"),(zk=$A).prototype.loadBundle=Bk,zk.prototype.namedQuery=Hk;var Kk,Qk={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Yk=(_o(Xk,Kk=Error),Xk);function Xk(t,e,n){e=Kk.call(this,e)||this;return Object.setPrototypeOf(e,Xk.prototype),e.code=t,e.details=n,e}function Jk(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!Qk[a])return new Yk("internal","internal");r=Qk[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new Yk(r,i,o)}var $k=(Zk.prototype.getAuthToken=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},Zk.prototype.getInstanceIdToken=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},Zk.prototype.getContext=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},Zk);function Zk(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function tO(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var eO=(nO.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return tO(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},nO.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?tO(t,function(t){return e.decode(t)}):t},nO);function nO(){}var rO=(Object.defineProperty(iO.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),iO.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},iO.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},iO.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},iO.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},iO.prototype.postJSON=function(r,i,o){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},iO.prototype.call=function(c,h,l){return wo(this,void 0,void 0,function(){var i,o,s,a,u;return Eo(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new Yk("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([oO(u,this.postJSON(i,o,s)),a,oO(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new Yk("cancelled","Firebase Functions instance was deleted.");if(u=Jk(a.status,a.json,this.serializer))throw u;if(!a.json)throw new Yk("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new Yk("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},iO);function iO(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new eO,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new $k(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function oO(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var sO,aO,uO;function cO(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function hO(n,r,i){var o,t=new Promise(function(t,e){cO(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function lO(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function fO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return hO(this[n],t,arguments)})})}function pO(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function dO(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=hO(t,n,arguments)).then(function(t){if(t)return new yO(t,e.request)});var t,e})})}function vO(t){this._index=t}function yO(t,e){this._cursor=t,this._request=e}function gO(t){this._store=t}function mO(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function _O(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new mO(n)}function bO(t){this._db=t}function wO(t,e,n){var e=hO(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new _O(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new bO(t)})}function EO(t){return hO(indexedDB,"deleteDatabase",[t])}sO=Xl,aO=fetch.bind(self),uO={Functions:rO},sO.INTERNAL.registerComponent(new ws("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new rO(n,r,t,e,aO)},"PUBLIC").setServiceProps(uO).setMultipleInstances(!0)),Xl.registerVersion("@firebase/functions","0.6.1"),lO(vO,"_index",["name","keyPath","multiEntry","unique"]),fO(vO,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),dO(vO,"_index",IDBIndex,["openCursor","openKeyCursor"]),lO(yO,"_cursor",["direction","key","primaryKey","value"]),fO(yO,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(yO.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),cO(e._request).then(function(t){if(t)return new yO(t,e._request)})})})}),gO.prototype.createIndex=function(){return new vO(this._store.createIndex.apply(this._store,arguments))},gO.prototype.index=function(){return new vO(this._store.index.apply(this._store,arguments))},lO(gO,"_store",["name","keyPath","indexNames","autoIncrement"]),fO(gO,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),dO(gO,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),pO(gO,"_store",IDBObjectStore,["deleteIndex"]),mO.prototype.objectStore=function(){return new gO(this._tx.objectStore.apply(this._tx,arguments))},lO(mO,"_tx",["objectStoreNames","mode"]),pO(mO,"_tx",IDBTransaction,["abort"]),_O.prototype.createObjectStore=function(){return new gO(this._db.createObjectStore.apply(this._db,arguments))},lO(_O,"_db",["name","version","objectStoreNames"]),pO(_O,"_db",IDBDatabase,["deleteObjectStore","close"]),bO.prototype.transaction=function(){return new mO(this._db.transaction.apply(this._db,arguments))},lO(bO,"_db",["name","version","objectStoreNames"]),pO(bO,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[gO,vO].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[vO,gO].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var IO=1e4,TO="w:0.4.19",SO="FIS_v2",CO="https://firebaseinstallations.googleapis.com/v1",NO=36e5,Kn=((vt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vt["not-registered"]="Firebase Installation is not registered.",vt["installation-not-found"]="Firebase Installation not found.",vt["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',vt["app-offline"]="Could not process request. Application offline.",vt["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",vt),AO=new Yo("installations","Installations",Kn);function kO(t){return t instanceof Ko&&t.code.includes("request-failed")}function OO(t){t=t.projectId;return CO+"/projects/"+t+"/installations"}function PO(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function RO(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,AO.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function DO(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xO(t,e){e=e.refreshToken,t=DO(t);return t.append("Authorization",SO+" "+e),t}function LO(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function MO(e){return new Promise(function(t){setTimeout(t,e)})}var FO=/^[cdef][\w-]{21}$/,jO="";function UO(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,So(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return FO.test(t)?t:jO}catch(t){return jO}}function VO(t){return t.appName+"!"+t.appId}var qO=new Map;function BO(t,e){t=VO(t);HO(t,e),function(t,e){var n=zO();n&&n.postMessage({key:t,fid:e});GO()}(t,e)}function HO(t,e){var n,r,i=qO.get(t);if(i)try{for(var o=Io(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var WO=null;function zO(){return!WO&&"BroadcastChannel"in self&&((WO=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){HO(t.data.key,t.data.fid)}),WO}function GO(){0===qO.size&&WO&&(WO.close(),WO=null)}var KO,QO="firebase-installations-database",YO=1,XO="firebase-installations-store",JO=null;function $O(){return JO=JO||wO(QO,YO,function(t){0===t.oldVersion&&t.createObjectStore(XO)})}function ZO(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return e=VO(o),[4,$O()];case 1:return r=t.sent(),n=r.transaction(XO,"readwrite"),[4,(r=n.objectStore(XO)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||BO(o,s.fid),[2,s]}})})}function tP(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=VO(r),[4,$O()];case 1:return n=t.sent(),[4,(n=n.transaction(XO,"readwrite")).objectStore(XO).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function eP(s,a){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=VO(s),[4,$O()];case 1:return r=t.sent(),n=r.transaction(XO,"readwrite"),[4,(r=n.objectStore(XO)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||BO(s,o.fid),[2,o]}})})}function nP(i){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,eP(i,function(t){t=iP(t||{fid:UO(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,rP(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,MO(100)];case 3:return t.sent(),[4,rP(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,nP(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(AO.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=OO(s),n=DO(s),o={fid:a,authVersion:SO,appId:s.appId,sdkVersion:TO},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,LO(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:PO(o.authToken)}];case 3:return[4,RO("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,ZO(r,e)];case 2:return kO(n=t.sent())&&409===n.customData.serverCode?[4,tP(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,ZO(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==jO?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function rP(t){return eP(t,function(t){if(!t)throw AO.create("installation-not-found");return iP(t)})}function iP(t){return 1===(e=t).registrationStatus&&e.registrationTime+IO<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function oP(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return OO(t)+"/"+e+"/authTokens:generate"}(a,s),n=xO(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:TO}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,LO(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,PO(o)];case 3:return[4,RO("Generate Auth Token",i)];case 4:throw t.sent()}})})}function sP(i,o){return void 0===o&&(o=!1),wo(this,void 0,void 0,function(){var r,e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,eP(i.appConfig,function(t){if(!uP(t))throw AO.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+NO}(e)){if(1===n.requestStatus)return r=function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,aP(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,MO(100)];case 3:return t.sent(),[4,aP(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,sP(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw AO.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},bo(bo({},e),{authToken:n}));return r=function(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,oP(i,o)];case 1:return e=t.sent(),r=bo(bo({},o),{authToken:e}),[4,ZO(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!kO(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,tP(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=bo(bo({},o),{authToken:{requestStatus:0}}),[4,ZO(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function aP(t){return eP(t,function(t){if(!uP(t))throw AO.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+IO<Date.now()?bo(bo({},t),{authToken:{requestStatus:0}}):t})}function uP(t){return void 0!==t&&2===t.registrationStatus}function cP(e,n){return void 0===n&&(n=!1),wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,nP(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,sP(e,n)];case 2:return[2,t.sent().token]}})})}function hP(i,o){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return OO(t)+"/"+e}(i,o),r=xO(i,o),n={method:"DELETE",headers:r},[4,LO(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,RO("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function lP(t,r){var i=t.appConfig;return function(t,e){zO();var n=VO(t);(t=qO.get(n))||(t=new Set,qO.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=VO(t=i),(t=qO.get(n))&&(t.delete(e),0===t.size&&qO.delete(n),GO())}}function fP(t){return AO.create("missing-app-config-values",{valueName:t})}(KO=Xl).INTERNAL.registerComponent(new ws("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw fP("App Configuration");if(!t.name)throw fP("App Name");try{for(var r=Io(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw fP(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,nP(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||sP(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return cP(n,t)},delete:function(){return function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,eP(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw AO.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw AO.create("app-offline");case 3:return[4,hP(e,n)];case 4:return t.sent(),[4,tP(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return lP(n,t)}}},"PUBLIC")),KO.registerVersion("@firebase/installations","0.4.19");var pP,Kn=((vt={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',vt["only-available-in-window"]="This method is available in a Window context.",vt["only-available-in-sw"]="This method is available in a service worker context.",vt["permission-default"]="The notification permission was not granted and dismissed instead.",vt["permission-blocked"]="The notification permission was not granted and blocked instead.",vt["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",vt["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",vt["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",vt["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",vt["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",vt["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",vt["token-update-no-token"]="FCM returned no token when updating the user to push.",vt["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",vt["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",vt["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",vt["invalid-vapid-key"]="The public VAPID key must be a string.",vt["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",vt),dP=new Yo("messaging","Messaging",Kn),vP="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yP="https://fcmregistrations.googleapis.com/v1",gP="FCM_MSG",mP="google.c.a.c_id";function _P(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,So(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(vt=pP=pP||{}).PUSH_RECEIVED="push-received",vt.NOTIFICATION_CLICKED="notification-clicked";var bP="fcm_token_details_db",wP=5,EP="fcm_token_object_Store";function IP(s){return wo(this,void 0,void 0,function(){var e,o,n=this;return Eo(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(bP))return[2,null];t.label=2;case 2:return o=null,[4,wO(bP,wP,function(i){return wo(n,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(EP)?[4,(r=i.transaction.objectStore(EP)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:_P(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:_P(n.auth),p256dh:_P(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:_P(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,EO(bP)];case 4:return t.sent(),[4,EO("fcm_vapid_details_db")];case 5:return t.sent(),[4,EO("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var TP="firebase-messaging-database",SP=1,CP="firebase-messaging-store",NP=null;function AP(){return NP=NP||wO(TP,SP,function(t){0===t.oldVersion&&t.createObjectStore(CP)})}function kP(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=PP(r),[4,AP()];case 1:return[4,t.sent().transaction(CP).objectStore(CP).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,IP(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,OP(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function OP(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=PP(r),[4,AP()];case 1:return n=t.sent(),[4,(n=n.transaction(CP,"readwrite")).objectStore(CP).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function PP(t){return t.appConfig.appId}function RP(r,i){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,xP(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(DP(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,dP.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),dP.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function DP(t){t=t.projectId;return yP+"/projects/"+t+"/registrations"}function xP(t){var n=t.appConfig,r=t.installations;return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function LP(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==vP&&(e.web.applicationPubKey=t),e}function MP(c,h,l){return wo(this,void 0,void 0,function(){var s,a,u;return Eo(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw dP.create("permission-blocked");return[4,function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,kP(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:_P(u.getKey("auth")),p256dh:_P(u.getKey("p256dh"))},s?[3,3]:[2,jP(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,RP(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,jP(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return[4,xP(o)];case 1:e=t.sent(),n=LP(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(DP(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),dP.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,dP.create("token-update-failed",{errorInfo:i});if(!r.token)throw dP.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=bo(bo({},i),{token:e,createTime:Date.now()}),[4,OP(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,FP(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function FP(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,kP(n)];case 1:return(e=t.sent())?[4,RP(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return e=PP(r),[4,AP()];case 1:return n=t.sent(),[4,(n=n.transaction(CP,"readwrite")).objectStore(CP).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function jP(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,function(o,s){return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return[4,xP(o)];case 1:e=t.sent(),n=LP(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(DP(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),dP.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,dP.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw dP.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,OP(n,e)];case 2:return t.sent(),[2,e.token]}})})}function UP(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function VP(t){return"object"==typeof t&&t&&mP in t}function qP(e){return new Promise(function(t){setTimeout(t,e)})}var BP=(Object.defineProperty(HP.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),HP.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw dP.create("invalid-bg-handler");this.bgMessageHandler=t},HP.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},HP.prototype.getToken=function(){var n;return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,kP(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:vP,t.label=2;case 2:return[2,MP(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},HP.prototype.deleteToken=function(){return FP(this.firebaseDependencies,self.registration)},HP.prototype.requestPermission=function(){throw dP.create("only-available-in-window")},HP.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw dP.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw dP.create("invalid-vapid-key");this.vapidKey=t},HP.prototype.useServiceWorker=function(){throw dP.create("only-available-in-window")},HP.prototype.onMessage=function(){throw dP.create("only-available-in-window")},HP.prototype.onTokenRefresh=function(){throw dP.create("only-available-in-window")},HP.prototype.onPush=function(a){return wo(this,void 0,void 0,function(){var i,o,s;return Eo(this,function(t){switch(t.label){case 0:return(s=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(a))?[4,WP()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=pP.PUSH_RECEIVED;try{for(var i=Io(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,s)]:(o=!1,s.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=bo({},(e=s).notification)).data=((n={})[gP]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=UP(s),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[4,qP(1e3)]);case 4:return t.sent(),[2]}var e,n,r})})},HP.prototype.onSubChange=function(n){var r;return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,FP(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,kP(this.firebaseDependencies)];case 3:return e=t.sent(),[4,FP(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,MP(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:vP)];case 5:return t.sent(),[2]}})})},HP.prototype.onNotificationClick=function(s){var a;return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:return(e=null===(a=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===a?void 0:a[gP])?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(n=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return VP(t.data)?self.location.origin:null}(e))?(r=new URL(n,self.location.href),i=new URL(self.location.origin),r.host!==i.host?[2]:[4,function(u){return wo(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:return[4,WP()];case 1:e=t.sent();try{for(n=Io(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]):[2]):[2];case 1:return(o=t.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return o=t.sent(),[4,qP(3e3)];case 3:return t.sent(),[3,6];case 4:return[4,o.focus()];case 5:o=t.sent(),t.label=6;case 6:return o?(e.messageType=pP.NOTIFICATION_CLICKED,e.isFirebaseMessaging=!0,[2,o.postMessage(e)]):[2]}})})},HP);function HP(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function WP(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var zP=(Object.defineProperty(GP.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),GP.prototype.messageEventListener=function(i){return wo(this,void 0,void 0,function(){var n,r;return Eo(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===pP.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),VP(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},GP.prototype.getVapidKey=function(){return this.vapidKey},GP.prototype.getSwReg=function(){return this.swRegistration},GP.prototype.getToken=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw dP.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,MP(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},GP.prototype.updateVapidKey=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=vP),[2]})})},GP.prototype.updateSwReg=function(e){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw dP.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},GP.prototype.registerDefaultSw=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),dP.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},GP.prototype.deleteToken=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,FP(this.firebaseDependencies,this.swRegistration)]}})})},GP.prototype.requestPermission=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?dP.create("permission-blocked"):dP.create("permission-default")}})})},GP.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw dP.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw dP.create("invalid-vapid-key");this.vapidKey=t},GP.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw dP.create("invalid-sw-registration");if(this.swRegistration)throw dP.create("use-sw-after-get-token");this.swRegistration=t},GP.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},GP.prototype.setBackgroundMessageHandler=function(){throw dP.create("only-available-in-sw")},GP.prototype.onBackgroundMessage=function(){throw dP.create("only-available-in-sw")},GP.prototype.onTokenRefresh=function(){return function(){}},GP.prototype.logEvent=function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case pP.NOTIFICATION_CLICKED:return"notification_open";case pP.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[mP],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},GP);function GP(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function KP(t){return dP.create("missing-app-config-values",{valueName:t})}Kn={isSupported:QP};function QP(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Xl.INTERNAL.registerComponent(new ws("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw KP("App Configuration Object");if(!t.name)throw KP("App Name");var r=t.options;try{for(var i=Io(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw KP(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!QP())throw dP.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?BP:zP)(t)},"PUBLIC").setServiceProps(Kn));var YP,XP="firebasestorage.googleapis.com",JP="storageBucket",$P=(_o(ZP,YP=Ko),ZP.prototype._codeEquals=function(t){return tR(t)===this.code},Object.defineProperty(ZP.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(ZP.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),ZP);function ZP(t,e){t=YP.call(this,tR(t),"Firebase Storage: "+e+" ("+tR(t)+")")||this;return t.customData={serverResponse:null},Object.setPrototypeOf(t,ZP.prototype),t}function tR(t){return"storage/"+t}function eR(){return new $P("unknown","An unknown error occurred, please check the error payload for server response.")}function nR(){return new $P("canceled","User canceled the upload/download.")}function rR(){return new $P("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iR(t){return new $P("invalid-argument",t)}function oR(){return new $P("app-deleted","The Firebase app was deleted.")}function sR(t){return new $P("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aR(t,e){return new $P("invalid-format","String does not match format '"+t+"': "+e)}function uR(t){throw new $P("internal-error","Internal error: "+t)}var cR={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},hR=function(t,e){this.data=t,this.contentType=e||null};function lR(t,e){switch(t){case cR.RAW:return new hR(fR(e));case cR.BASE64:case cR.BASE64URL:return new hR(pR(t,e));case cR.DATA_URL:return new hR(function(t){t=new dR(t);return t.base64?pR(cR.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw aR(cR.DATA_URL,"Malformed data URL.")}return fR(e)}(t.rest)}(e),new dR(e).contentType)}throw eR()}function fR(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function pR(e,t){switch(e){case cR.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw aR(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case cR.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw aR(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw aR(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var dR=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw aR(cR.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var vR,yR={STATE_CHANGED:"state_changed"},gR={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mR(t){switch(t){case"running":case"pausing":case"canceling":return gR.RUNNING;case"paused":return gR.PAUSED;case"success":return gR.SUCCESS;case"canceled":return gR.CANCELED;case"error":default:return gR.ERROR}}(vt=vR=vR||{})[vt.NO_ERROR=0]="NO_ERROR",vt[vt.NETWORK_ERROR=1]="NETWORK_ERROR",vt[vt.ABORT=2]="ABORT";var _R=(bR.prototype.send=function(t,e,n,r){if(this.sent_)throw uR("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},bR.prototype.getErrorCode=function(){if(!this.sent_)throw uR("cannot .getErrorCode() before sending");return this.errorCode_},bR.prototype.getStatus=function(){if(!this.sent_)throw uR("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},bR.prototype.getResponseText=function(){if(!this.sent_)throw uR("cannot .getResponseText() before sending");return this.xhr_.responseText},bR.prototype.abort=function(){this.xhr_.abort()},bR.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},bR.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},bR.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},bR);function bR(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=vR.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=vR.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=vR.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var wR=(ER.prototype.createXhrIo=function(){return new _R},ER);function ER(){}function IR(t){return"string"==typeof t||t instanceof String}function TR(t){return SR()&&t instanceof Blob}function SR(){return"undefined"!=typeof Blob}function CR(t,e,n,r){if(r<e)throw iR("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw iR("Invalid value for '"+t+"'. Expected "+n+" or less.")}function NR(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(SR())return new Blob(t);throw new $P("unsupported-environment","This browser doesn't seem to support creating Blobs")}var AR=(kR.prototype.size=function(){return this.size_},kR.prototype.type=function(){return this.type_},kR.prototype.slice=function(t,e){if(TR(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new kR(r)}var i,r;return new kR(new Uint8Array(this.data_.buffer,t,e-t),!0)},kR.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(SR()){var n=t.map(function(t){return t instanceof kR?t.data_:t});return new kR(NR.apply(null,n))}var n=t.map(function(t){return IR(t)?lR(cR.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new kR(i,!0)},kR.prototype.uploadData=function(){return this.data_},kR);function kR(t,e){var n=0,r="";TR(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var OR=(Object.defineProperty(PR.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(PR.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),PR.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},PR.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},PR.makeFromBucketSpec=function(e){var t;try{t=PR.makeFromUrl(e)}catch(t){return new PR(e,"")}if(""===t.path)return t;throw new $P("invalid-default-bucket","Invalid default bucket '"+e+"'.")},PR.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=XP.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new PR(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw new $P("invalid-url","Invalid URL '"+t+"'.");return e},PR);function PR(t,e){this.bucket=t,this.path_=e}function RR(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function DR(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function xR(t){return"https://"+XP+"/v0"+t}function LR(t){var e,n=encodeURIComponent,r="?";for(e in t){t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&")}return r=r.slice(0,-1)}function MR(t,e){return e}var FR=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||MR},jR=null;function UR(){if(jR)return jR;var t=[];t.push(new FR("bucket")),t.push(new FR("generation")),t.push(new FR("metageneration")),t.push(new FR("name","fullPath",!0));var e=new FR("name");e.xform=function(t,e){return!IR(e=e)||e.length<2?e:DR(e)},t.push(e);e=new FR("size");return e.xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new FR("timeCreated")),t.push(new FR("updated")),t.push(new FR("md5Hash",null,!0)),t.push(new FR("cacheControl",null,!0)),t.push(new FR("contentDisposition",null,!0)),t.push(new FR("contentEncoding",null,!0)),t.push(new FR("contentLanguage",null,!0)),t.push(new FR("contentType",null,!0)),t.push(new FR("metadata","customMetadata",!0)),jR=t}function VR(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new OR(t,e);return r._makeStorageReference(e)}})}function qR(t,e,n){e=RR(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return VR(r,t),r}(t,e,n)}function BR(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var HR="prefixes",WR="items";function zR(t,e,n){n=RR(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[HR])for(var i=0,o=n[HR];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new OR(e,s));r.prefixes.push(a)}if(n[WR])for(var u=0,c=n[WR];u<c.length;u++){var h=c[u],a=t._makeStorageReference(new OR(e,h.name));r.items.push(a)}return r}(t,e,n)}var GR=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function KR(t){if(!t)throw eR()}function QR(n,r){return function(t,e){return KR(null!==(e=qR(n,e,r))),e}}function YR(n,r){return function(t,e){return KR(null!==(e=zR(n,r,e))),e}}function XR(r,i){return function(t,e){var n=qR(r,e,i);return KR(null!==n),function(r,t){if(null===(t=RR(t)))return null;if(!IR(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return xR("/b/"+i(e)+"/o/"+i(n))+LR({alt:"media",token:t})})[0]}(n,e)}}function JR(i){return function(t,e){var n,r=401===t.getStatus()?new $P("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new $P("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new $P("unauthorized","User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function $R(r){var i=JR(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new $P("object-not-found","Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function ZR(t,e,n){var r=xR(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new GR(r,"GET",QR(t,n),i);return i.errorHandler=$R(e),i}function tD(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function eD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=tD(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+BR(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=AR.getBlob(i,r,a);if(null===r)throw rR();a={name:u.fullPath},u=xR(o),o=t.maxUploadRetryTime,o=new GR(u,"POST",QR(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=JR(e),o}var nD=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function rD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){KR(!1)}return KR(!!n&&-1!==(e||["active"]).indexOf(n)),n}function iD(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=tD(e,r,i),i={name:s.fullPath},o=xR(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=BR(s,n),t=t.maxUploadRetryTime;t=new GR(o,"POST",function(t){var e;rD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){KR(!1)}return KR(IR(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=JR(e),t}function oD(t,e,n,i){t=t.maxUploadRetryTime,t=new GR(n,"POST",function(t){var e=rD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){KR(!1)}n||KR(!1);var r=Number(n);return KR(!isNaN(r)),new nD(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=JR(e),t}function sD(t,o,e,s,n,a,r,i){var u=new nD(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new $P("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw rR();n=o.maxUploadRetryTime,n=new GR(e,"POST",function(t,e){var n=rD(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?QR(o,a)(t,e):null;return new nD(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=JR(t),n}var aD=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(t=t,this.next=t.next,this.error=t.error,this.complete=t.complete)};function uD(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var cD=(hD.prototype._makeProgressCallback=function(){var e=this,n=this._transferred;return function(t){return e._updateProgress(n+t)}},hD.prototype._shouldDoResumable=function(t){return 262144<t.size()},hD.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},hD.prototype._resolveToken=function(e){var n=this;this._ref.storage._getAuthToken().then(function(t){switch(n._state){case"running":e(t);break;case"canceling":n._transition("canceled");break;case"pausing":n._transition("paused")}})},hD.prototype._createResumable=function(){var n=this;this._resolveToken(function(t){var e=iD(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._uploadUrl=t,n._needToFetchStatus=!1,n.completeTransitions_()},n._errorHandler)})},hD.prototype._fetchStatus=function(){var n=this,r=this._uploadUrl;this._resolveToken(function(t){var e=oD(n._ref.storage,n._ref._location,r,n._blob),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._updateProgress(t.current),n._needToFetchStatus=!1,t.finalized&&(n._needToFetchMetadata=!0),n.completeTransitions_()},n._errorHandler)})},hD.prototype._continueUpload=function(){var n=this,r=262144*this._chunkMultiplier,i=new nD(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken(function(t){var e;try{e=sD(n._ref._location,n._ref.storage,o,n._blob,r,n._mappings,i,n._makeProgressCallback())}catch(t){return n._error=t,void n._transition("error")}t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._increaseMultiplier(),n._request=void 0,n._updateProgress(t.current),t.finalized?(n._metadata=t.metadata,n._transition("success")):n.completeTransitions_()},n._errorHandler)})},hD.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},hD.prototype._fetchMetadata=function(){var n=this;this._resolveToken(function(t){var e=ZR(n._ref.storage,n._ref._location,n._mappings),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._transition("success")},n._metadataErrorHandler)})},hD.prototype._oneShotUpload=function(){var n=this;this._resolveToken(function(t){var e=eD(n._ref.storage,n._ref._location,n._mappings,n._blob,n._metadata),t=n._ref.storage._makeRequest(e,t);(n._request=t).getPromise().then(function(t){n._request=void 0,n._metadata=t,n._updateProgress(n._blob.size()),n._transition("success")},n._errorHandler)})},hD.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},hD.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=nR(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},hD.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(hD.prototype,"snapshot",{get:function(){var t=mR(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),hD.prototype.on=function(t,e,n,r){var i=this,o=new aD(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},hD.prototype.then=function(t,e){return this._promise.then(t,e)},hD.prototype.catch=function(t){return this.then(null,t)},hD.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},hD.prototype._removeObserver=function(t){t=this._observers.indexOf(t);-1!==t&&this._observers.splice(t,1)},hD.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach(function(t){e._notifyObserver(t)})},hD.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(mR(this._state)){case gR.SUCCESS:uD(this._resolve.bind(null,this.snapshot))();break;case gR.CANCELED:case gR.ERROR:uD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},hD.prototype._notifyObserver=function(t){switch(mR(this._state)){case gR.RUNNING:case gR.PAUSED:t.next&&uD(t.next.bind(t,this.snapshot))();break;case gR.SUCCESS:t.complete&&uD(t.complete.bind(t))();break;case gR.CANCELED:case gR.ERROR:t.error&&uD(t.error.bind(t,this._error))();break;default:t.error&&uD(t.error.bind(t,this._error))()}},hD.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},hD.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},hD.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},hD);function hD(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=UR(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}var lD=(fD.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},fD.prototype._newRef=function(t,e){return new fD(t,e)},Object.defineProperty(fD.prototype,"root",{get:function(){var t=new OR(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"name",{get:function(){return DR(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(fD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===t)return null;t=new OR(this._location.bucket,t);return new fD(this._service,t)},enumerable:!1,configurable:!0}),fD.prototype._throwIfRoot=function(t){if(""===this._location.path)throw sR(t)},fD);function fD(t,e){this._service=t,this._location=e instanceof OR?e:OR.makeFromUrl(e)}function pD(t){var e={prefixes:[],items:[]};return function r(i,o,s){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,dD(i,{pageToken:s})];case 1:return e=t.sent(),(n=o.prefixes).push.apply(n,e.prefixes),(n=o.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,r(i,o,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(t,e).then(function(){return e})}function dD(u,c){return wo(this,void 0,void 0,function(){var s,a;return Eo(this,function(t){switch(t.label){case 0:return null!=c&&"number"==typeof c.maxResults&&CR("options.maxResults",1,1e3,c.maxResults),[4,u.storage._getAuthToken()];case 1:return s=t.sent(),a=c||{},e=u.storage,n=u._location,r="/",i=a.pageToken,o=a.maxResults,t={},n.isRoot?t.prefix="":t.prefix=n.path+"/",r&&0<r.length&&(t.delimiter=r),i&&(t.pageToken=i),o&&(t.maxResults=o),i=xR(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new GR(i,"GET",YR(e,n.bucket),o)).urlParams=t,o.errorHandler=JR(n),[2,u.storage._makeRequest(o,s).getPromise()]}var e,n,r,i,o})})}function vD(a,u){return wo(this,void 0,void 0,function(){var s;return Eo(this,function(t){switch(t.label){case 0:return a._throwIfRoot("updateMetadata"),[4,a.storage._getAuthToken()];case 1:return s=t.sent(),e=a.storage,n=a._location,r=u,i=UR(),o=xR(n.fullServerUrl()),t=BR(r,i),r=e.maxOperationRetryTime,(r=new GR(o,"PATCH",QR(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=t,r.errorHandler=$R(n),[2,a.storage._makeRequest(r,s).getPromise()]}var e,n,r,i,o})})}function yD(s){return wo(this,void 0,void 0,function(){var o;return Eo(this,function(t){switch(t.label){case 0:return s._throwIfRoot("getDownloadURL"),[4,s.storage._getAuthToken()];case 1:return o=t.sent(),e=s.storage,n=s._location,r=UR(),i=xR(n.fullServerUrl()),t=e.maxOperationRetryTime,(t=new GR(i,"GET",XR(e,r),t)).errorHandler=$R(n),[2,s.storage._makeRequest(t,o).getPromise().then(function(t){if(null===t)throw new $P("no-download-url","The given file does not have any download URLs.");return t})]}var e,n,r,i})})}function gD(i){return wo(this,void 0,void 0,function(){var r;return Eo(this,function(t){switch(t.label){case 0:return i._throwIfRoot("deleteObject"),[4,i.storage._getAuthToken()];case 1:return r=t.sent(),e=i.storage,n=i._location,t=xR(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new GR(t,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=$R(n),[2,i.storage._makeRequest(e,r).getPromise()]}var e,n})})}function mD(t,e){var n,e=(n=t._location.path,e=(e=e).split("/").filter(function(t){return 0<t.length}).join("/"),0===n.length?e:n+"/"+e),e=new OR(t._location.bucket,e);return new lD(t.storage,e)}var _D=(Object.defineProperty(bD.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(bD.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(bD.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(bD.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),bD);function bD(t,e,n){this._delegate=t,this.task=e,this.ref=n}var wD=(Object.defineProperty(ED.prototype,"snapshot",{get:function(){return new _D(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),ED.prototype.then=function(e,t){var n=this;return this._delegate.then(function(t){if(e)return e(new _D(t,n,n._ref))},t)},ED.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new _D(t,i,i._ref))}:{next:e.next?function(t){return e.next(new _D(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},ED);function ED(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var ID=(Object.defineProperty(TD.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map(function(t){return new SD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(TD.prototype,"items",{get:function(){var e=this;return this._delegate.items.map(function(t){return new SD(t,e._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(TD.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),TD);function TD(t,e){this._delegate=t,this._service=e}var SD=(Object.defineProperty(CD.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(CD.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(CD.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),CD.prototype.toString=function(){return this._delegate.toString()},CD.prototype.child=function(t){return new CD(mD(this._delegate,t),this.storage)},Object.defineProperty(CD.prototype,"root",{get:function(){return new CD(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(CD.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new CD(t,this.storage)},enumerable:!1,configurable:!0}),CD.prototype.put=function(t,e){return this._throwIfRoot("put"),new wD((n=this._delegate,t=t,e=e,n._throwIfRoot("uploadBytesResumable"),new cD(n,new AR(t),e)),this);var n},CD.prototype.putString=function(t,e,n){void 0===e&&(e=cR.RAW),this._throwIfRoot("putString");t=lR(e,t),n=bo({},n);return null==n.contentType&&null!=t.contentType&&(n.contentType=t.contentType),new wD(new cD(this._delegate,new AR(t.data,!0),n),this)},CD.prototype.listAll=function(){var e=this;return pD(this._delegate).then(function(t){return new ID(t,e.storage)})},CD.prototype.list=function(t){var e=this;return dD(this._delegate,t).then(function(t){return new ID(t,e.storage)})},CD.prototype.getMetadata=function(){return function(r){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return r._throwIfRoot("getMetadata"),[4,r.storage._getAuthToken()];case 1:return e=t.sent(),n=ZR(r.storage,r._location,UR()),[2,r.storage._makeRequest(n,e).getPromise()]}})})}(this._delegate)},CD.prototype.updateMetadata=function(t){return vD(this._delegate,t)},CD.prototype.getDownloadURL=function(){return yD(this._delegate)},CD.prototype.delete=function(){return this._throwIfRoot("delete"),gD(this._delegate)},CD.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw sR(t)},CD);function CD(t,e){this._delegate=t,this.storage=e}var ND=(AD.prototype.getPromise=function(){return this.promise_},AD.prototype.cancel=function(t){},AD);function AD(t){this.promise_=Promise.reject(t)}var kD=(OD.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=eR()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?oR:nR)()):i(n=new $P("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,Co([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new PD(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new PD(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===vR.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new PD(n,t))):(t=t.getErrorCode()===vR.ABORT,r(!1,new PD(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},OD.prototype.getPromise=function(){return this.promise_},OD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},OD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},OD);function OD(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var PD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function RD(t){return/^[A-Za-z]+:\/\//.test(t)}function DD(t,e){if(t instanceof LD){var n=t;if(null==n._bucket)throw new $P("no-default-bucket","No default bucket found. Did you set the '"+JP+"' property when initializing the app?");n=new lD(n,n._bucket);return null!=e?DD(n,e):n}if(void 0===e)return t;if(e.includes(".."))throw iR('`path` param cannot contain ".."');return mD(t,e)}function xD(t,e){if(e&&RD(e)){if(t instanceof LD)return new lD(t,e);throw iR("To use ref(service, url), the first argument must be a Storage instance.")}return DD(t,e)}var LD=(Object.defineProperty(MD.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){CR("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(MD.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){CR("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),MD.prototype._getAuthToken=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},MD.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},MD.prototype._makeStorageReference=function(t){return new lD(this,t)},MD.prototype._makeRequest=function(t,e){var n=this;if(this._deleted)return new ND(oR());var r,i,o,s,a,u,c=(r=t,i=this._appId,o=e,s=this._pool,a=this._firebaseVersion,u=LR(r.urlParams),t=r.url+u,e=Object.assign({},r.headers),u=e,(i=i)&&(u["X-Firebase-GMPID"]=i),i=e,null!==(o=o)&&0<o.length&&(i.Authorization="Firebase "+o),a=a,e["X-Firebase-Storage-Version"]="webjs/"+(null!=a?a:"AppManager"),new kD(t,r.method,e,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,s));return this._requests.add(c),c.getPromise().then(function(){return n._requests.delete(c)},function(){return n._requests.delete(c)}),c},MD);function MD(t,e,n,r,i){this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?OR.makeFromBucketSpec(r):null==(r=null==(r=this.app.options)?void 0:r[JP])?null:OR.makeFromBucketSpec(r)}var FD=(Object.defineProperty(jD.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(jD.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),jD.prototype.ref=function(t){if(RD(t))throw iR("ref() expected a child path but got a URL, use refFromURL instead.");return new SD(xD(this._delegate,t),this)},jD.prototype.refFromURL=function(t){if(!RD(t))throw iR("refFromURL() expected a full URL but got a child path, use ref() instead.");try{OR.makeFromUrl(t)}catch(t){throw iR("refFromUrl() expected a valid full URL but got an invalid one.")}return new SD(xD(this._delegate,t),this)},jD.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},jD.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},jD);function jD(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var UD,VD;function qD(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new FD(n,new LD(n,t,new wR,e,Xl.SDK_VERSION))}VD={TaskState:gR,TaskEvent:yR,StringFormat:cR,Storage:LD,Reference:SD},(UD=Xl).INTERNAL.registerComponent(new ws("storage",qD,"PUBLIC").setServiceProps(VD).setMultipleInstances(!0)),UD.registerVersion("@firebase/storage","0.4.2");var BD,HD,WD="0.4.5",zD="FB-PERF-TRACE-MEASURE",GD="@firebase/performance/config",KD="@firebase/performance/configexpire",Kn="Performance",vt=((vt={})["trace started"]="Trace {$traceName} was started before.",vt["trace stopped"]="Trace {$traceName} is not running.",vt["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",vt["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",vt["no window"]="Window is not available.",vt["no app id"]="App id is not available.",vt["no project id"]="Project id is not available.",vt["no api key"]="Api key is not available.",vt["invalid cc log"]="Attempted to queue invalid cc event",vt["FB not default"]="Performance can only start when Firebase app instance is the default one.",vt["RC response not ok"]="RC response is not ok",vt["invalid attribute name"]="Attribute name {$attributeName} is invalid.",vt["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",vt["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",vt["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",vt),QD=new Yo("performance",Kn,vt),YD=new Ls(Kn);YD.logLevel=ks.INFO;var XD,JD=($D.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},$D.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},$D.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},$D.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},$D.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},$D.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},$D.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Bo()||(YD.info("IndexedDB is not supported by current browswer"),!1):(YD.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},$D.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},$D.getInstance=function(){return void 0===BD&&(BD=new $D(HD)),BD},$D);function $D(t){if(!(this.window=t))throw QD.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function ZD(t,e){var n=t.length-e.length;if(n<0||1<n)throw QD.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var tx,ex,nx=(rx.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw QD.create("no app id");return t},rx.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw QD.create("no project id");return t},rx.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw QD.create("no api key");return t},rx.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},rx.getInstance=function(){return void 0===XD&&(XD=new rx),XD},rx);function rx(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ZD("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ZD("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Kn=ex=ex||{})[Kn.UNKNOWN=0]="UNKNOWN",Kn[Kn.VISIBLE=1]="VISIBLE",Kn[Kn.HIDDEN=2]="HIDDEN";var ix=["firebase_","google_","ga_"],ox=new RegExp("^[a-zA-Z]\\w*$");function sx(){switch(JD.getInstance().document.visibilityState){case"visible":return ex.VISIBLE;case"hidden":return ex.HIDDEN;default:return ex.UNKNOWN}}var ax="0.0.1",ux={loggingEnabled:!0},cx="FIREBASE_INSTALLATIONS_AUTH";function hx(t){var n,e=function(){var t=JD.getInstance().localStorage;if(!t)return;var e=t.getItem(KD);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(GD);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(fx(e),Promise.resolve()):(n=t,function(){var t=nx.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+nx.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+nx.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:cx+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:nx.getInstance().getAppId(),app_version:WD,sdk_version:ax})});return fetch(t).then(function(t){if(t.ok)return t.json();throw QD.create("RC response not ok")})}).catch(function(){YD.info(lx)}).then(fx).then(function(t){var e=JD.getInstance().localStorage;if(!t||!e)return;e.setItem(GD,JSON.stringify(t)),e.setItem(KD,String(Date.now()+60*nx.getInstance().configTimeToLive*60*1e3))},function(){}))}var lx="Could not fetch config, will use default configs";function fx(t){if(!t)return t;var e=nx.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):ux.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=px(e.tracesSamplingRate),e.logNetworkAfterSampling=px(e.networkRequestsSamplingRate),t}function px(t){return Math.random()<=t}var dx,vx=1;function yx(){return vx=2,dx=dx||function(){var n=JD.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=nx.getInstance().installationsService.getId()).then(function(t){tx=t}),t;var t}).then(hx).then(gx,gx)}function gx(){vx=3}var mx,_x=1e4,bx=5500,wx=3,Ex=1e3,Ix=wx,Tx=[],Sx=!1;function Cx(t){setTimeout(function(){var t,e;if(0!==Ix)return Tx.length?(t=Tx.splice(0,Ex),e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),void function(t,r){return function(t){var e=nx.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||YD.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=_x;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(Tx=Co(r,Tx),YD.info("Retry transport request later.")),Ix=wx,Cx(n)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:nx.getInstance().logSource,log_event:e},t).catch(function(){Tx=Co(t,Tx),Ix--,YD.info("Tries left: "+Ix+"."),Cx(_x)})):Cx(_x)},t)}function Nx(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw QD.create("invalid cc log");Tx=Co(Tx,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function Ax(t,e){(mx=mx||Nx(Px))(t,e)}function kx(t){var e=nx.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&JD.getInstance().requiredApisAvailable()&&(t.isAuto&&sx()!==ex.VISIBLE||(3===vx?Ox(t):yx().then(function(){return Ox(t)},function(){return Ox(t)})))}function Ox(t){var e;!tx||(e=nx.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return Ax(t,1)},0)}function Px(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:Rx(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:Rx(),trace_metric:e};return JSON.stringify(e)})(t)}function Rx(){return{google_app_id:nx.getInstance().getAppId(),app_instance_id:tx,web_app_info:{sdk_version:WD,page_url:JD.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=JD.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:sx(),effective_connection_type:function(){var t=JD.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var Dx=["_fp","_fcp","_fid"];var xx=(Lx.prototype.start=function(){if(1!==this.state)throw QD.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Lx.prototype.stop=function(){if(2!==this.state)throw QD.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),kx(this)},Lx.prototype.record=function(t,e,n){if(t<=0)throw QD.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw QD.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=bo({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}kx(this)},Lx.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},Lx.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<Dx.indexOf(n))&&n.startsWith("_"))throw QD.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&YD.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},Lx.prototype.getMetric=function(t){return this.counters[t]||0},Lx.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!ix.some(function(t){return n.startsWith(t)})&&!!n.match(ox)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw QD.create("invalid attribute name",{attributeName:t});if(!r)throw QD.create("invalid attribute value",{attributeValue:e})}},Lx.prototype.getAttribute=function(t){return this.customAttributes[t]},Lx.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},Lx.prototype.getAttributes=function(){return bo({},this.customAttributes)},Lx.prototype.setStartTime=function(t){this.startTimeUs=t},Lx.prototype.setDuration=function(t){this.durationUs=t},Lx.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},Lx.createOobTrace=function(t,e,n){var r,i=JD.getInstance().getUrl();i&&(r=new Lx("_wt_"+i,!0),i=Math.floor(1e3*JD.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),kx(r))},Lx.createUserTimingTrace=function(t){kx(new Lx(t,!1,t))},Lx);function Lx(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=JD.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||zD+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function Mx(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=JD.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=nx.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return Ax(e,0)},0)))}var Fx=5e3;function jx(){tx&&(setTimeout(function(){var t=JD.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){xx.createOobTrace(e,n),r=void 0},Fx),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),xx.createOobTrace(e,n,t))})):xx.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=JD.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){Mx(r[n])}t.setupObserver("resource",Mx)},0),setTimeout(function(){for(var t=JD.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){Ux(r[n])}t.setupObserver("measure",Ux)},0))}function Ux(t){t=t.name;t.substring(0,zD.length)!==zD&&xx.createUserTimingTrace(t)}var Vx=(qx.prototype.trace=function(t){return new xx(t)},Object.defineProperty(qx.prototype,"instrumentationEnabled",{get:function(){return nx.getInstance().instrumentationEnabled},set:function(t){nx.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(qx.prototype,"dataCollectionEnabled",{get:function(){return nx.getInstance().dataCollectionEnabled},set:function(t){nx.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),qx);function qx(t){this.app=t,JD.getInstance().requiredApisAvailable()&&Ho().then(function(t){t&&(Sx||(Cx(bx),Sx=!0),yx().then(jx,jx))}).catch(function(t){YD.info("Environment doesn't support IndexedDB: "+t)})}var Bx;function Hx(t,e){if("[DEFAULT]"!==t.name)throw QD.create("FB not default");if("undefined"==typeof window)throw QD.create("no window");return HD=window,nx.getInstance().firebaseAppInstance=t,nx.getInstance().installationsService=e,new Vx(t)}(Bx=Xl).INTERNAL.registerComponent(new ws("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return Hx(e,t)},"PUBLIC")),Bx.registerVersion("@firebase/performance","0.4.5");var Wx,zx,Gx="firebase_id",Kx="origin",Qx=6e4,Yx="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Xx="https://www.googletagmanager.com/gtag/js";(Kn=Wx=Wx||{}).EVENT="event",Kn.SET="set",Kn.CONFIG="config",(Kn=zx=zx||{}).ADD_SHIPPING_INFO="add_shipping_info",Kn.ADD_PAYMENT_INFO="add_payment_info",Kn.ADD_TO_CART="add_to_cart",Kn.ADD_TO_WISHLIST="add_to_wishlist",Kn.BEGIN_CHECKOUT="begin_checkout",Kn.CHECKOUT_PROGRESS="checkout_progress",Kn.EXCEPTION="exception",Kn.GENERATE_LEAD="generate_lead",Kn.LOGIN="login",Kn.PAGE_VIEW="page_view",Kn.PURCHASE="purchase",Kn.REFUND="refund",Kn.REMOVE_FROM_CART="remove_from_cart",Kn.SCREEN_VIEW="screen_view",Kn.SEARCH="search",Kn.SELECT_CONTENT="select_content",Kn.SELECT_ITEM="select_item",Kn.SELECT_PROMOTION="select_promotion",Kn.SET_CHECKOUT_OPTION="set_checkout_option",Kn.SHARE="share",Kn.SIGN_UP="sign_up",Kn.TIMING_COMPLETE="timing_complete",Kn.VIEW_CART="view_cart",Kn.VIEW_ITEM="view_item",Kn.VIEW_ITEM_LIST="view_item_list",Kn.VIEW_PROMOTION="view_promotion",Kn.VIEW_SEARCH_RESULTS="view_search_results";var Jx=new Ls("@firebase/analytics");function $x(o,s,a,u){return function(n,r,i){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==Wx.EVENT?[3,2]:[4,function(u,c,h,l,f){return wo(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return Eo(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(Wx.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),Jx.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==Wx.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),Jx.error(n),[3,8];case 8:return r(Wx.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(Wx.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),Jx.error(e),[3,7];case 7:return[2]}})})}}var Kn=((Kn={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Kn["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Kn["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Kn["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Kn["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Kn["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Kn["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Kn["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Kn["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Kn),Zx=new Yo("analytics","Analytics",Kn),tL=30;function eL(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var nL=new(eL.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},eL.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},eL.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},eL);function rL(o){var s;return wo(this,void 0,void 0,function(){var e,n,r,i;return Eo(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=Yx.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw Zx.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function iL(a,u,c){return void 0===u&&(u=nL),wo(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return Eo(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw Zx.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new sL,setTimeout(function(){return wo(s,void 0,void 0,function(){return Eo(this,function(t){return o.abort(),[2]})})},void 0!==c?c:Qx),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;void 0===l&&(l=nL);return wo(this,void 0,void 0,function(){var e,n,r,s,a;return Eo(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(Zx.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return Jx.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,rL(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(oL(r=t.sent()))return s=503===Number(r.customData.httpStatus)?bs(p,l.intervalMillis,tL):bs(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),Jx.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return Jx.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw Zx.create("no-api-key")})})}function oL(t){if(t instanceof Ko&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var sL=(aL.prototype.addEventListener=function(t){this.listeners.push(t)},aL.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},aL);function aL(){this.listeners=[]}function uL(i,o,s,a,u){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return(e=iL(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&Jx.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return Jx.error(t)}),o.push(e),n=function(){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return Bo()?[3,1]:(Jx.warn(Zx.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,Ho()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),Jx.warn(Zx.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[Kx]="firebase",r.update=!0,r=r,null!=n&&(r[Gx]=n),u(Wx.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}var cL,hL,lL={},fL=[],pL={},dL="dataLayer",vL="gtag",yL=!1;function gL(t){if(yL)throw Zx.create("already-initialized");t.dataLayerName&&(dL=t.dataLayerName),t.gtagName&&(vL=t.gtagName)}function mL(t,e){n=[],Uo()&&n.push("This is a browser extension environment."),Wo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=Zx.create("invalid-analytics-context",{errorInfo:n}),Jx.warn(n.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw Zx.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Zx.create("no-api-key");Jx.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=lL[u])throw Zx.create("already-exists",{id:u});return yL||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(Xx))return r}}()||(s=dL,(a=document.createElement("script")).src=Xx+"?l="+s,a.async=!0,document.head.appendChild(a)),i=dL,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=lL,s=fL,a=pL,r=dL,i=vL,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=$x(o,n,s,a),i={gtagCore:o,wrappedGtag:window[i]},hL=i.wrappedGtag,cL=i.gtagCore,yL=!0),lL[u]=uL(t,fL,pL,e,cL),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return s&&s.global?(n(Wx.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=bo(bo({},o),{send_to:e}),n(Wx.EVENT,i,e),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e,n).catch(function(t){return Jx.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(Wx.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(Wx.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e).catch(function(t){return Jx.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return o&&o.global?(n(Wx.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(Wx.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e).catch(function(t){return Jx.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return wo(this,void 0,void 0,function(){var e,n,r,i,o;return Eo(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(Wx.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(Wx.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(hL,lL[u],t,e).catch(function(t){return Jx.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(lL[u],t).catch(function(t){return Jx.error(t)})},INTERNAL:{delete:function(){return delete lL[u],Promise.resolve()}}}}var _L,bL="analytics";function wL(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:if(Uo())return[2,!1];if(!Wo())return[2,!1];if(!Bo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Ho()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(_L=Xl).INTERNAL.registerComponent(new ws(bL,function(t){return mL(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:gL,EventName:zx,isSupported:wL})),_L.INTERNAL.registerComponent(new ws("analytics-internal",function(t){try{return{logEvent:t.getProvider(bL).getImmediate().logEvent}}catch(t){throw Zx.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),_L.registerVersion("@firebase/analytics","0.6.2");var EL=(IL.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},IL.prototype.fetch=function(i){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},IL);function IL(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Kn=((Kn={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Kn["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Kn["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Kn["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Kn["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Kn["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Kn["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Kn["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Kn["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Kn["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Kn["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Kn["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Kn["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Kn),TL=new Yo("remoteconfig","Remote Config",Kn);var SL=(CL.prototype.fetch=function(f){return wo(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return Eo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),TL.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),TL.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw TL.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},CL);function CL(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var NL=(AL.prototype.addEventListener=function(t){this.listeners.push(t)},AL.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},AL);function AL(){this.listeners=[]}var kL=["1","true","t","yes","y","on"],OL=(PL.prototype.asString=function(){return this._value},PL.prototype.asBoolean=function(){return"static"!==this._source&&0<=kL.indexOf(this._value.toLowerCase())},PL.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},PL.prototype.getSource=function(){return this._source},PL);function PL(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var RL=(DL.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ks.DEBUG;break;case"silent":this._logger.logLevel=ks.SILENT;break;default:this._logger.logLevel=ks.ERROR}},Object.defineProperty(DL.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(DL.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),DL.prototype.activate=function(){return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},DL.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},DL.prototype.fetch=function(){return wo(this,void 0,void 0,function(){var r,i,o,s=this;return Eo(this,function(t){switch(t.label){case 0:r=new NL,setTimeout(function(){return wo(s,void 0,void 0,function(){return Eo(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Ko&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},DL.prototype.fetchAndActivate=function(){return wo(this,void 0,void 0,function(){return Eo(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},DL.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(bo(bo({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},DL.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},DL.prototype.getNumber=function(t){return this.getValue(t).asNumber()},DL.prototype.getString=function(t){return this.getValue(t).asString()},DL.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new OL("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new OL("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new OL("static"))},DL);function DL(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function xL(t,e){t=t.target.error||void 0;return TL.create(e,{originalErrorMessage:t&&t.message})}var LL="app_namespace_store",ML="firebase_remote_config",FL=1;var jL=(UL.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},UL.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},UL.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},UL.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},UL.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},UL.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},UL.prototype.getActiveConfig=function(){return this.get("active_config")},UL.prototype.setActiveConfig=function(t){return this.set("active_config",t)},UL.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},UL.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},UL.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},UL.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},UL.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},UL.prototype.get=function(a){return wo(this,void 0,void 0,function(){var o,s=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([LL],"readonly").objectStore(LL),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(xL(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(TL.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},UL.prototype.set=function(a,u){return wo(this,void 0,void 0,function(){var o,s=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([LL],"readwrite").objectStore(LL),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(xL(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(TL.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},UL.prototype.delete=function(a){return wo(this,void 0,void 0,function(){var o,s=this;return Eo(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([LL],"readwrite").objectStore(LL),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(xL(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(TL.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},UL.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},UL);function UL(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(ML,FL);t.onerror=function(t){n(xL(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(LL,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var VL=(qL.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},qL.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},qL.prototype.getActiveConfig=function(){return this.activeConfig},qL.prototype.loadFromStorage=function(){return wo(this,void 0,void 0,function(){var e,n,r;return Eo(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},qL.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},qL.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},qL.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},qL);function qL(t){this.storage=t}var BL=(HL.prototype.fetch=function(n){return wo(this,void 0,void 0,function(){var e;return Eo(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},HL.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return wo(this,void 0,void 0,function(){var e,n;return Eo(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(TL.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof Ko&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+bs(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},HL);function HL(t,e){this.client=t,this.storage=e}var WL,zL="@firebase/remote-config";return(WL=Xl).INTERNAL.registerComponent(new ws("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw TL.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw TL.create("registration-project-id");if(!s)throw TL.create("registration-api-key");if(!a)throw TL.create("registration-app-id");e=e||"firebase";var u=new jL(a,n.name,e),t=new VL(u),i=new Ls(zL);i.logLevel=ks.ERROR;a=new SL(r,WL.SDK_VERSION,e,o,s,a),a=new BL(a,u),a=new EL(a,u,t,i),i=new RL(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),WL.registerVersion(zL,"0.1.30"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Xl.registerVersion("firebase","8.2.6","cdn"),Xl});
//# sourceMappingURL=firebase.js.map
